"use strict";var nX=Object.create;var Id=Object.defineProperty;var MT=Object.getOwnPropertyDescriptor;var iX=Object.getOwnPropertyNames;var oX=Object.getPrototypeOf,sX=Object.prototype.hasOwnProperty;var aX=(t,e)=>()=>(t&&(e=t(t=0)),e);var y=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),uX=(t,e)=>{for(var r in e)Id(t,r,{get:e[r],enumerable:!0})},kT=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of iX(e))!sX.call(t,i)&&i!==r&&Id(t,i,{get:()=>e[i],enumerable:!(n=MT(e,i))||n.enumerable});return t};var I=(t,e,r)=>(r=t!=null?nX(oX(t)):{},kT(e||!t||!t.__esModule?Id(r,"default",{value:t,enumerable:!0}):r,t)),cX=t=>kT(Id({},"__esModule",{value:!0}),t),C=(t,e,r,n)=>{for(var i=n>1?void 0:n?MT(e,r):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(n?s(e,r,i):s(i))||i);return n&&i&&Id(e,r,i),i},b=(t,e)=>(r,n)=>e(r,n,t);var _e=y((O_e,qT)=>{"use strict";var lX=Object.create,Og=Object.defineProperty,pX=Object.getOwnPropertyDescriptor,NT=Object.getOwnPropertyNames,fX=Object.getPrototypeOf,dX=Object.prototype.hasOwnProperty,hX=(t,e)=>function(){return e||(0,t[NT(t)[0]])((e={exports:{}}).exports,e),e.exports},mX=(t,e)=>{for(var r in e)Og(t,r,{get:e[r],enumerable:!0})},BT=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of NT(e))!dX.call(t,i)&&i!==r&&Og(t,i,{get:()=>e[i],enumerable:!(n=pX(e,i))||n.enumerable});return t},gX=(t,e,r)=>(r=t!=null?lX(fX(t)):{},BT(e||!t||!t.__esModule?Og(r,"default",{value:t,enumerable:!0}):r,t)),HX=t=>BT(Og({},"__esModule",{value:!0}),t),yX=hX({"node_modules/request-light/lib/node/main.js"(t){(()=>{var e={46:(s,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(u,c,{signal:l}={}){return new Promise((p,f)=>{function m(){l?.removeEventListener("abort",m),u.removeListener(c,h),u.removeListener("error",H)}function h(...v){m(),p(v)}function H(v){m(),f(v)}l?.addEventListener("abort",m),u.on(c,h),u.on("error",H)})}},54:function(s,a,u){"use strict";var c=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};let l=u(361),p=c(u(374)),f=c(u(304)),m=p.default("agent-base");function h(){let{stack:v}=new Error;return typeof v=="string"&&v.split(`
`).some(_=>_.indexOf("(https.js:")!==-1||_.indexOf("node:https:")!==-1)}function H(v,_){return new H.Agent(v,_)}(function(v){class _ extends l.EventEmitter{constructor(k,T){super();let j=T;typeof k=="function"?this.callback=k:k&&(j=k),this.timeout=null,j&&typeof j.timeout=="number"&&(this.timeout=j.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:h()?443:80}set defaultPort(k){this.explicitDefaultPort=k}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:h()?"https:":"http:"}set protocol(k){this.explicitProtocol=k}callback(k,T,j){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(k,T){let j=Object.assign({},T);typeof j.secureEndpoint!="boolean"&&(j.secureEndpoint=h()),j.host==null&&(j.host="localhost"),j.port==null&&(j.port=j.secureEndpoint?443:80),j.protocol==null&&(j.protocol=j.secureEndpoint?"https:":"http:"),j.host&&j.path&&delete j.path,delete j.agent,delete j.hostname,delete j._defaultAgent,delete j.defaultPort,delete j.createConnection,k._last=!0,k.shouldKeepAlive=!1;let K=!1,G=null,F=j.timeout||this.timeout,R=O=>{k._hadError||(k.emit("error",O),k._hadError=!0)},M=()=>{G=null,K=!0;let O=new Error(`A "socket" was not created for HTTP request before ${F}ms`);O.code="ETIMEOUT",R(O)},D=O=>{K||(G!==null&&(clearTimeout(G),G=null),R(O))},W=O=>{if(K)return;if(G!=null&&(clearTimeout(G),G=null),V=O,!!V&&typeof V.addRequest=="function")return m("Callback returned another Agent instance %o",O.constructor.name),void O.addRequest(k,j);var V;if(O)return O.once("free",()=>{this.freeSocket(O,j)}),void k.onSocket(O);let E=new Error(`no Duplex stream was returned to agent-base for \`${k.method} ${k.path}\``);R(E)};if(typeof this.callback=="function"){this.promisifiedCallback||(this.callback.length>=3?(m("Converting legacy callback function to promise"),this.promisifiedCallback=f.default(this.callback)):this.promisifiedCallback=this.callback),typeof F=="number"&&F>0&&(G=setTimeout(M,F)),"port"in j&&typeof j.port!="number"&&(j.port=Number(j.port));try{m("Resolving socket for %o request: %o",j.protocol,`${k.method} ${k.path}`),Promise.resolve(this.promisifiedCallback(k,j)).then(W,D)}catch(O){Promise.reject(O).catch(D)}}else R(new Error("`callback` is not defined"))}freeSocket(k,T){m("Freeing socket %o %o",k.constructor.name,T),k.destroy()}destroy(){m("Destroying agent %o",this.constructor.name)}}v.Agent=_,v.prototype=v.Agent.prototype})(H||(H={})),s.exports=H},304:(s,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(u){return function(c,l){return new Promise((p,f)=>{u.call(this,c,l,(m,h)=>{m?f(m):p(h)})})}}},370:function(s,a,u){"use strict";var c=this&&this.__awaiter||function(k,T,j,K){return new(j||(j=Promise))(function(G,F){function R(W){try{D(K.next(W))}catch(O){F(O)}}function M(W){try{D(K.throw(W))}catch(O){F(O)}}function D(W){var O;W.done?G(W.value):(O=W.value,O instanceof j?O:new j(function(V){V(O)})).then(R,M)}D((K=K.apply(k,T||[])).next())})},l=this&&this.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(a,"__esModule",{value:!0});let p=l(u(808)),f=l(u(404)),m=l(u(310)),h=l(u(374)),H=l(u(46)),v=u(54),_=(0,h.default)("http-proxy-agent");class x extends v.Agent{constructor(T){let j;if(j=typeof T=="string"?m.default.parse(T):T,!j)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");_("Creating new HttpProxyAgent instance: %o",j),super(j);let K=Object.assign({},j);var G;this.secureProxy=j.secureProxy||typeof(G=K.protocol)=="string"&&/^https:?$/i.test(G),K.host=K.hostname||K.host,typeof K.port=="string"&&(K.port=parseInt(K.port,10)),!K.port&&K.host&&(K.port=this.secureProxy?443:80),K.host&&K.path&&(delete K.path,delete K.pathname),this.proxy=K}callback(T,j){return c(this,void 0,void 0,function*(){let{proxy:K,secureProxy:G}=this,F=m.default.parse(T.path),R;if(F.protocol||(F.protocol="http:"),F.hostname||(F.hostname=j.hostname||j.host||null),F.port==null&&(j.port,1)&&(F.port=String(j.port)),F.port==="80"&&(F.port=""),T.path=m.default.format(F),K.auth&&T.setHeader("Proxy-Authorization",`Basic ${Buffer.from(K.auth).toString("base64")}`),G?(_("Creating `tls.Socket`: %o",K),R=f.default.connect(K)):(_("Creating `net.Socket`: %o",K),R=p.default.connect(K)),T._header){let M,D;_("Regenerating stored HTTP header string for request"),T._header=null,T._implicitHeader(),T.output&&T.output.length>0?(_("Patching connection write() output buffer with updated header"),M=T.output[0],D=M.indexOf(`\r
\r
`)+4,T.output[0]=T._header+M.substring(D),_("Output buffer: %o",T.output)):T.outputData&&T.outputData.length>0&&(_("Patching connection write() output buffer with updated header"),M=T.outputData[0].data,D=M.indexOf(`\r
\r
`)+4,T.outputData[0].data=T._header+M.substring(D),_("Output buffer: %o",T.outputData[0].data))}return yield(0,H.default)(R,"connect"),R})}}a.default=x},201:function(s,a,u){"use strict";let c=(this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}})(u(370));function l(p){return new c.default(p)}(function(p){p.HttpProxyAgent=c.default,p.prototype=c.default.prototype})(l||(l={})),s.exports=l},146:function(s,a,u){"use strict";var c=this&&this.__awaiter||function(j,K,G,F){return new(G||(G=Promise))(function(R,M){function D(V){try{O(F.next(V))}catch(E){M(E)}}function W(V){try{O(F.throw(V))}catch(E){M(E)}}function O(V){var E;V.done?R(V.value):(E=V.value,E instanceof G?E:new G(function(L){L(E)})).then(D,W)}O((F=F.apply(j,K||[])).next())})},l=this&&this.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(a,"__esModule",{value:!0});let p=l(u(808)),f=l(u(404)),m=l(u(310)),h=l(u(491)),H=l(u(374)),v=u(54),_=l(u(829)),x=H.default("https-proxy-agent:agent");class k extends v.Agent{constructor(K){let G;if(G=typeof K=="string"?m.default.parse(K):K,!G)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");x("creating new HttpsProxyAgent instance: %o",G),super(G);let F=Object.assign({},G);var R;this.secureProxy=G.secureProxy||typeof(R=F.protocol)=="string"&&/^https:?$/i.test(R),F.host=F.hostname||F.host,typeof F.port=="string"&&(F.port=parseInt(F.port,10)),!F.port&&F.host&&(F.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in F)&&(F.ALPNProtocols=["http 1.1"]),F.host&&F.path&&(delete F.path,delete F.pathname),this.proxy=F}callback(K,G){return c(this,void 0,void 0,function*(){let{proxy:F,secureProxy:R}=this,M;R?(x("Creating `tls.Socket`: %o",F),M=f.default.connect(F)):(x("Creating `net.Socket`: %o",F),M=p.default.connect(F));let D=Object.assign({},F.headers),W=`CONNECT ${G.host}:${G.port} HTTP/1.1\r
`;F.auth&&(D["Proxy-Authorization"]=`Basic ${Buffer.from(F.auth).toString("base64")}`);let{host:O,port:V,secureEndpoint:E}=G;(function(X,ee){return!!(!ee&&X===80||ee&&X===443)})(V,E)||(O+=`:${V}`),D.Host=O,D.Connection="close";for(let X of Object.keys(D))W+=`${X}: ${D[X]}\r
`;let L=_.default(M);M.write(`${W}\r
`);let{statusCode:ue,buffered:oe}=yield L;if(ue===200){if(K.once("socket",T),G.secureEndpoint){x("Upgrading socket connection to TLS");let X=G.servername||G.host;return f.default.connect(Object.assign(Object.assign({},function(ee,...ae){let se={},he;for(he in ee)ae.includes(he)||(se[he]=ee[he]);return se}(G,"host","hostname","path","port")),{socket:M,servername:X}))}return M}M.destroy();let ne=new p.default.Socket({writable:!1});return ne.readable=!0,K.once("socket",X=>{x("replaying proxy buffer for failed request"),h.default(X.listenerCount("data")>0),X.push(oe),X.push(null)}),ne})}}function T(j){j.resume()}a.default=k},18:function(s,a,u){"use strict";let c=(this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}})(u(146));function l(p){return new c.default(p)}(function(p){p.HttpsProxyAgent=c.default,p.prototype=c.default.prototype})(l||(l={})),s.exports=l},829:function(s,a,u){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(a,"__esModule",{value:!0});let l=c(u(374)).default("https-proxy-agent:parse-proxy-response");a.default=function(p){return new Promise((f,m)=>{let h=0,H=[];function v(){let k=p.read();k?function(T){H.push(T),h+=T.length;let j=Buffer.concat(H,h);if(j.indexOf(`\r
\r
`)===-1)return l("have not received end of HTTP headers yet..."),void v();let K=j.toString("ascii",0,j.indexOf(`\r
`)),G=+K.split(" ")[1];l("got proxy server response: %o",K),f({statusCode:G,buffered:j})}(k):p.once("readable",v)}function _(k){l("onclose had error %o",k)}function x(){l("onend")}p.on("error",function k(T){p.removeListener("end",x),p.removeListener("error",k),p.removeListener("close",_),p.removeListener("readable",v),l("onerror %o",T),m(T)}),p.on("close",_),p.on("end",x),v()})}},539:function(s,a,u){"use strict";var c,l=this&&this.__extends||(c=function(R,M){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,W){D.__proto__=W}||function(D,W){for(var O in W)Object.prototype.hasOwnProperty.call(W,O)&&(D[O]=W[O])},c(R,M)},function(R,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function D(){this.constructor=R}c(R,M),R.prototype=M===null?Object.create(M):(D.prototype=M.prototype,new D)}),p=this&&this.__assign||function(){return p=Object.assign||function(R){for(var M,D=1,W=arguments.length;D<W;D++)for(var O in M=arguments[D])Object.prototype.hasOwnProperty.call(M,O)&&(R[O]=M[O]);return R},p.apply(this,arguments)};Object.defineProperty(a,"__esModule",{value:!0}),a.getErrorStatusDescription=a.xhr=a.configure=void 0;var f=u(685),m=u(687),h=u(310),H=u(472),v=u(796),_=u(201),x=u(18);if(process.env.VSCODE_NLS_CONFIG){var k=process.env.VSCODE_NLS_CONFIG;H.config(JSON.parse(k))}var T=H.loadMessageBundle(),j=void 0,K=!0;function G(R){var M;return new Promise(function(D,W){var O=(0,h.parse)(R.url),V={hostname:O.hostname,agent:!!R.agent&&R.agent,port:O.port?parseInt(O.port):O.protocol==="https:"?443:80,path:O.path,method:R.type||"GET",headers:R.headers,rejectUnauthorized:typeof R.strictSSL!="boolean"||R.strictSSL};R.user&&R.password&&(V.auth=R.user+":"+R.password);var E=function(L){if(L.statusCode>=300&&L.statusCode<400&&R.followRedirects&&R.followRedirects>0&&L.headers.location){var ue=L.headers.location;ue.startsWith("/")&&(ue=(0,h.format)({protocol:O.protocol,hostname:O.hostname,port:O.port,pathname:ue})),D(G(function(oe){for(var ne=[],X=1;X<arguments.length;X++)ne[X-1]=arguments[X];return ne.forEach(function(ee){return Object.keys(ee).forEach(function(ae){return oe[ae]=ee[ae]})}),oe}({},R,{url:ue,followRedirects:R.followRedirects-1})))}else D({req:M,res:L})};(M=O.protocol==="https:"?m.request(V,E):f.request(V,E)).on("error",W),R.timeout&&M.setTimeout(R.timeout),R.data&&M.write(R.data),M.end(),R.token&&(R.token.isCancellationRequested&&M.destroy(new F),R.token.onCancellationRequested(function(){M.destroy(new F)}))})}a.configure=function(R,M){j=R,K=M},a.xhr=function(R){return typeof(R=p({},R)).strictSSL!="boolean"&&(R.strictSSL=K),R.agent||(R.agent=function(M,D){D===void 0&&(D={});var W=(0,h.parse)(M),O=D.proxyUrl||function(L){return L.protocol==="http:"?process.env.HTTP_PROXY||process.env.http_proxy||null:L.protocol==="https:"&&(process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy)||null}(W);if(!O)return null;var V=(0,h.parse)(O);if(!/^https?:$/.test(V.protocol))return null;var E={host:V.hostname,port:Number(V.port),auth:V.auth,rejectUnauthorized:typeof D.strictSSL!="boolean"||D.strictSSL,protocol:V.protocol};return W.protocol==="http:"?_(E):x(E)}(R.url,{proxyUrl:j,strictSSL:K})),typeof R.followRedirects!="number"&&(R.followRedirects=5),G(R).then(function(M){return new Promise(function(D,W){var O,V,E=M.res,L=E,ue=!1,oe=E.headers&&E.headers["content-encoding"];if(oe&&(O=R.type,V=M.res.statusCode,!(O==="HEAD"||V>=100&&V<200||V===204||V===304))){var ne={flush:v.constants.Z_SYNC_FLUSH,finishFlush:v.constants.Z_SYNC_FLUSH};if(oe==="gzip"){var X=v.createGunzip(ne);E.pipe(X),L=X}else if(oe==="deflate"){var ee=v.createInflate(ne);E.pipe(ee),L=ee}}var ae=[];L.on("data",function(se){return ae.push(se)}),L.on("end",function(){if(!ue){if(ue=!0,R.followRedirects>0&&(E.statusCode>=300&&E.statusCode<=303||E.statusCode===307)){var se=E.headers.location;if(se.startsWith("/")){var he=(0,h.parse)(R.url);se=(0,h.format)({protocol:he.protocol,hostname:he.hostname,port:he.port,pathname:se})}if(se){var Ht={type:R.type,url:se,user:R.user,password:R.password,headers:R.headers,timeout:R.timeout,followRedirects:R.followRedirects-1,data:R.data,token:R.token};return void(0,a.xhr)(Ht).then(D,W)}}var me=Buffer.concat(ae),Rt={responseText:me.toString(),body:me,status:E.statusCode,headers:E.headers||{}};E.statusCode>=200&&E.statusCode<300||E.statusCode===1223?D(Rt):W(Rt)}}),L.on("error",function(se){var he;he=F.is(se)?se:{responseText:T("error","Unable to access {0}. Error: {1}",R.url,se.message),body:Buffer.concat(ae),status:500,headers:{}},ue=!0,W(he)}),R.token&&(R.token.isCancellationRequested&&L.destroy(new F),R.token.onCancellationRequested(function(){L.destroy(new F)}))})},function(M){var D;return D=F.is(M)?M:{responseText:R.agent?T("error.cannot.connect.proxy","Unable to connect to {0} through a proxy. Error: {1}",R.url,M.message):T("error.cannot.connect","Unable to connect to {0}. Error: {1}",R.url,M.message),body:Buffer.concat([]),status:404,headers:{}},Promise.reject(D)})},a.getErrorStatusDescription=function(R){if(!(R<400))switch(R){case 400:return T("status.400","Bad request. The request cannot be fulfilled due to bad syntax.");case 401:return T("status.401","Unauthorized. The server is refusing to respond.");case 403:return T("status.403","Forbidden. The server is refusing to respond.");case 404:return T("status.404","Not Found. The requested location could not be found.");case 405:return T("status.405","Method not allowed. A request was made using a request method not supported by that location.");case 406:return T("status.406","Not Acceptable. The server can only generate a response that is not accepted by the client.");case 407:return T("status.407","Proxy Authentication Required. The client must first authenticate itself with the proxy.");case 408:return T("status.408","Request Timeout. The server timed out waiting for the request.");case 409:return T("status.409","Conflict. The request could not be completed because of a conflict in the request.");case 410:return T("status.410","Gone. The requested page is no longer available.");case 411:return T("status.411",'Length Required. The "Content-Length" is not defined.');case 412:return T("status.412","Precondition Failed. The precondition given in the request evaluated to false by the server.");case 413:return T("status.413","Request Entity Too Large. The server will not accept the request, because the request entity is too large.");case 414:return T("status.414","Request-URI Too Long. The server will not accept the request, because the URL is too long.");case 415:return T("status.415","Unsupported Media Type. The server will not accept the request, because the media type is not supported.");case 500:return T("status.500","Internal Server Error.");case 501:return T("status.501","Not Implemented. The server either does not recognize the request method, or it lacks the ability to fulfill the request.");case 503:return T("status.503","Service Unavailable. The server is currently unavailable (overloaded or down).");default:return T("status.416","HTTP status code {0}",R)}};var F=function(R){function M(){var D=R.call(this,"The user aborted a request")||this;return D.name="AbortError",Object.setPrototypeOf(D,M.prototype),D}return l(M,R),M.is=function(D){return D instanceof M},M}(Error)},800:(s,a,u)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.config=a.loadMessageBundle=a.localize=a.format=a.setPseudo=a.isPseudo=a.isDefined=a.BundleFormat=a.MessageFormat=void 0;var c,l,p,f=u(926);function m(H){return H!==void 0}function h(H,v){return a.isPseudo&&(H="\uFF3B"+H.replace(/[aouei]/g,"$&$&")+"\uFF3D"),v.length===0?H:H.replace(/\{(\d+)\}/g,function(_,x){var k=x[0],T=v[k],j=_;return typeof T=="string"?j=T:typeof T!="number"&&typeof T!="boolean"&&T!=null||(j=String(T)),j})}(p=a.MessageFormat||(a.MessageFormat={})).file="file",p.bundle="bundle",p.both="both",(l=a.BundleFormat||(a.BundleFormat={})).standalone="standalone",l.languagePack="languagePack",function(H){H.is=function(v){var _=v;return _&&m(_.key)&&m(_.comment)}}(c||(c={})),a.isDefined=m,a.isPseudo=!1,a.setPseudo=function(H){a.isPseudo=H},a.format=h,a.localize=function(H,v){for(var _=[],x=2;x<arguments.length;x++)_[x-2]=arguments[x];return h(v,_)},a.loadMessageBundle=function(H){return(0,f.default)().loadMessageBundle(H)},a.config=function(H){return(0,f.default)().config(H)}},926:(s,a)=>{"use strict";var u;function c(){if(u===void 0)throw new Error("No runtime abstraction layer installed");return u}Object.defineProperty(a,"__esModule",{value:!0}),function(l){l.install=function(p){if(p===void 0)throw new Error("No runtime abstraction layer provided");u=p}}(c||(c={})),a.default=c},472:(s,a,u)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.config=a.loadMessageBundle=a.BundleFormat=a.MessageFormat=void 0;var c=u(17),l=u(147),p=u(926),f=u(800),m=u(800);Object.defineProperty(a,"MessageFormat",{enumerable:!0,get:function(){return m.MessageFormat}}),Object.defineProperty(a,"BundleFormat",{enumerable:!0,get:function(){return m.BundleFormat}});var h,H,v=Object.prototype.toString;function _(M){return v.call(M)==="[object Number]"}function x(M){return v.call(M)==="[object String]"}function k(M){return JSON.parse(l.readFileSync(M,"utf8"))}function T(M){return function(D,W){for(var O=[],V=2;V<arguments.length;V++)O[V-2]=arguments[V];return _(D)?D>=M.length?void console.error(`Broken localize call found. Index out of bounds. Stacktrace is
: `.concat(new Error("").stack)):(0,f.format)(M[D],O):x(W)?(console.warn("Message ".concat(W," didn't get externalized correctly.")),(0,f.format)(W,O)):void console.error(`Broken localize call found. Stacktrace is
: `.concat(new Error("").stack))}}function j(M,D){return h[M]=D,D}function K(M){try{return function(D){var W=k(c.join(D,"nls.metadata.json")),O=Object.create(null);for(var V in W){var E=W[V];O[V]=E.messages}return O}(M)}catch(D){return void console.log("Generating default bundle from meta data failed.",D)}}function G(M,D){var W;if(H.languagePackSupport===!0&&H.cacheRoot!==void 0&&H.languagePackId!==void 0&&H.translationsConfigFile!==void 0&&H.translationsConfig!==void 0)try{W=function(V,E){var L,ue,oe,ne=c.join(H.cacheRoot,"".concat(V.id,"-").concat(V.hash,".json")),X=!1,ee=!1;try{return L=JSON.parse(l.readFileSync(ne,{encoding:"utf8",flag:"r"})),ue=ne,oe=new Date,l.utimes(ue,oe,oe,function(){}),L}catch(ae){if(ae.code==="ENOENT")ee=!0;else{if(!(ae instanceof SyntaxError))throw ae;console.log("Syntax error parsing message bundle: ".concat(ae.message,".")),l.unlink(ne,function(se){se&&console.error("Deleting corrupted bundle ".concat(ne," failed."))}),X=!0}}if(L=function(ae,se){var he=H.translationsConfig[ae.id];if(he){var Ht=k(he).contents,me=k(c.join(se,"nls.metadata.json")),Rt=Object.create(null);for(var Cr in me){var Q=me[Cr],be=Ht["".concat(ae.outDir,"/").concat(Cr)];if(be){for(var Y=[],ye=0;ye<Q.keys.length;ye++){var Ne=Q.keys[ye],ft=be[x(Ne)?Ne:Ne.key];ft===void 0&&(ft=Q.messages[ye]),Y.push(ft)}Rt[Cr]=Y}else Rt[Cr]=Q.messages}return Rt}}(V,E),!L||X)return L;if(ee)try{l.writeFileSync(ne,JSON.stringify(L),{encoding:"utf8",flag:"wx"})}catch(ae){if(ae.code==="EEXIST")return L;throw ae}return L}(M,D)}catch(V){console.log("Load or create bundle failed ",V)}if(!W){if(H.languagePackSupport)return K(D);var O=function(V){for(var E=H.language;E;){var L=c.join(V,"nls.bundle.".concat(E,".json"));if(l.existsSync(L))return L;var ue=E.lastIndexOf("-");E=ue>0?E.substring(0,ue):void 0}if(E===void 0&&(L=c.join(V,"nls.bundle.json"),l.existsSync(L)))return L}(D);if(O)try{return k(O)}catch(V){console.log("Loading in the box message bundle failed.",V)}W=K(D)}return W}function F(M){if(!M)return f.localize;var D=c.extname(M);if(D&&(M=M.substr(0,M.length-D.length)),H.messageFormat===f.MessageFormat.both||H.messageFormat===f.MessageFormat.bundle){var W=function(X){for(var ee,ae=c.dirname(X);ee=c.join(ae,"nls.metadata.header.json"),!l.existsSync(ee);){var se=c.dirname(ae);if(se===ae){ee=void 0;break}ae=se}return ee}(M);if(W){var O=c.dirname(W),V=h[O];if(V===void 0)try{var E=JSON.parse(l.readFileSync(W,"utf8"));try{var L=G(E,O);V=j(O,L?{header:E,nlsBundle:L}:null)}catch(X){console.error("Failed to load nls bundle",X),V=j(O,null)}}catch(X){console.error("Failed to read header file",X),V=j(O,null)}if(V){var ue=M.substr(O.length+1).replace(/\\/g,"/"),oe=V.nlsBundle[ue];return oe===void 0?(console.error("Messages for file ".concat(M," not found. See console for details.")),function(){return"Messages not found."}):T(oe)}}}if(H.messageFormat===f.MessageFormat.both||H.messageFormat===f.MessageFormat.file)try{var ne=k(function(X){var ee;if(!(H.cacheLanguageResolution&&ee)){if(f.isPseudo||!H.language)ee=".nls.json";else for(var ae=H.language;ae;){var se=".nls."+ae+".json";if(l.existsSync(X+se)){ee=se;break}var he=ae.lastIndexOf("-");he>0?ae=ae.substring(0,he):(ee=".nls.json",ae=null)}H.cacheLanguageResolution}return X+ee}(M));return Array.isArray(ne)?T(ne):(0,f.isDefined)(ne.messages)&&(0,f.isDefined)(ne.keys)?T(ne.messages):(console.error("String bundle '".concat(M,"' uses an unsupported format.")),function(){return"File bundle has unsupported format. See console for details"})}catch(X){X.code!=="ENOENT"&&console.error("Failed to load single file bundle",X)}return console.error("Failed to load message bundle for file ".concat(M)),function(){return"Failed to load message bundle. See console for details."}}function R(M){return M&&(x(M.locale)&&(H.locale=M.locale.toLowerCase(),H.language=H.locale,h=Object.create(null)),M.messageFormat!==void 0&&(H.messageFormat=M.messageFormat),M.bundleFormat===f.BundleFormat.standalone&&H.languagePackSupport===!0&&(H.languagePackSupport=!1)),(0,f.setPseudo)(H.locale==="pseudo"),F}(function(){if(H={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:f.MessageFormat.bundle},x(process.env.VSCODE_NLS_CONFIG))try{var M=JSON.parse(process.env.VSCODE_NLS_CONFIG),D=void 0;if(M.availableLanguages){var W=M.availableLanguages["*"];x(W)&&(D=W)}if(x(M.locale)&&(H.locale=M.locale.toLowerCase()),D===void 0?H.language=H.locale:D!=="en"&&(H.language=D),function(V){return V===!0||V===!1}(M._languagePackSupport)&&(H.languagePackSupport=M._languagePackSupport),x(M._cacheRoot)&&(H.cacheRoot=M._cacheRoot),x(M._languagePackId)&&(H.languagePackId=M._languagePackId),x(M._translationsConfigFile)){H.translationsConfigFile=M._translationsConfigFile;try{H.translationsConfig=k(H.translationsConfigFile)}catch{if(M._corruptedFile){var O=c.dirname(M._corruptedFile);l.exists(O,function(E){E&&l.writeFile(M._corruptedFile,"corrupted","utf8",function(L){console.error(L)})})}}}}catch{}(0,f.setPseudo)(H.locale==="pseudo"),h=Object.create(null)})(),a.loadMessageBundle=F,a.config=R,p.default.install(Object.freeze({loadMessageBundle:F,config:R}))},374:(s,a)=>{function u(){}Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(c){return u}},491:s=>{"use strict";s.exports=require("assert")},361:s=>{"use strict";s.exports=require("events")},147:s=>{"use strict";s.exports=require("fs")},685:s=>{"use strict";s.exports=require("http")},687:s=>{"use strict";s.exports=require("https")},808:s=>{"use strict";s.exports=require("net")},17:s=>{"use strict";s.exports=require("path")},404:s=>{"use strict";s.exports=require("tls")},310:s=>{"use strict";s.exports=require("url")},796:s=>{"use strict";s.exports=require("zlib")}},r={},n=function s(a){var u=r[a];if(u!==void 0)return u.exports;var c=r[a]={exports:{}};return e[a].call(c.exports,c,c.exports,s),c.exports}(539),i=t;for(var o in n)i[o]=n[o];n.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})()}}),UT={};mX(UT,{config:()=>AX,t:()=>jT});qT.exports=HX(UT);var vX=require("fs"),bX=require("fs/promises"),OT=gX(yX());async function wX(t){if(t.protocol==="file:")return await(0,bX.readFile)(t,"utf8");if(t.protocol==="http:"||t.protocol==="https:")try{let e=await(0,OT.xhr)({url:t.toString(),followRedirects:5,headers:{"Accept-Encoding":"gzip, deflate",Accept:"application/json"}});return new TextDecoder().decode(e.body)}catch(e){throw new Error(e.responseText??(0,OT.getErrorStatusDescription)(e.status)??e.toString())}throw new Error("Unsupported protocol")}function _X(t){return(0,vX.readFileSync)(t,"utf8")}var Sd;function AX(t){if("contents"in t){typeof t.contents=="string"?Sd=JSON.parse(t.contents):Sd=t.contents;return}if("fsPath"in t){let e=_X(t.fsPath),r=JSON.parse(e);Sd=FT(r)?r.contents.bundle:r;return}if(t.uri){let e=t.uri;return typeof t.uri=="string"&&(e=new URL(t.uri)),new Promise((r,n)=>{let i=wX(e).then(o=>{try{let s=JSON.parse(o);Sd=FT(s)?s.contents.bundle:s}catch(s){n(s)}}).catch(o=>{n(o)});r(i)})}}function jT(...t){let e=t[0],r,n,i;if(typeof e=="string")r=e,n=e,t.splice(0,1),i=!t||typeof t[0]!="object"?t:t[0];else if(e instanceof Array){let s=t.slice(1);if(e.length!==s.length+1)throw new Error("expected a string as the first argument to l10n.t");let a=e[0];for(let u=1;u<e.length;u++)a+=`{${u-1}}`+e[u];return jT(a,...s)}else n=e.message,r=n,e.comment&&e.comment.length>0&&(r+=`/${Array.isArray(e.comment)?e.comment.join(""):e.comment}`),i=e.args??{};let o=Sd?.[r];return o?typeof o=="string"?kg(o,i):o.comment?kg(o.message,i):kg(n,i):kg(n,i)}var IX=/{([^}]+)}/g;function kg(t,e){return t.replace(IX,(r,n)=>e[n]??r)}function FT(t){return typeof t?.contents?.bundle=="object"&&typeof t?.version=="string"}});var Go=y(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.findWindowsCandidates=Pr.sort=Pr.preferredEdgePath=Pr.preferredFirefoxPath=Pr.preferredChromePath=Pr.escapeRegexSpecialChars=Pr.canAccess=void 0;var RX=require("path");async function xd({access:t},e){if(!e)return!1;try{return await t(e),!0}catch{return!1}}Pr.canAccess=xd;var MX="/\\.?*()^${}|[]+";function kX(t,e){let r=MX.split("").filter(i=>!e||e.indexOf(i)<0).join("").replace(/[\\\]]/g,"\\$&"),n=new RegExp(`[${r}]`,"g");return t.replace(n,"\\$&")}Pr.escapeRegexSpecialChars=kX;async function OX(t,e){if(await xd(t,e.CHROME_PATH))return e.CHROME_PATH}Pr.preferredChromePath=OX;async function FX(t,e){if(await xd(t,e.FIREFOX_PATH))return e.FIREFOX_PATH}Pr.preferredFirefoxPath=FX;async function NX(t,e){if(await xd(t,e.EDGE_PATH))return e.EDGE_PATH}Pr.preferredEdgePath=NX;function BX(t,e){return[...t].filter(n=>!!n).map(n=>{let i=e.find(o=>o.regex.test(n));return i?{path:n,weight:i.weight,quality:i.quality}:{path:n,weight:10,quality:"dev"}}).sort((n,i)=>i.weight-n.weight).map(n=>({path:n.path,quality:n.quality}))}Pr.sort=BX;async function UX(t,e,r){let n=[t.LOCALAPPDATA,t.PROGRAMFILES,t["PROGRAMFILES(X86)"]].filter(o=>!!o),i=[];for(let o of n)for(let s of r){let a=RX.win32.join(o,s.name);i.push(xd(e,a).then(u=>u?{path:a,quality:s.type}:void 0))}return(await Promise.all(i)).filter(o=>!!o)}Pr.findWindowsCandidates=UX});var Jg=y(Xg=>{"use strict";Object.defineProperty(Xg,"__esModule",{value:!0});Xg.DarwinFinderBase=void 0;var jX=require("path"),qX=require("fs"),yA=Go(),ZT=/( \(0x[a-f0-9]+\))/,vA=class{constructor(e=process.env,r=qX.promises,n=n){this.env=e,this.fs=r,this.execa=n,this.lsRegisterCommand="/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/Support/lsregister -dump",this.wellKnownPaths=[]}async findWhere(e){for(let r of this.wellKnownPaths)if(e(r)&&await(0,yA.canAccess)(this.fs,r.path))return r;return(await this.findAll()).find(e)}findAll(){var e;return(e=this.foundAll)!==null&&e!==void 0||(this.foundAll=this.findAllInner()),this.foundAll}async findLaunchRegisteredApps(e,r,n){let{stdout:i}=await this.execa.command(`${this.lsRegisterCommand} | awk 'tolower($0) ~ /${e.toLowerCase()}${ZT.source}?$/ { $1=""; print $0 }'`,{shell:!0,stdio:"pipe"}),o=[...r,...i.split(`
`).map(u=>u.trim().replace(ZT,""))].filter(u=>!!u),s=this.getPreferredPath();s&&o.push(s);let a=new Set;for(let u of o)for(let c of n){let l=jX.posix.join(u.trim(),c);try{await this.fs.access(l),a.add(l)}catch{}}return a}createPriorities(e){let r=this.env.HOME&&(0,yA.escapeRegexSpecialChars)(this.env.HOME),n=this.getPreferredPath(),i=e.reduce((o,s)=>[...o,{regex:new RegExp(`^/Applications/.*${s.name}`),weight:s.weight+100,quality:s.quality},{regex:new RegExp(`^${r}/Applications/.*${s.name}`),weight:s.weight,quality:s.quality},{regex:new RegExp(`^/Volumes/.*${s.name}`),weight:s.weight-100,quality:s.quality}],[]);return n&&i.unshift({regex:new RegExp((0,yA.escapeRegexSpecialChars)(n)),weight:151,quality:"custom"}),i}};Xg.DarwinFinderBase=vA});var e$=y(Yg=>{"use strict";Object.defineProperty(Yg,"__esModule",{value:!0});Yg.DarwinChromeBrowserFinder=void 0;var WX=Go(),VX=Jg(),bA=class extends VX.DarwinFinderBase{constructor(){super(...arguments),this.wellKnownPaths=[{path:"/Applications/Google Chrome.app/Contents/MacOS/Google Chrome",quality:"stable"},{path:"/Applications/Google Chrome Canary.app/Contents/MacOS/Google Chrome Canary",quality:"canary"},{path:"/Applications/Google Chrome Beta.app/Contents/MacOS/Google Chrome Beta",quality:"beta"},{path:"/Applications/Google Chrome Dev.app/Contents/MacOS/Google Chrome Dev",quality:"dev"}]}async findAllInner(){let e=["/Contents/MacOS/Google Chrome Canary","/Contents/MacOS/Google Chrome Beta","/Contents/MacOS/Google Chrome Dev","/Contents/MacOS/Google Chrome"],r=["/Applications/Google Chrome.app","/Applications/Google Chrome Canary.app"],n=await this.findLaunchRegisteredApps("google chrome[A-Za-z() ]*.app",r,e);return(0,WX.sort)(n,this.createPriorities([{name:"Chrome.app",weight:0,quality:"stable"},{name:"Chrome Canary.app",weight:1,quality:"canary"},{name:"Chrome Beta.app",weight:2,quality:"beta"},{name:"Chrome Dev.app",weight:3,quality:"dev"}]))}getPreferredPath(){return this.env.CHROME_PATH}};Yg.DarwinChromeBrowserFinder=bA});var t$=y(Qg=>{"use strict";Object.defineProperty(Qg,"__esModule",{value:!0});Qg.DarwinEdgeBrowserFinder=void 0;var GX=Go(),KX=Jg(),wA=class extends KX.DarwinFinderBase{constructor(){super(...arguments),this.wellKnownPaths=[{path:"/Applications/Microsoft Edge.app/Contents/MacOS/Microsoft Edge",quality:"stable"},{path:"/Applications/Microsoft Edge Canary.app/Contents/MacOS/Microsoft Edge Canary",quality:"canary"},{path:"/Applications/Microsoft Edge Beta.app/Contents/MacOS/Microsoft Edge Beta",quality:"beta"},{path:"/Applications/Microsoft Edge Dev.app/Contents/MacOS/Microsoft Edge Dev",quality:"dev"}]}async findAllInner(){let e=["/Contents/MacOS/Microsoft Edge Canary","/Contents/MacOS/Microsoft Edge Beta","/Contents/MacOS/Microsoft Edge Dev","/Contents/MacOS/Microsoft Edge"],r=["/Applications/Microsoft Edge.app"],n=await this.findLaunchRegisteredApps("Microsoft Edge[A-Za-z ]*.app",r,e);return(0,GX.sort)(n,this.createPriorities([{name:"Microsoft Edge.app",weight:0,quality:"stable"},{name:"Microsoft Edge Canary.app",weight:1,quality:"canary"},{name:"Microsoft Edge Beta.app",weight:2,quality:"beta"},{name:"Microsoft Edge Dev.app",weight:3,quality:"dev"}]))}getPreferredPath(){return this.env.EDGE_PATH}};Qg.DarwinEdgeBrowserFinder=wA});var r$=y(Zg=>{"use strict";Object.defineProperty(Zg,"__esModule",{value:!0});Zg.DarwinFirefoxBrowserFinder=void 0;var zX=Go(),XX=Jg(),_A=class extends XX.DarwinFinderBase{constructor(){super(...arguments),this.wellKnownPaths=[{path:"/Applications/Firefox.app/Contents/MacOS/firefox",quality:"stable"},{path:"/Applications/Firefox Developer Edition.app/Contents/MacOS/firefox",quality:"dev"},{path:"/Applications/Firefox Nightly.app/Contents/MacOS/firefox",quality:"canary"}]}async findAllInner(){let e=["/Contents/MacOS/firefox"],r=["/Applications/Firefox.app"],n=await this.findLaunchRegisteredApps("Firefox[A-Za-z ]*.app",r,e);return(0,zX.sort)(n,this.createPriorities([{name:"Firefox.app",weight:0,quality:"stable"},{name:"Firefox Nightly.app",weight:1,quality:"canary"},{name:"Firefox Developer Edition.app",weight:2,quality:"dev"}]))}getPreferredPath(){return this.env.FIREFOX_PATH}};Zg.DarwinFirefoxBrowserFinder=_A});var tH=y(eH=>{"use strict";Object.defineProperty(eH,"__esModule",{value:!0});eH.LinuxChromeBrowserFinder=void 0;var JX=require("path"),Gc=Go(),AA=require("child_process"),YX=require("os"),QX=require("fs"),n$=/\r?\n/,IA=class{constructor(e=process.env,r=QX.promises){this.env=e,this.fs=r,this.pathEnvironmentVar="CHROME_PATH",this.priorities=[{regex:/chrome-wrapper$/,weight:54,quality:"custom"},{regex:/google-chrome-dev$/,weight:53,quality:"dev"},{regex:/google-chrome-canary$/,weight:52,quality:"canary"},{regex:/google-chrome-unstable$/,weight:51,quality:"canary"},{regex:/google-chrome-canary$/,weight:51,quality:"canary"},{regex:/google-chrome-stable$/,weight:50,quality:"stable"},{regex:/google-chrome$/,weight:49,quality:"stable"},{regex:/chromium-browser$/,weight:48,quality:"custom"},{regex:/chromium$/,weight:47,quality:"custom"}],this.executablesOnPath=["google-chrome-unstable","google-chrome-dev","google-chrome-beta","google-chrome-canary","google-chrome-stable","google-chrome","chromium-browser","chromium"]}async findWhere(e){return(await this.findAll()).find(e)}async findAll(){let e=new Set,r=this.env[this.pathEnvironmentVar];r&&await(0,Gc.canAccess)(this.fs,r)&&e.add(r),[JX.posix.join((0,YX.homedir)(),".local/share/applications/"),"/usr/share/applications/","/usr/bin"].forEach(s=>{for(let a in this.findChromeExecutables(s))e.add(a)}),await Promise.all(this.executablesOnPath.map(async s=>{try{let a=(0,AA.execFileSync)("which",[s],{stdio:"pipe"}).toString().split(n$)[0];await(0,Gc.canAccess)(this.fs,a)&&e.add(a)}catch{}}));let o=r?[{regex:new RegExp((0,Gc.escapeRegexSpecialChars)(r)),weight:101,quality:"custom"}].concat(this.priorities):this.priorities;return(0,Gc.sort)(e,o)}async findChromeExecutables(e){let r=/(^[^ ]+).*/,n=`^Exec=/.*/(${this.executablesOnPath.join("|")})-.*`,i=[];if(await(0,Gc.canAccess)(this.fs,e)){let o;try{o=(0,AA.execSync)(`grep -ER "${n}" ${e} | awk -F '=' '{print $2}'`)}catch{o=(0,AA.execSync)(`grep -Er "${n}" ${e} | awk -F '=' '{print $2}'`)}let s=o.toString().split(n$).map(a=>a.replace(r,"$1"));await Promise.all(s.map(async a=>{await(0,Gc.canAccess)(this.fs,a)&&i.push(a)}))}return i}};eH.LinuxChromeBrowserFinder=IA});var i$=y(rH=>{"use strict";Object.defineProperty(rH,"__esModule",{value:!0});rH.LinuxEdgeBrowserFinder=void 0;var ZX=tH(),SA=class extends ZX.LinuxChromeBrowserFinder{constructor(){super(...arguments),this.pathEnvironmentVar="EDGE_PATH",this.executablesOnPath=["microsoft-edge-dev","microsoft-edge-beta","microsoft-edge-stable","microsoft-edge"],this.priorities=[{regex:/microsoft-edge\-wrapper$/,weight:52,quality:"custom"},{regex:/microsoft-edge\-dev$/,weight:51,quality:"dev"},{regex:/microsoft-edge\-beta$/,weight:51,quality:"beta"},{regex:/microsoft-edge\-stable$/,weight:50,quality:"stable"},{regex:/microsoft-edge$/,weight:49,quality:"stable"}]}};rH.LinuxEdgeBrowserFinder=SA});var o$=y(nH=>{"use strict";Object.defineProperty(nH,"__esModule",{value:!0});nH.LinuxFirefoxBrowserFinder=void 0;var e7=tH(),EA=class extends e7.LinuxChromeBrowserFinder{constructor(){super(...arguments),this.pathEnvironmentVar="FIREFOX_PATH",this.executablesOnPath=["firefox-aurora","firefox-dev","firefox-developer","firefox-trunk","firefox-nightly","firefox"],this.priorities=[{regex:/firefox\-aurora$/,weight:51,quality:"dev"},{regex:/firefox\-dev$/,weight:51,quality:"dev"},{regex:/firefox\-developer$/,weight:51,quality:"dev"},{regex:/firefox\-trunk'$/,weight:50,quality:"canary"},{regex:/firefox\-nightly'$/,weight:50,quality:"canary"},{regex:/firefox$/,weight:49,quality:"stable"}]}};nH.LinuxFirefoxBrowserFinder=EA});var a$=y(iH=>{"use strict";Object.defineProperty(iH,"__esModule",{value:!0});iH.WindowsChromeBrowserFinder=void 0;var t7=require("path"),s$=Go(),r7=require("fs"),DA=class{constructor(e=process.env,r=r7.promises){this.env=e,this.fs=r}async findWhere(e){return(await this.findAll()).find(e)}async findAll(){let e=t7.win32.sep,r=[{name:`${e}Google${e}Chrome Dev${e}Application${e}chrome.exe`,type:"dev"},{name:`${e}Google${e}Chrome SxS${e}Application${e}chrome.exe`,type:"canary"},{name:`${e}Google${e}Chrome Beta${e}Application${e}chrome.exe`,type:"beta"},{name:`${e}Google${e}Chrome${e}Application${e}chrome.exe`,type:"stable"}],n=await(0,s$.findWindowsCandidates)(this.env,this.fs,r),i=await(0,s$.preferredChromePath)(this.fs,this.env);return i&&n.unshift({path:i,quality:"custom"}),n}};iH.WindowsChromeBrowserFinder=DA});var c$=y(oH=>{"use strict";Object.defineProperty(oH,"__esModule",{value:!0});oH.WindowsEdgeBrowserFinder=void 0;var xr=require("path"),n7=require("fs"),u$=Go(),CA=class{constructor(e=process.env,r=n7.promises){this.env=e,this.fs=r}async findWhere(e){return(await this.findAll()).find(e)}async findAll(){let e=[{name:`${xr.sep}Microsoft${xr.sep}Edge SxS${xr.sep}Application${xr.sep}msedge.exe`,type:"canary"},{name:`${xr.sep}Microsoft${xr.sep}Edge Dev${xr.sep}Application${xr.sep}msedge.exe`,type:"dev"},{name:`${xr.sep}Microsoft${xr.sep}Edge Beta${xr.sep}Application${xr.sep}msedge.exe`,type:"beta"},{name:`${xr.sep}Microsoft${xr.sep}Edge${xr.sep}Application${xr.sep}msedge.exe`,type:"stable"}],r=await(0,u$.findWindowsCandidates)(this.env,this.fs,e),n=await(0,u$.preferredEdgePath)(this.fs,this.env);return n&&r.unshift({path:n,quality:"custom"}),r}};oH.WindowsEdgeBrowserFinder=CA});var p$=y(sH=>{"use strict";Object.defineProperty(sH,"__esModule",{value:!0});sH.WindowsFirefoxBrowserFinder=void 0;var i7=require("path"),l$=Go(),o7=require("fs"),PA=class{constructor(e=process.env,r=o7.promises){this.env=e,this.fs=r}async findWhere(e){return(await this.findAll()).find(e)}async findAll(){let e=i7.win32.sep,r=[{name:`${e}Firefox Developer Edition${e}firefox.exe`,type:"dev"},{name:`${e}Firefox Nightly${e}firefox.exe`,type:"canary"},{name:`${e}Mozilla Firefox${e}firefox.exe`,type:"stable"}],n=await(0,l$.findWindowsCandidates)(this.env,this.fs,r),i=await(0,l$.preferredFirefoxPath)(this.fs,this.env);return i&&n.unshift({path:i,quality:"custom"}),n}};sH.WindowsFirefoxBrowserFinder=PA});var xA=y(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.FirefoxBrowserFinder=yn.EdgeBrowserFinder=yn.ChromeBrowserFinder=yn.isQuality=yn.allQualities=void 0;var s7=e$(),a7=t$(),u7=r$(),c7=tH(),l7=i$(),p7=o$(),f7=a$(),d7=c$(),h7=p$(),m7={canary:null,stable:null,beta:null,dev:null,custom:null};yn.allQualities=new Set(Object.keys(m7));var g7=t=>yn.allQualities.has(t);yn.isQuality=g7;yn.ChromeBrowserFinder=process.platform==="win32"?f7.WindowsChromeBrowserFinder:process.platform==="darwin"?s7.DarwinChromeBrowserFinder:c7.LinuxChromeBrowserFinder;yn.EdgeBrowserFinder=process.platform==="win32"?d7.WindowsEdgeBrowserFinder:process.platform==="darwin"?a7.DarwinEdgeBrowserFinder:l7.LinuxEdgeBrowserFinder;yn.FirefoxBrowserFinder=process.platform==="win32"?h7.WindowsFirefoxBrowserFinder:process.platform==="darwin"?u7.DarwinFirefoxBrowserFinder:p7.LinuxFirefoxBrowserFinder});var g$=y((r0e,m$)=>{m$.exports=h$;h$.sync=y7;var f$=require("fs");function H7(t,e){var r=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var i=r[n].toLowerCase();if(i&&t.substr(-i.length).toLowerCase()===i)return!0}return!1}function d$(t,e,r){return!t.isSymbolicLink()&&!t.isFile()?!1:H7(e,r)}function h$(t,e,r){f$.stat(t,function(n,i){r(n,n?!1:d$(i,t,e))})}function y7(t,e){return d$(f$.statSync(t),t,e)}});var w$=y((n0e,b$)=>{b$.exports=y$;y$.sync=v7;var H$=require("fs");function y$(t,e,r){H$.stat(t,function(n,i){r(n,n?!1:v$(i,e))})}function v7(t,e){return v$(H$.statSync(t),e)}function v$(t,e){return t.isFile()&&b7(t,e)}function b7(t,e){var r=t.mode,n=t.uid,i=t.gid,o=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),s=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),a=parseInt("100",8),u=parseInt("010",8),c=parseInt("001",8),l=a|u,p=r&c||r&u&&i===s||r&a&&n===o||r&l&&o===0;return p}});var TA=y((o0e,_$)=>{var i0e=require("fs"),aH;process.platform==="win32"||global.TESTING_WINDOWS?aH=g$():aH=w$();_$.exports=LA;LA.sync=w7;function LA(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,i){LA(t,e||{},function(o,s){o?i(o):n(s)})})}aH(t,e||{},function(n,i){n&&(n.code==="EACCES"||e&&e.ignoreErrors)&&(n=null,i=!1),r(n,i)})}function w7(t,e){try{return aH.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}});var P$=y((s0e,C$)=>{var Kc=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",A$=require("path"),_7=Kc?";":":",I$=TA(),S$=t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),E$=(t,e)=>{let r=e.colon||_7,n=t.match(/\//)||Kc&&t.match(/\\/)?[""]:[...Kc?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(r)],i=Kc?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=Kc?i.split(r):[""];return Kc&&t.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:n,pathExt:o,pathExtExe:i}},D$=(t,e,r)=>{typeof e=="function"&&(r=e,e={}),e||(e={});let{pathEnv:n,pathExt:i,pathExtExe:o}=E$(t,e),s=[],a=c=>new Promise((l,p)=>{if(c===n.length)return e.all&&s.length?l(s):p(S$(t));let f=n[c],m=/^".*"$/.test(f)?f.slice(1,-1):f,h=A$.join(m,t),H=!m&&/^\.[\\\/]/.test(t)?t.slice(0,2)+h:h;l(u(H,c,0))}),u=(c,l,p)=>new Promise((f,m)=>{if(p===i.length)return f(a(l+1));let h=i[p];I$(c+h,{pathExt:o},(H,v)=>{if(!H&&v)if(e.all)s.push(c+h);else return f(c+h);return f(u(c,l,p+1))})});return r?a(0).then(c=>r(null,c),r):a(0)},A7=(t,e)=>{e=e||{};let{pathEnv:r,pathExt:n,pathExtExe:i}=E$(t,e),o=[];for(let s=0;s<r.length;s++){let a=r[s],u=/^".*"$/.test(a)?a.slice(1,-1):a,c=A$.join(u,t),l=!u&&/^\.[\\\/]/.test(t)?t.slice(0,2)+c:c;for(let p=0;p<n.length;p++){let f=l+n[p];try{if(I$.sync(f,{pathExt:i}))if(e.all)o.push(f);else return f}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw S$(t)};C$.exports=D$;D$.sync=A7});var L$=y((a0e,$A)=>{"use strict";var x$=(t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};$A.exports=x$;$A.exports.default=x$});var M$=y((u0e,R$)=>{"use strict";var T$=require("path"),I7=P$(),S7=L$();function $$(t,e){let r=t.options.env||process.env,n=process.cwd(),i=t.options.cwd!=null,o=i&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(t.options.cwd)}catch{}let s;try{s=I7.sync(t.command,{path:r[S7({env:r})],pathExt:e?T$.delimiter:void 0})}catch{}finally{o&&process.chdir(n)}return s&&(s=T$.resolve(i?t.options.cwd:"",s)),s}function E7(t){return $$(t)||$$(t,!0)}R$.exports=E7});var k$=y((c0e,MA)=>{"use strict";var RA=/([()\][%!^"`<>&|;, *?])/g;function D7(t){return t=t.replace(RA,"^$1"),t}function C7(t,e){return t=`${t}`,t=t.replace(/(\\*)"/g,'$1$1\\"'),t=t.replace(/(\\*)$/,"$1$1"),t=`"${t}"`,t=t.replace(RA,"^$1"),e&&(t=t.replace(RA,"^$1")),t}MA.exports.command=D7;MA.exports.argument=C7});var F$=y((l0e,O$)=>{"use strict";O$.exports=/^#!(.*)/});var B$=y((p0e,N$)=>{"use strict";var P7=F$();N$.exports=(t="")=>{let e=t.match(P7);if(!e)return null;let[r,n]=e[0].replace(/#! ?/,"").split(" "),i=r.split("/").pop();return i==="env"?n:n?`${i} ${n}`:i}});var j$=y((f0e,U$)=>{"use strict";var kA=require("fs"),x7=B$();function L7(t){let r=Buffer.alloc(150),n;try{n=kA.openSync(t,"r"),kA.readSync(n,r,0,150,0),kA.closeSync(n)}catch{}return x7(r.toString())}U$.exports=L7});var G$=y((d0e,V$)=>{"use strict";var T7=require("path"),q$=M$(),W$=k$(),$7=j$(),R7=process.platform==="win32",M7=/\.(?:com|exe)$/i,k7=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function O7(t){t.file=q$(t);let e=t.file&&$7(t.file);return e?(t.args.unshift(t.file),t.command=e,q$(t)):t.file}function F7(t){if(!R7)return t;let e=O7(t),r=!M7.test(e);if(t.options.forceShell||r){let n=k7.test(e);t.command=T7.normalize(t.command),t.command=W$.command(t.command),t.args=t.args.map(o=>W$.argument(o,n));let i=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${i}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}function N7(t,e,r){e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=Object.assign({},r);let n={command:t,args:e,options:r,file:void 0,original:{command:t,args:e}};return r.shell?n:F7(n)}V$.exports=N7});var X$=y((h0e,z$)=>{"use strict";var OA=process.platform==="win32";function FA(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}function B7(t,e){if(!OA)return;let r=t.emit;t.emit=function(n,i){if(n==="exit"){let o=K$(i,e,"spawn");if(o)return r.call(t,"error",o)}return r.apply(t,arguments)}}function K$(t,e){return OA&&t===1&&!e.file?FA(e.original,"spawn"):null}function U7(t,e){return OA&&t===1&&!e.file?FA(e.original,"spawnSync"):null}z$.exports={hookChildProcess:B7,verifyENOENT:K$,verifyENOENTSync:U7,notFoundError:FA}});var Q$=y((m0e,zc)=>{"use strict";var J$=require("child_process"),NA=G$(),BA=X$();function Y$(t,e,r){let n=NA(t,e,r),i=J$.spawn(n.command,n.args,n.options);return BA.hookChildProcess(i,n),i}function j7(t,e,r){let n=NA(t,e,r),i=J$.spawnSync(n.command,n.args,n.options);return i.error=i.error||BA.verifyENOENTSync(i.status,n),i}zc.exports=Y$;zc.exports.spawn=Y$;zc.exports.sync=j7;zc.exports._parse=NA;zc.exports._enoent=BA});var eR=y((g0e,Z$)=>{"use strict";Z$.exports=t=>{let e=typeof t=="string"?`
`:`
`.charCodeAt(),r=typeof t=="string"?"\r":"\r".charCodeAt();return t[t.length-1]===e&&(t=t.slice(0,t.length-1)),t[t.length-1]===r&&(t=t.slice(0,t.length-1)),t}});var rR=y((H0e,UA)=>{"use strict";var tR=(t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};UA.exports=tR;UA.exports.default=tR});var oR=y((y0e,Td)=>{"use strict";var Ld=require("path"),nR=rR(),iR=t=>{t={cwd:process.cwd(),path:process.env[nR()],execPath:process.execPath,...t};let e,r=Ld.resolve(t.cwd),n=[];for(;e!==r;)n.push(Ld.join(r,"node_modules/.bin")),e=r,r=Ld.resolve(r,"..");let i=Ld.resolve(t.cwd,t.execPath,"..");return n.push(i),n.concat(t.path).join(Ld.delimiter)};Td.exports=iR;Td.exports.default=iR;Td.exports.env=t=>{t={env:process.env,...t};let e={...t.env},r=nR({env:e});return t.path=e[r],e[r]=Td.exports(t),e}});var aR=y((v0e,jA)=>{"use strict";var sR=(t,e)=>{for(let r of Reflect.ownKeys(e))Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r));return t};jA.exports=sR;jA.exports.default=sR});var cR=y((b0e,cH)=>{"use strict";var q7=aR(),uH=new WeakMap,uR=(t,e={})=>{if(typeof t!="function")throw new TypeError("Expected a function");let r,n=0,i=t.displayName||t.name||"<anonymous>",o=function(...s){if(uH.set(o,++n),n===1)r=t.apply(this,s),t=null;else if(e.throw===!0)throw new Error(`Function \`${i}\` can only be called once`);return r};return q7(o,t),uH.set(o,n),o};cH.exports=uR;cH.exports.default=uR;cH.exports.callCount=t=>{if(!uH.has(t))throw new Error(`The given function \`${t.name}\` is not wrapped by the \`onetime\` package`);return uH.get(t)}});var lR=y(lH=>{"use strict";Object.defineProperty(lH,"__esModule",{value:!0});lH.SIGNALS=void 0;var W7=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];lH.SIGNALS=W7});var qA=y(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});Xc.SIGRTMAX=Xc.getRealtimeSignals=void 0;var V7=function(){let t=fR-pR+1;return Array.from({length:t},G7)};Xc.getRealtimeSignals=V7;var G7=function(t,e){return{name:`SIGRT${e+1}`,number:pR+e,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},pR=34,fR=64;Xc.SIGRTMAX=fR});var dR=y(pH=>{"use strict";Object.defineProperty(pH,"__esModule",{value:!0});pH.getSignals=void 0;var K7=require("os"),z7=lR(),X7=qA(),J7=function(){let t=(0,X7.getRealtimeSignals)();return[...z7.SIGNALS,...t].map(Y7)};pH.getSignals=J7;var Y7=function({name:t,number:e,description:r,action:n,forced:i=!1,standard:o}){let{signals:{[t]:s}}=K7.constants,a=s!==void 0;return{name:t,number:a?s:e,description:r,supported:a,action:n,forced:i,standard:o}}});var mR=y(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});Jc.signalsByNumber=Jc.signalsByName=void 0;var Q7=require("os"),hR=dR(),Z7=qA(),eJ=function(){return(0,hR.getSignals)().reduce(tJ,{})},tJ=function(t,{name:e,number:r,description:n,supported:i,action:o,forced:s,standard:a}){return{...t,[e]:{name:e,number:r,description:n,supported:i,action:o,forced:s,standard:a}}},rJ=eJ();Jc.signalsByName=rJ;var nJ=function(){let t=(0,hR.getSignals)(),e=Z7.SIGRTMAX+1,r=Array.from({length:e},(n,i)=>iJ(i,t));return Object.assign({},...r)},iJ=function(t,e){let r=oJ(t,e);if(r===void 0)return{};let{name:n,description:i,supported:o,action:s,forced:a,standard:u}=r;return{[t]:{name:n,number:t,description:i,supported:o,action:s,forced:a,standard:u}}},oJ=function(t,e){let r=e.find(({name:n})=>Q7.constants.signals[n]===t);return r!==void 0?r:e.find(n=>n.number===t)},sJ=nJ();Jc.signalsByNumber=sJ});var HR=y((S0e,gR)=>{"use strict";var{signalsByName:aJ}=mR(),uJ=({timedOut:t,timeout:e,errorCode:r,signal:n,signalDescription:i,exitCode:o,isCanceled:s})=>t?`timed out after ${e} milliseconds`:s?"was canceled":r!==void 0?`failed with ${r}`:n!==void 0?`was killed with ${n} (${i})`:o!==void 0?`failed with exit code ${o}`:"failed",cJ=({stdout:t,stderr:e,all:r,error:n,signal:i,exitCode:o,command:s,escapedCommand:a,timedOut:u,isCanceled:c,killed:l,parsed:{options:{timeout:p}}})=>{o=o===null?void 0:o,i=i===null?void 0:i;let f=i===void 0?void 0:aJ[i].description,m=n&&n.code,H=`Command ${uJ({timedOut:u,timeout:p,errorCode:m,signal:i,signalDescription:f,exitCode:o,isCanceled:c})}: ${s}`,v=Object.prototype.toString.call(n)==="[object Error]",_=v?`${H}
${n.message}`:H,x=[_,e,t].filter(Boolean).join(`
`);return v?(n.originalMessage=n.message,n.message=x):n=new Error(x),n.shortMessage=_,n.command=s,n.escapedCommand=a,n.exitCode=o,n.signal=i,n.signalDescription=f,n.stdout=t,n.stderr=e,r!==void 0&&(n.all=r),"bufferedData"in n&&delete n.bufferedData,n.failed=!0,n.timedOut=!!u,n.isCanceled=c,n.killed=l&&!u,n};gR.exports=cJ});var vR=y((E0e,WA)=>{"use strict";var fH=["stdin","stdout","stderr"],lJ=t=>fH.some(e=>t[e]!==void 0),yR=t=>{if(!t)return;let{stdio:e}=t;if(e===void 0)return fH.map(n=>t[n]);if(lJ(t))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${fH.map(n=>`\`${n}\``).join(", ")}`);if(typeof e=="string")return e;if(!Array.isArray(e))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof e}\``);let r=Math.max(e.length,fH.length);return Array.from({length:r},(n,i)=>e[i])};WA.exports=yR;WA.exports.node=t=>{let e=yR(t);return e==="ipc"?"ipc":e===void 0||typeof e=="string"?[e,e,e,"ipc"]:e.includes("ipc")?e:[...e,"ipc"]}});var bR=y((D0e,dH)=>{dH.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&dH.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&dH.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var AR=y((C0e,Md)=>{var pJ=require("assert"),$d=bR(),fJ=/^win/i.test(process.platform),hH=require("events");typeof hH!="function"&&(hH=hH.EventEmitter);var hr;process.__signal_exit_emitter__?hr=process.__signal_exit_emitter__:(hr=process.__signal_exit_emitter__=new hH,hr.count=0,hr.emitted={});hr.infinite||(hr.setMaxListeners(1/0),hr.infinite=!0);Md.exports=function(t,e){pJ.equal(typeof t,"function","a callback must be provided for exit handler"),Rd===!1&&wR();var r="exit";e&&e.alwaysLast&&(r="afterexit");var n=function(){hr.removeListener(r,t),hr.listeners("exit").length===0&&hr.listeners("afterexit").length===0&&GA()};return hr.on(r,t),n};Md.exports.unload=GA;function GA(){Rd&&(Rd=!1,$d.forEach(function(t){try{process.removeListener(t,KA[t])}catch{}}),process.emit=VA,process.reallyExit=_R,hr.count-=1)}function Yc(t,e,r){hr.emitted[t]||(hr.emitted[t]=!0,hr.emit(t,e,r))}var KA={};$d.forEach(function(t){KA[t]=function(){var r=process.listeners(t);r.length===hr.count&&(GA(),Yc("exit",null,t),Yc("afterexit",null,t),fJ&&t==="SIGHUP"&&(t="SIGINT"),process.kill(process.pid,t))}});Md.exports.signals=function(){return $d};Md.exports.load=wR;var Rd=!1;function wR(){Rd||(Rd=!0,hr.count+=1,$d=$d.filter(function(t){try{return process.on(t,KA[t]),!0}catch{return!1}}),process.emit=hJ,process.reallyExit=dJ)}var _R=process.reallyExit;function dJ(t){process.exitCode=t||0,Yc("exit",process.exitCode,null),Yc("afterexit",process.exitCode,null),_R.call(process,process.exitCode)}var VA=process.emit;function hJ(t,e){if(t==="exit"){e!==void 0&&(process.exitCode=e);var r=VA.apply(this,arguments);return Yc("exit",process.exitCode,null),Yc("afterexit",process.exitCode,null),r}else return VA.apply(this,arguments)}});var SR=y((P0e,IR)=>{"use strict";var mJ=require("os"),gJ=AR(),HJ=1e3*5,yJ=(t,e="SIGTERM",r={})=>{let n=t(e);return vJ(t,e,r,n),n},vJ=(t,e,r,n)=>{if(!bJ(e,r,n))return;let i=_J(r),o=setTimeout(()=>{t("SIGKILL")},i);o.unref&&o.unref()},bJ=(t,{forceKillAfterTimeout:e},r)=>wJ(t)&&e!==!1&&r,wJ=t=>t===mJ.constants.signals.SIGTERM||typeof t=="string"&&t.toUpperCase()==="SIGTERM",_J=({forceKillAfterTimeout:t=!0})=>{if(t===!0)return HJ;if(!Number.isFinite(t)||t<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${t}\` (${typeof t})`);return t},AJ=(t,e)=>{t.kill()&&(e.isCanceled=!0)},IJ=(t,e,r)=>{t.kill(e),r(Object.assign(new Error("Timed out"),{timedOut:!0,signal:e}))},SJ=(t,{timeout:e,killSignal:r="SIGTERM"},n)=>{if(e===0||e===void 0)return n;let i,o=new Promise((a,u)=>{i=setTimeout(()=>{IJ(t,r,u)},e)}),s=n.finally(()=>{clearTimeout(i)});return Promise.race([o,s])},EJ=({timeout:t})=>{if(t!==void 0&&(!Number.isFinite(t)||t<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${t}\` (${typeof t})`)},DJ=async(t,{cleanup:e,detached:r},n)=>{if(!e||r)return n;let i=gJ(()=>{t.kill()});return n.finally(()=>{i()})};IR.exports={spawnedKill:yJ,spawnedCancel:AJ,setupTimeout:SJ,validateTimeout:EJ,setExitHandler:DJ}});var DR=y((x0e,ER)=>{"use strict";var Ui=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";Ui.writable=t=>Ui(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";Ui.readable=t=>Ui(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";Ui.duplex=t=>Ui.writable(t)&&Ui.readable(t);Ui.transform=t=>Ui.duplex(t)&&typeof t._transform=="function"&&typeof t._transformState=="object";ER.exports=Ui});var PR=y((L0e,CR)=>{"use strict";var{PassThrough:CJ}=require("stream");CR.exports=t=>{t={...t};let{array:e}=t,{encoding:r}=t,n=r==="buffer",i=!1;e?i=!(r||n):r=r||"utf8",n&&(r=null);let o=new CJ({objectMode:i});r&&o.setEncoding(r);let s=0,a=[];return o.on("data",u=>{a.push(u),i?s=a.length:s+=u.length}),o.getBufferedValue=()=>e?a:n?Buffer.concat(a,s):a.join(""),o.getBufferedLength=()=>s,o}});var xR=y((T0e,kd)=>{"use strict";var{constants:PJ}=require("buffer"),xJ=require("stream"),{promisify:LJ}=require("util"),TJ=PR(),$J=LJ(xJ.pipeline),mH=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function zA(t,e){if(!t)throw new Error("Expected a stream");e={maxBuffer:1/0,...e};let{maxBuffer:r}=e,n=TJ(e);return await new Promise((i,o)=>{let s=a=>{a&&n.getBufferedLength()<=PJ.MAX_LENGTH&&(a.bufferedData=n.getBufferedValue()),o(a)};(async()=>{try{await $J(t,n),i()}catch(a){s(a)}})(),n.on("data",()=>{n.getBufferedLength()>r&&s(new mH)})}),n.getBufferedValue()}kd.exports=zA;kd.exports.buffer=(t,e)=>zA(t,{...e,encoding:"buffer"});kd.exports.array=(t,e)=>zA(t,{...e,array:!0});kd.exports.MaxBufferError=mH});var TR=y(($0e,LR)=>{"use strict";var{PassThrough:RJ}=require("stream");LR.exports=function(){var t=[],e=new RJ({objectMode:!0});return e.setMaxListeners(0),e.add=r,e.isEmpty=n,e.on("unpipe",i),Array.prototype.slice.call(arguments).forEach(r),e;function r(o){return Array.isArray(o)?(o.forEach(r),this):(t.push(o),o.once("end",i.bind(null,o)),o.once("error",e.emit.bind(e,"error")),o.pipe(e,{end:!1}),this)}function n(){return t.length==0}function i(o){t=t.filter(function(s){return s!==o}),!t.length&&e.readable&&e.end()}}});var kR=y((R0e,MR)=>{"use strict";var RR=DR(),$R=xR(),MJ=TR(),kJ=(t,e)=>{e===void 0||t.stdin===void 0||(RR(e)?e.pipe(t.stdin):t.stdin.end(e))},OJ=(t,{all:e})=>{if(!e||!t.stdout&&!t.stderr)return;let r=MJ();return t.stdout&&r.add(t.stdout),t.stderr&&r.add(t.stderr),r},XA=async(t,e)=>{if(t){t.destroy();try{return await e}catch(r){return r.bufferedData}}},JA=(t,{encoding:e,buffer:r,maxBuffer:n})=>{if(!(!t||!r))return e?$R(t,{encoding:e,maxBuffer:n}):$R.buffer(t,{maxBuffer:n})},FJ=async({stdout:t,stderr:e,all:r},{encoding:n,buffer:i,maxBuffer:o},s)=>{let a=JA(t,{encoding:n,buffer:i,maxBuffer:o}),u=JA(e,{encoding:n,buffer:i,maxBuffer:o}),c=JA(r,{encoding:n,buffer:i,maxBuffer:o*2});try{return await Promise.all([s,a,u,c])}catch(l){return Promise.all([{error:l,signal:l.signal,timedOut:l.timedOut},XA(t,a),XA(e,u),XA(r,c)])}},NJ=({input:t})=>{if(RR(t))throw new TypeError("The `input` option cannot be a stream in sync mode")};MR.exports={handleInput:kJ,makeAllStream:OJ,getSpawnedResult:FJ,validateInputSync:NJ}});var FR=y((M0e,OR)=>{"use strict";var BJ=(async()=>{})().constructor.prototype,UJ=["then","catch","finally"].map(t=>[t,Reflect.getOwnPropertyDescriptor(BJ,t)]),jJ=(t,e)=>{for(let[r,n]of UJ){let i=typeof e=="function"?(...o)=>Reflect.apply(n.value,e(),o):n.value.bind(e);Reflect.defineProperty(t,r,{...n,value:i})}return t},qJ=t=>new Promise((e,r)=>{t.on("exit",(n,i)=>{e({exitCode:n,signal:i})}),t.on("error",n=>{r(n)}),t.stdin&&t.stdin.on("error",n=>{r(n)})});OR.exports={mergePromise:jJ,getSpawnedPromise:qJ}});var UR=y((k0e,BR)=>{"use strict";var NR=(t,e=[])=>Array.isArray(e)?[t,...e]:[t],WJ=/^[\w.-]+$/,VJ=/"/g,GJ=t=>typeof t!="string"||WJ.test(t)?t:`"${t.replace(VJ,'\\"')}"`,KJ=(t,e)=>NR(t,e).join(" "),zJ=(t,e)=>NR(t,e).map(r=>GJ(r)).join(" "),XJ=/ +/g,JJ=t=>{let e=[];for(let r of t.trim().split(XJ)){let n=e[e.length-1];n&&n.endsWith("\\")?e[e.length-1]=`${n.slice(0,-1)} ${r}`:e.push(r)}return e};BR.exports={joinCommand:KJ,getEscapedCommand:zJ,parseCommand:JJ}});var QA=y((O0e,Qc)=>{"use strict";var YJ=require("path"),YA=require("child_process"),QJ=Q$(),ZJ=eR(),eY=oR(),tY=cR(),gH=HR(),qR=vR(),{spawnedKill:rY,spawnedCancel:nY,setupTimeout:iY,validateTimeout:oY,setExitHandler:sY}=SR(),{handleInput:aY,getSpawnedResult:uY,makeAllStream:cY,validateInputSync:lY}=kR(),{mergePromise:jR,getSpawnedPromise:pY}=FR(),{joinCommand:WR,parseCommand:VR,getEscapedCommand:GR}=UR(),fY=1e3*1e3*100,dY=({env:t,extendEnv:e,preferLocal:r,localDir:n,execPath:i})=>{let o=e?{...process.env,...t}:t;return r?eY.env({env:o,cwd:n,execPath:i}):o},KR=(t,e,r={})=>{let n=QJ._parse(t,e,r);return t=n.command,e=n.args,r=n.options,r={maxBuffer:fY,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:r.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...r},r.env=dY(r),r.stdio=qR(r),process.platform==="win32"&&YJ.basename(t,".exe")==="cmd"&&e.unshift("/q"),{file:t,args:e,options:r,parsed:n}},Od=(t,e,r)=>typeof e!="string"&&!Buffer.isBuffer(e)?r===void 0?void 0:"":t.stripFinalNewline?ZJ(e):e,HH=(t,e,r)=>{let n=KR(t,e,r),i=WR(t,e),o=GR(t,e);oY(n.options);let s;try{s=YA.spawn(n.file,n.args,n.options)}catch(m){let h=new YA.ChildProcess,H=Promise.reject(gH({error:m,stdout:"",stderr:"",all:"",command:i,escapedCommand:o,parsed:n,timedOut:!1,isCanceled:!1,killed:!1}));return jR(h,H)}let a=pY(s),u=iY(s,n.options,a),c=sY(s,n.options,u),l={isCanceled:!1};s.kill=rY.bind(null,s.kill.bind(s)),s.cancel=nY.bind(null,s,l);let f=tY(async()=>{let[{error:m,exitCode:h,signal:H,timedOut:v},_,x,k]=await uY(s,n.options,c),T=Od(n.options,_),j=Od(n.options,x),K=Od(n.options,k);if(m||h!==0||H!==null){let G=gH({error:m,exitCode:h,signal:H,stdout:T,stderr:j,all:K,command:i,escapedCommand:o,parsed:n,timedOut:v,isCanceled:l.isCanceled,killed:s.killed});if(!n.options.reject)return G;throw G}return{command:i,escapedCommand:o,exitCode:0,stdout:T,stderr:j,all:K,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return aY(s,n.options.input),s.all=cY(s,n.options),jR(s,f)};Qc.exports=HH;Qc.exports.sync=(t,e,r)=>{let n=KR(t,e,r),i=WR(t,e),o=GR(t,e);lY(n.options);let s;try{s=YA.spawnSync(n.file,n.args,n.options)}catch(c){throw gH({error:c,stdout:"",stderr:"",all:"",command:i,escapedCommand:o,parsed:n,timedOut:!1,isCanceled:!1,killed:!1})}let a=Od(n.options,s.stdout,s.error),u=Od(n.options,s.stderr,s.error);if(s.error||s.status!==0||s.signal!==null){let c=gH({stdout:a,stderr:u,error:s.error,signal:s.signal,exitCode:s.status,command:i,escapedCommand:o,parsed:n,timedOut:s.error&&s.error.code==="ETIMEDOUT",isCanceled:!1,killed:s.signal!==null});if(!n.options.reject)return c;throw c}return{command:i,escapedCommand:o,exitCode:0,stdout:a,stderr:u,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};Qc.exports.command=(t,e)=>{let[r,...n]=VR(t);return HH(r,n,e)};Qc.exports.commandSync=(t,e)=>{let[r,...n]=VR(t);return HH.sync(r,n,e)};Qc.exports.node=(t,e,r={})=>{e&&!Array.isArray(e)&&typeof e=="object"&&(r=e,e=[]);let n=qR.node(r),i=process.execArgv.filter(a=>!a.startsWith("--inspect")),{nodePath:o=process.execPath,nodeOptions:s=i}=r;return HH(o,[...s,t,...Array.isArray(e)?e:[]],{...r,stdin:void 0,stdout:void 0,stderr:void 0,stdio:n,shell:!1})}});var Mt=y(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.NON_CUSTOM_TAG_KEYS=xe.PRE_DESTROY=xe.POST_CONSTRUCT=xe.DESIGN_PARAM_TYPES=xe.PARAM_TYPES=xe.TAGGED_PROP=xe.TAGGED=xe.MULTI_INJECT_TAG=xe.INJECT_TAG=xe.OPTIONAL_TAG=xe.UNMANAGED_TAG=xe.NAME_TAG=xe.NAMED_TAG=void 0;xe.NAMED_TAG="named";xe.NAME_TAG="name";xe.UNMANAGED_TAG="unmanaged";xe.OPTIONAL_TAG="optional";xe.INJECT_TAG="inject";xe.MULTI_INJECT_TAG="multi_inject";xe.TAGGED="inversify:tagged";xe.TAGGED_PROP="inversify:tagged_props";xe.PARAM_TYPES="inversify:paramtypes";xe.DESIGN_PARAM_TYPES="design:paramtypes";xe.POST_CONSTRUCT="post_construct";xe.PRE_DESTROY="pre_destroy";function hY(){return[xe.INJECT_TAG,xe.MULTI_INJECT_TAG,xe.NAME_TAG,xe.UNMANAGED_TAG,xe.NAMED_TAG,xe.OPTIONAL_TAG]}xe.NON_CUSTOM_TAG_KEYS=hY()});var gi=y(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});js.TargetTypeEnum=js.BindingTypeEnum=js.BindingScopeEnum=void 0;var mY={Request:"Request",Singleton:"Singleton",Transient:"Transient"};js.BindingScopeEnum=mY;var gY={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};js.BindingTypeEnum=gY;var HY={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};js.TargetTypeEnum=HY});var qs=y(yH=>{"use strict";Object.defineProperty(yH,"__esModule",{value:!0});yH.id=void 0;var yY=0;function vY(){return yY++}yH.id=vY});var XR=y(vH=>{"use strict";Object.defineProperty(vH,"__esModule",{value:!0});vH.Binding=void 0;var zR=gi(),bY=qs(),wY=function(){function t(e,r){this.id=(0,bY.id)(),this.activated=!1,this.serviceIdentifier=e,this.scope=r,this.type=zR.BindingTypeEnum.Invalid,this.constraint=function(n){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=e.scope===zR.BindingScopeEnum.Singleton?this.activated:!1,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.onDeactivation=this.onDeactivation,e.cache=this.cache,e},t}();vH.Binding=wY});var Lr=y(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.STACK_OVERFLOW=le.CIRCULAR_DEPENDENCY_IN_FACTORY=le.ON_DEACTIVATION_ERROR=le.PRE_DESTROY_ERROR=le.POST_CONSTRUCT_ERROR=le.ASYNC_UNBIND_REQUIRED=le.MULTIPLE_POST_CONSTRUCT_METHODS=le.MULTIPLE_PRE_DESTROY_METHODS=le.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=le.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=le.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=le.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=le.ARGUMENTS_LENGTH_MISMATCH=le.INVALID_DECORATOR_OPERATION=le.INVALID_TO_SELF_VALUE=le.LAZY_IN_SYNC=le.INVALID_FUNCTION_BINDING=le.INVALID_MIDDLEWARE_RETURN=le.NO_MORE_SNAPSHOTS_AVAILABLE=le.INVALID_BINDING_TYPE=le.NOT_IMPLEMENTED=le.CIRCULAR_DEPENDENCY=le.UNDEFINED_INJECT_ANNOTATION=le.MISSING_INJECT_ANNOTATION=le.MISSING_INJECTABLE_ANNOTATION=le.NOT_REGISTERED=le.CANNOT_UNBIND=le.AMBIGUOUS_MATCH=le.KEY_NOT_FOUND=le.NULL_ARGUMENT=le.DUPLICATED_METADATA=le.DUPLICATED_INJECTABLE_DECORATOR=void 0;le.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.";le.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:";le.NULL_ARGUMENT="NULL argument";le.KEY_NOT_FOUND="Key Not Found";le.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:";le.CANNOT_UNBIND="Could not unbind serviceIdentifier:";le.NOT_REGISTERED="No matching bindings found for serviceIdentifier:";le.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:";le.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var _Y=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};le.UNDEFINED_INJECT_ANNOTATION=_Y;le.CIRCULAR_DEPENDENCY="Circular dependency found:";le.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.";le.INVALID_BINDING_TYPE="Invalid binding type:";le.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.";le.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!";le.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!";var AY=function(t){return"You are attempting to construct '"+t+`' in a synchronous way
 but it has asynchronous dependencies.`};le.LAZY_IN_SYNC=AY;le.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier";le.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var IY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+(t[0]+" must be >= than the number of constructor arguments of its base class.")};le.ARGUMENTS_LENGTH_MISMATCH=IY;le.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.";le.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').";le.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean";le.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean";le.MULTIPLE_PRE_DESTROY_METHODS="Cannot apply @preDestroy decorator multiple times in the same class";le.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";le.ASYNC_UNBIND_REQUIRED="Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)";var SY=function(t,e){return"@postConstruct error in class "+t+": "+e};le.POST_CONSTRUCT_ERROR=SY;var EY=function(t,e){return"@preDestroy error in class "+t+": "+e};le.PRE_DESTROY_ERROR=EY;var DY=function(t,e){return"onDeactivation() error in class "+t+": "+e};le.ON_DEACTIVATION_ERROR=DY;var CY=function(t,e){return"It looks like there is a circular dependency in one of the '"+t+"' bindings. Please investigate bindings with"+("service identifier '"+e+"'.")};le.CIRCULAR_DEPENDENCY_IN_FACTORY=CY;le.STACK_OVERFLOW="Maximum call stack size exceeded"});var eI=y(ji=>{"use strict";var PY=ji&&ji.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),xY=ji&&ji.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),LY=ji&&ji.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&PY(e,t,r);return xY(e,t),e};Object.defineProperty(ji,"__esModule",{value:!0});ji.MetadataReader=void 0;var ZA=LY(Mt()),TY=function(){function t(){}return t.prototype.getConstructorMetadata=function(e){var r=Reflect.getMetadata(ZA.PARAM_TYPES,e),n=Reflect.getMetadata(ZA.TAGGED,e);return{compilerGeneratedMetadata:r,userGeneratedMetadata:n||{}}},t.prototype.getPropertiesMetadata=function(e){var r=Reflect.getMetadata(ZA.TAGGED_PROP,e)||[];return r},t}();ji.MetadataReader=TY});var JR=y(bH=>{"use strict";Object.defineProperty(bH,"__esModule",{value:!0});bH.BindingCount=void 0;var $Y={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};bH.BindingCount=$Y});var tI=y(Bn=>{"use strict";var RY=Bn&&Bn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),MY=Bn&&Bn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),kY=Bn&&Bn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&RY(e,t,r);return MY(e,t),e};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.tryAndThrowErrorIfStackOverflow=Bn.isStackOverflowExeption=void 0;var OY=kY(Lr());function YR(t){return t instanceof RangeError||t.message===OY.STACK_OVERFLOW}Bn.isStackOverflowExeption=YR;var FY=function(t,e){try{return t()}catch(r){throw YR(r)&&(r=e()),r}};Bn.tryAndThrowErrorIfStackOverflow=FY});var Zc=y(kt=>{"use strict";var NY=kt&&kt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),BY=kt&&kt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),UY=kt&&kt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&NY(e,t,r);return BY(e,t),e};Object.defineProperty(kt,"__esModule",{value:!0});kt.getSymbolDescription=kt.circularDependencyToException=kt.listMetadataForTarget=kt.listRegisteredBindingsForServiceIdentifier=kt.getServiceIdentifierAsString=kt.getFunctionName=void 0;var jY=UY(Lr());function QR(t){if(typeof t=="function"){var e=t;return e.name}else{if(typeof t=="symbol")return t.toString();var e=t;return e}}kt.getServiceIdentifierAsString=QR;function qY(t,e,r){var n="",i=r(t,e);return i.length!==0&&(n=`
Registered bindings:`,i.forEach(function(o){var s="Object";o.implementationType!==null&&(s=tM(o.implementationType)),n=n+`
 `+s,o.constraint.metaData&&(n=n+" - "+o.constraint.metaData)})),n}kt.listRegisteredBindingsForServiceIdentifier=qY;function ZR(t,e){return t.parentRequest===null?!1:t.parentRequest.serviceIdentifier===e?!0:ZR(t.parentRequest,e)}function WY(t){function e(n,i){i===void 0&&(i=[]);var o=QR(n.serviceIdentifier);return i.push(o),n.parentRequest!==null?e(n.parentRequest,i):i}var r=e(t);return r.reverse().join(" --> ")}function eM(t){t.childRequests.forEach(function(e){if(ZR(e,e.serviceIdentifier)){var r=WY(e);throw new Error(jY.CIRCULAR_DEPENDENCY+" "+r)}else eM(e)})}kt.circularDependencyToException=eM;function VY(t,e){if(e.isTagged()||e.isNamed()){var r="",n=e.getNamedTag(),i=e.getCustomTags();return n!==null&&(r+=n.toString()+`
`),i!==null&&i.forEach(function(o){r+=o.toString()+`
`})," "+t+`
 `+t+" - "+r}else return" "+t}kt.listMetadataForTarget=VY;function tM(t){if(t.name)return t.name;var e=t.toString(),r=e.match(/^function\s*([^\s(]+)/);return r?r[1]:"Anonymous function: "+e}kt.getFunctionName=tM;function GY(t){return t.toString().slice(7,-1)}kt.getSymbolDescription=GY});var rM=y(wH=>{"use strict";Object.defineProperty(wH,"__esModule",{value:!0});wH.Context=void 0;var KY=qs(),zY=function(){function t(e){this.id=(0,KY.id)(),this.container=e}return t.prototype.addPlan=function(e){this.plan=e},t.prototype.setCurrentRequest=function(e){this.currentRequest=e},t}();wH.Context=zY});var Hi=y(qi=>{"use strict";var XY=qi&&qi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),JY=qi&&qi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),YY=qi&&qi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&XY(e,t,r);return JY(e,t),e};Object.defineProperty(qi,"__esModule",{value:!0});qi.Metadata=void 0;var QY=YY(Mt()),ZY=function(){function t(e,r){this.key=e,this.value=r}return t.prototype.toString=function(){return this.key===QY.NAMED_TAG?"named: "+String(this.value).toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+String(this.value)+" }"},t}();qi.Metadata=ZY});var nM=y(_H=>{"use strict";Object.defineProperty(_H,"__esModule",{value:!0});_H.Plan=void 0;var eQ=function(){function t(e,r){this.parentContext=e,this.rootRequest=r}return t}();_H.Plan=eQ});var rI=y(AH=>{"use strict";Object.defineProperty(AH,"__esModule",{value:!0});AH.LazyServiceIdentifer=void 0;var tQ=function(){function t(e){this._cb=e}return t.prototype.unwrap=function(){return this._cb()},t}();AH.LazyServiceIdentifer=tQ});var iM=y(IH=>{"use strict";Object.defineProperty(IH,"__esModule",{value:!0});IH.QueryableString=void 0;var rQ=function(){function t(e){this.str=e}return t.prototype.startsWith=function(e){return this.str.indexOf(e)===0},t.prototype.endsWith=function(e){var r="",n=e.split("").reverse().join("");return r=this.str.split("").reverse().join(""),this.startsWith.call({str:r},n)},t.prototype.contains=function(e){return this.str.indexOf(e)!==-1},t.prototype.equals=function(e){return this.str===e},t.prototype.value=function(){return this.str},t}();IH.QueryableString=rQ});var nI=y(Wi=>{"use strict";var nQ=Wi&&Wi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),iQ=Wi&&Wi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),oQ=Wi&&Wi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&nQ(e,t,r);return iQ(e,t),e};Object.defineProperty(Wi,"__esModule",{value:!0});Wi.Target=void 0;var Ko=oQ(Mt()),sQ=qs(),aQ=Zc(),oM=Hi(),uQ=iM(),cQ=function(){function t(e,r,n,i){this.id=(0,sQ.id)(),this.type=e,this.serviceIdentifier=n;var o=typeof r=="symbol"?(0,aQ.getSymbolDescription)(r):r;this.name=new uQ.QueryableString(o||""),this.identifier=r,this.metadata=new Array;var s=null;typeof i=="string"?s=new oM.Metadata(Ko.NAMED_TAG,i):i instanceof oM.Metadata&&(s=i),s!==null&&this.metadata.push(s)}return t.prototype.hasTag=function(e){for(var r=0,n=this.metadata;r<n.length;r++){var i=n[r];if(i.key===e)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(Ko.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(e){return this.matchesTag(Ko.MULTI_INJECT_TAG)(e)},t.prototype.isNamed=function(){return this.hasTag(Ko.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some(function(e){return Ko.NON_CUSTOM_TAG_KEYS.every(function(r){return e.key!==r})})},t.prototype.isOptional=function(){return this.matchesTag(Ko.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(e){return e.key===Ko.NAMED_TAG})[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(e){return Ko.NON_CUSTOM_TAG_KEYS.every(function(r){return e.key!==r})}):null},t.prototype.matchesNamedTag=function(e){return this.matchesTag(Ko.NAMED_TAG)(e)},t.prototype.matchesTag=function(e){var r=this;return function(n){for(var i=0,o=r.metadata;i<o.length;i++){var s=o[i];if(s.key===e&&s.value===n)return!0}return!1}},t}();Wi.Target=cQ});var dM=y(Tr=>{"use strict";var lQ=Tr&&Tr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),pQ=Tr&&Tr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),sM=Tr&&Tr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&lQ(e,t,r);return pQ(e,t),e},SH=Tr&&Tr.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Tr,"__esModule",{value:!0});Tr.getFunctionName=Tr.getBaseClassDependencyCount=Tr.getDependencies=void 0;var fQ=rI(),iI=sM(Lr()),aM=gi(),Fd=sM(Mt()),oI=Zc();Object.defineProperty(Tr,"getFunctionName",{enumerable:!0,get:function(){return oI.getFunctionName}});var uM=nI();function dQ(t,e){var r=(0,oI.getFunctionName)(e);return cM(t,r,e,!1)}Tr.getDependencies=dQ;function cM(t,e,r,n){var i=t.getConstructorMetadata(r),o=i.compilerGeneratedMetadata;if(o===void 0){var s=iI.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(s)}var a=i.userGeneratedMetadata,u=Object.keys(a),c=r.length===0&&u.length>0,l=u.length>r.length,p=c||l?u.length:r.length,f=mQ(n,e,o,a,p),m=lM(t,r,e),h=SH(SH([],f,!0),m,!0);return h}function hQ(t,e,r,n,i){var o=i[t.toString()]||[],s=fM(o),a=s.unmanaged!==!0,u=n[t],c=s.inject||s.multiInject;if(u=c||u,u instanceof fQ.LazyServiceIdentifer&&(u=u.unwrap()),a){var l=u===Object,p=u===Function,f=u===void 0,m=l||p||f;if(!e&&m){var h=iI.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+r+".";throw new Error(h)}var H=new uM.Target(aM.TargetTypeEnum.ConstructorArgument,s.targetName,u);return H.metadata=o,H}return null}function mQ(t,e,r,n,i){for(var o=[],s=0;s<i;s++){var a=s,u=hQ(a,t,e,r,n);u!==null&&o.push(u)}return o}function gQ(t,e,r,n){var i=t||e;if(i===void 0){var o=iI.MISSING_INJECTABLE_ANNOTATION+" for property "+String(r)+" in class "+n+".";throw new Error(o)}return i}function lM(t,e,r){for(var n=t.getPropertiesMetadata(e),i=[],o=Object.getOwnPropertySymbols(n),s=Object.keys(n),a=s.concat(o),u=0,c=a;u<c.length;u++){var l=c[u],p=n[l],f=fM(p),m=f.targetName||l,h=gQ(f.inject,f.multiInject,l,r),H=new uM.Target(aM.TargetTypeEnum.ClassProperty,m,h);H.metadata=p,i.push(H)}var v=Object.getPrototypeOf(e.prototype).constructor;if(v!==Object){var _=lM(t,v,r);i=SH(SH([],i,!0),_,!0)}return i}function pM(t,e){var r=Object.getPrototypeOf(e.prototype).constructor;if(r!==Object){var n=(0,oI.getFunctionName)(r),i=cM(t,n,r,!0),o=i.map(function(u){return u.metadata.filter(function(c){return c.key===Fd.UNMANAGED_TAG})}),s=[].concat.apply([],o).length,a=i.length-s;return a>0?a:pM(t,r)}else return 0}Tr.getBaseClassDependencyCount=pM;function fM(t){var e={};return t.forEach(function(r){e[r.key.toString()]=r.value}),{inject:e[Fd.INJECT_TAG],multiInject:e[Fd.MULTI_INJECT_TAG],targetName:e[Fd.NAME_TAG],unmanaged:e[Fd.UNMANAGED_TAG]}}});var hM=y(EH=>{"use strict";Object.defineProperty(EH,"__esModule",{value:!0});EH.Request=void 0;var HQ=qs(),yQ=function(){function t(e,r,n,i,o){this.id=(0,HQ.id)(),this.serviceIdentifier=e,this.parentContext=r,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=n===null?new Map:null}return t.prototype.addChildRequest=function(e,r,n){var i=new t(e,this.parentContext,this,r,n);return this.childRequests.push(i),i},t}();EH.Request=yQ});var lI=y(Zr=>{"use strict";var vQ=Zr&&Zr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),bQ=Zr&&Zr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),HM=Zr&&Zr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&vQ(e,t,r);return bQ(e,t),e};Object.defineProperty(Zr,"__esModule",{value:!0});Zr.getBindingDictionary=Zr.createMockRequest=Zr.plan=void 0;var DH=JR(),aI=HM(Lr()),yM=gi(),mM=HM(Mt()),wQ=tI(),el=Zc(),vM=rM(),uI=Hi(),_Q=nM(),sI=dM(),cI=hM(),bM=nI();function wM(t){return t._bindingDictionary}Zr.getBindingDictionary=wM;function AQ(t,e,r,n,i,o){var s=t?mM.MULTI_INJECT_TAG:mM.INJECT_TAG,a=new uI.Metadata(s,r),u=new bM.Target(e,n,r,a);if(i!==void 0){var c=new uI.Metadata(i,o);u.metadata.push(c)}return u}function gM(t,e,r,n,i){var o=Nd(r.container,i.serviceIdentifier),s=[];return o.length===DH.BindingCount.NoBindingsAvailable&&r.container.options.autoBindInjectable&&typeof i.serviceIdentifier=="function"&&t.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(r.container.bind(i.serviceIdentifier).toSelf(),o=Nd(r.container,i.serviceIdentifier)),e?s=o:s=o.filter(function(a){var u=new cI.Request(a.serviceIdentifier,r,n,a,i);return a.constraint(u)}),IQ(i.serviceIdentifier,s,i,r.container),s}function IQ(t,e,r,n){switch(e.length){case DH.BindingCount.NoBindingsAvailable:if(r.isOptional())return e;var i=(0,el.getServiceIdentifierAsString)(t),o=aI.NOT_REGISTERED;throw o+=(0,el.listMetadataForTarget)(i,r),o+=(0,el.listRegisteredBindingsForServiceIdentifier)(n,i,Nd),new Error(o);case DH.BindingCount.OnlyOneBindingAvailable:return e;case DH.BindingCount.MultipleBindingsAvailable:default:if(r.isArray())return e;var i=(0,el.getServiceIdentifierAsString)(t),o=aI.AMBIGUOUS_MATCH+" "+i;throw o+=(0,el.listRegisteredBindingsForServiceIdentifier)(n,i,Nd),new Error(o)}}function _M(t,e,r,n,i,o){var s,a;if(i===null){s=gM(t,e,n,null,o),a=new cI.Request(r,n,null,s,o);var u=new _Q.Plan(n,a);n.addPlan(u)}else s=gM(t,e,n,i,o),a=i.addChildRequest(o.serviceIdentifier,s,o);s.forEach(function(c){var l=null;if(o.isArray())l=a.addChildRequest(c.serviceIdentifier,c,o);else{if(c.cache)return;l=a}if(c.type===yM.BindingTypeEnum.Instance&&c.implementationType!==null){var p=(0,sI.getDependencies)(t,c.implementationType);if(!n.container.options.skipBaseClassChecks){var f=(0,sI.getBaseClassDependencyCount)(t,c.implementationType);if(p.length<f){var m=aI.ARGUMENTS_LENGTH_MISMATCH((0,sI.getFunctionName)(c.implementationType));throw new Error(m)}}p.forEach(function(h){_M(t,!1,h.serviceIdentifier,n,l,h)})}})}function Nd(t,e){var r=[],n=wM(t);return n.hasKey(e)?r=n.get(e):t.parent!==null&&(r=Nd(t.parent,e)),r}function SQ(t,e,r,n,i,o,s,a){a===void 0&&(a=!1);var u=new vM.Context(e),c=AQ(r,n,i,"",o,s);try{return _M(t,a,i,u,null,c),u}catch(l){throw(0,wQ.isStackOverflowExeption)(l)&&(0,el.circularDependencyToException)(u.plan.rootRequest),l}}Zr.plan=SQ;function EQ(t,e,r,n){var i=new bM.Target(yM.TargetTypeEnum.Variable,"",e,new uI.Metadata(r,n)),o=new vM.Context(t),s=new cI.Request(e,o,null,[],i);return s}Zr.createMockRequest=EQ});var Bd=y(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});tl.isPromiseOrContainsPromise=tl.isPromise=void 0;function pI(t){var e=typeof t=="object"&&t!==null||typeof t=="function";return e&&typeof t.then=="function"}tl.isPromise=pI;function DQ(t){return pI(t)?!0:Array.isArray(t)&&t.some(pI)}tl.isPromiseOrContainsPromise=DQ});var AM=y(Vi=>{"use strict";var CQ=Vi&&Vi.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(p){s(p)}}function u(l){try{c(n.throw(l))}catch(p){s(p)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},PQ=Vi&&Vi.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Vi,"__esModule",{value:!0});Vi.saveToScope=Vi.tryGetFromScope=void 0;var CH=J(),xQ=Bd(),LQ=function(t,e){return e.scope===CH.BindingScopeEnum.Singleton&&e.activated?e.cache:e.scope===CH.BindingScopeEnum.Request&&t.has(e.id)?t.get(e.id):null};Vi.tryGetFromScope=LQ;var TQ=function(t,e,r){e.scope===CH.BindingScopeEnum.Singleton&&RQ(e,r),e.scope===CH.BindingScopeEnum.Request&&$Q(t,e,r)};Vi.saveToScope=TQ;var $Q=function(t,e,r){t.has(e.id)||t.set(e.id,r)},RQ=function(t,e){t.cache=e,t.activated=!0,(0,xQ.isPromise)(e)&&MQ(t,e)},MQ=function(t,e){return CQ(void 0,void 0,void 0,function(){var r,n;return PQ(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e];case 1:return r=i.sent(),t.cache=r,[3,3];case 2:throw n=i.sent(),t.cache=null,t.activated=!1,n;case 3:return[2]}})})}});var IM=y(Ud=>{"use strict";Object.defineProperty(Ud,"__esModule",{value:!0});Ud.FactoryType=void 0;var kQ;(function(t){t.DynamicValue="toDynamicValue",t.Factory="toFactory",t.Provider="toProvider"})(kQ=Ud.FactoryType||(Ud.FactoryType={}))});var dI=y(en=>{"use strict";var OQ=en&&en.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),FQ=en&&en.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),NQ=en&&en.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&OQ(e,t,r);return FQ(e,t),e};Object.defineProperty(en,"__esModule",{value:!0});en.getFactoryDetails=en.ensureFullyBound=en.multiBindToService=void 0;var BQ=J(),UQ=NQ(Lr()),Gi=gi(),fI=IM(),jQ=function(t){return function(e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.forEach(function(i){return t.bind(i).toService(e)})}}};en.multiBindToService=jQ;var qQ=function(t){var e=null;switch(t.type){case Gi.BindingTypeEnum.ConstantValue:case Gi.BindingTypeEnum.Function:e=t.cache;break;case Gi.BindingTypeEnum.Constructor:case Gi.BindingTypeEnum.Instance:e=t.implementationType;break;case Gi.BindingTypeEnum.DynamicValue:e=t.dynamicValue;break;case Gi.BindingTypeEnum.Provider:e=t.provider;break;case Gi.BindingTypeEnum.Factory:e=t.factory;break}if(e===null){var r=(0,BQ.getServiceIdentifierAsString)(t.serviceIdentifier);throw new Error(UQ.INVALID_BINDING_TYPE+" "+r)}};en.ensureFullyBound=qQ;var WQ=function(t){switch(t.type){case Gi.BindingTypeEnum.Factory:return{factory:t.factory,factoryType:fI.FactoryType.Factory};case Gi.BindingTypeEnum.Provider:return{factory:t.provider,factoryType:fI.FactoryType.Provider};case Gi.BindingTypeEnum.DynamicValue:return{factory:t.dynamicValue,factoryType:fI.FactoryType.DynamicValue};default:throw new Error("Unexpected factory type "+t.type)}};en.getFactoryDetails=WQ});var xM=y(er=>{"use strict";var rl=er&&er.__assign||function(){return rl=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},rl.apply(this,arguments)},VQ=er&&er.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),GQ=er&&er.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),KQ=er&&er.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&VQ(e,t,r);return GQ(e,t),e},DM=er&&er.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(p){s(p)}}function u(l){try{c(n.throw(l))}catch(p){s(p)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},CM=er&&er.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},zQ=er&&er.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(er,"__esModule",{value:!0});er.resolveInstance=void 0;var hI=Lr(),gI=gi(),mI=KQ(Mt()),HI=Bd();function XQ(t,e){return t.reduce(function(r,n){var i=e(n),o=n.target.type;return o===gI.TargetTypeEnum.ConstructorArgument?r.constructorInjections.push(i):(r.propertyRequests.push(n),r.propertyInjections.push(i)),r.isAsync||(r.isAsync=(0,HI.isPromiseOrContainsPromise)(i)),r},{constructorInjections:[],propertyInjections:[],propertyRequests:[],isAsync:!1})}function JQ(t,e,r){var n;if(e.length>0){var i=XQ(e,r),o=rl(rl({},i),{constr:t});i.isAsync?n=YQ(o):n=PM(o)}else n=new t;return n}function PM(t){var e,r=new((e=t.constr).bind.apply(e,zQ([void 0],t.constructorInjections,!1)));return t.propertyRequests.forEach(function(n,i){var o=n.target.identifier,s=t.propertyInjections[i];r[o]=s}),r}function YQ(t){return DM(this,void 0,void 0,function(){var e,r;return CM(this,function(n){switch(n.label){case 0:return[4,SM(t.constructorInjections)];case 1:return e=n.sent(),[4,SM(t.propertyInjections)];case 2:return r=n.sent(),[2,PM(rl(rl({},t),{constructorInjections:e,propertyInjections:r}))]}})})}function SM(t){return DM(this,void 0,void 0,function(){var e,r,n,i;return CM(this,function(o){for(e=[],r=0,n=t;r<n.length;r++)i=n[r],Array.isArray(i)?e.push(Promise.all(i)):e.push(i);return[2,Promise.all(e)]})})}function EM(t,e){var r=QQ(t,e);return(0,HI.isPromise)(r)?r.then(function(){return e}):e}function QQ(t,e){var r,n;if(Reflect.hasMetadata(mI.POST_CONSTRUCT,t)){var i=Reflect.getMetadata(mI.POST_CONSTRUCT,t);try{return(n=(r=e)[i.value])===null||n===void 0?void 0:n.call(r)}catch(o){throw new Error((0,hI.POST_CONSTRUCT_ERROR)(t.name,o.message))}}}function ZQ(t,e){t.scope!==gI.BindingScopeEnum.Singleton&&eZ(t,e)}function eZ(t,e){var r="Class cannot be instantiated in "+(t.scope===gI.BindingScopeEnum.Request?"request":"transient")+" scope.";if(typeof t.onDeactivation=="function")throw new Error((0,hI.ON_DEACTIVATION_ERROR)(e.name,r));if(Reflect.hasMetadata(mI.PRE_DESTROY,e))throw new Error((0,hI.PRE_DESTROY_ERROR)(e.name,r))}function tZ(t,e,r,n){ZQ(t,e);var i=JQ(e,r,n);return(0,HI.isPromise)(i)?i.then(function(o){return EM(e,o)}):EM(e,i)}er.resolveInstance=tZ});var MM=y(tn=>{"use strict";var rZ=tn&&tn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),nZ=tn&&tn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),iZ=tn&&tn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&rZ(e,t,r);return nZ(e,t),e},oZ=tn&&tn.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(p){s(p)}}function u(l){try{c(n.throw(l))}catch(p){s(p)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},sZ=tn&&tn.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(tn,"__esModule",{value:!0});tn.resolve=void 0;var aZ=iZ(Lr()),PH=gi(),uZ=lI(),LM=AM(),yI=Bd(),$M=dI(),cZ=tI(),lZ=xM(),vI=function(t){return function(e){e.parentContext.setCurrentRequest(e);var r=e.bindings,n=e.childRequests,i=e.target&&e.target.isArray(),o=!e.parentRequest||!e.parentRequest.target||!e.target||!e.parentRequest.target.matchesArray(e.target.serviceIdentifier);if(i&&o)return n.map(function(a){var u=vI(t);return u(a)});if(e.target.isOptional()&&r.length===0)return;var s=r[0];return hZ(t,e,s)}},pZ=function(t,e){var r=(0,$M.getFactoryDetails)(t);return(0,cZ.tryAndThrowErrorIfStackOverflow)(function(){return r.factory.bind(t)(e)},function(){return new Error(aZ.CIRCULAR_DEPENDENCY_IN_FACTORY(r.factoryType,e.currentRequest.serviceIdentifier.toString()))})},fZ=function(t,e,r){var n,i=e.childRequests;switch((0,$M.ensureFullyBound)(r),r.type){case PH.BindingTypeEnum.ConstantValue:case PH.BindingTypeEnum.Function:n=r.cache;break;case PH.BindingTypeEnum.Constructor:n=r.implementationType;break;case PH.BindingTypeEnum.Instance:n=(0,lZ.resolveInstance)(r,r.implementationType,i,vI(t));break;default:n=pZ(r,e.parentContext)}return n},dZ=function(t,e,r){var n=(0,LM.tryGetFromScope)(t,e);return n!==null||(n=r(),(0,LM.saveToScope)(t,e,n)),n},hZ=function(t,e,r){return dZ(t,r,function(){var n=fZ(t,e,r);return(0,yI.isPromise)(n)?n=n.then(function(i){return TM(e,r,i)}):n=TM(e,r,n),n})};function TM(t,e,r){var n=mZ(t.parentContext,e,r),i=yZ(t.parentContext.container),o,s=i.next();do{o=s.value;var a=t.parentContext,u=t.serviceIdentifier,c=HZ(o,u);(0,yI.isPromise)(n)?n=RM(c,a,n):n=gZ(c,a,n),s=i.next()}while(s.done!==!0&&!(0,uZ.getBindingDictionary)(o).hasKey(t.serviceIdentifier));return n}var mZ=function(t,e,r){var n;return typeof e.onActivation=="function"?n=e.onActivation(t,r):n=r,n},gZ=function(t,e,r){for(var n=t.next();!n.done;){if(r=n.value(e,r),(0,yI.isPromise)(r))return RM(t,e,r);n=t.next()}return r},RM=function(t,e,r){return oZ(void 0,void 0,void 0,function(){var n,i;return sZ(this,function(o){switch(o.label){case 0:return[4,r];case 1:n=o.sent(),i=t.next(),o.label=2;case 2:return i.done?[3,4]:[4,i.value(e,n)];case 3:return n=o.sent(),i=t.next(),[3,2];case 4:return[2,n]}})})},HZ=function(t,e){var r=t._activations;return r.hasKey(e)?r.get(e).values():[].values()},yZ=function(t){for(var e=[t],r=t.parent;r!==null;)e.push(r),r=r.parent;var n=function(){var o=e.pop();return o!==void 0?{done:!1,value:o}:{done:!0,value:void 0}},i={next:n};return i};function vZ(t){var e=vI(t.plan.rootRequest.requestScope);return e(t.plan.rootRequest)}tn.resolve=vZ});var bI=y($r=>{"use strict";var bZ=$r&&$r.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),wZ=$r&&$r.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),_Z=$r&&$r.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&bZ(e,t,r);return wZ(e,t),e};Object.defineProperty($r,"__esModule",{value:!0});$r.typeConstraint=$r.namedConstraint=$r.taggedConstraint=$r.traverseAncerstors=void 0;var AZ=_Z(Mt()),IZ=Hi(),kM=function(t,e){var r=t.parentRequest;return r!==null?e(r)?!0:kM(r,e):!1};$r.traverseAncerstors=kM;var OM=function(t){return function(e){var r=function(n){return n!==null&&n.target!==null&&n.target.matchesTag(t)(e)};return r.metaData=new IZ.Metadata(t,e),r}};$r.taggedConstraint=OM;var SZ=OM(AZ.NAMED_TAG);$r.namedConstraint=SZ;var EZ=function(t){return function(e){var r=null;if(e!==null)if(r=e.bindings[0],typeof t=="string"){var n=r.serviceIdentifier;return n===t}else{var i=e.bindings[0].implementationType;return t===i}return!1}};$r.typeConstraint=EZ});var LH=y(xH=>{"use strict";Object.defineProperty(xH,"__esModule",{value:!0});xH.BindingWhenSyntax=void 0;var Vr=TH(),Vt=bI(),DZ=function(){function t(e){this._binding=e}return t.prototype.when=function(e){return this._binding.constraint=e,new Vr.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(e){return this._binding.constraint=(0,Vt.namedConstraint)(e),new Vr.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){if(e===null)return!1;var r=e.target!==null&&!e.target.isNamed()&&!e.target.isTagged();return r},new Vr.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(e,r){return this._binding.constraint=(0,Vt.taggedConstraint)(e)(r),new Vr.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(r){return r!==null&&(0,Vt.typeConstraint)(e)(r.parentRequest)},new Vr.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(e){return this._binding.constraint=function(r){return r!==null&&(0,Vt.namedConstraint)(e)(r.parentRequest)},new Vr.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(e,r){return this._binding.constraint=function(n){return n!==null&&(0,Vt.taggedConstraint)(e)(r)(n.parentRequest)},new Vr.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(r){return r!==null&&(0,Vt.traverseAncerstors)(r,(0,Vt.typeConstraint)(e))},new Vr.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(r){return r!==null&&!(0,Vt.traverseAncerstors)(r,(0,Vt.typeConstraint)(e))},new Vr.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(r){return r!==null&&(0,Vt.traverseAncerstors)(r,(0,Vt.namedConstraint)(e))},new Vr.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(r){return r!==null&&!(0,Vt.traverseAncerstors)(r,(0,Vt.namedConstraint)(e))},new Vr.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(e,r){return this._binding.constraint=function(n){return n!==null&&(0,Vt.traverseAncerstors)(n,(0,Vt.taggedConstraint)(e)(r))},new Vr.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(e,r){return this._binding.constraint=function(n){return n!==null&&!(0,Vt.traverseAncerstors)(n,(0,Vt.taggedConstraint)(e)(r))},new Vr.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(r){return r!==null&&(0,Vt.traverseAncerstors)(r,e)},new Vr.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(r){return r!==null&&!(0,Vt.traverseAncerstors)(r,e)},new Vr.BindingOnSyntax(this._binding)},t}();xH.BindingWhenSyntax=DZ});var TH=y($H=>{"use strict";Object.defineProperty($H,"__esModule",{value:!0});$H.BindingOnSyntax=void 0;var FM=LH(),CZ=function(){function t(e){this._binding=e}return t.prototype.onActivation=function(e){return this._binding.onActivation=e,new FM.BindingWhenSyntax(this._binding)},t.prototype.onDeactivation=function(e){return this._binding.onDeactivation=e,new FM.BindingWhenSyntax(this._binding)},t}();$H.BindingOnSyntax=CZ});var wI=y(RH=>{"use strict";Object.defineProperty(RH,"__esModule",{value:!0});RH.BindingWhenOnSyntax=void 0;var PZ=TH(),xZ=LH(),LZ=function(){function t(e){this._binding=e,this._bindingWhenSyntax=new xZ.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new PZ.BindingOnSyntax(this._binding)}return t.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},t.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(e,r){return this._bindingWhenSyntax.whenTargetTagged(e,r)},t.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},t.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},t.prototype.whenParentTagged=function(e,r){return this._bindingWhenSyntax.whenParentTagged(e,r)},t.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},t.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},t.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},t.prototype.whenAnyAncestorTagged=function(e,r){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,r)},t.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},t.prototype.whenNoAncestorTagged=function(e,r){return this._bindingWhenSyntax.whenNoAncestorTagged(e,r)},t.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},t.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},t.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},t.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},t}();RH.BindingWhenOnSyntax=LZ});var NM=y(MH=>{"use strict";Object.defineProperty(MH,"__esModule",{value:!0});MH.BindingInSyntax=void 0;var _I=gi(),AI=wI(),TZ=function(){function t(e){this._binding=e}return t.prototype.inRequestScope=function(){return this._binding.scope=_I.BindingScopeEnum.Request,new AI.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=_I.BindingScopeEnum.Singleton,new AI.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=_I.BindingScopeEnum.Transient,new AI.BindingWhenOnSyntax(this._binding)},t}();MH.BindingInSyntax=TZ});var BM=y(kH=>{"use strict";Object.defineProperty(kH,"__esModule",{value:!0});kH.BindingInWhenOnSyntax=void 0;var $Z=NM(),RZ=TH(),MZ=LH(),kZ=function(){function t(e){this._binding=e,this._bindingWhenSyntax=new MZ.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new RZ.BindingOnSyntax(this._binding),this._bindingInSyntax=new $Z.BindingInSyntax(e)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},t.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(e,r){return this._bindingWhenSyntax.whenTargetTagged(e,r)},t.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},t.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},t.prototype.whenParentTagged=function(e,r){return this._bindingWhenSyntax.whenParentTagged(e,r)},t.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},t.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},t.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},t.prototype.whenAnyAncestorTagged=function(e,r){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,r)},t.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},t.prototype.whenNoAncestorTagged=function(e,r){return this._bindingWhenSyntax.whenNoAncestorTagged(e,r)},t.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},t.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},t.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},t.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},t}();kH.BindingInWhenOnSyntax=kZ});var qM=y(Ki=>{"use strict";var OZ=Ki&&Ki.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),FZ=Ki&&Ki.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),NZ=Ki&&Ki.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&OZ(e,t,r);return FZ(e,t),e};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.BindingToSyntax=void 0;var UM=NZ(Lr()),Gr=gi(),jM=BM(),nl=wI(),BZ=function(){function t(e){this._binding=e}return t.prototype.to=function(e){return this._binding.type=Gr.BindingTypeEnum.Instance,this._binding.implementationType=e,new jM.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+UM.INVALID_TO_SELF_VALUE);var e=this._binding.serviceIdentifier;return this.to(e)},t.prototype.toConstantValue=function(e){return this._binding.type=Gr.BindingTypeEnum.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=Gr.BindingScopeEnum.Singleton,new nl.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(e){return this._binding.type=Gr.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new jM.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(e){return this._binding.type=Gr.BindingTypeEnum.Constructor,this._binding.implementationType=e,this._binding.scope=Gr.BindingScopeEnum.Singleton,new nl.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(e){return this._binding.type=Gr.BindingTypeEnum.Factory,this._binding.factory=e,this._binding.scope=Gr.BindingScopeEnum.Singleton,new nl.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(e){if(typeof e!="function")throw new Error(UM.INVALID_FUNCTION_BINDING);var r=this.toConstantValue(e);return this._binding.type=Gr.BindingTypeEnum.Function,this._binding.scope=Gr.BindingScopeEnum.Singleton,r},t.prototype.toAutoFactory=function(e){return this._binding.type=Gr.BindingTypeEnum.Factory,this._binding.factory=function(r){var n=function(){return r.container.get(e)};return n},this._binding.scope=Gr.BindingScopeEnum.Singleton,new nl.BindingWhenOnSyntax(this._binding)},t.prototype.toAutoNamedFactory=function(e){return this._binding.type=Gr.BindingTypeEnum.Factory,this._binding.factory=function(r){return function(n){return r.container.getNamed(e,n)}},new nl.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(e){return this._binding.type=Gr.BindingTypeEnum.Provider,this._binding.provider=e,this._binding.scope=Gr.BindingScopeEnum.Singleton,new nl.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(e){this.toDynamicValue(function(r){return r.container.get(e)})},t}();Ki.BindingToSyntax=BZ});var WM=y(OH=>{"use strict";Object.defineProperty(OH,"__esModule",{value:!0});OH.ContainerSnapshot=void 0;var UZ=function(){function t(){}return t.of=function(e,r,n,i,o){var s=new t;return s.bindings=e,s.middleware=r,s.deactivations=i,s.activations=n,s.moduleActivationStore=o,s},t}();OH.ContainerSnapshot=UZ});var VM=y(FH=>{"use strict";Object.defineProperty(FH,"__esModule",{value:!0});FH.isClonable=void 0;function jZ(t){return typeof t=="object"&&t!==null&&"clone"in t&&typeof t.clone=="function"}FH.isClonable=jZ});var II=y(zi=>{"use strict";var qZ=zi&&zi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),WZ=zi&&zi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),VZ=zi&&zi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&qZ(e,t,r);return WZ(e,t),e};Object.defineProperty(zi,"__esModule",{value:!0});zi.Lookup=void 0;var mu=VZ(Lr()),GZ=VM(),KZ=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(e,r){if(e==null)throw new Error(mu.NULL_ARGUMENT);if(r==null)throw new Error(mu.NULL_ARGUMENT);var n=this._map.get(e);n!==void 0?n.push(r):this._map.set(e,[r])},t.prototype.get=function(e){if(e==null)throw new Error(mu.NULL_ARGUMENT);var r=this._map.get(e);if(r!==void 0)return r;throw new Error(mu.KEY_NOT_FOUND)},t.prototype.remove=function(e){if(e==null)throw new Error(mu.NULL_ARGUMENT);if(!this._map.delete(e))throw new Error(mu.KEY_NOT_FOUND)},t.prototype.removeIntersection=function(e){var r=this;this.traverse(function(n,i){var o=e.hasKey(n)?e.get(n):void 0;if(o!==void 0){var s=i.filter(function(a){return!o.some(function(u){return a===u})});r._setValue(n,s)}})},t.prototype.removeByCondition=function(e){var r=this,n=[];return this._map.forEach(function(i,o){for(var s=[],a=0,u=i;a<u.length;a++){var c=u[a],l=e(c);l?n.push(c):s.push(c)}r._setValue(o,s)}),n},t.prototype.hasKey=function(e){if(e==null)throw new Error(mu.NULL_ARGUMENT);return this._map.has(e)},t.prototype.clone=function(){var e=new t;return this._map.forEach(function(r,n){r.forEach(function(i){return e.add(n,(0,GZ.isClonable)(i)?i.clone():i)})}),e},t.prototype.traverse=function(e){this._map.forEach(function(r,n){e(n,r)})},t.prototype._setValue=function(e,r){r.length>0?this._map.set(e,r):this._map.delete(e)},t}();zi.Lookup=KZ});var KM=y(NH=>{"use strict";Object.defineProperty(NH,"__esModule",{value:!0});NH.ModuleActivationStore=void 0;var GM=II(),zZ=function(){function t(){this._map=new Map}return t.prototype.remove=function(e){if(this._map.has(e)){var r=this._map.get(e);return this._map.delete(e),r}return this._getEmptyHandlersStore()},t.prototype.addDeactivation=function(e,r,n){this._getModuleActivationHandlers(e).onDeactivations.add(r,n)},t.prototype.addActivation=function(e,r,n){this._getModuleActivationHandlers(e).onActivations.add(r,n)},t.prototype.clone=function(){var e=new t;return this._map.forEach(function(r,n){e._map.set(n,{onActivations:r.onActivations.clone(),onDeactivations:r.onDeactivations.clone()})}),e},t.prototype._getModuleActivationHandlers=function(e){var r=this._map.get(e);return r===void 0&&(r=this._getEmptyHandlersStore(),this._map.set(e,r)),r},t.prototype._getEmptyHandlersStore=function(){var e={onActivations:new GM.Lookup,onDeactivations:new GM.Lookup};return e},t}();NH.ModuleActivationStore=zZ});var XM=y(tr=>{"use strict";var UH=tr&&tr.__assign||function(){return UH=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},UH.apply(this,arguments)},XZ=tr&&tr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),JZ=tr&&tr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),zM=tr&&tr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&XZ(e,t,r);return JZ(e,t),e},Un=tr&&tr.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(p){s(p)}}function u(l){try{c(n.throw(l))}catch(p){s(p)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},jn=tr&&tr.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},YZ=tr&&tr.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(tr,"__esModule",{value:!0});tr.Container=void 0;var QZ=XR(),yi=zM(Lr()),il=gi(),gu=zM(Mt()),ZZ=eI(),BH=lI(),eee=MM(),tee=qM(),Hu=Bd(),ree=qs(),nee=Zc(),iee=WM(),jd=II(),oee=KM(),see=function(){function t(e){var r=e||{};if(typeof r!="object")throw new Error(""+yi.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(r.defaultScope===void 0)r.defaultScope=il.BindingScopeEnum.Transient;else if(r.defaultScope!==il.BindingScopeEnum.Singleton&&r.defaultScope!==il.BindingScopeEnum.Transient&&r.defaultScope!==il.BindingScopeEnum.Request)throw new Error(""+yi.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(r.autoBindInjectable===void 0)r.autoBindInjectable=!1;else if(typeof r.autoBindInjectable!="boolean")throw new Error(""+yi.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(r.skipBaseClassChecks===void 0)r.skipBaseClassChecks=!1;else if(typeof r.skipBaseClassChecks!="boolean")throw new Error(""+yi.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:r.autoBindInjectable,defaultScope:r.defaultScope,skipBaseClassChecks:r.skipBaseClassChecks},this.id=(0,ree.id)(),this._bindingDictionary=new jd.Lookup,this._snapshots=[],this._middleware=null,this._activations=new jd.Lookup,this._deactivations=new jd.Lookup,this.parent=null,this._metadataReader=new ZZ.MetadataReader,this._moduleActivationStore=new oee.ModuleActivationStore}return t.merge=function(e,r){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var o=new t,s=YZ([e,r],n,!0).map(function(c){return(0,BH.getBindingDictionary)(c)}),a=(0,BH.getBindingDictionary)(o);function u(c,l){c.traverse(function(p,f){f.forEach(function(m){l.add(m.serviceIdentifier,m.clone())})})}return s.forEach(function(c){u(c,a)}),o},t.prototype.load=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var n=this._getContainerModuleHelpersFactory(),i=0,o=e;i<o.length;i++){var s=o[i],a=n(s.id);s.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction,a.unbindAsyncFunction,a.onActivationFunction,a.onDeactivationFunction)}},t.prototype.loadAsync=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Un(this,void 0,void 0,function(){var n,i,o,s,a;return jn(this,function(u){switch(u.label){case 0:n=this._getContainerModuleHelpersFactory(),i=0,o=e,u.label=1;case 1:return i<o.length?(s=o[i],a=n(s.id),[4,s.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction,a.unbindAsyncFunction,a.onActivationFunction,a.onDeactivationFunction)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t.prototype.unload=function(){for(var e=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];r.forEach(function(i){var o=e._removeModuleBindings(i.id);e._deactivateSingletons(o),e._removeModuleHandlers(i.id)})},t.prototype.unloadAsync=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Un(this,void 0,void 0,function(){var n,i,o,s;return jn(this,function(a){switch(a.label){case 0:n=0,i=e,a.label=1;case 1:return n<i.length?(o=i[n],s=this._removeModuleBindings(o.id),[4,this._deactivateSingletonsAsync(s)]):[3,4];case 2:a.sent(),this._removeModuleHandlers(o.id),a.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.bind=function(e){var r=this.options.defaultScope||il.BindingScopeEnum.Transient,n=new QZ.Binding(e,r);return this._bindingDictionary.add(e,n),new tee.BindingToSyntax(n)},t.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},t.prototype.rebindAsync=function(e){return Un(this,void 0,void 0,function(){return jn(this,function(r){switch(r.label){case 0:return[4,this.unbindAsync(e)];case 1:return r.sent(),[2,this.bind(e)]}})})},t.prototype.unbind=function(e){if(this._bindingDictionary.hasKey(e)){var r=this._bindingDictionary.get(e);this._deactivateSingletons(r)}this._removeServiceFromDictionary(e)},t.prototype.unbindAsync=function(e){return Un(this,void 0,void 0,function(){var r;return jn(this,function(n){switch(n.label){case 0:return this._bindingDictionary.hasKey(e)?(r=this._bindingDictionary.get(e),[4,this._deactivateSingletonsAsync(r)]):[3,2];case 1:n.sent(),n.label=2;case 2:return this._removeServiceFromDictionary(e),[2]}})})},t.prototype.unbindAll=function(){var e=this;this._bindingDictionary.traverse(function(r,n){e._deactivateSingletons(n)}),this._bindingDictionary=new jd.Lookup},t.prototype.unbindAllAsync=function(){return Un(this,void 0,void 0,function(){var e,r=this;return jn(this,function(n){switch(n.label){case 0:return e=[],this._bindingDictionary.traverse(function(i,o){e.push(r._deactivateSingletonsAsync(o))}),[4,Promise.all(e)];case 1:return n.sent(),this._bindingDictionary=new jd.Lookup,[2]}})})},t.prototype.onActivation=function(e,r){this._activations.add(e,r)},t.prototype.onDeactivation=function(e,r){this._deactivations.add(e,r)},t.prototype.isBound=function(e){var r=this._bindingDictionary.hasKey(e);return!r&&this.parent&&(r=this.parent.isBound(e)),r},t.prototype.isCurrentBound=function(e){return this._bindingDictionary.hasKey(e)},t.prototype.isBoundNamed=function(e,r){return this.isBoundTagged(e,gu.NAMED_TAG,r)},t.prototype.isBoundTagged=function(e,r,n){var i=!1;if(this._bindingDictionary.hasKey(e)){var o=this._bindingDictionary.get(e),s=(0,BH.createMockRequest)(this,e,r,n);i=o.some(function(a){return a.constraint(s)})}return!i&&this.parent&&(i=this.parent.isBoundTagged(e,r,n)),i},t.prototype.snapshot=function(){this._snapshots.push(iee.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))},t.prototype.restore=function(){var e=this._snapshots.pop();if(e===void 0)throw new Error(yi.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=e.bindings,this._activations=e.activations,this._deactivations=e.deactivations,this._middleware=e.middleware,this._moduleActivationStore=e.moduleActivationStore},t.prototype.createChild=function(e){var r=new t(e||this.options);return r.parent=this,r},t.prototype.applyMiddleware=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce(function(i,o){return o(i)},n)},t.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},t.prototype.get=function(e){var r=this._getNotAllArgs(e,!1);return this._getButThrowIfAsync(r)},t.prototype.getAsync=function(e){return Un(this,void 0,void 0,function(){var r;return jn(this,function(n){return r=this._getNotAllArgs(e,!1),[2,this._get(r)]})})},t.prototype.getTagged=function(e,r,n){var i=this._getNotAllArgs(e,!1,r,n);return this._getButThrowIfAsync(i)},t.prototype.getTaggedAsync=function(e,r,n){return Un(this,void 0,void 0,function(){var i;return jn(this,function(o){return i=this._getNotAllArgs(e,!1,r,n),[2,this._get(i)]})})},t.prototype.getNamed=function(e,r){return this.getTagged(e,gu.NAMED_TAG,r)},t.prototype.getNamedAsync=function(e,r){return this.getTaggedAsync(e,gu.NAMED_TAG,r)},t.prototype.getAll=function(e){var r=this._getAllArgs(e);return this._getButThrowIfAsync(r)},t.prototype.getAllAsync=function(e){var r=this._getAllArgs(e);return this._getAll(r)},t.prototype.getAllTagged=function(e,r,n){var i=this._getNotAllArgs(e,!0,r,n);return this._getButThrowIfAsync(i)},t.prototype.getAllTaggedAsync=function(e,r,n){var i=this._getNotAllArgs(e,!0,r,n);return this._getAll(i)},t.prototype.getAllNamed=function(e,r){return this.getAllTagged(e,gu.NAMED_TAG,r)},t.prototype.getAllNamedAsync=function(e,r){return this.getAllTaggedAsync(e,gu.NAMED_TAG,r)},t.prototype.resolve=function(e){var r=this.isBound(e);r||this.bind(e).toSelf();var n=this.get(e);return r||this.unbind(e),n},t.prototype._preDestroy=function(e,r){if(Reflect.hasMetadata(gu.PRE_DESTROY,e)){var n=Reflect.getMetadata(gu.PRE_DESTROY,e);return r[n.value]()}},t.prototype._removeModuleHandlers=function(e){var r=this._moduleActivationStore.remove(e);this._activations.removeIntersection(r.onActivations),this._deactivations.removeIntersection(r.onDeactivations)},t.prototype._removeModuleBindings=function(e){return this._bindingDictionary.removeByCondition(function(r){return r.moduleId===e})},t.prototype._deactivate=function(e,r){var n=this,i=Object.getPrototypeOf(r).constructor;try{if(this._deactivations.hasKey(e.serviceIdentifier)){var o=this._deactivateContainer(r,this._deactivations.get(e.serviceIdentifier).values());if((0,Hu.isPromise)(o))return this._handleDeactivationError(o.then(function(){return n._propagateContainerDeactivationThenBindingAndPreDestroyAsync(e,r,i)}),i)}var s=this._propagateContainerDeactivationThenBindingAndPreDestroy(e,r,i);if((0,Hu.isPromise)(s))return this._handleDeactivationError(s,i)}catch(a){throw new Error(yi.ON_DEACTIVATION_ERROR(i.name,a.message))}},t.prototype._handleDeactivationError=function(e,r){return Un(this,void 0,void 0,function(){var n;return jn(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e];case 1:return i.sent(),[3,3];case 2:throw n=i.sent(),new Error(yi.ON_DEACTIVATION_ERROR(r.name,n.message));case 3:return[2]}})})},t.prototype._deactivateContainer=function(e,r){for(var n=this,i=r.next();i.value;){var o=i.value(e);if((0,Hu.isPromise)(o))return o.then(function(){return n._deactivateContainerAsync(e,r)});i=r.next()}},t.prototype._deactivateContainerAsync=function(e,r){return Un(this,void 0,void 0,function(){var n;return jn(this,function(i){switch(i.label){case 0:n=r.next(),i.label=1;case 1:return n.value?[4,n.value(e)]:[3,3];case 2:return i.sent(),n=r.next(),[3,1];case 3:return[2]}})})},t.prototype._getContainerModuleHelpersFactory=function(){var e=this,r=function(l,p){l._binding.moduleId=p},n=function(l){return function(p){var f=e.bind(p);return r(f,l),f}},i=function(){return function(l){return e.unbind(l)}},o=function(){return function(l){return e.unbindAsync(l)}},s=function(){return function(l){return e.isBound(l)}},a=function(l){return function(p){var f=e.rebind(p);return r(f,l),f}},u=function(l){return function(p,f){e._moduleActivationStore.addActivation(l,p,f),e.onActivation(p,f)}},c=function(l){return function(p,f){e._moduleActivationStore.addDeactivation(l,p,f),e.onDeactivation(p,f)}};return function(l){return{bindFunction:n(l),isboundFunction:s(),onActivationFunction:u(l),onDeactivationFunction:c(l),rebindFunction:a(l),unbindFunction:i(),unbindAsyncFunction:o()}}},t.prototype._getAll=function(e){return Promise.all(this._get(e))},t.prototype._get=function(e){var r=UH(UH({},e),{contextInterceptor:function(i){return i},targetType:il.TargetTypeEnum.Variable});if(this._middleware){var n=this._middleware(r);if(n==null)throw new Error(yi.INVALID_MIDDLEWARE_RETURN);return n}return this._planAndResolve()(r)},t.prototype._getButThrowIfAsync=function(e){var r=this._get(e);if((0,Hu.isPromiseOrContainsPromise)(r))throw new Error(yi.LAZY_IN_SYNC(e.serviceIdentifier));return r},t.prototype._getAllArgs=function(e){var r={avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:e};return r},t.prototype._getNotAllArgs=function(e,r,n,i){var o={avoidConstraints:!1,isMultiInject:r,serviceIdentifier:e,key:n,value:i};return o},t.prototype._planAndResolve=function(){var e=this;return function(r){var n=(0,BH.plan)(e._metadataReader,e,r.isMultiInject,r.targetType,r.serviceIdentifier,r.key,r.value,r.avoidConstraints);n=r.contextInterceptor(n);var i=(0,eee.resolve)(n);return i}},t.prototype._deactivateIfSingleton=function(e){var r=this;if(e.activated)return(0,Hu.isPromise)(e.cache)?e.cache.then(function(n){return r._deactivate(e,n)}):this._deactivate(e,e.cache)},t.prototype._deactivateSingletons=function(e){for(var r=0,n=e;r<n.length;r++){var i=n[r],o=this._deactivateIfSingleton(i);if((0,Hu.isPromise)(o))throw new Error(yi.ASYNC_UNBIND_REQUIRED)}},t.prototype._deactivateSingletonsAsync=function(e){return Un(this,void 0,void 0,function(){var r=this;return jn(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(i){return r._deactivateIfSingleton(i)}))];case 1:return n.sent(),[2]}})})},t.prototype._propagateContainerDeactivationThenBindingAndPreDestroy=function(e,r,n){return this.parent?this._deactivate.bind(this.parent)(e,r):this._bindingDeactivationAndPreDestroy(e,r,n)},t.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync=function(e,r,n){return Un(this,void 0,void 0,function(){return jn(this,function(i){switch(i.label){case 0:return this.parent?[4,this._deactivate.bind(this.parent)(e,r)]:[3,2];case 1:return i.sent(),[3,4];case 2:return[4,this._bindingDeactivationAndPreDestroyAsync(e,r,n)];case 3:i.sent(),i.label=4;case 4:return[2]}})})},t.prototype._removeServiceFromDictionary=function(e){try{this._bindingDictionary.remove(e)}catch{throw new Error(yi.CANNOT_UNBIND+" "+(0,nee.getServiceIdentifierAsString)(e))}},t.prototype._bindingDeactivationAndPreDestroy=function(e,r,n){var i=this;if(typeof e.onDeactivation=="function"){var o=e.onDeactivation(r);if((0,Hu.isPromise)(o))return o.then(function(){return i._preDestroy(n,r)})}return this._preDestroy(n,r)},t.prototype._bindingDeactivationAndPreDestroyAsync=function(e,r,n){return Un(this,void 0,void 0,function(){return jn(this,function(i){switch(i.label){case 0:return typeof e.onDeactivation!="function"?[3,2]:[4,e.onDeactivation(r)];case 1:i.sent(),i.label=2;case 2:return[4,this._preDestroy(n,r)];case 3:return i.sent(),[2]}})})},t}();tr.Container=see});var YM=y(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});ol.AsyncContainerModule=ol.ContainerModule=void 0;var JM=qs(),aee=function(){function t(e){this.id=(0,JM.id)(),this.registry=e}return t}();ol.ContainerModule=aee;var uee=function(){function t(e){this.id=(0,JM.id)(),this.registry=e}return t}();ol.AsyncContainerModule=uee});var QM=y(jH=>{"use strict";Object.defineProperty(jH,"__esModule",{value:!0});jH.getFirstArrayDuplicate=void 0;function cee(t){for(var e=new Set,r=0,n=t;r<n.length;r++){var i=n[r];if(e.has(i))return i;e.add(i)}}jH.getFirstArrayDuplicate=cee});var zo=y(Rr=>{"use strict";var lee=Rr&&Rr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),pee=Rr&&Rr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ek=Rr&&Rr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&lee(e,t,r);return pee(e,t),e};Object.defineProperty(Rr,"__esModule",{value:!0});Rr.createTaggedDecorator=Rr.tagProperty=Rr.tagParameter=Rr.decorate=void 0;var qH=ek(Lr()),tk=ek(Mt()),fee=QM();function dee(t){return t.prototype!==void 0}function hee(t){if(t!==void 0)throw new Error(qH.INVALID_DECORATOR_OPERATION)}function rk(t,e,r,n){hee(e),ik(tk.TAGGED,t,r.toString(),n)}Rr.tagParameter=rk;function nk(t,e,r){if(dee(t))throw new Error(qH.INVALID_DECORATOR_OPERATION);ik(tk.TAGGED_PROP,t.constructor,e,r)}Rr.tagProperty=nk;function mee(t){var e=[];if(Array.isArray(t)){e=t;var r=(0,fee.getFirstArrayDuplicate)(e.map(function(n){return n.key}));if(r!==void 0)throw new Error(qH.DUPLICATED_METADATA+" "+r.toString())}else e=[t];return e}function ik(t,e,r,n){var i=mee(n),o={};Reflect.hasOwnMetadata(t,e)&&(o=Reflect.getMetadata(t,e));var s=o[r];if(s===void 0)s=[];else for(var a=function(p){if(i.some(function(f){return f.key===p.key}))throw new Error(qH.DUPLICATED_METADATA+" "+p.key.toString())},u=0,c=s;u<c.length;u++){var l=c[u];a(l)}s.push.apply(s,i),o[r]=s,Reflect.defineMetadata(t,o,e)}function gee(t){return function(e,r,n){typeof n=="number"?rk(e,r,n,t):nk(e,r,t)}}Rr.createTaggedDecorator=gee;function ZM(t,e){Reflect.decorate(t,e)}function Hee(t,e){return function(r,n){e(r,n,t)}}function yee(t,e,r){typeof r=="number"?ZM([Hee(r,t)],e):typeof r=="string"?Reflect.decorate([t],e,r):ZM([t],e)}Rr.decorate=yee});var sk=y(Xi=>{"use strict";var vee=Xi&&Xi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),bee=Xi&&Xi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ok=Xi&&Xi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&vee(e,t,r);return bee(e,t),e};Object.defineProperty(Xi,"__esModule",{value:!0});Xi.injectable=void 0;var wee=ok(Lr()),SI=ok(Mt());function _ee(){return function(t){if(Reflect.hasOwnMetadata(SI.PARAM_TYPES,t))throw new Error(wee.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(SI.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(SI.PARAM_TYPES,e,t),t}}Xi.injectable=_ee});var ak=y(WH=>{"use strict";Object.defineProperty(WH,"__esModule",{value:!0});WH.tagged=void 0;var Aee=Hi(),Iee=zo();function See(t,e){return(0,Iee.createTaggedDecorator)(new Aee.Metadata(t,e))}WH.tagged=See});var uk=y(Ji=>{"use strict";var Eee=Ji&&Ji.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Dee=Ji&&Ji.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Cee=Ji&&Ji.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Eee(e,t,r);return Dee(e,t),e};Object.defineProperty(Ji,"__esModule",{value:!0});Ji.named=void 0;var Pee=Cee(Mt()),xee=Hi(),Lee=zo();function Tee(t){return(0,Lee.createTaggedDecorator)(new xee.Metadata(Pee.NAMED_TAG,t))}Ji.named=Tee});var EI=y(VH=>{"use strict";Object.defineProperty(VH,"__esModule",{value:!0});VH.injectBase=void 0;var $ee=Lr(),Ree=Hi(),Mee=zo();function kee(t){return function(e){return function(r,n,i){if(e===void 0){var o=typeof r=="function"?r.name:r.constructor.name;throw new Error((0,$ee.UNDEFINED_INJECT_ANNOTATION)(o))}return(0,Mee.createTaggedDecorator)(new Ree.Metadata(t,e))(r,n,i)}}}VH.injectBase=kee});var ck=y(Yi=>{"use strict";var Oee=Yi&&Yi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Fee=Yi&&Yi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Nee=Yi&&Yi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Oee(e,t,r);return Fee(e,t),e};Object.defineProperty(Yi,"__esModule",{value:!0});Yi.inject=void 0;var Bee=Nee(Mt()),Uee=EI(),jee=(0,Uee.injectBase)(Bee.INJECT_TAG);Yi.inject=jee});var lk=y(Qi=>{"use strict";var qee=Qi&&Qi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Wee=Qi&&Qi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Vee=Qi&&Qi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&qee(e,t,r);return Wee(e,t),e};Object.defineProperty(Qi,"__esModule",{value:!0});Qi.optional=void 0;var Gee=Vee(Mt()),Kee=Hi(),zee=zo();function Xee(){return(0,zee.createTaggedDecorator)(new Kee.Metadata(Gee.OPTIONAL_TAG,!0))}Qi.optional=Xee});var pk=y(Zi=>{"use strict";var Jee=Zi&&Zi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Yee=Zi&&Zi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Qee=Zi&&Zi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Jee(e,t,r);return Yee(e,t),e};Object.defineProperty(Zi,"__esModule",{value:!0});Zi.unmanaged=void 0;var Zee=Qee(Mt()),ete=Hi(),tte=zo();function rte(){return function(t,e,r){var n=new ete.Metadata(Zee.UNMANAGED_TAG,!0);(0,tte.tagParameter)(t,e,r,n)}}Zi.unmanaged=rte});var fk=y(eo=>{"use strict";var nte=eo&&eo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ite=eo&&eo.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ote=eo&&eo.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&nte(e,t,r);return ite(e,t),e};Object.defineProperty(eo,"__esModule",{value:!0});eo.multiInject=void 0;var ste=ote(Mt()),ate=EI(),ute=(0,ate.injectBase)(ste.MULTI_INJECT_TAG);eo.multiInject=ute});var dk=y(to=>{"use strict";var cte=to&&to.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),lte=to&&to.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),pte=to&&to.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&cte(e,t,r);return lte(e,t),e};Object.defineProperty(to,"__esModule",{value:!0});to.targetName=void 0;var fte=pte(Mt()),dte=Hi(),hte=zo();function mte(t){return function(e,r,n){var i=new dte.Metadata(fte.NAME_TAG,t);(0,hte.tagParameter)(e,r,n,i)}}to.targetName=mte});var DI=y(GH=>{"use strict";Object.defineProperty(GH,"__esModule",{value:!0});GH.propertyEventDecorator=void 0;var gte=Hi();function Hte(t,e){return function(){return function(r,n){var i=new gte.Metadata(t,n);if(Reflect.hasOwnMetadata(t,r.constructor))throw new Error(e);Reflect.defineMetadata(t,i,r.constructor)}}}GH.propertyEventDecorator=Hte});var mk=y(ro=>{"use strict";var yte=ro&&ro.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),vte=ro&&ro.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),hk=ro&&ro.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&yte(e,t,r);return vte(e,t),e};Object.defineProperty(ro,"__esModule",{value:!0});ro.postConstruct=void 0;var bte=hk(Lr()),wte=hk(Mt()),_te=DI(),Ate=(0,_te.propertyEventDecorator)(wte.POST_CONSTRUCT,bte.MULTIPLE_POST_CONSTRUCT_METHODS);ro.postConstruct=Ate});var Hk=y(no=>{"use strict";var Ite=no&&no.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ste=no&&no.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),gk=no&&no.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Ite(e,t,r);return Ste(e,t),e};Object.defineProperty(no,"__esModule",{value:!0});no.preDestroy=void 0;var Ete=gk(Lr()),Dte=gk(Mt()),Cte=DI(),Pte=(0,Cte.propertyEventDecorator)(Dte.PRE_DESTROY,Ete.MULTIPLE_PRE_DESTROY_METHODS);no.preDestroy=Pte});var yk=y(KH=>{"use strict";Object.defineProperty(KH,"__esModule",{value:!0});KH.interfaces=void 0;var CI;CI||(CI={});KH.interfaces=CI});var J=y(pe=>{"use strict";var xte=pe&&pe.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Lte=pe&&pe.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Tte=pe&&pe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&xte(e,t,r);return Lte(e,t),e};Object.defineProperty(pe,"__esModule",{value:!0});pe.multiBindToService=pe.getServiceIdentifierAsString=pe.typeConstraint=pe.namedConstraint=pe.taggedConstraint=pe.traverseAncerstors=pe.decorate=pe.interfaces=pe.id=pe.MetadataReader=pe.preDestroy=pe.postConstruct=pe.targetName=pe.multiInject=pe.unmanaged=pe.optional=pe.LazyServiceIdentifer=pe.inject=pe.named=pe.tagged=pe.injectable=pe.createTaggedDecorator=pe.ContainerModule=pe.AsyncContainerModule=pe.TargetTypeEnum=pe.BindingTypeEnum=pe.BindingScopeEnum=pe.Container=pe.METADATA_KEY=void 0;var $te=Tte(Mt());pe.METADATA_KEY=$te;var Rte=XM();Object.defineProperty(pe,"Container",{enumerable:!0,get:function(){return Rte.Container}});var PI=gi();Object.defineProperty(pe,"BindingScopeEnum",{enumerable:!0,get:function(){return PI.BindingScopeEnum}});Object.defineProperty(pe,"BindingTypeEnum",{enumerable:!0,get:function(){return PI.BindingTypeEnum}});Object.defineProperty(pe,"TargetTypeEnum",{enumerable:!0,get:function(){return PI.TargetTypeEnum}});var vk=YM();Object.defineProperty(pe,"AsyncContainerModule",{enumerable:!0,get:function(){return vk.AsyncContainerModule}});Object.defineProperty(pe,"ContainerModule",{enumerable:!0,get:function(){return vk.ContainerModule}});var Mte=zo();Object.defineProperty(pe,"createTaggedDecorator",{enumerable:!0,get:function(){return Mte.createTaggedDecorator}});var kte=sk();Object.defineProperty(pe,"injectable",{enumerable:!0,get:function(){return kte.injectable}});var Ote=ak();Object.defineProperty(pe,"tagged",{enumerable:!0,get:function(){return Ote.tagged}});var Fte=uk();Object.defineProperty(pe,"named",{enumerable:!0,get:function(){return Fte.named}});var Nte=ck();Object.defineProperty(pe,"inject",{enumerable:!0,get:function(){return Nte.inject}});var Bte=rI();Object.defineProperty(pe,"LazyServiceIdentifer",{enumerable:!0,get:function(){return Bte.LazyServiceIdentifer}});var Ute=lk();Object.defineProperty(pe,"optional",{enumerable:!0,get:function(){return Ute.optional}});var jte=pk();Object.defineProperty(pe,"unmanaged",{enumerable:!0,get:function(){return jte.unmanaged}});var qte=fk();Object.defineProperty(pe,"multiInject",{enumerable:!0,get:function(){return qte.multiInject}});var Wte=dk();Object.defineProperty(pe,"targetName",{enumerable:!0,get:function(){return Wte.targetName}});var Vte=mk();Object.defineProperty(pe,"postConstruct",{enumerable:!0,get:function(){return Vte.postConstruct}});var Gte=Hk();Object.defineProperty(pe,"preDestroy",{enumerable:!0,get:function(){return Gte.preDestroy}});var Kte=eI();Object.defineProperty(pe,"MetadataReader",{enumerable:!0,get:function(){return Kte.MetadataReader}});var zte=qs();Object.defineProperty(pe,"id",{enumerable:!0,get:function(){return zte.id}});var Xte=yk();Object.defineProperty(pe,"interfaces",{enumerable:!0,get:function(){return Xte.interfaces}});var Jte=zo();Object.defineProperty(pe,"decorate",{enumerable:!0,get:function(){return Jte.decorate}});var zH=bI();Object.defineProperty(pe,"traverseAncerstors",{enumerable:!0,get:function(){return zH.traverseAncerstors}});Object.defineProperty(pe,"taggedConstraint",{enumerable:!0,get:function(){return zH.taggedConstraint}});Object.defineProperty(pe,"namedConstraint",{enumerable:!0,get:function(){return zH.namedConstraint}});Object.defineProperty(pe,"typeConstraint",{enumerable:!0,get:function(){return zH.typeConstraint}});var Yte=Zc();Object.defineProperty(pe,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return Yte.getServiceIdentifierAsString}});var Qte=dI();Object.defineProperty(pe,"multiBindToService",{enumerable:!0,get:function(){return Qte.multiBindToService}})});var Ok=y(kk=>{var Mk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");kk.encode=function(t){if(0<=t&&t<Mk.length)return Mk[t];throw new TypeError("Must be between 0 and 63: "+t)}});var kI=y(Bk=>{var ore=Ok(),Fk=5,Nk=1<<Fk,sre=Nk-1,are=Nk;function ure(t){return t<0?(-t<<1)+1:(t<<1)+0}Bk.encode=function(e){let r="",n,i=ure(e);do n=i&sre,i>>>=Fk,i>0&&(n|=are),r+=ore.encode(n);while(i>0);return r}});var jk=y((eIe,Uk)=>{"use strict";Uk.exports=typeof URL=="function"?URL:require("url").URL});var Jd=y(oo=>{var Gs=jk();function cre(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}oo.getArg=cre;var Wk=function(){return!("__proto__"in Object.create(null))}();function Vk(t){return t}function lre(t){return Gk(t)?"$"+t:t}oo.toSetString=Wk?Vk:lre;function pre(t){return Gk(t)?t.slice(1):t}oo.fromSetString=Wk?Vk:pre;function Gk(t){if(!t)return!1;let e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(let r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}function qk(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}function fre(t,e){let r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=qk(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:qk(t.name,e.name)}oo.compareByGeneratedPositionsInflated=fre;function dre(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}oo.parseSourceMapInput=dre;var FI="http:",zd=`${FI}//host`;function NI(t){return e=>{let r=al(e),n=BI(e),i=new Gs(e,n);t(i);let o=i.toString();return r==="absolute"?o:r==="scheme-relative"?o.slice(FI.length):r==="path-absolute"?o.slice(zd.length):UI(n,o)}}function Vs(t,e){return new Gs(t,e).toString()}function hre(t,e){let r=0;do{let n=t+r++;if(e.indexOf(n)===-1)return n}while(!0)}function BI(t){let e=t.split("..").length-1,r=hre("p",t),n=`${zd}/`;for(let i=0;i<e;i++)n+=`${r}/`;return n}var mre=/^[A-Za-z0-9\+\-\.]+:/;function al(t){return t[0]==="/"?t[1]==="/"?"scheme-relative":"path-absolute":mre.test(t)?"absolute":"path-relative"}function UI(t,e){typeof t=="string"&&(t=new Gs(t)),typeof e=="string"&&(e=new Gs(e));let r=e.pathname.split("/"),n=t.pathname.split("/");for(n.length>0&&!n[n.length-1]&&n.pop();r.length>0&&n.length>0&&r[0]===n[0];)r.shift(),n.shift();return n.map(()=>"..").concat(r).join("/")+e.search+e.hash}var gre=NI(t=>{t.pathname=t.pathname.replace(/\/?$/,"/")}),Hre=NI(t=>{t.href=new Gs(".",t.toString()).toString()}),Xd=NI(t=>{});oo.normalize=Xd;function OI(t,e){let r=al(e),n=al(t);if(t=gre(t),r==="absolute")return Vs(e,void 0);if(n==="absolute")return Vs(e,t);if(r==="scheme-relative")return Xd(e);if(n==="scheme-relative")return Vs(e,Vs(t,zd)).slice(FI.length);if(r==="path-absolute")return Xd(e);if(n==="path-absolute")return Vs(e,Vs(t,zd)).slice(zd.length);let i=BI(e+t),o=Vs(e,Vs(t,i));return UI(i,o)}oo.join=OI;function yre(t,e){let r=vre(t,e);return typeof r=="string"?r:Xd(e)}oo.relative=yre;function vre(t,e){if(al(t)!==al(e))return null;let n=BI(t+e),i=new Gs(t,n),o=new Gs(e,n);try{new Gs("",o.toString())}catch{return null}return o.protocol!==i.protocol||o.user!==i.user||o.password!==i.password||o.hostname!==i.hostname||o.port!==i.port?null:UI(i,o)}function bre(t,e,r){t&&al(e)==="path-absolute"&&(e=e.replace(/^\//,""));let n=Xd(e||"");return t&&(n=OI(t,n)),r&&(n=OI(Hre(r),n)),n}oo.computeSourceURL=bre});var qI=y(Kk=>{var jI=class t{constructor(){this._array=[],this._set=new Map}static fromArray(e,r){let n=new t;for(let i=0,o=e.length;i<o;i++)n.add(e[i],r);return n}size(){return this._set.size}add(e,r){let n=this.has(e),i=this._array.length;(!n||r)&&this._array.push(e),n||this._set.set(e,i)}has(e){return this._set.has(e)}indexOf(e){let r=this._set.get(e);if(r>=0)return r;throw new Error('"'+e+'" is not in the set.')}at(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)}toArray(){return this._array.slice()}};Kk.ArraySet=jI});var Jk=y(Xk=>{var zk=Jd();function wre(t,e){let r=t.generatedLine,n=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return n>r||n==r&&o>=i||zk.compareByGeneratedPositionsInflated(t,e)<=0}var WI=class{constructor(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}unsortedForEach(e,r){this._array.forEach(e,r)}add(e){wre(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))}toArray(){return this._sorted||(this._array.sort(zk.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}};Xk.MappingList=WI});var VI=y(Yk=>{var Yd=kI(),Ot=Jd(),iy=qI().ArraySet,_re=Jk().MappingList,oy=class t{constructor(e){e||(e={}),this._file=Ot.getArg(e,"file",null),this._sourceRoot=Ot.getArg(e,"sourceRoot",null),this._skipValidation=Ot.getArg(e,"skipValidation",!1),this._sources=new iy,this._names=new iy,this._mappings=new _re,this._sourcesContents=null}static fromSourceMap(e){let r=e.sourceRoot,n=new t({file:e.file,sourceRoot:r});return e.eachMapping(function(i){let o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,r!=null&&(o.source=Ot.relative(r,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),n.addMapping(o)}),e.sources.forEach(function(i){let o=i;r!==null&&(o=Ot.relative(r,i)),n._sources.has(o)||n._sources.add(o);let s=e.sourceContentFor(i);s!=null&&n.setSourceContent(i,s)}),n}addMapping(e){let r=Ot.getArg(e,"generated"),n=Ot.getArg(e,"original",null),i=Ot.getArg(e,"source",null),o=Ot.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:i,name:o})}setSourceContent(e,r){let n=e;this._sourceRoot!=null&&(n=Ot.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Ot.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[Ot.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))}applySourceMap(e,r,n){let i=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}let o=this._sourceRoot;o!=null&&(i=Ot.relative(o,i));let s=this._mappings.toArray().length>0?new iy:this._sources,a=new iy;this._mappings.unsortedForEach(function(u){if(u.source===i&&u.originalLine!=null){let p=e.originalPositionFor({line:u.originalLine,column:u.originalColumn});p.source!=null&&(u.source=p.source,n!=null&&(u.source=Ot.join(n,u.source)),o!=null&&(u.source=Ot.relative(o,u.source)),u.originalLine=p.line,u.originalColumn=p.column,p.name!=null&&(u.name=p.name))}let c=u.source;c!=null&&!s.has(c)&&s.add(c);let l=u.name;l!=null&&!a.has(l)&&a.add(l)},this),this._sources=s,this._names=a,e.sources.forEach(function(u){let c=e.sourceContentFor(u);c!=null&&(n!=null&&(u=Ot.join(n,u)),o!=null&&(u=Ot.relative(o,u)),this.setSourceContent(u,c))},this)}_validateMapping(e,r,n,i){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!i)){if(!(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:i}))}}_serializeMappings(){let e=0,r=1,n=0,i=0,o=0,s=0,a="",u,c,l,p,f=this._mappings.toArray();for(let m=0,h=f.length;m<h;m++){if(c=f[m],u="",c.generatedLine!==r)for(e=0;c.generatedLine!==r;)u+=";",r++;else if(m>0){if(!Ot.compareByGeneratedPositionsInflated(c,f[m-1]))continue;u+=","}u+=Yd.encode(c.generatedColumn-e),e=c.generatedColumn,c.source!=null&&(p=this._sources.indexOf(c.source),u+=Yd.encode(p-s),s=p,u+=Yd.encode(c.originalLine-1-i),i=c.originalLine-1,u+=Yd.encode(c.originalColumn-n),n=c.originalColumn,c.name!=null&&(l=this._names.indexOf(c.name),u+=Yd.encode(l-o),o=l)),a+=u}return a}_generateSourcesContent(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=Ot.relative(r,n));let i=Ot.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)}toJSON(){let e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e}toString(){return JSON.stringify(this.toJSON())}};oy.prototype._version=3;Yk.SourceMapGenerator=oy});var Qk=y(bu=>{bu.GREATEST_LOWER_BOUND=1;bu.LEAST_UPPER_BOUND=2;function GI(t,e,r,n,i,o){let s=Math.floor((e-t)/2)+t,a=i(r,n[s],!0);return a===0?s:a>0?e-s>1?GI(s,e,r,n,i,o):o==bu.LEAST_UPPER_BOUND?e<n.length?e:-1:s:s-t>1?GI(t,s,r,n,i,o):o==bu.LEAST_UPPER_BOUND?s:t<0?-1:t}bu.search=function(e,r,n,i){if(r.length===0)return-1;let o=GI(-1,r.length,e,r,n,i||bu.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&n(r[o],r[o-1],!0)===0;)--o;return o}});var zI=y((sIe,KI)=>{"use strict";var Are=require("fs"),Ire=require("path");KI.exports=function(){return new Promise((e,r)=>{let n=Ire.join(__dirname,"mappings.wasm");Are.readFile(n,null,(i,o)=>{if(i){r(i);return}e(o.buffer)})})};KI.exports.initialize=t=>{console.debug("SourceMapConsumer.initialize is a no-op when running in node.js")}});var e1=y((aIe,Zk)=>{var Sre=zI();function Ere(){this.generatedLine=0,this.generatedColumn=0,this.lastGeneratedColumn=null,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}var Qd=null;Zk.exports=function(){if(Qd)return Qd;let e=[];return Qd=Sre().then(r=>WebAssembly.instantiate(r,{env:{mapping_callback(n,i,o,s,a,u,c,l,p,f){let m=new Ere;m.generatedLine=n+1,m.generatedColumn=i,o&&(m.lastGeneratedColumn=s-1),a&&(m.source=u,m.originalLine=c+1,m.originalColumn=l,p&&(m.name=f)),e[e.length-1](m)},start_all_generated_locations_for(){console.time("all_generated_locations_for")},end_all_generated_locations_for(){console.timeEnd("all_generated_locations_for")},start_compute_column_spans(){console.time("compute_column_spans")},end_compute_column_spans(){console.timeEnd("compute_column_spans")},start_generated_location_for(){console.time("generated_location_for")},end_generated_location_for(){console.timeEnd("generated_location_for")},start_original_location_for(){console.time("original_location_for")},end_original_location_for(){console.timeEnd("original_location_for")},start_parse_mappings(){console.time("parse_mappings")},end_parse_mappings(){console.timeEnd("parse_mappings")},start_sort_by_generated_location(){console.time("sort_by_generated_location")},end_sort_by_generated_location(){console.timeEnd("sort_by_generated_location")},start_sort_by_original_location(){console.time("sort_by_original_location")},end_sort_by_original_location(){console.timeEnd("sort_by_original_location")}}})).then(r=>({exports:r.instance.exports,withMappingCallback:(n,i)=>{e.push(n);try{i()}finally{e.pop()}}})).then(null,r=>{throw Qd=null,r}),Qd}});var t1=y(ay=>{var Se=Jd(),Dre=Qk(),XI=qI().ArraySet,uIe=kI(),Cre=zI(),Pre=e1(),JI=Symbol("smcInternal"),Gt=class t{constructor(e,r){return e==JI?Promise.resolve(this):xre(e,r)}static initialize(e){Cre.initialize(e["lib/mappings.wasm"])}static fromSourceMap(e,r){return Lre(e,r)}static async with(e,r,n){let i=await new t(e,r);try{return await n(i)}finally{i.destroy()}}eachMapping(e,r,n){throw new Error("Subclasses must implement eachMapping")}allGeneratedPositionsFor(e){throw new Error("Subclasses must implement allGeneratedPositionsFor")}destroy(){throw new Error("Subclasses must implement destroy")}};Gt.prototype._version=3;Gt.GENERATED_ORDER=1;Gt.ORIGINAL_ORDER=2;Gt.GREATEST_LOWER_BOUND=1;Gt.LEAST_UPPER_BOUND=2;ay.SourceMapConsumer=Gt;var ul=class t extends Gt{constructor(e,r){return super(JI).then(n=>{let i=e;typeof e=="string"&&(i=Se.parseSourceMapInput(e));let o=Se.getArg(i,"version"),s=Se.getArg(i,"sources").map(String),a=Se.getArg(i,"names",[]),u=Se.getArg(i,"sourceRoot",null),c=Se.getArg(i,"sourcesContent",null),l=Se.getArg(i,"mappings"),p=Se.getArg(i,"file",null);if(o!=n._version)throw new Error("Unsupported version: "+o);return n._sourceLookupCache=new Map,n._names=XI.fromArray(a.map(String),!0),n._sources=XI.fromArray(s,!0),n._absoluteSources=XI.fromArray(n._sources.toArray().map(function(f){return Se.computeSourceURL(u,f,r)}),!0),n.sourceRoot=u,n.sourcesContent=c,n._mappings=l,n._sourceMapURL=r,n.file=p,n._computedColumnSpans=!1,n._mappingsPtr=0,n._wasm=null,Pre().then(f=>(n._wasm=f,n))})}_findSourceIndex(e){let r=this._sourceLookupCache.get(e);if(typeof r=="number")return r;let n=Se.computeSourceURL(null,e,this._sourceMapURL);if(this._absoluteSources.has(n)){let o=this._absoluteSources.indexOf(n);return this._sourceLookupCache.set(e,o),o}let i=Se.computeSourceURL(this.sourceRoot,e,this._sourceMapURL);if(this._absoluteSources.has(i)){let o=this._absoluteSources.indexOf(i);return this._sourceLookupCache.set(e,o),o}return-1}static fromSourceMap(e,r){return new t(e.toString())}get sources(){return this._absoluteSources.toArray()}_getMappingsPtr(){return this._mappingsPtr===0&&this._parseMappings(),this._mappingsPtr}_parseMappings(){let e=this._mappings,r=e.length,n=this._wasm.exports.allocate_mappings(r),i=new Uint8Array(this._wasm.exports.memory.buffer,n,r);for(let s=0;s<r;s++)i[s]=e.charCodeAt(s);let o=this._wasm.exports.parse_mappings(n);if(!o){let s=this._wasm.exports.get_last_error(),a=`Error parsing mappings (code ${s}): `;switch(s){case 1:a+="the mappings contained a negative line, column, source index, or name index";break;case 2:a+="the mappings contained a number larger than 2**32";break;case 3:a+="reached EOF while in the middle of parsing a VLQ";break;case 4:a+="invalid base 64 character while parsing a VLQ";break;default:a+="unknown error code";break}throw new Error(a)}this._mappingsPtr=o}eachMapping(e,r,n){let i=r||null,o=n||Gt.GENERATED_ORDER;this._wasm.withMappingCallback(s=>{s.source!==null&&(s.source=this._absoluteSources.at(s.source),s.name!==null&&(s.name=this._names.at(s.name))),this._computedColumnSpans&&s.lastGeneratedColumn===null&&(s.lastGeneratedColumn=1/0),e.call(i,s)},()=>{switch(o){case Gt.GENERATED_ORDER:this._wasm.exports.by_generated_location(this._getMappingsPtr());break;case Gt.ORIGINAL_ORDER:this._wasm.exports.by_original_location(this._getMappingsPtr());break;default:throw new Error("Unknown order of iteration.")}})}allGeneratedPositionsFor(e){let r=Se.getArg(e,"source"),n=Se.getArg(e,"line"),i=e.column||0;if(r=this._findSourceIndex(r),r<0)return[];if(n<1)throw new Error("Line numbers must be >= 1");if(i<0)throw new Error("Column numbers must be >= 0");let o=[];return this._wasm.withMappingCallback(s=>{let a=s.lastGeneratedColumn;this._computedColumnSpans&&a===null&&(a=1/0),o.push({line:s.generatedLine,column:s.generatedColumn,lastColumn:a})},()=>{this._wasm.exports.all_generated_locations_for(this._getMappingsPtr(),r,n-1,"column"in e,i)}),o}destroy(){this._mappingsPtr!==0&&(this._wasm.exports.free_mappings(this._mappingsPtr),this._mappingsPtr=0)}computeColumnSpans(){this._computedColumnSpans||(this._wasm.exports.compute_column_spans(this._getMappingsPtr()),this._computedColumnSpans=!0)}originalPositionFor(e){let r={generatedLine:Se.getArg(e,"line"),generatedColumn:Se.getArg(e,"column")};if(r.generatedLine<1)throw new Error("Line numbers must be >= 1");if(r.generatedColumn<0)throw new Error("Column numbers must be >= 0");let n=Se.getArg(e,"bias",Gt.GREATEST_LOWER_BOUND);n==null&&(n=Gt.GREATEST_LOWER_BOUND);let i;if(this._wasm.withMappingCallback(o=>i=o,()=>{this._wasm.exports.original_location_for(this._getMappingsPtr(),r.generatedLine-1,r.generatedColumn,n)}),i&&i.generatedLine===r.generatedLine){let o=Se.getArg(i,"source",null);o!==null&&(o=this._absoluteSources.at(o));let s=Se.getArg(i,"name",null);return s!==null&&(s=this._names.at(s)),{source:o,line:Se.getArg(i,"originalLine",null),column:Se.getArg(i,"originalColumn",null),name:s}}return{source:null,line:null,column:null,name:null}}hasContentsOfAllSources(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1}sourceContentFor(e,r){if(!this.sourcesContent)return null;let n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')}generatedPositionFor(e){let r=Se.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};let n={source:r,originalLine:Se.getArg(e,"line"),originalColumn:Se.getArg(e,"column")};if(n.originalLine<1)throw new Error("Line numbers must be >= 1");if(n.originalColumn<0)throw new Error("Column numbers must be >= 0");let i=Se.getArg(e,"bias",Gt.GREATEST_LOWER_BOUND);i==null&&(i=Gt.GREATEST_LOWER_BOUND);let o;if(this._wasm.withMappingCallback(s=>o=s,()=>{this._wasm.exports.generated_location_for(this._getMappingsPtr(),n.source,n.originalLine-1,n.originalColumn,i)}),o&&o.source===n.source){let s=o.lastGeneratedColumn;return this._computedColumnSpans&&s===null&&(s=1/0),{line:Se.getArg(o,"generatedLine",null),column:Se.getArg(o,"generatedColumn",null),lastColumn:s}}return{line:null,column:null,lastColumn:null}}};ul.prototype.consumer=Gt;ay.BasicSourceMapConsumer=ul;var sy=class extends Gt{constructor(e,r){return super(JI).then(n=>{let i=e;typeof e=="string"&&(i=Se.parseSourceMapInput(e));let o=Se.getArg(i,"version"),s=Se.getArg(i,"sections");if(o!=n._version)throw new Error("Unsupported version: "+o);let a={line:-1,column:0};return Promise.all(s.map(u=>{if(u.url)throw new Error("Support for url field in sections not implemented.");let c=Se.getArg(u,"offset"),l=Se.getArg(c,"line"),p=Se.getArg(c,"column");if(l<a.line||l===a.line&&p<a.column)throw new Error("Section offsets must be ordered and non-overlapping.");return a=c,new Gt(Se.getArg(u,"map"),r).then(m=>({generatedOffset:{generatedLine:l+1,generatedColumn:p+1},consumer:m}))})).then(u=>(n._sections=u,n))})}get sources(){let e=[];for(let r=0;r<this._sections.length;r++)for(let n=0;n<this._sections[r].consumer.sources.length;n++)e.push(this._sections[r].consumer.sources[n]);return e}originalPositionFor(e){let r={generatedLine:Se.getArg(e,"line"),generatedColumn:Se.getArg(e,"column")},n=Dre.search(r,this._sections,function(o,s){let a=o.generatedLine-s.generatedOffset.generatedLine;return a||o.generatedColumn-s.generatedOffset.generatedColumn}),i=this._sections[n];return i?i.consumer.originalPositionFor({line:r.generatedLine-(i.generatedOffset.generatedLine-1),column:r.generatedColumn-(i.generatedOffset.generatedLine===r.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}}hasContentsOfAllSources(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})}sourceContentFor(e,r){for(let n=0;n<this._sections.length;n++){let o=this._sections[n].consumer.sourceContentFor(e,!0);if(o)return o}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')}_findSectionIndex(e){for(let r=0;r<this._sections.length;r++){let{consumer:n}=this._sections[r];if(n._findSourceIndex(e)!==-1)return r}return-1}generatedPositionFor(e){let r=this._findSectionIndex(Se.getArg(e,"source")),n=r>=0?this._sections[r]:null,i=r>=0&&r+1<this._sections.length?this._sections[r+1]:null,o=n&&n.consumer.generatedPositionFor(e);if(o&&o.line!==null){let s=n.generatedOffset.generatedLine-1,a=n.generatedOffset.generatedColumn-1;return o.line===1&&(o.column+=a,typeof o.lastColumn=="number"&&(o.lastColumn+=a)),o.lastColumn===1/0&&i&&o.line===i.generatedOffset.generatedLine&&(o.lastColumn=i.generatedOffset.generatedColumn-2),o.line+=s,o}return{line:null,column:null,lastColumn:null}}allGeneratedPositionsFor(e){let r=this._findSectionIndex(Se.getArg(e,"source")),n=r>=0?this._sections[r]:null,i=r>=0&&r+1<this._sections.length?this._sections[r+1]:null;return n?n.consumer.allGeneratedPositionsFor(e).map(o=>{let s=n.generatedOffset.generatedLine-1,a=n.generatedOffset.generatedColumn-1;return o.line===1&&(o.column+=a,typeof o.lastColumn=="number"&&(o.lastColumn+=a)),o.lastColumn===1/0&&i&&o.line===i.generatedOffset.generatedLine&&(o.lastColumn=i.generatedOffset.generatedColumn-2),o.line+=s,o}):[]}eachMapping(e,r,n){this._sections.forEach((i,o)=>{let s=o+1<this._sections.length?this._sections[o+1]:null,{generatedOffset:a}=i,u=a.generatedLine-1,c=a.generatedColumn-1;i.consumer.eachMapping(function(l){l.generatedLine===1&&(l.generatedColumn+=c,typeof l.lastGeneratedColumn=="number"&&(l.lastGeneratedColumn+=c)),l.lastGeneratedColumn===1/0&&s&&l.generatedLine===s.generatedOffset.generatedLine&&(l.lastGeneratedColumn=s.generatedOffset.generatedColumn-2),l.generatedLine+=u,e.call(this,l)},r,n)})}computeColumnSpans(){for(let e=0;e<this._sections.length;e++)this._sections[e].consumer.computeColumnSpans()}destroy(){for(let e=0;e<this._sections.length;e++)this._sections[e].consumer.destroy()}};ay.IndexedSourceMapConsumer=sy;function xre(t,e){let r=t;typeof t=="string"&&(r=Se.parseSourceMapInput(t));let n=r.sections!=null?new sy(r,e):new ul(r,e);return Promise.resolve(n)}function Lre(t,e){return ul.fromSourceMap(t,e)}});var n1=y(r1=>{var Tre=VI().SourceMapGenerator,uy=Jd(),$re=/(\r?\n)/,Rre=10,cl="$$$isSourceNode$$$",YI=class t{constructor(e,r,n,i,o){this.children=[],this.sourceContents={},this.line=e??null,this.column=r??null,this.source=n??null,this.name=o??null,this[cl]=!0,i!=null&&this.add(i)}static fromStringWithSourceMap(e,r,n){let i=new t,o=e.split($re),s=0,a=function(){let m=H(),h=H()||"";return m+h;function H(){return s<o.length?o[s++]:void 0}},u=1,c=0,l=null,p;return r.eachMapping(function(m){if(l!==null)if(u<m.generatedLine)f(l,a()),u++,c=0;else{p=o[s]||"";let h=p.substr(0,m.generatedColumn-c);o[s]=p.substr(m.generatedColumn-c),c=m.generatedColumn,f(l,h),l=m;return}for(;u<m.generatedLine;)i.add(a()),u++;c<m.generatedColumn&&(p=o[s]||"",i.add(p.substr(0,m.generatedColumn)),o[s]=p.substr(m.generatedColumn),c=m.generatedColumn),l=m},this),s<o.length&&(l&&f(l,a()),i.add(o.splice(s).join(""))),r.sources.forEach(function(m){let h=r.sourceContentFor(m);h!=null&&(n!=null&&(m=uy.join(n,m)),i.setSourceContent(m,h))}),i;function f(m,h){if(m===null||m.source===void 0)i.add(h);else{let H=n?uy.join(n,m.source):m.source;i.add(new t(m.originalLine,m.originalColumn,H,h,m.name))}}}add(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[cl]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this}prepend(e){if(Array.isArray(e))for(let r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[cl]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this}walk(e){let r;for(let n=0,i=this.children.length;n<i;n++)r=this.children[n],r[cl]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})}join(e){let r,n,i=this.children.length;if(i>0){for(r=[],n=0;n<i-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this}replaceRight(e,r){let n=this.children[this.children.length-1];return n[cl]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this}setSourceContent(e,r){this.sourceContents[uy.toSetString(e)]=r}walkSourceContents(e){for(let n=0,i=this.children.length;n<i;n++)this.children[n][cl]&&this.children[n].walkSourceContents(e);let r=Object.keys(this.sourceContents);for(let n=0,i=r.length;n<i;n++)e(uy.fromSetString(r[n]),this.sourceContents[r[n]])}toString(){let e="";return this.walk(function(r){e+=r}),e}toStringWithSourceMap(e){let r={code:"",line:1,column:0},n=new Tre(e),i=!1,o=null,s=null,a=null,u=null;return this.walk(function(c,l){r.code+=c,l.source!==null&&l.line!==null&&l.column!==null?((o!==l.source||s!==l.line||a!==l.column||u!==l.name)&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name}),o=l.source,s=l.line,a=l.column,u=l.name,i=!0):i&&(n.addMapping({generated:{line:r.line,column:r.column}}),o=null,i=!1);for(let p=0,f=c.length;p<f;p++)c.charCodeAt(p)===Rre?(r.line++,r.column=0,p+1===f?(o=null,i=!1):i&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name})):r.column++}),this.walkSourceContents(function(c,l){n.setSourceContent(c,l)}),{code:r.code,map:n}}};r1.SourceNode=YI});var ly=y(cy=>{cy.SourceMapGenerator=VI().SourceMapGenerator;cy.SourceMapConsumer=t1().SourceMapConsumer;cy.SourceNode=n1().SourceNode});var sO=y((GSe,ch)=>{var iO={};iO.__wbindgen_placeholder__=ch.exports;var wi,{TextDecoder:une}=require("util"),oO=new une("utf-8",{ignoreBOM:!0,fatal:!0});oO.decode();var By=null;function wS(){return(By===null||By.buffer!==wi.memory.buffer)&&(By=new Uint8Array(wi.memory.buffer)),By}function cne(t,e){return oO.decode(wS().subarray(t,t+e))}var vS=0;function nO(t,e){let r=e(t.length*1);return wS().set(t,r/1),vS=t.length,r}var bS=class t{static __wrap(e){let r=Object.create(t.prototype);return r.ptr=e,r}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,e}free(){let e=this.__destroy_into_raw();wi.__wbg_hasher_free(e)}constructor(){var e=wi.hasher_new();return t.__wrap(e)}update(e){var r=nO(e,wi.__wbindgen_malloc),n=vS;wi.hasher_update(this.ptr,r,n)}digest(e){try{var r=nO(e,wi.__wbindgen_malloc),n=vS;wi.hasher_digest(this.ptr,r,n)}finally{e.set(wS().subarray(r/1,r/1+n)),wi.__wbindgen_free(r,n*1)}}};ch.exports.Hasher=bS;ch.exports.__wbindgen_throw=function(t,e){throw new Error(cne(t,e))};var lne=require("path").join(__dirname,"chromehash_bg.wasm"),pne=require("fs").readFileSync(lne),fne=new WebAssembly.Module(pne),dne=new WebAssembly.Instance(fne,iO);wi=dne.exports;ch.exports.__wasm=wi});var fO=y(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});ho.shaHashFile=ho.hashFile=ho.shaHash=ho.hash=void 0;var cO=sO(),lO=require("fs"),aO=require("string_decoder"),pO=require("crypto"),jy=Buffer.alloc(4*5),hne=t=>{let e=new cO.Hasher;return e.update(yne(t)),e.digest(jy),e.free(),jy.toString("hex")};ho.hash=hne;var mne=t=>{let e=(0,pO.createHash)("sha256");return e.update(vne(t)),e.digest("hex")};ho.shaHash=mne;var gne=async(t,e=4096)=>{e%2===1&&e++;let r=Buffer.alloc(e),n=new cO.Hasher,i;try{i=await lO.promises.open(t,"r");let o=await i.read(r,0,r.length,null),s=r.slice(0,o.bytesRead);if(Wy(s))for(n.update(s.slice(2));o.bytesRead===r.length;)o=await i.read(r,0,r.length,null),n.update(r.slice(0,o.bytesRead));else if(Vy(s))for(n.update(s.slice(2).swap16());o.bytesRead===r.length;)o=await i.read(r,0,r.length,null),n.update(r.slice(0,o.bytesRead).swap16());else if(qy(s)){let a=new aO.StringDecoder("utf8");for(n.update(Buffer.from(a.write(s.slice(3)),"utf16le"));o.bytesRead===r.length;)o=await i.read(r,0,r.length,null),n.update(Buffer.from(a.write(r.slice(0,o.bytesRead)),"utf16le"))}else{let a=new aO.StringDecoder("utf8");for(n.update(Buffer.from(a.write(s),"utf16le"));o.bytesRead===r.length;)o=await i.read(r,0,r.length,null),n.update(Buffer.from(a.write(r.slice(0,o.bytesRead)),"utf16le"))}return n.digest(jy),jy.toString("hex")}finally{n.free(),i!==void 0&&await i.close()}};ho.hashFile=gne;var Uy={stream:!0},Hne=async(t,e=4096)=>{e%2===1&&e++;let r=Buffer.alloc(e),n=(0,pO.createHash)("sha256"),i;try{i=await lO.promises.open(t,"r");let o=await i.read(r,0,r.length,null),s=r.slice(0,o.bytesRead);if(Wy(s)){let a=new TextDecoder("utf-16le");for(n.update(a.decode(s.slice(2),Uy));o.bytesRead>0;)o=await i.read(r,0,r.length,null),n.update(a.decode(r.slice(0,o.bytesRead),Uy))}else if(Vy(s)){let a=new TextDecoder("utf-16be");for(n.update(a.decode(s.slice(2),Uy));o.bytesRead>0;)o=await i.read(r,0,r.length,null),n.update(a.decode(r.slice(0,o.bytesRead),Uy))}else if(qy(s))for(n.update(s.slice(3));o.bytesRead>0;)o=await i.read(r,0,r.length,null),n.update(r.slice(0,o.bytesRead));else for(n.update(s);o.bytesRead>0;)o=await i.read(r,0,r.length,null),n.update(r.slice(0,o.bytesRead));return n.digest("hex")}finally{await i?.close()}};ho.shaHashFile=Hne;var qy=t=>t.length>=3&&t[0]===239&&t[1]===187&&t[2]===191,Wy=t=>t.length>=2&&t[0]===255&&t[1]===254,Vy=t=>t.length>=2&&t[0]===254&&t[1]===255,yne=t=>qy(t)?uO(t.slice(3)):Wy(t)?t.slice(2):Vy(t)?t.slice(2).swap16():uO(t),vne=t=>qy(t)?t.slice(3):Wy(t)?new TextEncoder().encode(new TextDecoder("utf-16le").decode(t.slice(2))):Vy(t)?new TextEncoder().encode(new TextDecoder("utf-16be").decode(t.slice(2))):t,uO=t=>Buffer.from(t.toString("utf8"),"utf16le")});var rv=y(Kn=>{"use strict";Kn.isInteger=t=>typeof t=="number"?Number.isInteger(t):typeof t=="string"&&t.trim()!==""?Number.isInteger(Number(t)):!1;Kn.find=(t,e)=>t.nodes.find(r=>r.type===e);Kn.exceedsLimit=(t,e,r=1,n)=>n===!1||!Kn.isInteger(t)||!Kn.isInteger(e)?!1:(Number(e)-Number(t))/Number(r)>=n;Kn.escapeNode=(t,e=0,r)=>{let n=t.nodes[e];n&&(r&&n.type===r||n.type==="open"||n.type==="close")&&n.escaped!==!0&&(n.value="\\"+n.value,n.escaped=!0)};Kn.encloseBrace=t=>t.type!=="brace"||t.commas>>0+t.ranges>>0?!1:(t.invalid=!0,!0);Kn.isInvalidBrace=t=>t.type!=="brace"?!1:t.invalid===!0||t.dollar?!0:!(t.commas>>0+t.ranges>>0)||t.open!==!0||t.close!==!0?(t.invalid=!0,!0):!1;Kn.isOpenOrClose=t=>t.type==="open"||t.type==="close"?!0:t.open===!0||t.close===!0;Kn.reduce=t=>t.reduce((e,r)=>(r.type==="text"&&e.push(r.value),r.type==="range"&&(r.type="text"),e),[]);Kn.flatten=(...t)=>{let e=[],r=n=>{for(let i=0;i<n.length;i++){let o=n[i];Array.isArray(o)?r(o,e):o!==void 0&&e.push(o)}return e};return r(t),e}});var nv=y((UDe,kO)=>{"use strict";var MO=rv();kO.exports=(t,e={})=>{let r=(n,i={})=>{let o=e.escapeInvalid&&MO.isInvalidBrace(i),s=n.invalid===!0&&e.escapeInvalid===!0,a="";if(n.value)return(o||s)&&MO.isOpenOrClose(n)?"\\"+n.value:n.value;if(n.value)return n.value;if(n.nodes)for(let u of n.nodes)a+=r(u);return a};return r(t)}});var FO=y((jDe,OO)=>{"use strict";OO.exports=function(t){return typeof t=="number"?t-t===0:typeof t=="string"&&t.trim()!==""?Number.isFinite?Number.isFinite(+t):isFinite(+t):!1}});var KO=y((qDe,GO)=>{"use strict";var NO=FO(),Ru=(t,e,r)=>{if(NO(t)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(e===void 0||t===e)return String(t);if(NO(e)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let n={relaxZeros:!0,...r};typeof n.strictZeros=="boolean"&&(n.relaxZeros=n.strictZeros===!1);let i=String(n.relaxZeros),o=String(n.shorthand),s=String(n.capture),a=String(n.wrap),u=t+":"+e+"="+i+o+s+a;if(Ru.cache.hasOwnProperty(u))return Ru.cache[u].result;let c=Math.min(t,e),l=Math.max(t,e);if(Math.abs(c-l)===1){let H=t+"|"+e;return n.capture?`(${H})`:n.wrap===!1?H:`(?:${H})`}let p=VO(t)||VO(e),f={min:t,max:e,a:c,b:l},m=[],h=[];if(p&&(f.isPadded=p,f.maxLen=String(f.max).length),c<0){let H=l<0?Math.abs(l):1;h=BO(H,Math.abs(c),f,n),c=f.a=0}return l>=0&&(m=BO(c,l,f,n)),f.negatives=h,f.positives=m,f.result=Nne(h,m,n),n.capture===!0?f.result=`(${f.result})`:n.wrap!==!1&&m.length+h.length>1&&(f.result=`(?:${f.result})`),Ru.cache[u]=f,f.result};function Nne(t,e,r){let n=DS(t,e,"-",!1,r)||[],i=DS(e,t,"",!1,r)||[],o=DS(t,e,"-?",!0,r)||[];return n.concat(o).concat(i).join("|")}function Bne(t,e){let r=1,n=1,i=jO(t,r),o=new Set([e]);for(;t<=i&&i<=e;)o.add(i),r+=1,i=jO(t,r);for(i=qO(e+1,n)-1;t<i&&i<=e;)o.add(i),n+=1,i=qO(e+1,n)-1;return o=[...o],o.sort(qne),o}function Une(t,e,r){if(t===e)return{pattern:t,count:[],digits:0};let n=jne(t,e),i=n.length,o="",s=0;for(let a=0;a<i;a++){let[u,c]=n[a];u===c?o+=u:u!=="0"||c!=="9"?o+=Wne(u,c,r):s++}return s&&(o+=r.shorthand===!0?"\\d":"[0-9]"),{pattern:o,count:[s],digits:i}}function BO(t,e,r,n){let i=Bne(t,e),o=[],s=t,a;for(let u=0;u<i.length;u++){let c=i[u],l=Une(String(s),String(c),n),p="";if(!r.isPadded&&a&&a.pattern===l.pattern){a.count.length>1&&a.count.pop(),a.count.push(l.count[0]),a.string=a.pattern+WO(a.count),s=c+1;continue}r.isPadded&&(p=Vne(c,r,n)),l.string=p+l.pattern+WO(l.count),o.push(l),s=c+1,a=l}return o}function DS(t,e,r,n,i){let o=[];for(let s of t){let{string:a}=s;!n&&!UO(e,"string",a)&&o.push(r+a),n&&UO(e,"string",a)&&o.push(r+a)}return o}function jne(t,e){let r=[];for(let n=0;n<t.length;n++)r.push([t[n],e[n]]);return r}function qne(t,e){return t>e?1:e>t?-1:0}function UO(t,e,r){return t.some(n=>n[e]===r)}function jO(t,e){return Number(String(t).slice(0,-e)+"9".repeat(e))}function qO(t,e){return t-t%Math.pow(10,e)}function WO(t){let[e=0,r=""]=t;return r||e>1?`{${e+(r?","+r:"")}}`:""}function Wne(t,e,r){return`[${t}${e-t===1?"":"-"}${e}]`}function VO(t){return/^-?(0+)\d/.test(t)}function Vne(t,e,r){if(!e.isPadded)return t;let n=Math.abs(e.maxLen-String(t).length),i=r.relaxZeros!==!1;switch(n){case 0:return"";case 1:return i?"0?":"0";case 2:return i?"0{0,2}":"00";default:return i?`0{0,${n}}`:`0{${n}}`}}Ru.cache={};Ru.clearCache=()=>Ru.cache={};GO.exports=Ru});var xS=y((WDe,tF)=>{"use strict";var Gne=require("util"),JO=KO(),zO=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),Kne=t=>e=>t===!0?Number(e):String(e),CS=t=>typeof t=="number"||typeof t=="string"&&t!=="",fh=t=>Number.isInteger(+t),PS=t=>{let e=`${t}`,r=-1;if(e[0]==="-"&&(e=e.slice(1)),e==="0")return!1;for(;e[++r]==="0";);return r>0},zne=(t,e,r)=>typeof t=="string"||typeof e=="string"?!0:r.stringify===!0,Xne=(t,e,r)=>{if(e>0){let n=t[0]==="-"?"-":"";n&&(t=t.slice(1)),t=n+t.padStart(n?e-1:e,"0")}return r===!1?String(t):t},XO=(t,e)=>{let r=t[0]==="-"?"-":"";for(r&&(t=t.slice(1),e--);t.length<e;)t="0"+t;return r?"-"+t:t},Jne=(t,e)=>{t.negatives.sort((s,a)=>s<a?-1:s>a?1:0),t.positives.sort((s,a)=>s<a?-1:s>a?1:0);let r=e.capture?"":"?:",n="",i="",o;return t.positives.length&&(n=t.positives.join("|")),t.negatives.length&&(i=`-(${r}${t.negatives.join("|")})`),n&&i?o=`${n}|${i}`:o=n||i,e.wrap?`(${r}${o})`:o},YO=(t,e,r,n)=>{if(r)return JO(t,e,{wrap:!1,...n});let i=String.fromCharCode(t);if(t===e)return i;let o=String.fromCharCode(e);return`[${i}-${o}]`},QO=(t,e,r)=>{if(Array.isArray(t)){let n=r.wrap===!0,i=r.capture?"":"?:";return n?`(${i}${t.join("|")})`:t.join("|")}return JO(t,e,r)},ZO=(...t)=>new RangeError("Invalid range arguments: "+Gne.inspect(...t)),eF=(t,e,r)=>{if(r.strictRanges===!0)throw ZO([t,e]);return[]},Yne=(t,e)=>{if(e.strictRanges===!0)throw new TypeError(`Expected step "${t}" to be a number`);return[]},Qne=(t,e,r=1,n={})=>{let i=Number(t),o=Number(e);if(!Number.isInteger(i)||!Number.isInteger(o)){if(n.strictRanges===!0)throw ZO([t,e]);return[]}i===0&&(i=0),o===0&&(o=0);let s=i>o,a=String(t),u=String(e),c=String(r);r=Math.max(Math.abs(r),1);let l=PS(a)||PS(u)||PS(c),p=l?Math.max(a.length,u.length,c.length):0,f=l===!1&&zne(t,e,n)===!1,m=n.transform||Kne(f);if(n.toRegex&&r===1)return YO(XO(t,p),XO(e,p),!0,n);let h={negatives:[],positives:[]},H=x=>h[x<0?"negatives":"positives"].push(Math.abs(x)),v=[],_=0;for(;s?i>=o:i<=o;)n.toRegex===!0&&r>1?H(i):v.push(Xne(m(i,_),p,f)),i=s?i-r:i+r,_++;return n.toRegex===!0?r>1?Jne(h,n):QO(v,null,{wrap:!1,...n}):v},Zne=(t,e,r=1,n={})=>{if(!fh(t)&&t.length>1||!fh(e)&&e.length>1)return eF(t,e,n);let i=n.transform||(f=>String.fromCharCode(f)),o=`${t}`.charCodeAt(0),s=`${e}`.charCodeAt(0),a=o>s,u=Math.min(o,s),c=Math.max(o,s);if(n.toRegex&&r===1)return YO(u,c,!1,n);let l=[],p=0;for(;a?o>=s:o<=s;)l.push(i(o,p)),o=a?o-r:o+r,p++;return n.toRegex===!0?QO(l,null,{wrap:!1,options:n}):l},iv=(t,e,r,n={})=>{if(e==null&&CS(t))return[t];if(!CS(t)||!CS(e))return eF(t,e,n);if(typeof r=="function")return iv(t,e,1,{transform:r});if(zO(r))return iv(t,e,0,r);let i={...n};return i.capture===!0&&(i.wrap=!0),r=r||i.step||1,fh(r)?fh(t)&&fh(e)?Qne(t,e,r,i):Zne(t,e,Math.max(Math.abs(r),1),i):r!=null&&!zO(r)?Yne(r,i):iv(t,e,1,r)};tF.exports=iv});var iF=y((VDe,nF)=>{"use strict";var eie=xS(),rF=rv(),tie=(t,e={})=>{let r=(n,i={})=>{let o=rF.isInvalidBrace(i),s=n.invalid===!0&&e.escapeInvalid===!0,a=o===!0||s===!0,u=e.escapeInvalid===!0?"\\":"",c="";if(n.isOpen===!0||n.isClose===!0)return u+n.value;if(n.type==="open")return a?u+n.value:"(";if(n.type==="close")return a?u+n.value:")";if(n.type==="comma")return n.prev.type==="comma"?"":a?n.value:"|";if(n.value)return n.value;if(n.nodes&&n.ranges>0){let l=rF.reduce(n.nodes),p=eie(...l,{...e,wrap:!1,toRegex:!0});if(p.length!==0)return l.length>1&&p.length>1?`(${p})`:p}if(n.nodes)for(let l of n.nodes)c+=r(l,n);return c};return r(t)};nF.exports=tie});var aF=y((GDe,sF)=>{"use strict";var rie=xS(),oF=nv(),$l=rv(),Mu=(t="",e="",r=!1)=>{let n=[];if(t=[].concat(t),e=[].concat(e),!e.length)return t;if(!t.length)return r?$l.flatten(e).map(i=>`{${i}}`):e;for(let i of t)if(Array.isArray(i))for(let o of i)n.push(Mu(o,e,r));else for(let o of e)r===!0&&typeof o=="string"&&(o=`{${o}}`),n.push(Array.isArray(o)?Mu(i,o,r):i+o);return $l.flatten(n)},nie=(t,e={})=>{let r=e.rangeLimit===void 0?1e3:e.rangeLimit,n=(i,o={})=>{i.queue=[];let s=o,a=o.queue;for(;s.type!=="brace"&&s.type!=="root"&&s.parent;)s=s.parent,a=s.queue;if(i.invalid||i.dollar){a.push(Mu(a.pop(),oF(i,e)));return}if(i.type==="brace"&&i.invalid!==!0&&i.nodes.length===2){a.push(Mu(a.pop(),["{}"]));return}if(i.nodes&&i.ranges>0){let p=$l.reduce(i.nodes);if($l.exceedsLimit(...p,e.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let f=rie(...p,e);f.length===0&&(f=oF(i,e)),a.push(Mu(a.pop(),f)),i.nodes=[];return}let u=$l.encloseBrace(i),c=i.queue,l=i;for(;l.type!=="brace"&&l.type!=="root"&&l.parent;)l=l.parent,c=l.queue;for(let p=0;p<i.nodes.length;p++){let f=i.nodes[p];if(f.type==="comma"&&i.type==="brace"){p===1&&c.push(""),c.push("");continue}if(f.type==="close"){a.push(Mu(a.pop(),c,u));continue}if(f.value&&f.type!=="open"){c.push(Mu(c.pop(),f.value));continue}f.nodes&&n(f,i)}return c};return $l.flatten(n(t))};sF.exports=nie});var cF=y((KDe,uF)=>{"use strict";uF.exports={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}});var hF=y((zDe,dF)=>{"use strict";var iie=nv(),{MAX_LENGTH:lF,CHAR_BACKSLASH:LS,CHAR_BACKTICK:oie,CHAR_COMMA:sie,CHAR_DOT:aie,CHAR_LEFT_PARENTHESES:uie,CHAR_RIGHT_PARENTHESES:cie,CHAR_LEFT_CURLY_BRACE:lie,CHAR_RIGHT_CURLY_BRACE:pie,CHAR_LEFT_SQUARE_BRACKET:pF,CHAR_RIGHT_SQUARE_BRACKET:fF,CHAR_DOUBLE_QUOTE:fie,CHAR_SINGLE_QUOTE:die,CHAR_NO_BREAK_SPACE:hie,CHAR_ZERO_WIDTH_NOBREAK_SPACE:mie}=cF(),gie=(t,e={})=>{if(typeof t!="string")throw new TypeError("Expected a string");let r=e||{},n=typeof r.maxLength=="number"?Math.min(lF,r.maxLength):lF;if(t.length>n)throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${n})`);let i={type:"root",input:t,nodes:[]},o=[i],s=i,a=i,u=0,c=t.length,l=0,p=0,f,m={},h=()=>t[l++],H=v=>{if(v.type==="text"&&a.type==="dot"&&(a.type="text"),a&&a.type==="text"&&v.type==="text"){a.value+=v.value;return}return s.nodes.push(v),v.parent=s,v.prev=a,a=v,v};for(H({type:"bos"});l<c;)if(s=o[o.length-1],f=h(),!(f===mie||f===hie)){if(f===LS){H({type:"text",value:(e.keepEscaping?f:"")+h()});continue}if(f===fF){H({type:"text",value:"\\"+f});continue}if(f===pF){u++;let v=!0,_;for(;l<c&&(_=h());){if(f+=_,_===pF){u++;continue}if(_===LS){f+=h();continue}if(_===fF&&(u--,u===0))break}H({type:"text",value:f});continue}if(f===uie){s=H({type:"paren",nodes:[]}),o.push(s),H({type:"text",value:f});continue}if(f===cie){if(s.type!=="paren"){H({type:"text",value:f});continue}s=o.pop(),H({type:"text",value:f}),s=o[o.length-1];continue}if(f===fie||f===die||f===oie){let v=f,_;for(e.keepQuotes!==!0&&(f="");l<c&&(_=h());){if(_===LS){f+=_+h();continue}if(_===v){e.keepQuotes===!0&&(f+=_);break}f+=_}H({type:"text",value:f});continue}if(f===lie){p++;let _={type:"brace",open:!0,close:!1,dollar:a.value&&a.value.slice(-1)==="$"||s.dollar===!0,depth:p,commas:0,ranges:0,nodes:[]};s=H(_),o.push(s),H({type:"open",value:f});continue}if(f===pie){if(s.type!=="brace"){H({type:"text",value:f});continue}let v="close";s=o.pop(),s.close=!0,H({type:v,value:f}),p--,s=o[o.length-1];continue}if(f===sie&&p>0){if(s.ranges>0){s.ranges=0;let v=s.nodes.shift();s.nodes=[v,{type:"text",value:iie(s)}]}H({type:"comma",value:f}),s.commas++;continue}if(f===aie&&p>0&&s.commas===0){let v=s.nodes;if(p===0||v.length===0){H({type:"text",value:f});continue}if(a.type==="dot"){if(s.range=[],a.value+=f,a.type="range",s.nodes.length!==3&&s.nodes.length!==5){s.invalid=!0,s.ranges=0,a.type="text";continue}s.ranges++,s.args=[];continue}if(a.type==="range"){v.pop();let _=v[v.length-1];_.value+=a.value+f,a=_,s.ranges--;continue}H({type:"dot",value:f});continue}H({type:"text",value:f})}do if(s=o.pop(),s.type!=="root"){s.nodes.forEach(x=>{x.nodes||(x.type==="open"&&(x.isOpen=!0),x.type==="close"&&(x.isClose=!0),x.nodes||(x.type="text"),x.invalid=!0)});let v=o[o.length-1],_=v.nodes.indexOf(s);v.nodes.splice(_,1,...s.nodes)}while(o.length>0);return H({type:"eos"}),i};dF.exports=gie});var HF=y((XDe,gF)=>{"use strict";var mF=nv(),Hie=iF(),yie=aF(),vie=hF(),An=(t,e={})=>{let r=[];if(Array.isArray(t))for(let n of t){let i=An.create(n,e);Array.isArray(i)?r.push(...i):r.push(i)}else r=[].concat(An.create(t,e));return e&&e.expand===!0&&e.nodupes===!0&&(r=[...new Set(r)]),r};An.parse=(t,e={})=>vie(t,e);An.stringify=(t,e={})=>mF(typeof t=="string"?An.parse(t,e):t,e);An.compile=(t,e={})=>(typeof t=="string"&&(t=An.parse(t,e)),Hie(t,e));An.expand=(t,e={})=>{typeof t=="string"&&(t=An.parse(t,e));let r=yie(t,e);return e.noempty===!0&&(r=r.filter(Boolean)),e.nodupes===!0&&(r=[...new Set(r)]),r};An.create=(t,e={})=>t===""||t.length<3?[t]:e.expand!==!0?An.compile(t,e):An.expand(t,e);gF.exports=An});var dh=y((JDe,_F)=>{"use strict";var bie=require("path"),go="\\\\/",yF=`[^${go}]`,ts="\\.",wie="\\+",_ie="\\?",ov="\\/",Aie="(?=.)",vF="[^/]",TS=`(?:${ov}|$)`,bF=`(?:^|${ov})`,$S=`${ts}{1,2}${TS}`,Iie=`(?!${ts})`,Sie=`(?!${bF}${$S})`,Eie=`(?!${ts}{0,1}${TS})`,Die=`(?!${$S})`,Cie=`[^.${ov}]`,Pie=`${vF}*?`,wF={DOT_LITERAL:ts,PLUS_LITERAL:wie,QMARK_LITERAL:_ie,SLASH_LITERAL:ov,ONE_CHAR:Aie,QMARK:vF,END_ANCHOR:TS,DOTS_SLASH:$S,NO_DOT:Iie,NO_DOTS:Sie,NO_DOT_SLASH:Eie,NO_DOTS_SLASH:Die,QMARK_NO_DOT:Cie,STAR:Pie,START_ANCHOR:bF},xie={...wF,SLASH_LITERAL:`[${go}]`,QMARK:yF,STAR:`${yF}*?`,DOTS_SLASH:`${ts}{1,2}(?:[${go}]|$)`,NO_DOT:`(?!${ts})`,NO_DOTS:`(?!(?:^|[${go}])${ts}{1,2}(?:[${go}]|$))`,NO_DOT_SLASH:`(?!${ts}{0,1}(?:[${go}]|$))`,NO_DOTS_SLASH:`(?!${ts}{1,2}(?:[${go}]|$))`,QMARK_NO_DOT:`[^.${go}]`,START_ANCHOR:`(?:^|[${go}])`,END_ANCHOR:`(?:[${go}]|$)`},Lie={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};_F.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:Lie,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:bie.sep,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?xie:wF}}});var hh=y(sn=>{"use strict";var Tie=require("path"),$ie=process.platform==="win32",{REGEX_BACKSLASH:Rie,REGEX_REMOVE_BACKSLASH:Mie,REGEX_SPECIAL_CHARS:kie,REGEX_SPECIAL_CHARS_GLOBAL:Oie}=dh();sn.isObject=t=>t!==null&&typeof t=="object"&&!Array.isArray(t);sn.hasRegexChars=t=>kie.test(t);sn.isRegexChar=t=>t.length===1&&sn.hasRegexChars(t);sn.escapeRegex=t=>t.replace(Oie,"\\$1");sn.toPosixSlashes=t=>t.replace(Rie,"/");sn.removeBackslashes=t=>t.replace(Mie,e=>e==="\\"?"":e);sn.supportsLookbehinds=()=>{let t=process.version.slice(1).split(".").map(Number);return t.length===3&&t[0]>=9||t[0]===8&&t[1]>=10};sn.isWindows=t=>t&&typeof t.windows=="boolean"?t.windows:$ie===!0||Tie.sep==="\\";sn.escapeLast=(t,e,r)=>{let n=t.lastIndexOf(e,r);return n===-1?t:t[n-1]==="\\"?sn.escapeLast(t,e,n-1):`${t.slice(0,n)}\\${t.slice(n)}`};sn.removePrefix=(t,e={})=>{let r=t;return r.startsWith("./")&&(r=r.slice(2),e.prefix="./"),r};sn.wrapOutput=(t,e={},r={})=>{let n=r.contains?"":"^",i=r.contains?"":"$",o=`${n}(?:${t})${i}`;return e.negated===!0&&(o=`(?:^(?!${o}).*$)`),o}});var xF=y((QDe,PF)=>{"use strict";var AF=hh(),{CHAR_ASTERISK:RS,CHAR_AT:Fie,CHAR_BACKWARD_SLASH:mh,CHAR_COMMA:Nie,CHAR_DOT:MS,CHAR_EXCLAMATION_MARK:kS,CHAR_FORWARD_SLASH:CF,CHAR_LEFT_CURLY_BRACE:OS,CHAR_LEFT_PARENTHESES:FS,CHAR_LEFT_SQUARE_BRACKET:Bie,CHAR_PLUS:Uie,CHAR_QUESTION_MARK:IF,CHAR_RIGHT_CURLY_BRACE:jie,CHAR_RIGHT_PARENTHESES:SF,CHAR_RIGHT_SQUARE_BRACKET:qie}=dh(),EF=t=>t===CF||t===mh,DF=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?1/0:1)},Wie=(t,e)=>{let r=e||{},n=t.length-1,i=r.parts===!0||r.scanToEnd===!0,o=[],s=[],a=[],u=t,c=-1,l=0,p=0,f=!1,m=!1,h=!1,H=!1,v=!1,_=!1,x=!1,k=!1,T=!1,j=!1,K=0,G,F,R={value:"",depth:0,isGlob:!1},M=()=>c>=n,D=()=>u.charCodeAt(c+1),W=()=>(G=F,u.charCodeAt(++c));for(;c<n;){F=W();let ue;if(F===mh){x=R.backslashes=!0,F=W(),F===OS&&(_=!0);continue}if(_===!0||F===OS){for(K++;M()!==!0&&(F=W());){if(F===mh){x=R.backslashes=!0,W();continue}if(F===OS){K++;continue}if(_!==!0&&F===MS&&(F=W())===MS){if(f=R.isBrace=!0,h=R.isGlob=!0,j=!0,i===!0)continue;break}if(_!==!0&&F===Nie){if(f=R.isBrace=!0,h=R.isGlob=!0,j=!0,i===!0)continue;break}if(F===jie&&(K--,K===0)){_=!1,f=R.isBrace=!0,j=!0;break}}if(i===!0)continue;break}if(F===CF){if(o.push(c),s.push(R),R={value:"",depth:0,isGlob:!1},j===!0)continue;if(G===MS&&c===l+1){l+=2;continue}p=c+1;continue}if(r.noext!==!0&&(F===Uie||F===Fie||F===RS||F===IF||F===kS)===!0&&D()===FS){if(h=R.isGlob=!0,H=R.isExtglob=!0,j=!0,F===kS&&c===l&&(T=!0),i===!0){for(;M()!==!0&&(F=W());){if(F===mh){x=R.backslashes=!0,F=W();continue}if(F===SF){h=R.isGlob=!0,j=!0;break}}continue}break}if(F===RS){if(G===RS&&(v=R.isGlobstar=!0),h=R.isGlob=!0,j=!0,i===!0)continue;break}if(F===IF){if(h=R.isGlob=!0,j=!0,i===!0)continue;break}if(F===Bie){for(;M()!==!0&&(ue=W());){if(ue===mh){x=R.backslashes=!0,W();continue}if(ue===qie){m=R.isBracket=!0,h=R.isGlob=!0,j=!0;break}}if(i===!0)continue;break}if(r.nonegate!==!0&&F===kS&&c===l){k=R.negated=!0,l++;continue}if(r.noparen!==!0&&F===FS){if(h=R.isGlob=!0,i===!0){for(;M()!==!0&&(F=W());){if(F===FS){x=R.backslashes=!0,F=W();continue}if(F===SF){j=!0;break}}continue}break}if(h===!0){if(j=!0,i===!0)continue;break}}r.noext===!0&&(H=!1,h=!1);let O=u,V="",E="";l>0&&(V=u.slice(0,l),u=u.slice(l),p-=l),O&&h===!0&&p>0?(O=u.slice(0,p),E=u.slice(p)):h===!0?(O="",E=u):O=u,O&&O!==""&&O!=="/"&&O!==u&&EF(O.charCodeAt(O.length-1))&&(O=O.slice(0,-1)),r.unescape===!0&&(E&&(E=AF.removeBackslashes(E)),O&&x===!0&&(O=AF.removeBackslashes(O)));let L={prefix:V,input:t,start:l,base:O,glob:E,isBrace:f,isBracket:m,isGlob:h,isExtglob:H,isGlobstar:v,negated:k,negatedExtglob:T};if(r.tokens===!0&&(L.maxDepth=0,EF(F)||s.push(R),L.tokens=s),r.parts===!0||r.tokens===!0){let ue;for(let oe=0;oe<o.length;oe++){let ne=ue?ue+1:l,X=o[oe],ee=t.slice(ne,X);r.tokens&&(oe===0&&l!==0?(s[oe].isPrefix=!0,s[oe].value=V):s[oe].value=ee,DF(s[oe]),L.maxDepth+=s[oe].depth),(oe!==0||ee!=="")&&a.push(ee),ue=X}if(ue&&ue+1<t.length){let oe=t.slice(ue+1);a.push(oe),r.tokens&&(s[s.length-1].value=oe,DF(s[s.length-1]),L.maxDepth+=s[s.length-1].depth)}L.slashes=o,L.parts=a}return L};PF.exports=Wie});var $F=y((ZDe,TF)=>{"use strict";var sv=dh(),In=hh(),{MAX_LENGTH:av,POSIX_REGEX_SOURCE:Vie,REGEX_NON_SPECIAL_CHARS:Gie,REGEX_SPECIAL_CHARS_BACKREF:Kie,REPLACEMENTS:LF}=sv,zie=(t,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...t,e);t.sort();let r=`[${t.join("-")}]`;try{new RegExp(r)}catch{return t.map(i=>In.escapeRegex(i)).join("..")}return r},Rl=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,NS=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=LF[t]||t;let r={...e},n=typeof r.maxLength=="number"?Math.min(av,r.maxLength):av,i=t.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);let o={type:"bos",value:"",output:r.prepend||""},s=[o],a=r.capture?"":"?:",u=In.isWindows(e),c=sv.globChars(u),l=sv.extglobChars(c),{DOT_LITERAL:p,PLUS_LITERAL:f,SLASH_LITERAL:m,ONE_CHAR:h,DOTS_SLASH:H,NO_DOT:v,NO_DOT_SLASH:_,NO_DOTS_SLASH:x,QMARK:k,QMARK_NO_DOT:T,STAR:j,START_ANCHOR:K}=c,G=Q=>`(${a}(?:(?!${K}${Q.dot?H:p}).)*?)`,F=r.dot?"":v,R=r.dot?k:T,M=r.bash===!0?G(r):j;r.capture&&(M=`(${M})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let D={input:t,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:s};t=In.removePrefix(t,D),i=t.length;let W=[],O=[],V=[],E=o,L,ue=()=>D.index===i-1,oe=D.peek=(Q=1)=>t[D.index+Q],ne=D.advance=()=>t[++D.index]||"",X=()=>t.slice(D.index+1),ee=(Q="",be=0)=>{D.consumed+=Q,D.index+=be},ae=Q=>{D.output+=Q.output!=null?Q.output:Q.value,ee(Q.value)},se=()=>{let Q=1;for(;oe()==="!"&&(oe(2)!=="("||oe(3)==="?");)ne(),D.start++,Q++;return Q%2===0?!1:(D.negated=!0,D.start++,!0)},he=Q=>{D[Q]++,V.push(Q)},Ht=Q=>{D[Q]--,V.pop()},me=Q=>{if(E.type==="globstar"){let be=D.braces>0&&(Q.type==="comma"||Q.type==="brace"),Y=Q.extglob===!0||W.length&&(Q.type==="pipe"||Q.type==="paren");Q.type!=="slash"&&Q.type!=="paren"&&!be&&!Y&&(D.output=D.output.slice(0,-E.output.length),E.type="star",E.value="*",E.output=M,D.output+=E.output)}if(W.length&&Q.type!=="paren"&&(W[W.length-1].inner+=Q.value),(Q.value||Q.output)&&ae(Q),E&&E.type==="text"&&Q.type==="text"){E.value+=Q.value,E.output=(E.output||"")+Q.value;return}Q.prev=E,s.push(Q),E=Q},Rt=(Q,be)=>{let Y={...l[be],conditions:1,inner:""};Y.prev=E,Y.parens=D.parens,Y.output=D.output;let ye=(r.capture?"(":"")+Y.open;he("parens"),me({type:Q,value:be,output:D.output?"":h}),me({type:"paren",extglob:!0,value:ne(),output:ye}),W.push(Y)},Cr=Q=>{let be=Q.close+(r.capture?")":""),Y;if(Q.type==="negate"){let ye=M;if(Q.inner&&Q.inner.length>1&&Q.inner.includes("/")&&(ye=G(r)),(ye!==M||ue()||/^\)+$/.test(X()))&&(be=Q.close=`)$))${ye}`),Q.inner.includes("*")&&(Y=X())&&/^\.[^\\/.]+$/.test(Y)){let Ne=NS(Y,{...e,fastpaths:!1}).output;be=Q.close=`)${Ne})${ye})`}Q.prev.type==="bos"&&(D.negatedExtglob=!0)}me({type:"paren",extglob:!0,value:L,output:be}),Ht("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let Q=!1,be=t.replace(Kie,(Y,ye,Ne,ft,yt,Fs)=>ft==="\\"?(Q=!0,Y):ft==="?"?ye?ye+ft+(yt?k.repeat(yt.length):""):Fs===0?R+(yt?k.repeat(yt.length):""):k.repeat(Ne.length):ft==="."?p.repeat(Ne.length):ft==="*"?ye?ye+ft+(yt?M:""):M:ye?Y:`\\${Y}`);return Q===!0&&(r.unescape===!0?be=be.replace(/\\/g,""):be=be.replace(/\\+/g,Y=>Y.length%2===0?"\\\\":Y?"\\":"")),be===t&&r.contains===!0?(D.output=t,D):(D.output=In.wrapOutput(be,D,e),D)}for(;!ue();){if(L=ne(),L==="\0")continue;if(L==="\\"){let Y=oe();if(Y==="/"&&r.bash!==!0||Y==="."||Y===";")continue;if(!Y){L+="\\",me({type:"text",value:L});continue}let ye=/^\\+/.exec(X()),Ne=0;if(ye&&ye[0].length>2&&(Ne=ye[0].length,D.index+=Ne,Ne%2!==0&&(L+="\\")),r.unescape===!0?L=ne():L+=ne(),D.brackets===0){me({type:"text",value:L});continue}}if(D.brackets>0&&(L!=="]"||E.value==="["||E.value==="[^")){if(r.posix!==!1&&L===":"){let Y=E.value.slice(1);if(Y.includes("[")&&(E.posix=!0,Y.includes(":"))){let ye=E.value.lastIndexOf("["),Ne=E.value.slice(0,ye),ft=E.value.slice(ye+2),yt=Vie[ft];if(yt){E.value=Ne+yt,D.backtrack=!0,ne(),!o.output&&s.indexOf(E)===1&&(o.output=h);continue}}}(L==="["&&oe()!==":"||L==="-"&&oe()==="]")&&(L=`\\${L}`),L==="]"&&(E.value==="["||E.value==="[^")&&(L=`\\${L}`),r.posix===!0&&L==="!"&&E.value==="["&&(L="^"),E.value+=L,ae({value:L});continue}if(D.quotes===1&&L!=='"'){L=In.escapeRegex(L),E.value+=L,ae({value:L});continue}if(L==='"'){D.quotes=D.quotes===1?0:1,r.keepQuotes===!0&&me({type:"text",value:L});continue}if(L==="("){he("parens"),me({type:"paren",value:L});continue}if(L===")"){if(D.parens===0&&r.strictBrackets===!0)throw new SyntaxError(Rl("opening","("));let Y=W[W.length-1];if(Y&&D.parens===Y.parens+1){Cr(W.pop());continue}me({type:"paren",value:L,output:D.parens?")":"\\)"}),Ht("parens");continue}if(L==="["){if(r.nobracket===!0||!X().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(Rl("closing","]"));L=`\\${L}`}else he("brackets");me({type:"bracket",value:L});continue}if(L==="]"){if(r.nobracket===!0||E&&E.type==="bracket"&&E.value.length===1){me({type:"text",value:L,output:`\\${L}`});continue}if(D.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(Rl("opening","["));me({type:"text",value:L,output:`\\${L}`});continue}Ht("brackets");let Y=E.value.slice(1);if(E.posix!==!0&&Y[0]==="^"&&!Y.includes("/")&&(L=`/${L}`),E.value+=L,ae({value:L}),r.literalBrackets===!1||In.hasRegexChars(Y))continue;let ye=In.escapeRegex(E.value);if(D.output=D.output.slice(0,-E.value.length),r.literalBrackets===!0){D.output+=ye,E.value=ye;continue}E.value=`(${a}${ye}|${E.value})`,D.output+=E.value;continue}if(L==="{"&&r.nobrace!==!0){he("braces");let Y={type:"brace",value:L,output:"(",outputIndex:D.output.length,tokensIndex:D.tokens.length};O.push(Y),me(Y);continue}if(L==="}"){let Y=O[O.length-1];if(r.nobrace===!0||!Y){me({type:"text",value:L,output:L});continue}let ye=")";if(Y.dots===!0){let Ne=s.slice(),ft=[];for(let yt=Ne.length-1;yt>=0&&(s.pop(),Ne[yt].type!=="brace");yt--)Ne[yt].type!=="dots"&&ft.unshift(Ne[yt].value);ye=zie(ft,r),D.backtrack=!0}if(Y.comma!==!0&&Y.dots!==!0){let Ne=D.output.slice(0,Y.outputIndex),ft=D.tokens.slice(Y.tokensIndex);Y.value=Y.output="\\{",L=ye="\\}",D.output=Ne;for(let yt of ft)D.output+=yt.output||yt.value}me({type:"brace",value:L,output:ye}),Ht("braces"),O.pop();continue}if(L==="|"){W.length>0&&W[W.length-1].conditions++,me({type:"text",value:L});continue}if(L===","){let Y=L,ye=O[O.length-1];ye&&V[V.length-1]==="braces"&&(ye.comma=!0,Y="|"),me({type:"comma",value:L,output:Y});continue}if(L==="/"){if(E.type==="dot"&&D.index===D.start+1){D.start=D.index+1,D.consumed="",D.output="",s.pop(),E=o;continue}me({type:"slash",value:L,output:m});continue}if(L==="."){if(D.braces>0&&E.type==="dot"){E.value==="."&&(E.output=p);let Y=O[O.length-1];E.type="dots",E.output+=L,E.value+=L,Y.dots=!0;continue}if(D.braces+D.parens===0&&E.type!=="bos"&&E.type!=="slash"){me({type:"text",value:L,output:p});continue}me({type:"dot",value:L,output:p});continue}if(L==="?"){if(!(E&&E.value==="(")&&r.noextglob!==!0&&oe()==="("&&oe(2)!=="?"){Rt("qmark",L);continue}if(E&&E.type==="paren"){let ye=oe(),Ne=L;if(ye==="<"&&!In.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(E.value==="("&&!/[!=<:]/.test(ye)||ye==="<"&&!/<([!=]|\w+>)/.test(X()))&&(Ne=`\\${L}`),me({type:"text",value:L,output:Ne});continue}if(r.dot!==!0&&(E.type==="slash"||E.type==="bos")){me({type:"qmark",value:L,output:T});continue}me({type:"qmark",value:L,output:k});continue}if(L==="!"){if(r.noextglob!==!0&&oe()==="("&&(oe(2)!=="?"||!/[!=<:]/.test(oe(3)))){Rt("negate",L);continue}if(r.nonegate!==!0&&D.index===0){se();continue}}if(L==="+"){if(r.noextglob!==!0&&oe()==="("&&oe(2)!=="?"){Rt("plus",L);continue}if(E&&E.value==="("||r.regex===!1){me({type:"plus",value:L,output:f});continue}if(E&&(E.type==="bracket"||E.type==="paren"||E.type==="brace")||D.parens>0){me({type:"plus",value:L});continue}me({type:"plus",value:f});continue}if(L==="@"){if(r.noextglob!==!0&&oe()==="("&&oe(2)!=="?"){me({type:"at",extglob:!0,value:L,output:""});continue}me({type:"text",value:L});continue}if(L!=="*"){(L==="$"||L==="^")&&(L=`\\${L}`);let Y=Gie.exec(X());Y&&(L+=Y[0],D.index+=Y[0].length),me({type:"text",value:L});continue}if(E&&(E.type==="globstar"||E.star===!0)){E.type="star",E.star=!0,E.value+=L,E.output=M,D.backtrack=!0,D.globstar=!0,ee(L);continue}let Q=X();if(r.noextglob!==!0&&/^\([^?]/.test(Q)){Rt("star",L);continue}if(E.type==="star"){if(r.noglobstar===!0){ee(L);continue}let Y=E.prev,ye=Y.prev,Ne=Y.type==="slash"||Y.type==="bos",ft=ye&&(ye.type==="star"||ye.type==="globstar");if(r.bash===!0&&(!Ne||Q[0]&&Q[0]!=="/")){me({type:"star",value:L,output:""});continue}let yt=D.braces>0&&(Y.type==="comma"||Y.type==="brace"),Fs=W.length&&(Y.type==="pipe"||Y.type==="paren");if(!Ne&&Y.type!=="paren"&&!yt&&!Fs){me({type:"star",value:L,output:""});continue}for(;Q.slice(0,3)==="/**";){let Ns=t[D.index+4];if(Ns&&Ns!=="/")break;Q=Q.slice(3),ee("/**",3)}if(Y.type==="bos"&&ue()){E.type="globstar",E.value+=L,E.output=G(r),D.output=E.output,D.globstar=!0,ee(L);continue}if(Y.type==="slash"&&Y.prev.type!=="bos"&&!ft&&ue()){D.output=D.output.slice(0,-(Y.output+E.output).length),Y.output=`(?:${Y.output}`,E.type="globstar",E.output=G(r)+(r.strictSlashes?")":"|$)"),E.value+=L,D.globstar=!0,D.output+=Y.output+E.output,ee(L);continue}if(Y.type==="slash"&&Y.prev.type!=="bos"&&Q[0]==="/"){let Ns=Q[1]!==void 0?"|$":"";D.output=D.output.slice(0,-(Y.output+E.output).length),Y.output=`(?:${Y.output}`,E.type="globstar",E.output=`${G(r)}${m}|${m}${Ns})`,E.value+=L,D.output+=Y.output+E.output,D.globstar=!0,ee(L+ne()),me({type:"slash",value:"/",output:""});continue}if(Y.type==="bos"&&Q[0]==="/"){E.type="globstar",E.value+=L,E.output=`(?:^|${m}|${G(r)}${m})`,D.output=E.output,D.globstar=!0,ee(L+ne()),me({type:"slash",value:"/",output:""});continue}D.output=D.output.slice(0,-E.output.length),E.type="globstar",E.output=G(r),E.value+=L,D.output+=E.output,D.globstar=!0,ee(L);continue}let be={type:"star",value:L,output:M};if(r.bash===!0){be.output=".*?",(E.type==="bos"||E.type==="slash")&&(be.output=F+be.output),me(be);continue}if(E&&(E.type==="bracket"||E.type==="paren")&&r.regex===!0){be.output=L,me(be);continue}(D.index===D.start||E.type==="slash"||E.type==="dot")&&(E.type==="dot"?(D.output+=_,E.output+=_):r.dot===!0?(D.output+=x,E.output+=x):(D.output+=F,E.output+=F),oe()!=="*"&&(D.output+=h,E.output+=h)),me(be)}for(;D.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(Rl("closing","]"));D.output=In.escapeLast(D.output,"["),Ht("brackets")}for(;D.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(Rl("closing",")"));D.output=In.escapeLast(D.output,"("),Ht("parens")}for(;D.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(Rl("closing","}"));D.output=In.escapeLast(D.output,"{"),Ht("braces")}if(r.strictSlashes!==!0&&(E.type==="star"||E.type==="bracket")&&me({type:"maybe_slash",value:"",output:`${m}?`}),D.backtrack===!0){D.output="";for(let Q of D.tokens)D.output+=Q.output!=null?Q.output:Q.value,Q.suffix&&(D.output+=Q.suffix)}return D};NS.fastpaths=(t,e)=>{let r={...e},n=typeof r.maxLength=="number"?Math.min(av,r.maxLength):av,i=t.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);t=LF[t]||t;let o=In.isWindows(e),{DOT_LITERAL:s,SLASH_LITERAL:a,ONE_CHAR:u,DOTS_SLASH:c,NO_DOT:l,NO_DOTS:p,NO_DOTS_SLASH:f,STAR:m,START_ANCHOR:h}=sv.globChars(o),H=r.dot?p:l,v=r.dot?f:l,_=r.capture?"":"?:",x={negated:!1,prefix:""},k=r.bash===!0?".*?":m;r.capture&&(k=`(${k})`);let T=F=>F.noglobstar===!0?k:`(${_}(?:(?!${h}${F.dot?c:s}).)*?)`,j=F=>{switch(F){case"*":return`${H}${u}${k}`;case".*":return`${s}${u}${k}`;case"*.*":return`${H}${k}${s}${u}${k}`;case"*/*":return`${H}${k}${a}${u}${v}${k}`;case"**":return H+T(r);case"**/*":return`(?:${H}${T(r)}${a})?${v}${u}${k}`;case"**/*.*":return`(?:${H}${T(r)}${a})?${v}${k}${s}${u}${k}`;case"**/.*":return`(?:${H}${T(r)}${a})?${s}${u}${k}`;default:{let R=/^(.*?)\.(\w+)$/.exec(F);if(!R)return;let M=j(R[1]);return M?M+s+R[2]:void 0}}},K=In.removePrefix(t,x),G=j(K);return G&&r.strictSlashes!==!0&&(G+=`${a}?`),G};TF.exports=NS});var MF=y((eCe,RF)=>{"use strict";var Xie=require("path"),Jie=xF(),BS=$F(),US=hh(),Yie=dh(),Qie=t=>t&&typeof t=="object"&&!Array.isArray(t),Lt=(t,e,r=!1)=>{if(Array.isArray(t)){let l=t.map(f=>Lt(f,e,r));return f=>{for(let m of l){let h=m(f);if(h)return h}return!1}}let n=Qie(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");let i=e||{},o=US.isWindows(e),s=n?Lt.compileRe(t,e):Lt.makeRe(t,e,!1,!0),a=s.state;delete s.state;let u=()=>!1;if(i.ignore){let l={...e,ignore:null,onMatch:null,onResult:null};u=Lt(i.ignore,l,r)}let c=(l,p=!1)=>{let{isMatch:f,match:m,output:h}=Lt.test(l,s,e,{glob:t,posix:o}),H={glob:t,state:a,regex:s,posix:o,input:l,output:h,match:m,isMatch:f};return typeof i.onResult=="function"&&i.onResult(H),f===!1?(H.isMatch=!1,p?H:!1):u(l)?(typeof i.onIgnore=="function"&&i.onIgnore(H),H.isMatch=!1,p?H:!1):(typeof i.onMatch=="function"&&i.onMatch(H),p?H:!0)};return r&&(c.state=a),c};Lt.test=(t,e,r,{glob:n,posix:i}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};let o=r||{},s=o.format||(i?US.toPosixSlashes:null),a=t===n,u=a&&s?s(t):t;return a===!1&&(u=s?s(t):t,a=u===n),(a===!1||o.capture===!0)&&(o.matchBase===!0||o.basename===!0?a=Lt.matchBase(t,e,r,i):a=e.exec(u)),{isMatch:!!a,match:a,output:u}};Lt.matchBase=(t,e,r,n=US.isWindows(r))=>(e instanceof RegExp?e:Lt.makeRe(e,r)).test(Xie.basename(t));Lt.isMatch=(t,e,r)=>Lt(e,r)(t);Lt.parse=(t,e)=>Array.isArray(t)?t.map(r=>Lt.parse(r,e)):BS(t,{...e,fastpaths:!1});Lt.scan=(t,e)=>Jie(t,e);Lt.compileRe=(t,e,r=!1,n=!1)=>{if(r===!0)return t.output;let i=e||{},o=i.contains?"":"^",s=i.contains?"":"$",a=`${o}(?:${t.output})${s}`;t&&t.negated===!0&&(a=`^(?!${a}).*$`);let u=Lt.toRegex(a,e);return n===!0&&(u.state=t),u};Lt.makeRe=(t,e={},r=!1,n=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let i={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(i.output=BS.fastpaths(t,e)),i.output||(i=BS(t,e)),Lt.compileRe(i,e,r,n)};Lt.toRegex=(t,e)=>{try{let r=e||{};return new RegExp(t,r.flags||(r.nocase?"i":""))}catch(r){if(e&&e.debug===!0)throw r;return/$^/}};Lt.constants=Yie;RF.exports=Lt});var OF=y((tCe,kF)=>{"use strict";kF.exports=MF()});var gh=y((rCe,UF)=>{"use strict";var NF=require("util"),BF=HF(),Ho=OF(),jS=hh(),FF=t=>t===""||t==="./",mt=(t,e,r)=>{e=[].concat(e),t=[].concat(t);let n=new Set,i=new Set,o=new Set,s=0,a=l=>{o.add(l.output),r&&r.onResult&&r.onResult(l)};for(let l=0;l<e.length;l++){let p=Ho(String(e[l]),{...r,onResult:a},!0),f=p.state.negated||p.state.negatedExtglob;f&&s++;for(let m of t){let h=p(m,!0);(f?!h.isMatch:h.isMatch)&&(f?n.add(h.output):(n.delete(h.output),i.add(h.output)))}}let c=(s===e.length?[...o]:[...i]).filter(l=>!n.has(l));if(r&&c.length===0){if(r.failglob===!0)throw new Error(`No matches found for "${e.join(", ")}"`);if(r.nonull===!0||r.nullglob===!0)return r.unescape?e.map(l=>l.replace(/\\/g,"")):e}return c};mt.match=mt;mt.matcher=(t,e)=>Ho(t,e);mt.isMatch=(t,e,r)=>Ho(e,r)(t);mt.any=mt.isMatch;mt.not=(t,e,r={})=>{e=[].concat(e).map(String);let n=new Set,i=[],o=a=>{r.onResult&&r.onResult(a),i.push(a.output)},s=new Set(mt(t,e,{...r,onResult:o}));for(let a of i)s.has(a)||n.add(a);return[...n]};mt.contains=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${NF.inspect(t)}"`);if(Array.isArray(e))return e.some(n=>mt.contains(t,n,r));if(typeof e=="string"){if(FF(t)||FF(e))return!1;if(t.includes(e)||t.startsWith("./")&&t.slice(2).includes(e))return!0}return mt.isMatch(t,e,{...r,contains:!0})};mt.matchKeys=(t,e,r)=>{if(!jS.isObject(t))throw new TypeError("Expected the first argument to be an object");let n=mt(Object.keys(t),e,r),i={};for(let o of n)i[o]=t[o];return i};mt.some=(t,e,r)=>{let n=[].concat(t);for(let i of[].concat(e)){let o=Ho(String(i),r);if(n.some(s=>o(s)))return!0}return!1};mt.every=(t,e,r)=>{let n=[].concat(t);for(let i of[].concat(e)){let o=Ho(String(i),r);if(!n.every(s=>o(s)))return!1}return!0};mt.all=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${NF.inspect(t)}"`);return[].concat(e).every(n=>Ho(n,r)(t))};mt.capture=(t,e,r)=>{let n=jS.isWindows(r),o=Ho.makeRe(String(t),{...r,capture:!0}).exec(n?jS.toPosixSlashes(e):e);if(o)return o.slice(1).map(s=>s===void 0?"":s)};mt.makeRe=(...t)=>Ho.makeRe(...t);mt.scan=(...t)=>Ho.scan(...t);mt.parse=(t,e)=>{let r=[];for(let n of[].concat(t||[]))for(let i of BF(String(n),e))r.push(Ho.parse(i,e));return r};mt.braces=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return e&&e.nobrace===!0||!/\{.*\}/.test(t)?[t]:BF(t,e)};mt.braceExpand=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return mt.braces(t,{...e,expand:!0})};UF.exports=mt});var VF=y(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});function roe(t){let e=[],r=new Array(4),n=[0,192,224,240],i=[127,63,63,63],o=[0,128,128,128];for(let s of t){let a=r,u=s.codePointAt(0),c=0-(-(u&4294967168)>>31)-(-(u&4294965248)>>31)-(-(u&4294901760)>>31),l=i[c],p=o[c];a[3]=p|u&l,a[2]=p|u>>>6&l,a[1]=p|u>>>12&l,a[0]=p|u>>>18&l;let f=3-c;a[f]|=n[c],Array.prototype.push.apply(e,a.slice(f))}return new Uint8Array(e)}sa.toUtf8_1=roe;function noe(t){let e=[];for(let r of t){let n=r.codePointAt(0);n<128?e.push(n):n<2048?e.push(192|n>>6&31,128|n&63):n<65536?e.push(224|n>>12&15,128|n>>6&63,128|n&63):e.push(240|n>>18&7,128|n>>12&63,128|n>>6&63,128|n&63)}return new Uint8Array(e)}sa.toUtf8_2=noe;function WF(t){let e=[];for(let r=0,n=t.length;r<n;++r){let i=t.charCodeAt(r);if(i<128)e.push(i);else if(i<2048)e.push(192|i>>6,128|i&63);else if(i<55296||i>=57344)e.push(224|i>>12,128|i>>6&63,128|i&63);else{let o=65536+((i&1023)<<10|t.charCodeAt(++r)&1023);e.push(240|o>>18&7,128|o>>12&63,128|o>>6&63,128|o&63)}}return new Uint8Array(e)}sa.toUtf8_3=WF;sa.toUtf8=WF;sa.default=sa.toUtf8});var zF=y(qS=>{"use strict";Object.defineProperty(qS,"__esModule",{value:!0});var ioe=VF(),Fl=2654435761,Nl=2246822519,uv=3266489917,GF=668265263,KF=374761393;function ooe(t,e=0){t=typeof t=="string"?ioe.default(t):t;let r=t,n=e+KF&4294967295,i=0;if(r.length>=16){let s=[e+Fl+Nl&4294967295,e+Nl&4294967295,e+0&4294967295,e-Fl&4294967295],a=t,u=a.length-16,c=0;for(i=0;(i&4294967280)<=u;i+=4){let l=i,p=a[l+0]+(a[l+1]<<8),f=a[l+2]+(a[l+3]<<8),m=p*Nl+(f*Nl<<16),h=s[c]+m&4294967295;h=h<<13|h>>>19;let H=h&65535,v=h>>>16;s[c]=H*Fl+(v*Fl<<16)&4294967295,c=c+1&3}n=(s[0]<<1|s[0]>>>31)+(s[1]<<7|s[1]>>>25)+(s[2]<<12|s[2]>>>20)+(s[3]<<18|s[3]>>>14)&4294967295}n=n+t.length&4294967295;let o=t.length-4;for(;i<=o;i+=4){let s=i,a=r[s+0]+(r[s+1]<<8),u=r[s+2]+(r[s+3]<<8),c=a*uv+(u*uv<<16);n=n+c&4294967295,n=n<<17|n>>>15,n=(n&65535)*GF+((n>>>16)*GF<<16)&4294967295}for(;i<r.length;++i){let s=r[i];n=n+s*KF,n=n<<11|n>>>21,n=(n&65535)*Fl+((n>>>16)*Fl<<16)&4294967295}return n=n^n>>>15,n=((n&65535)*Nl&4294967295)+((n>>>16)*Nl<<16),n=n^n>>>13,n=((n&65535)*uv&4294967295)+((n>>>16)*uv<<16),n=n^n>>>16,n<0?n+4294967296:n}qS.xxHash32=ooe});var XF=y(cv=>{"use strict";function soe(t){for(var e in t)cv.hasOwnProperty(e)||(cv[e]=t[e])}Object.defineProperty(cv,"__esModule",{value:!0});soe(zF())});var hN=y((exe,dN)=>{"use strict";var{Duplex:foe}=require("stream");function pN(t){t.emit("close")}function doe(){!this.destroyed&&this._writableState.finished&&this.destroy()}function fN(t){this.removeListener("error",fN),this.destroy(),this.listenerCount("error")===0&&this.emit("error",t)}function hoe(t,e){let r=!0,n=new foe({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return t.on("message",function(o,s){let a=!s&&n._readableState.objectMode?o.toString():o;n.push(a)||t.pause()}),t.once("error",function(o){n.destroyed||(r=!1,n.destroy(o))}),t.once("close",function(){n.destroyed||n.push(null)}),n._destroy=function(i,o){if(t.readyState===t.CLOSED){o(i),process.nextTick(pN,n);return}let s=!1;t.once("error",function(u){s=!0,o(u)}),t.once("close",function(){s||o(i),process.nextTick(pN,n)}),r&&t.terminate()},n._final=function(i){if(t.readyState===t.CONNECTING){t.once("open",function(){n._final(i)});return}t._socket!==null&&(t._socket._writableState.finished?(i(),n._readableState.endEmitted&&n.destroy()):(t._socket.once("finish",function(){i()}),t.close()))},n._read=function(){t.isPaused&&t.resume()},n._write=function(i,o,s){if(t.readyState===t.CONNECTING){t.once("open",function(){n._write(i,o,s)});return}t.send(i,s)},n.on("end",doe),n.on("error",fN),n}dN.exports=hoe});var ua=y((txe,mN)=>{"use strict";mN.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var wh=y((rxe,mv)=>{"use strict";var{EMPTY_BUFFER:moe}=ua(),ZS=Buffer[Symbol.species];function goe(t,e){if(t.length===0)return moe;if(t.length===1)return t[0];let r=Buffer.allocUnsafe(e),n=0;for(let i=0;i<t.length;i++){let o=t[i];r.set(o,n),n+=o.length}return n<e?new ZS(r.buffer,r.byteOffset,n):r}function gN(t,e,r,n,i){for(let o=0;o<i;o++)r[n+o]=t[o]^e[o&3]}function HN(t,e){for(let r=0;r<t.length;r++)t[r]^=e[r&3]}function Hoe(t){return t.length===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.length)}function eE(t){if(eE.readOnly=!0,Buffer.isBuffer(t))return t;let e;return t instanceof ArrayBuffer?e=new ZS(t):ArrayBuffer.isView(t)?e=new ZS(t.buffer,t.byteOffset,t.byteLength):(e=Buffer.from(t),eE.readOnly=!1),e}mv.exports={concat:goe,mask:gN,toArrayBuffer:Hoe,toBuffer:eE,unmask:HN};if(!process.env.WS_NO_BUFFER_UTIL)try{let t=require("bufferutil");mv.exports.mask=function(e,r,n,i,o){o<48?gN(e,r,n,i,o):t.mask(e,r,n,i,o)},mv.exports.unmask=function(e,r){e.length<32?HN(e,r):t.unmask(e,r)}}catch{}});var bN=y((nxe,vN)=>{"use strict";var yN=Symbol("kDone"),tE=Symbol("kRun"),rE=class{constructor(e){this[yN]=()=>{this.pending--,this[tE]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[tE]()}[tE](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[yN])}}};vN.exports=rE});var Ih=y((ixe,IN)=>{"use strict";var _h=require("zlib"),wN=wh(),yoe=bN(),{kStatusCode:_N}=ua(),voe=Buffer[Symbol.species],boe=Buffer.from([0,0,255,255]),yv=Symbol("permessage-deflate"),ns=Symbol("total-length"),Ah=Symbol("callback"),ca=Symbol("buffers"),Hv=Symbol("error"),gv,nE=class{constructor(e,r,n){if(this._maxPayload=n|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!r,this._deflate=null,this._inflate=null,this.params=null,!gv){let i=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;gv=new yoe(i)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[Ah];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let r=this._options,n=e.find(i=>!(r.serverNoContextTakeover===!1&&i.server_no_context_takeover||i.server_max_window_bits&&(r.serverMaxWindowBits===!1||typeof r.serverMaxWindowBits=="number"&&r.serverMaxWindowBits>i.server_max_window_bits)||typeof r.clientMaxWindowBits=="number"&&!i.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return r.serverNoContextTakeover&&(n.server_no_context_takeover=!0),r.clientNoContextTakeover&&(n.client_no_context_takeover=!0),typeof r.serverMaxWindowBits=="number"&&(n.server_max_window_bits=r.serverMaxWindowBits),typeof r.clientMaxWindowBits=="number"?n.client_max_window_bits=r.clientMaxWindowBits:(n.client_max_window_bits===!0||r.clientMaxWindowBits===!1)&&delete n.client_max_window_bits,n}acceptAsClient(e){let r=e[0];if(this._options.clientNoContextTakeover===!1&&r.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!r.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(r.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&r.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return r}normalizeParams(e){return e.forEach(r=>{Object.keys(r).forEach(n=>{let i=r[n];if(i.length>1)throw new Error(`Parameter "${n}" must have only a single value`);if(i=i[0],n==="client_max_window_bits"){if(i!==!0){let o=+i;if(!Number.isInteger(o)||o<8||o>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=o}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else if(n==="server_max_window_bits"){let o=+i;if(!Number.isInteger(o)||o<8||o>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=o}else if(n==="client_no_context_takeover"||n==="server_no_context_takeover"){if(i!==!0)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else throw new Error(`Unknown parameter "${n}"`);r[n]=i})}),e}decompress(e,r,n){gv.add(i=>{this._decompress(e,r,(o,s)=>{i(),n(o,s)})})}compress(e,r,n){gv.add(i=>{this._compress(e,r,(o,s)=>{i(),n(o,s)})})}_decompress(e,r,n){let i=this._isServer?"client":"server";if(!this._inflate){let o=`${i}_max_window_bits`,s=typeof this.params[o]!="number"?_h.Z_DEFAULT_WINDOWBITS:this.params[o];this._inflate=_h.createInflateRaw({...this._options.zlibInflateOptions,windowBits:s}),this._inflate[yv]=this,this._inflate[ns]=0,this._inflate[ca]=[],this._inflate.on("error",_oe),this._inflate.on("data",AN)}this._inflate[Ah]=n,this._inflate.write(e),r&&this._inflate.write(boe),this._inflate.flush(()=>{let o=this._inflate[Hv];if(o){this._inflate.close(),this._inflate=null,n(o);return}let s=wN.concat(this._inflate[ca],this._inflate[ns]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[ns]=0,this._inflate[ca]=[],r&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),n(null,s)})}_compress(e,r,n){let i=this._isServer?"server":"client";if(!this._deflate){let o=`${i}_max_window_bits`,s=typeof this.params[o]!="number"?_h.Z_DEFAULT_WINDOWBITS:this.params[o];this._deflate=_h.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:s}),this._deflate[ns]=0,this._deflate[ca]=[],this._deflate.on("data",woe)}this._deflate[Ah]=n,this._deflate.write(e),this._deflate.flush(_h.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let o=wN.concat(this._deflate[ca],this._deflate[ns]);r&&(o=new voe(o.buffer,o.byteOffset,o.length-4)),this._deflate[Ah]=null,this._deflate[ns]=0,this._deflate[ca]=[],r&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),n(null,o)})}};IN.exports=nE;function woe(t){this[ca].push(t),this[ns]+=t.length}function AN(t){if(this[ns]+=t.length,this[yv]._maxPayload<1||this[ns]<=this[yv]._maxPayload){this[ca].push(t);return}this[Hv]=new RangeError("Max payload size exceeded"),this[Hv].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[Hv][_N]=1009,this.removeListener("data",AN),this.reset()}function _oe(t){this[yv]._inflate=null,t[_N]=1007,this[Ah](t)}});var Sh=y((oxe,vv)=>{"use strict";var{isUtf8:SN}=require("buffer"),Aoe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function Ioe(t){return t>=1e3&&t<=1014&&t!==1004&&t!==1005&&t!==1006||t>=3e3&&t<=4999}function iE(t){let e=t.length,r=0;for(;r<e;)if(!(t[r]&128))r++;else if((t[r]&224)===192){if(r+1===e||(t[r+1]&192)!==128||(t[r]&254)===192)return!1;r+=2}else if((t[r]&240)===224){if(r+2>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||t[r]===224&&(t[r+1]&224)===128||t[r]===237&&(t[r+1]&224)===160)return!1;r+=3}else if((t[r]&248)===240){if(r+3>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||(t[r+3]&192)!==128||t[r]===240&&(t[r+1]&240)===128||t[r]===244&&t[r+1]>143||t[r]>244)return!1;r+=4}else return!1;return!0}vv.exports={isValidStatusCode:Ioe,isValidUTF8:iE,tokenChars:Aoe};if(SN)vv.exports.isValidUTF8=function(t){return t.length<24?iE(t):SN(t)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let t=require("utf-8-validate");vv.exports.isValidUTF8=function(e){return e.length<32?iE(e):t(e)}}catch{}});var cE=y((sxe,$N)=>{"use strict";var{Writable:Soe}=require("stream"),EN=Ih(),{BINARY_TYPES:Eoe,EMPTY_BUFFER:DN,kStatusCode:Doe,kWebSocket:Coe}=ua(),{concat:oE,toArrayBuffer:Poe,unmask:xoe}=wh(),{isValidStatusCode:Loe,isValidUTF8:CN}=Sh(),bv=Buffer[Symbol.species],Toe=Promise.resolve(),$oe=typeof queueMicrotask=="function"?queueMicrotask:Roe,Gl=0,PN=1,xN=2,LN=3,sE=4,TN=5,aE=6,uE=class extends Soe{constructor(e={}){super(),this._binaryType=e.binaryType||Eoe[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[Coe]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=Gl,this._loop=!1}_write(e,r,n){if(this._opcode===8&&this._state==Gl)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let n=this._buffers[0];return this._buffers[0]=new bv(n.buffer,n.byteOffset+e,n.length-e),new bv(n.buffer,n.byteOffset,e)}let r=Buffer.allocUnsafe(e);do{let n=this._buffers[0],i=r.length-e;e>=n.length?r.set(this._buffers.shift(),i):(r.set(new Uint8Array(n.buffer,n.byteOffset,e),i),this._buffers[0]=new bv(n.buffer,n.byteOffset+e,n.length-e)),e-=n.length}while(e>0);return r}startLoop(e){let r;this._loop=!0;do switch(this._state){case Gl:r=this.getInfo();break;case PN:r=this.getPayloadLength16();break;case xN:r=this.getPayloadLength64();break;case LN:this.getMask();break;case sE:r=this.getData(e);break;case TN:this._loop=!1;return;default:this._loop=!1,$oe(()=>{this._state=Gl,this.startLoop(e)});return}while(this._loop);e(r)}getInfo(){if(this._bufferedBytes<2){this._loop=!1;return}let e=this.consume(2);if(e[0]&48)return this._loop=!1,sr(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");let r=(e[0]&64)===64;if(r&&!this._extensions[EN.extensionName])return this._loop=!1,sr(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=(e[0]&128)===128,this._opcode=e[0]&15,this._payloadLength=e[1]&127,this._opcode===0){if(r)return this._loop=!1,sr(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,sr(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented)return this._loop=!1,sr(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=r}else if(this._opcode>7&&this._opcode<11){if(!this._fin)return this._loop=!1,sr(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(r)return this._loop=!1,sr(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1)return this._loop=!1,sr(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}else return this._loop=!1,sr(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(e[1]&128)===128,this._isServer){if(!this._masked)return this._loop=!1,sr(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,sr(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(this._payloadLength===126)this._state=PN;else if(this._payloadLength===127)this._state=xN;else return this.haveLength()}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=!1;return}return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=!1;return}let e=this.consume(8),r=e.readUInt32BE(0);return r>Math.pow(2,53-32)-1?(this._loop=!1,sr(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=r*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,sr(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=LN:this._state=sE}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=sE}getData(e){let r=DN;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}r=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&xoe(r,this._mask)}if(this._opcode>7)return this.controlMessage(r);if(this._compressed){this._state=TN,this.decompress(r,e);return}return r.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(r)),this.dataMessage()}decompress(e,r){this._extensions[EN.extensionName].decompress(e,this._fin,(i,o)=>{if(i)return r(i);if(o.length){if(this._messageLength+=o.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return r(sr(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(o)}let s=this.dataMessage();if(s)return r(s);this.startLoop(r)})}dataMessage(){if(this._fin){let e=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let n;this._binaryType==="nodebuffer"?n=oE(r,e):this._binaryType==="arraybuffer"?n=Poe(oE(r,e)):n=r,this.emit("message",n,!0)}else{let n=oE(r,e);if(!this._skipUTF8Validation&&!CN(n))return this._loop=!1,sr(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",n,!1)}}this._state=aE}controlMessage(e){if(this._opcode===8)if(this._loop=!1,e.length===0)this.emit("conclude",1005,DN),this.end(),this._state=Gl;else{let r=e.readUInt16BE(0);if(!Loe(r))return sr(RangeError,`invalid status code ${r}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");let n=new bv(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!CN(n))return sr(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",r,n),this.end(),this._state=Gl}else this._opcode===9?(this.emit("ping",e),this._state=aE):(this.emit("pong",e),this._state=aE)}};$N.exports=uE;function sr(t,e,r,n,i){let o=new t(r?`Invalid WebSocket frame: ${e}`:e);return Error.captureStackTrace(o,sr),o.code=i,o[Doe]=n,o}function Roe(t){Toe.then(t).catch(koe)}function Moe(t){throw t}function koe(t){process.nextTick(Moe,t)}});var pE=y((uxe,kN)=>{"use strict";var{Duplex:axe}=require("stream"),{randomFillSync:Ooe}=require("crypto"),RN=Ih(),{EMPTY_BUFFER:Foe}=ua(),{isValidStatusCode:Noe}=Sh(),{mask:MN,toBuffer:Kl}=wh(),Ii=Symbol("kByteLength"),Boe=Buffer.alloc(4),lE=class t{constructor(e,r,n){this._extensions=r||{},n&&(this._generateMask=n,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,r){let n,i=!1,o=2,s=!1;r.mask&&(n=r.maskBuffer||Boe,r.generateMask?r.generateMask(n):Ooe(n,0,4),s=(n[0]|n[1]|n[2]|n[3])===0,o=6);let a;typeof e=="string"?(!r.mask||s)&&r[Ii]!==void 0?a=r[Ii]:(e=Buffer.from(e),a=e.length):(a=e.length,i=r.mask&&r.readOnly&&!s);let u=a;a>=65536?(o+=8,u=127):a>125&&(o+=2,u=126);let c=Buffer.allocUnsafe(i?a+o:o);return c[0]=r.fin?r.opcode|128:r.opcode,r.rsv1&&(c[0]|=64),c[1]=u,u===126?c.writeUInt16BE(a,2):u===127&&(c[2]=c[3]=0,c.writeUIntBE(a,4,6)),r.mask?(c[1]|=128,c[o-4]=n[0],c[o-3]=n[1],c[o-2]=n[2],c[o-1]=n[3],s?[c,e]:i?(MN(e,n,c,o,a),[c]):(MN(e,n,e,0,a),[c,e])):[c,e]}close(e,r,n,i){let o;if(e===void 0)o=Foe;else{if(typeof e!="number"||!Noe(e))throw new TypeError("First argument must be a valid error code number");if(r===void 0||!r.length)o=Buffer.allocUnsafe(2),o.writeUInt16BE(e,0);else{let a=Buffer.byteLength(r);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");o=Buffer.allocUnsafe(2+a),o.writeUInt16BE(e,0),typeof r=="string"?o.write(r,2):o.set(r,2)}}let s={[Ii]:o.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,o,!1,s,i]):this.sendFrame(t.frame(o,s),i)}ping(e,r,n){let i,o;if(typeof e=="string"?(i=Buffer.byteLength(e),o=!1):(e=Kl(e),i=e.length,o=Kl.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let s={[Ii]:i,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:9,readOnly:o,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,s,n]):this.sendFrame(t.frame(e,s),n)}pong(e,r,n){let i,o;if(typeof e=="string"?(i=Buffer.byteLength(e),o=!1):(e=Kl(e),i=e.length,o=Kl.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let s={[Ii]:i,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:10,readOnly:o,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,s,n]):this.sendFrame(t.frame(e,s),n)}send(e,r,n){let i=this._extensions[RN.extensionName],o=r.binary?2:1,s=r.compress,a,u;if(typeof e=="string"?(a=Buffer.byteLength(e),u=!1):(e=Kl(e),a=e.length,u=Kl.readOnly),this._firstFragment?(this._firstFragment=!1,s&&i&&i.params[i._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(s=a>=i._threshold),this._compress=s):(s=!1,o=0),r.fin&&(this._firstFragment=!0),i){let c={[Ii]:a,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:o,readOnly:u,rsv1:s};this._deflating?this.enqueue([this.dispatch,e,this._compress,c,n]):this.dispatch(e,this._compress,c,n)}else this.sendFrame(t.frame(e,{[Ii]:a,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:o,readOnly:u,rsv1:!1}),n)}dispatch(e,r,n,i){if(!r){this.sendFrame(t.frame(e,n),i);return}let o=this._extensions[RN.extensionName];this._bufferedBytes+=n[Ii],this._deflating=!0,o.compress(e,n.fin,(s,a)=>{if(this._socket.destroyed){let u=new Error("The socket was closed while data was being compressed");typeof i=="function"&&i(u);for(let c=0;c<this._queue.length;c++){let l=this._queue[c],p=l[l.length-1];typeof p=="function"&&p(u)}return}this._bufferedBytes-=n[Ii],this._deflating=!1,n.readOnly=!1,this.sendFrame(t.frame(a,n),i),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][Ii],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][Ii],this._queue.push(e)}sendFrame(e,r){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],r),this._socket.uncork()):this._socket.write(e[0],r)}};kN.exports=lE});var VN=y((cxe,WN)=>{"use strict";var{kForOnEventAttribute:Eh,kListener:fE}=ua(),ON=Symbol("kCode"),FN=Symbol("kData"),NN=Symbol("kError"),BN=Symbol("kMessage"),UN=Symbol("kReason"),zl=Symbol("kTarget"),jN=Symbol("kType"),qN=Symbol("kWasClean"),is=class{constructor(e){this[zl]=null,this[jN]=e}get target(){return this[zl]}get type(){return this[jN]}};Object.defineProperty(is.prototype,"target",{enumerable:!0});Object.defineProperty(is.prototype,"type",{enumerable:!0});var Fu=class extends is{constructor(e,r={}){super(e),this[ON]=r.code===void 0?0:r.code,this[UN]=r.reason===void 0?"":r.reason,this[qN]=r.wasClean===void 0?!1:r.wasClean}get code(){return this[ON]}get reason(){return this[UN]}get wasClean(){return this[qN]}};Object.defineProperty(Fu.prototype,"code",{enumerable:!0});Object.defineProperty(Fu.prototype,"reason",{enumerable:!0});Object.defineProperty(Fu.prototype,"wasClean",{enumerable:!0});var Xl=class extends is{constructor(e,r={}){super(e),this[NN]=r.error===void 0?null:r.error,this[BN]=r.message===void 0?"":r.message}get error(){return this[NN]}get message(){return this[BN]}};Object.defineProperty(Xl.prototype,"error",{enumerable:!0});Object.defineProperty(Xl.prototype,"message",{enumerable:!0});var Dh=class extends is{constructor(e,r={}){super(e),this[FN]=r.data===void 0?null:r.data}get data(){return this[FN]}};Object.defineProperty(Dh.prototype,"data",{enumerable:!0});var Uoe={addEventListener(t,e,r={}){for(let i of this.listeners(t))if(!r[Eh]&&i[fE]===e&&!i[Eh])return;let n;if(t==="message")n=function(o,s){let a=new Dh("message",{data:s?o:o.toString()});a[zl]=this,wv(e,this,a)};else if(t==="close")n=function(o,s){let a=new Fu("close",{code:o,reason:s.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[zl]=this,wv(e,this,a)};else if(t==="error")n=function(o){let s=new Xl("error",{error:o,message:o.message});s[zl]=this,wv(e,this,s)};else if(t==="open")n=function(){let o=new is("open");o[zl]=this,wv(e,this,o)};else return;n[Eh]=!!r[Eh],n[fE]=e,r.once?this.once(t,n):this.on(t,n)},removeEventListener(t,e){for(let r of this.listeners(t))if(r[fE]===e&&!r[Eh]){this.removeListener(t,r);break}}};WN.exports={CloseEvent:Fu,ErrorEvent:Xl,Event:is,EventTarget:Uoe,MessageEvent:Dh};function wv(t,e,r){typeof t=="object"&&t.handleEvent?t.handleEvent.call(t,r):t.call(e,r)}});var dE=y((lxe,GN)=>{"use strict";var{tokenChars:Ch}=Sh();function Ao(t,e,r){t[e]===void 0?t[e]=[r]:t[e].push(r)}function joe(t){let e=Object.create(null),r=Object.create(null),n=!1,i=!1,o=!1,s,a,u=-1,c=-1,l=-1,p=0;for(;p<t.length;p++)if(c=t.charCodeAt(p),s===void 0)if(l===-1&&Ch[c]===1)u===-1&&(u=p);else if(p!==0&&(c===32||c===9))l===-1&&u!==-1&&(l=p);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${p}`);l===-1&&(l=p);let m=t.slice(u,l);c===44?(Ao(e,m,r),r=Object.create(null)):s=m,u=l=-1}else throw new SyntaxError(`Unexpected character at index ${p}`);else if(a===void 0)if(l===-1&&Ch[c]===1)u===-1&&(u=p);else if(c===32||c===9)l===-1&&u!==-1&&(l=p);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${p}`);l===-1&&(l=p),Ao(r,t.slice(u,l),!0),c===44&&(Ao(e,s,r),r=Object.create(null),s=void 0),u=l=-1}else if(c===61&&u!==-1&&l===-1)a=t.slice(u,p),u=l=-1;else throw new SyntaxError(`Unexpected character at index ${p}`);else if(i){if(Ch[c]!==1)throw new SyntaxError(`Unexpected character at index ${p}`);u===-1?u=p:n||(n=!0),i=!1}else if(o)if(Ch[c]===1)u===-1&&(u=p);else if(c===34&&u!==-1)o=!1,l=p;else if(c===92)i=!0;else throw new SyntaxError(`Unexpected character at index ${p}`);else if(c===34&&t.charCodeAt(p-1)===61)o=!0;else if(l===-1&&Ch[c]===1)u===-1&&(u=p);else if(u!==-1&&(c===32||c===9))l===-1&&(l=p);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${p}`);l===-1&&(l=p);let m=t.slice(u,l);n&&(m=m.replace(/\\/g,""),n=!1),Ao(r,a,m),c===44&&(Ao(e,s,r),r=Object.create(null),s=void 0),a=void 0,u=l=-1}else throw new SyntaxError(`Unexpected character at index ${p}`);if(u===-1||o||c===32||c===9)throw new SyntaxError("Unexpected end of input");l===-1&&(l=p);let f=t.slice(u,l);return s===void 0?Ao(e,f,r):(a===void 0?Ao(r,f,!0):n?Ao(r,a,f.replace(/\\/g,"")):Ao(r,a,f),Ao(e,s,r)),e}function qoe(t){return Object.keys(t).map(e=>{let r=t[e];return Array.isArray(r)||(r=[r]),r.map(n=>[e].concat(Object.keys(n).map(i=>{let o=n[i];return Array.isArray(o)||(o=[o]),o.map(s=>s===!0?i:`${i}=${s}`).join("; ")})).join("; ")).join(", ")}).join(", ")}GN.exports={format:qoe,parse:joe}});var yE=y((dxe,nB)=>{"use strict";var Woe=require("events"),Voe=require("https"),Goe=require("http"),XN=require("net"),Koe=require("tls"),{randomBytes:zoe,createHash:Xoe}=require("crypto"),{Duplex:pxe,Readable:fxe}=require("stream"),{URL:hE}=require("url"),la=Ih(),Joe=cE(),Yoe=pE(),{BINARY_TYPES:KN,EMPTY_BUFFER:_v,GUID:Qoe,kForOnEventAttribute:mE,kListener:Zoe,kStatusCode:ese,kWebSocket:Fr,NOOP:JN}=ua(),{EventTarget:{addEventListener:tse,removeEventListener:rse}}=VN(),{format:nse,parse:ise}=dE(),{toBuffer:ose}=wh(),sse=30*1e3,YN=Symbol("kAborted"),gE=[8,13],os=["CONNECTING","OPEN","CLOSING","CLOSED"],ase=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,Tt=class t extends Woe{constructor(e,r,n){super(),this._binaryType=KN[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=_v,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=t.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,r===void 0?r=[]:Array.isArray(r)||(typeof r=="object"&&r!==null?(n=r,r=[]):r=[r]),QN(this,e,r,n)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){KN.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,r,n){let i=new Joe({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation});this._sender=new Yoe(e,this._extensions,n.generateMask),this._receiver=i,this._socket=e,i[Fr]=this,e[Fr]=this,i.on("conclude",lse),i.on("drain",pse),i.on("error",fse),i.on("message",dse),i.on("ping",hse),i.on("pong",mse),e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),r.length>0&&e.unshift(r),e.on("close",eB),e.on("data",Iv),e.on("end",tB),e.on("error",rB),this._readyState=t.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[la.extensionName]&&this._extensions[la.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,r){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){let n="WebSocket was closed before the connection was established";Sn(this,this._req,n);return}if(this.readyState===t.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=t.CLOSING,this._sender.close(e,r,!this._isServer,n=>{n||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),sse)}}pause(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){HE(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.ping(e||_v,r,n)}pong(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){HE(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.pong(e||_v,r,n)}resume(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof r=="function"&&(n=r,r={}),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){HE(this,e,n);return}let i={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...r};this._extensions[la.extensionName]||(i.compress=!1),this._sender.send(e||_v,i,n)}terminate(){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){let e="WebSocket was closed before the connection was established";Sn(this,this._req,e);return}this._socket&&(this._readyState=t.CLOSING,this._socket.destroy())}}};Object.defineProperty(Tt,"CONNECTING",{enumerable:!0,value:os.indexOf("CONNECTING")});Object.defineProperty(Tt.prototype,"CONNECTING",{enumerable:!0,value:os.indexOf("CONNECTING")});Object.defineProperty(Tt,"OPEN",{enumerable:!0,value:os.indexOf("OPEN")});Object.defineProperty(Tt.prototype,"OPEN",{enumerable:!0,value:os.indexOf("OPEN")});Object.defineProperty(Tt,"CLOSING",{enumerable:!0,value:os.indexOf("CLOSING")});Object.defineProperty(Tt.prototype,"CLOSING",{enumerable:!0,value:os.indexOf("CLOSING")});Object.defineProperty(Tt,"CLOSED",{enumerable:!0,value:os.indexOf("CLOSED")});Object.defineProperty(Tt.prototype,"CLOSED",{enumerable:!0,value:os.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(t=>{Object.defineProperty(Tt.prototype,t,{enumerable:!0})});["open","error","close","message"].forEach(t=>{Object.defineProperty(Tt.prototype,`on${t}`,{enumerable:!0,get(){for(let e of this.listeners(t))if(e[mE])return e[Zoe];return null},set(e){for(let r of this.listeners(t))if(r[mE]){this.removeListener(t,r);break}typeof e=="function"&&this.addEventListener(t,e,{[mE]:!0})}})});Tt.prototype.addEventListener=tse;Tt.prototype.removeEventListener=rse;nB.exports=Tt;function QN(t,e,r,n){let i={protocolVersion:gE[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(!gE.includes(i.protocolVersion))throw new RangeError(`Unsupported protocol version: ${i.protocolVersion} (supported versions: ${gE.join(", ")})`);let o;if(e instanceof hE)o=e;else try{o=new hE(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}o.protocol==="http:"?o.protocol="ws:":o.protocol==="https:"&&(o.protocol="wss:"),t._url=o.href;let s=o.protocol==="wss:",a=o.protocol==="ws+unix:",u;if(o.protocol!=="ws:"&&!s&&!a?u=`The URL's protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"`:a&&!o.pathname?u="The URL's pathname is empty":o.hash&&(u="The URL contains a fragment identifier"),u){let H=new SyntaxError(u);if(t._redirects===0)throw H;Av(t,H);return}let c=s?443:80,l=zoe(16).toString("base64"),p=s?Voe.request:Goe.request,f=new Set,m;if(i.createConnection=s?cse:use,i.defaultPort=i.defaultPort||c,i.port=o.port||c,i.host=o.hostname.startsWith("[")?o.hostname.slice(1,-1):o.hostname,i.headers={...i.headers,"Sec-WebSocket-Version":i.protocolVersion,"Sec-WebSocket-Key":l,Connection:"Upgrade",Upgrade:"websocket"},i.path=o.pathname+o.search,i.timeout=i.handshakeTimeout,i.perMessageDeflate&&(m=new la(i.perMessageDeflate!==!0?i.perMessageDeflate:{},!1,i.maxPayload),i.headers["Sec-WebSocket-Extensions"]=nse({[la.extensionName]:m.offer()})),r.length){for(let H of r){if(typeof H!="string"||!ase.test(H)||f.has(H))throw new SyntaxError("An invalid or duplicated subprotocol was specified");f.add(H)}i.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(i.origin&&(i.protocolVersion<13?i.headers["Sec-WebSocket-Origin"]=i.origin:i.headers.Origin=i.origin),(o.username||o.password)&&(i.auth=`${o.username}:${o.password}`),a){let H=i.path.split(":");i.socketPath=H[0],i.path=H[1]}let h;if(i.followRedirects){if(t._redirects===0){t._originalIpc=a,t._originalSecure=s,t._originalHostOrSocketPath=a?i.socketPath:o.host;let H=n&&n.headers;if(n={...n,headers:{}},H)for(let[v,_]of Object.entries(H))n.headers[v.toLowerCase()]=_}else if(t.listenerCount("redirect")===0){let H=a?t._originalIpc?i.socketPath===t._originalHostOrSocketPath:!1:t._originalIpc?!1:o.host===t._originalHostOrSocketPath;(!H||t._originalSecure&&!s)&&(delete i.headers.authorization,delete i.headers.cookie,H||delete i.headers.host,i.auth=void 0)}i.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(i.auth).toString("base64")),h=t._req=p(i),t._redirects&&t.emit("redirect",t.url,h)}else h=t._req=p(i);i.timeout&&h.on("timeout",()=>{Sn(t,h,"Opening handshake has timed out")}),h.on("error",H=>{h===null||h[YN]||(h=t._req=null,Av(t,H))}),h.on("response",H=>{let v=H.headers.location,_=H.statusCode;if(v&&i.followRedirects&&_>=300&&_<400){if(++t._redirects>i.maxRedirects){Sn(t,h,"Maximum redirects exceeded");return}h.abort();let x;try{x=new hE(v,e)}catch{let T=new SyntaxError(`Invalid URL: ${v}`);Av(t,T);return}QN(t,x,r,n)}else t.emit("unexpected-response",h,H)||Sn(t,h,`Unexpected server response: ${H.statusCode}`)}),h.on("upgrade",(H,v,_)=>{if(t.emit("upgrade",H),t.readyState!==Tt.CONNECTING)return;if(h=t._req=null,H.headers.upgrade.toLowerCase()!=="websocket"){Sn(t,v,"Invalid Upgrade header");return}let x=Xoe("sha1").update(l+Qoe).digest("base64");if(H.headers["sec-websocket-accept"]!==x){Sn(t,v,"Invalid Sec-WebSocket-Accept header");return}let k=H.headers["sec-websocket-protocol"],T;if(k!==void 0?f.size?f.has(k)||(T="Server sent an invalid subprotocol"):T="Server sent a subprotocol but none was requested":f.size&&(T="Server sent no subprotocol"),T){Sn(t,v,T);return}k&&(t._protocol=k);let j=H.headers["sec-websocket-extensions"];if(j!==void 0){if(!m){Sn(t,v,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let K;try{K=ise(j)}catch{Sn(t,v,"Invalid Sec-WebSocket-Extensions header");return}let G=Object.keys(K);if(G.length!==1||G[0]!==la.extensionName){Sn(t,v,"Server indicated an extension that was not requested");return}try{m.accept(K[la.extensionName])}catch{Sn(t,v,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[la.extensionName]=m}t.setSocket(v,_,{generateMask:i.generateMask,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation})}),i.finishRequest?i.finishRequest(h,t):h.end()}function Av(t,e){t._readyState=Tt.CLOSING,t.emit("error",e),t.emitClose()}function use(t){return t.path=t.socketPath,XN.connect(t)}function cse(t){return t.path=void 0,!t.servername&&t.servername!==""&&(t.servername=XN.isIP(t.host)?"":t.host),Koe.connect(t)}function Sn(t,e,r){t._readyState=Tt.CLOSING;let n=new Error(r);Error.captureStackTrace(n,Sn),e.setHeader?(e[YN]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(Av,t,n)):(e.destroy(n),e.once("error",t.emit.bind(t,"error")),e.once("close",t.emitClose.bind(t)))}function HE(t,e,r){if(e){let n=ose(e).length;t._socket?t._sender._bufferedBytes+=n:t._bufferedAmount+=n}if(r){let n=new Error(`WebSocket is not open: readyState ${t.readyState} (${os[t.readyState]})`);process.nextTick(r,n)}}function lse(t,e){let r=this[Fr];r._closeFrameReceived=!0,r._closeMessage=e,r._closeCode=t,r._socket[Fr]!==void 0&&(r._socket.removeListener("data",Iv),process.nextTick(ZN,r._socket),t===1005?r.close():r.close(t,e))}function pse(){let t=this[Fr];t.isPaused||t._socket.resume()}function fse(t){let e=this[Fr];e._socket[Fr]!==void 0&&(e._socket.removeListener("data",Iv),process.nextTick(ZN,e._socket),e.close(t[ese])),e.emit("error",t)}function zN(){this[Fr].emitClose()}function dse(t,e){this[Fr].emit("message",t,e)}function hse(t){let e=this[Fr];e.pong(t,!e._isServer,JN),e.emit("ping",t)}function mse(t){this[Fr].emit("pong",t)}function ZN(t){t.resume()}function eB(){let t=this[Fr];this.removeListener("close",eB),this.removeListener("data",Iv),this.removeListener("end",tB),t._readyState=Tt.CLOSING;let e;!this._readableState.endEmitted&&!t._closeFrameReceived&&!t._receiver._writableState.errorEmitted&&(e=t._socket.read())!==null&&t._receiver.write(e),t._receiver.end(),this[Fr]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",zN),t._receiver.on("finish",zN))}function Iv(t){this[Fr]._receiver.write(t)||this.pause()}function tB(){let t=this[Fr];t._readyState=Tt.CLOSING,t._receiver.end(),this.end()}function rB(){let t=this[Fr];this.removeListener("error",rB),this.on("error",JN),t&&(t._readyState=Tt.CLOSING,this.destroy())}});var oB=y((hxe,iB)=>{"use strict";var{tokenChars:gse}=Sh();function Hse(t){let e=new Set,r=-1,n=-1,i=0;for(i;i<t.length;i++){let s=t.charCodeAt(i);if(n===-1&&gse[s]===1)r===-1&&(r=i);else if(i!==0&&(s===32||s===9))n===-1&&r!==-1&&(n=i);else if(s===44){if(r===-1)throw new SyntaxError(`Unexpected character at index ${i}`);n===-1&&(n=i);let a=t.slice(r,n);if(e.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);e.add(a),r=n=-1}else throw new SyntaxError(`Unexpected character at index ${i}`)}if(r===-1||n!==-1)throw new SyntaxError("Unexpected end of input");let o=t.slice(r,i);if(e.has(o))throw new SyntaxError(`The "${o}" subprotocol is duplicated`);return e.add(o),e}iB.exports={parse:Hse}});var fB=y((gxe,pB)=>{"use strict";var yse=require("events"),Sv=require("http"),{Duplex:mxe}=require("stream"),{createHash:vse}=require("crypto"),sB=dE(),Nu=Ih(),bse=oB(),wse=yE(),{GUID:_se,kWebSocket:Ase}=ua(),Ise=/^[+/0-9A-Za-z]{22}==$/,aB=0,uB=1,lB=2,vE=class extends yse{constructor(e,r){if(super(),e={maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:wse,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=Sv.createServer((n,i)=>{let o=Sv.STATUS_CODES[426];i.writeHead(426,{"Content-Length":o.length,"Content-Type":"text/plain"}),i.end(o)}),this._server.listen(e.port,e.host,e.backlog,r)):e.server&&(this._server=e.server),this._server){let n=this.emit.bind(this,"connection");this._removeListeners=Sse(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(i,o,s)=>{this.handleUpgrade(i,o,s,n)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=aB}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===lB){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(Ph,this);return}if(e&&this.once("close",e),this._state!==uB)if(this._state=uB,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(Ph,this):process.nextTick(Ph,this);else{let r=this._server;this._removeListeners(),this._removeListeners=this._server=null,r.close(()=>{Ph(this)})}}shouldHandle(e){if(this.options.path){let r=e.url.indexOf("?");if((r!==-1?e.url.slice(0,r):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,r,n,i){r.on("error",cB);let o=e.headers["sec-websocket-key"],s=+e.headers["sec-websocket-version"];if(e.method!=="GET"){Bu(this,e,r,405,"Invalid HTTP method");return}if(e.headers.upgrade.toLowerCase()!=="websocket"){Bu(this,e,r,400,"Invalid Upgrade header");return}if(!o||!Ise.test(o)){Bu(this,e,r,400,"Missing or invalid Sec-WebSocket-Key header");return}if(s!==8&&s!==13){Bu(this,e,r,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){xh(r,400);return}let a=e.headers["sec-websocket-protocol"],u=new Set;if(a!==void 0)try{u=bse.parse(a)}catch{Bu(this,e,r,400,"Invalid Sec-WebSocket-Protocol header");return}let c=e.headers["sec-websocket-extensions"],l={};if(this.options.perMessageDeflate&&c!==void 0){let p=new Nu(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let f=sB.parse(c);f[Nu.extensionName]&&(p.accept(f[Nu.extensionName]),l[Nu.extensionName]=p)}catch{Bu(this,e,r,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let p={origin:e.headers[`${s===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(p,(f,m,h,H)=>{if(!f)return xh(r,m||401,h,H);this.completeUpgrade(l,o,u,e,r,n,i)});return}if(!this.options.verifyClient(p))return xh(r,401)}this.completeUpgrade(l,o,u,e,r,n,i)}completeUpgrade(e,r,n,i,o,s,a){if(!o.readable||!o.writable)return o.destroy();if(o[Ase])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>aB)return xh(o,503);let c=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${vse("sha1").update(r+_se).digest("base64")}`],l=new this.options.WebSocket(null);if(n.size){let p=this.options.handleProtocols?this.options.handleProtocols(n,i):n.values().next().value;p&&(c.push(`Sec-WebSocket-Protocol: ${p}`),l._protocol=p)}if(e[Nu.extensionName]){let p=e[Nu.extensionName].params,f=sB.format({[Nu.extensionName]:[p]});c.push(`Sec-WebSocket-Extensions: ${f}`),l._extensions=e}this.emit("headers",c,i),o.write(c.concat(`\r
`).join(`\r
`)),o.removeListener("error",cB),l.setSocket(o,s,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(l),l.on("close",()=>{this.clients.delete(l),this._shouldEmitClose&&!this.clients.size&&process.nextTick(Ph,this)})),a(l,i)}};pB.exports=vE;function Sse(t,e){for(let r of Object.keys(e))t.on(r,e[r]);return function(){for(let n of Object.keys(e))t.removeListener(n,e[n])}}function Ph(t){t._state=lB,t.emit("close")}function cB(){this.destroy()}function xh(t,e,r,n){r=r||Sv.STATUS_CODES[e],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},t.once("finish",t.destroy),t.end(`HTTP/1.1 ${e} ${Sv.STATUS_CODES[e]}\r
`+Object.keys(n).map(i=>`${i}: ${n[i]}`).join(`\r
`)+`\r
\r
`+r)}function Bu(t,e,r,n,i){if(t.listenerCount("wsClientError")){let o=new Error(i);Error.captureStackTrace(o,Bu),t.emit("wsClientError",o,r,e)}else xh(r,n,i)}});var CB=y((Xxe,DB)=>{"use strict";DB.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var xB=y((Jxe,PB)=>{PB.exports=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")}});var $B=y((Yxe,TB)=>{"use strict";var Rse=xB(),Mse=Array.prototype.concat,kse=Array.prototype.slice,LB=TB.exports=function(e){for(var r=[],n=0,i=e.length;n<i;n++){var o=e[n];Rse(o)?r=Mse.call(r,kse.call(o)):r.push(o)}return r};LB.wrap=function(t){return function(){return t(LB(arguments))}}});var OB=y((Qxe,kB)=>{var Th=CB(),$h=$B(),RB=Object.hasOwnProperty,MB={};for(Lv in Th)RB.call(Th,Lv)&&(MB[Th[Lv]]=Lv);var Lv,En=kB.exports={to:{},get:{}};En.get=function(t){var e=t.substring(0,3).toLowerCase(),r,n;switch(e){case"hsl":r=En.get.hsl(t),n="hsl";break;case"hwb":r=En.get.hwb(t),n="hwb";break;default:r=En.get.rgb(t),n="rgb";break}return r?{model:n,value:r}:null};En.get.rgb=function(t){if(!t)return null;var e=/^#([a-f0-9]{3,4})$/i,r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,o=/^(\w+)$/,s=[0,0,0,1],a,u,c;if(a=t.match(r)){for(c=a[2],a=a[1],u=0;u<3;u++){var l=u*2;s[u]=parseInt(a.slice(l,l+2),16)}c&&(s[3]=parseInt(c,16)/255)}else if(a=t.match(e)){for(a=a[1],c=a[3],u=0;u<3;u++)s[u]=parseInt(a[u]+a[u],16);c&&(s[3]=parseInt(c+c,16)/255)}else if(a=t.match(n)){for(u=0;u<3;u++)s[u]=parseInt(a[u+1],0);a[4]&&(a[5]?s[3]=parseFloat(a[4])*.01:s[3]=parseFloat(a[4]))}else if(a=t.match(i)){for(u=0;u<3;u++)s[u]=Math.round(parseFloat(a[u+1])*2.55);a[4]&&(a[5]?s[3]=parseFloat(a[4])*.01:s[3]=parseFloat(a[4]))}else return(a=t.match(o))?a[1]==="transparent"?[0,0,0,0]:RB.call(Th,a[1])?(s=Th[a[1]],s[3]=1,s):null:null;for(u=0;u<3;u++)s[u]=fa(s[u],0,255);return s[3]=fa(s[3],0,1),s};En.get.hsl=function(t){if(!t)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,o=fa(parseFloat(r[2]),0,100),s=fa(parseFloat(r[3]),0,100),a=fa(isNaN(n)?1:n,0,1);return[i,o,s,a]}return null};En.get.hwb=function(t){if(!t)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,o=fa(parseFloat(r[2]),0,100),s=fa(parseFloat(r[3]),0,100),a=fa(isNaN(n)?1:n,0,1);return[i,o,s,a]}return null};En.to.hex=function(){var t=$h(arguments);return"#"+Tv(t[0])+Tv(t[1])+Tv(t[2])+(t[3]<1?Tv(Math.round(t[3]*255)):"")};En.to.rgb=function(){var t=$h(arguments);return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};En.to.rgb.percent=function(){var t=$h(arguments),e=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+r+"%, "+n+"%)":"rgba("+e+"%, "+r+"%, "+n+"%, "+t[3]+")"};En.to.hsl=function(){var t=$h(arguments);return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};En.to.hwb=function(){var t=$h(arguments),e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};En.to.keyword=function(t){return MB[t.slice(0,3)]};function fa(t,e,r){return Math.min(Math.max(e,t),r)}function Tv(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}});var NB=y((Zxe,FB)=>{"use strict";FB.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var SE=y((eLe,UB)=>{var Rh=NB(),BB={};for(let t of Object.keys(Rh))BB[Rh[t]]=t;var de={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};UB.exports=de;for(let t of Object.keys(de)){if(!("channels"in de[t]))throw new Error("missing channels property: "+t);if(!("labels"in de[t]))throw new Error("missing channel labels property: "+t);if(de[t].labels.length!==de[t].channels)throw new Error("channel and label counts mismatch: "+t);let{channels:e,labels:r}=de[t];delete de[t].channels,delete de[t].labels,Object.defineProperty(de[t],"channels",{value:e}),Object.defineProperty(de[t],"labels",{value:r})}de.rgb.hsl=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.min(e,r,n),o=Math.max(e,r,n),s=o-i,a,u;o===i?a=0:e===o?a=(r-n)/s:r===o?a=2+(n-e)/s:n===o&&(a=4+(e-r)/s),a=Math.min(a*60,360),a<0&&(a+=360);let c=(i+o)/2;return o===i?u=0:c<=.5?u=s/(o+i):u=s/(2-o-i),[a,u*100,c*100]};de.rgb.hsv=function(t){let e,r,n,i,o,s=t[0]/255,a=t[1]/255,u=t[2]/255,c=Math.max(s,a,u),l=c-Math.min(s,a,u),p=function(f){return(c-f)/6/l+1/2};return l===0?(i=0,o=0):(o=l/c,e=p(s),r=p(a),n=p(u),s===c?i=n-r:a===c?i=1/3+e-n:u===c&&(i=2/3+r-e),i<0?i+=1:i>1&&(i-=1)),[i*360,o*100,c*100]};de.rgb.hwb=function(t){let e=t[0],r=t[1],n=t[2],i=de.rgb.hsl(t)[0],o=1/255*Math.min(e,Math.min(r,n));return n=1-1/255*Math.max(e,Math.max(r,n)),[i,o*100,n*100]};de.rgb.cmyk=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.min(1-e,1-r,1-n),o=(1-e-i)/(1-i)||0,s=(1-r-i)/(1-i)||0,a=(1-n-i)/(1-i)||0;return[o*100,s*100,a*100,i*100]};function Ose(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}de.rgb.keyword=function(t){let e=BB[t];if(e)return e;let r=1/0,n;for(let i of Object.keys(Rh)){let o=Rh[i],s=Ose(t,o);s<r&&(r=s,n=i)}return n};de.keyword.rgb=function(t){return Rh[t]};de.rgb.xyz=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;let i=e*.4124+r*.3576+n*.1805,o=e*.2126+r*.7152+n*.0722,s=e*.0193+r*.1192+n*.9505;return[i*100,o*100,s*100]};de.rgb.lab=function(t){let e=de.rgb.xyz(t),r=e[0],n=e[1],i=e[2];r/=95.047,n/=100,i/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;let o=116*n-16,s=500*(r-n),a=200*(n-i);return[o,s,a]};de.hsl.rgb=function(t){let e=t[0]/360,r=t[1]/100,n=t[2]/100,i,o,s;if(r===0)return s=n*255,[s,s,s];n<.5?i=n*(1+r):i=n+r-n*r;let a=2*n-i,u=[0,0,0];for(let c=0;c<3;c++)o=e+1/3*-(c-1),o<0&&o++,o>1&&o--,6*o<1?s=a+(i-a)*6*o:2*o<1?s=i:3*o<2?s=a+(i-a)*(2/3-o)*6:s=a,u[c]=s*255;return u};de.hsl.hsv=function(t){let e=t[0],r=t[1]/100,n=t[2]/100,i=r,o=Math.max(n,.01);n*=2,r*=n<=1?n:2-n,i*=o<=1?o:2-o;let s=(n+r)/2,a=n===0?2*i/(o+i):2*r/(n+r);return[e,a*100,s*100]};de.hsv.rgb=function(t){let e=t[0]/60,r=t[1]/100,n=t[2]/100,i=Math.floor(e)%6,o=e-Math.floor(e),s=255*n*(1-r),a=255*n*(1-r*o),u=255*n*(1-r*(1-o));switch(n*=255,i){case 0:return[n,u,s];case 1:return[a,n,s];case 2:return[s,n,u];case 3:return[s,a,n];case 4:return[u,s,n];case 5:return[n,s,a]}};de.hsv.hsl=function(t){let e=t[0],r=t[1]/100,n=t[2]/100,i=Math.max(n,.01),o,s;s=(2-r)*n;let a=(2-r)*i;return o=r*i,o/=a<=1?a:2-a,o=o||0,s/=2,[e,o*100,s*100]};de.hwb.rgb=function(t){let e=t[0]/360,r=t[1]/100,n=t[2]/100,i=r+n,o;i>1&&(r/=i,n/=i);let s=Math.floor(6*e),a=1-n;o=6*e-s,s&1&&(o=1-o);let u=r+o*(a-r),c,l,p;switch(s){default:case 6:case 0:c=a,l=u,p=r;break;case 1:c=u,l=a,p=r;break;case 2:c=r,l=a,p=u;break;case 3:c=r,l=u,p=a;break;case 4:c=u,l=r,p=a;break;case 5:c=a,l=r,p=u;break}return[c*255,l*255,p*255]};de.cmyk.rgb=function(t){let e=t[0]/100,r=t[1]/100,n=t[2]/100,i=t[3]/100,o=1-Math.min(1,e*(1-i)+i),s=1-Math.min(1,r*(1-i)+i),a=1-Math.min(1,n*(1-i)+i);return[o*255,s*255,a*255]};de.xyz.rgb=function(t){let e=t[0]/100,r=t[1]/100,n=t[2]/100,i,o,s;return i=e*3.2406+r*-1.5372+n*-.4986,o=e*-.9689+r*1.8758+n*.0415,s=e*.0557+r*-.204+n*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,i=Math.min(Math.max(0,i),1),o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),[i*255,o*255,s*255]};de.xyz.lab=function(t){let e=t[0],r=t[1],n=t[2];e/=95.047,r/=100,n/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;let i=116*r-16,o=500*(e-r),s=200*(r-n);return[i,o,s]};de.lab.xyz=function(t){let e=t[0],r=t[1],n=t[2],i,o,s;o=(e+16)/116,i=r/500+o,s=o-n/200;let a=o**3,u=i**3,c=s**3;return o=a>.008856?a:(o-16/116)/7.787,i=u>.008856?u:(i-16/116)/7.787,s=c>.008856?c:(s-16/116)/7.787,i*=95.047,o*=100,s*=108.883,[i,o,s]};de.lab.lch=function(t){let e=t[0],r=t[1],n=t[2],i;i=Math.atan2(n,r)*360/2/Math.PI,i<0&&(i+=360);let s=Math.sqrt(r*r+n*n);return[e,s,i]};de.lch.lab=function(t){let e=t[0],r=t[1],i=t[2]/360*2*Math.PI,o=r*Math.cos(i),s=r*Math.sin(i);return[e,o,s]};de.rgb.ansi16=function(t,e=null){let[r,n,i]=t,o=e===null?de.rgb.hsv(t)[2]:e;if(o=Math.round(o/50),o===0)return 30;let s=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(r/255));return o===2&&(s+=60),s};de.hsv.ansi16=function(t){return de.rgb.ansi16(de.hsv.rgb(t),t[2])};de.rgb.ansi256=function(t){let e=t[0],r=t[1],n=t[2];return e===r&&r===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)};de.ansi16.rgb=function(t){let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];let r=(~~(t>50)+1)*.5,n=(e&1)*r*255,i=(e>>1&1)*r*255,o=(e>>2&1)*r*255;return[n,i,o]};de.ansi256.rgb=function(t){if(t>=232){let o=(t-232)*10+8;return[o,o,o]}t-=16;let e,r=Math.floor(t/36)/5*255,n=Math.floor((e=t%36)/6)/5*255,i=e%6/5*255;return[r,n,i]};de.rgb.hex=function(t){let r=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r};de.hex.rgb=function(t){let e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let r=e[0];e[0].length===3&&(r=r.split("").map(a=>a+a).join(""));let n=parseInt(r,16),i=n>>16&255,o=n>>8&255,s=n&255;return[i,o,s]};de.rgb.hcg=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.max(Math.max(e,r),n),o=Math.min(Math.min(e,r),n),s=i-o,a,u;return s<1?a=o/(1-s):a=0,s<=0?u=0:i===e?u=(r-n)/s%6:i===r?u=2+(n-e)/s:u=4+(e-r)/s,u/=6,u%=1,[u*360,s*100,a*100]};de.hsl.hcg=function(t){let e=t[1]/100,r=t[2]/100,n=r<.5?2*e*r:2*e*(1-r),i=0;return n<1&&(i=(r-.5*n)/(1-n)),[t[0],n*100,i*100]};de.hsv.hcg=function(t){let e=t[1]/100,r=t[2]/100,n=e*r,i=0;return n<1&&(i=(r-n)/(1-n)),[t[0],n*100,i*100]};de.hcg.rgb=function(t){let e=t[0]/360,r=t[1]/100,n=t[2]/100;if(r===0)return[n*255,n*255,n*255];let i=[0,0,0],o=e%1*6,s=o%1,a=1-s,u=0;switch(Math.floor(o)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return u=(1-r)*n,[(r*i[0]+u)*255,(r*i[1]+u)*255,(r*i[2]+u)*255]};de.hcg.hsv=function(t){let e=t[1]/100,r=t[2]/100,n=e+r*(1-e),i=0;return n>0&&(i=e/n),[t[0],i*100,n*100]};de.hcg.hsl=function(t){let e=t[1]/100,n=t[2]/100*(1-e)+.5*e,i=0;return n>0&&n<.5?i=e/(2*n):n>=.5&&n<1&&(i=e/(2*(1-n))),[t[0],i*100,n*100]};de.hcg.hwb=function(t){let e=t[1]/100,r=t[2]/100,n=e+r*(1-e);return[t[0],(n-e)*100,(1-n)*100]};de.hwb.hcg=function(t){let e=t[1]/100,n=1-t[2]/100,i=n-e,o=0;return i<1&&(o=(n-i)/(1-i)),[t[0],i*100,o*100]};de.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};de.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};de.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};de.gray.hsl=function(t){return[0,0,t[0]]};de.gray.hsv=de.gray.hsl;de.gray.hwb=function(t){return[0,100,t[0]]};de.gray.cmyk=function(t){return[0,0,0,t[0]]};de.gray.lab=function(t){return[t[0],0,0]};de.gray.hex=function(t){let e=Math.round(t[0]/100*255)&255,n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n};de.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}});var qB=y((tLe,jB)=>{var $v=SE();function Fse(){let t={},e=Object.keys($v);for(let r=e.length,n=0;n<r;n++)t[e[n]]={distance:-1,parent:null};return t}function Nse(t){let e=Fse(),r=[t];for(e[t].distance=0;r.length;){let n=r.pop(),i=Object.keys($v[n]);for(let o=i.length,s=0;s<o;s++){let a=i[s],u=e[a];u.distance===-1&&(u.distance=e[n].distance+1,u.parent=n,r.unshift(a))}}return e}function Bse(t,e){return function(r){return e(t(r))}}function Use(t,e){let r=[e[t].parent,t],n=$v[e[t].parent][t],i=e[t].parent;for(;e[i].parent;)r.unshift(e[i].parent),n=Bse($v[e[i].parent][i],n),i=e[i].parent;return n.conversion=r,n}jB.exports=function(t){let e=Nse(t),r={},n=Object.keys(e);for(let i=n.length,o=0;o<i;o++){let s=n[o];e[s].parent!==null&&(r[s]=Use(s,e))}return r}});var VB=y((rLe,WB)=>{var EE=SE(),jse=qB(),ep={},qse=Object.keys(EE);function Wse(t){let e=function(...r){let n=r[0];return n==null?n:(n.length>1&&(r=n),t(r))};return"conversion"in t&&(e.conversion=t.conversion),e}function Vse(t){let e=function(...r){let n=r[0];if(n==null)return n;n.length>1&&(r=n);let i=t(r);if(typeof i=="object")for(let o=i.length,s=0;s<o;s++)i[s]=Math.round(i[s]);return i};return"conversion"in t&&(e.conversion=t.conversion),e}qse.forEach(t=>{ep[t]={},Object.defineProperty(ep[t],"channels",{value:EE[t].channels}),Object.defineProperty(ep[t],"labels",{value:EE[t].labels});let e=jse(t);Object.keys(e).forEach(n=>{let i=e[n];ep[t][n]=Vse(i),ep[t][n].raw=Wse(i)})});WB.exports=ep});var zB=y((nLe,KB)=>{var tp=OB(),Dn=VB(),GB=["keyword","gray","hex"],DE={};for(let t of Object.keys(Dn))DE[[...Dn[t].labels].sort().join("")]=t;var Rv={};function ar(t,e){if(!(this instanceof ar))return new ar(t,e);if(e&&e in GB&&(e=null),e&&!(e in Dn))throw new Error("Unknown model: "+e);let r,n;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof ar)this.model=t.model,this.color=[...t.color],this.valpha=t.valpha;else if(typeof t=="string"){let i=tp.get(t);if(i===null)throw new Error("Unable to parse color from string: "+t);this.model=i.model,n=Dn[this.model].channels,this.color=i.value.slice(0,n),this.valpha=typeof i.value[n]=="number"?i.value[n]:1}else if(t.length>0){this.model=e||"rgb",n=Dn[this.model].channels;let i=Array.prototype.slice.call(t,0,n);this.color=CE(i,n),this.valpha=typeof t[n]=="number"?t[n]:1}else if(typeof t=="number")this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;let i=Object.keys(t);"alpha"in t&&(i.splice(i.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);let o=i.sort().join("");if(!(o in DE))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=DE[o];let{labels:s}=Dn[this.model],a=[];for(r=0;r<s.length;r++)a.push(t[s[r]]);this.color=CE(a)}if(Rv[this.model])for(n=Dn[this.model].channels,r=0;r<n;r++){let i=Rv[this.model][r];i&&(this.color[r]=i(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}ar.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(t){let e=this.model in tp.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);let r=e.valpha===1?e.color:[...e.color,this.valpha];return tp.to[e.model](r)},percentString(t){let e=this.rgb().round(typeof t=="number"?t:1),r=e.valpha===1?e.color:[...e.color,this.valpha];return tp.to.rgb.percent(r)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){let t={},{channels:e}=Dn[this.model],{labels:r}=Dn[this.model];for(let n=0;n<e;n++)t[r[n]]=this.color[n];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray(){let t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject(){let t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round(t){return t=Math.max(t||0,0),new ar([...this.color.map(Kse(t)),this.valpha],this.model)},alpha(t){return t!==void 0?new ar([...this.color,Math.max(0,Math.min(1,t))],this.model):this.valpha},red:Et("rgb",0,zt(255)),green:Et("rgb",1,zt(255)),blue:Et("rgb",2,zt(255)),hue:Et(["hsl","hsv","hsl","hwb","hcg"],0,t=>(t%360+360)%360),saturationl:Et("hsl",1,zt(100)),lightness:Et("hsl",2,zt(100)),saturationv:Et("hsv",1,zt(100)),value:Et("hsv",2,zt(100)),chroma:Et("hcg",1,zt(100)),gray:Et("hcg",2,zt(100)),white:Et("hwb",1,zt(100)),wblack:Et("hwb",2,zt(100)),cyan:Et("cmyk",0,zt(100)),magenta:Et("cmyk",1,zt(100)),yellow:Et("cmyk",2,zt(100)),black:Et("cmyk",3,zt(100)),x:Et("xyz",0,zt(95.047)),y:Et("xyz",1,zt(100)),z:Et("xyz",2,zt(108.833)),l:Et("lab",0,zt(100)),a:Et("lab",1),b:Et("lab",2),keyword(t){return t!==void 0?new ar(t):Dn[this.model].keyword(this.color)},hex(t){return t!==void 0?new ar(t):tp.to.hex(this.rgb().round().color)},hexa(t){if(t!==void 0)return new ar(t);let e=this.rgb().round().color,r=Math.round(this.valpha*255).toString(16).toUpperCase();return r.length===1&&(r="0"+r),tp.to.hex(e)+r},rgbNumber(){let t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity(){let t=this.rgb().color,e=[];for(let[r,n]of t.entries()){let i=n/255;e[r]=i<=.04045?i/12.92:((i+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(t){let e=this.luminosity(),r=t.luminosity();return e>r?(e+.05)/(r+.05):(r+.05)/(e+.05)},level(t){let e=this.contrast(t);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){let t=this.rgb().color;return(t[0]*2126+t[1]*7152+t[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){let t=this.rgb();for(let e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten(t){let e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken(t){let e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate(t){let e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate(t){let e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten(t){let e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken(t){let e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale(){let t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return ar.rgb(e,e,e)},fade(t){return this.alpha(this.valpha-this.valpha*t)},opaquer(t){return this.alpha(this.valpha+this.valpha*t)},rotate(t){let e=this.hsl(),r=e.color[0];return r=(r+t)%360,r=r<0?360+r:r,e.color[0]=r,e},mix(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);let r=t.rgb(),n=this.rgb(),i=e===void 0?.5:e,o=2*i-1,s=r.alpha()-n.alpha(),a=((o*s===-1?o:(o+s)/(1+o*s))+1)/2,u=1-a;return ar.rgb(a*r.red()+u*n.red(),a*r.green()+u*n.green(),a*r.blue()+u*n.blue(),r.alpha()*i+n.alpha()*(1-i))}};for(let t of Object.keys(Dn)){if(GB.includes(t))continue;let{channels:e}=Dn[t];ar.prototype[t]=function(...r){return this.model===t?new ar(this):r.length>0?new ar(r,t):new ar([...zse(Dn[this.model][t].raw(this.color)),this.valpha],t)},ar[t]=function(...r){let n=r[0];return typeof n=="number"&&(n=CE(r,e)),new ar(n,t)}}function Gse(t,e){return Number(t.toFixed(e))}function Kse(t){return function(e){return Gse(e,t)}}function Et(t,e,r){t=Array.isArray(t)?t:[t];for(let n of t)(Rv[n]||(Rv[n]=[]))[e]=r;return t=t[0],function(n){let i;return n!==void 0?(r&&(n=r(n)),i=this[t](),i.color[e]=n,i):(i=this[t]().color[e],r&&(i=r(i)),i)}}function zt(t){return function(e){return Math.max(0,Math.min(t,e))}}function zse(t){return Array.isArray(t)?t:[t]}function CE(t,e){for(let r=0;r<e;r++)typeof t[r]!="number"&&(t[r]=0);return t}KB.exports=ar});var WU=y(hb=>{"use strict";Object.defineProperty(hb,"__esModule",{value:!0});hb.dataUriToBuffer=void 0;function Dae(t){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let o=0;o<t.length;o+=4){let s=e.indexOf(t.charAt(o)),a=e.indexOf(t.charAt(o+1)),u=t.charAt(o+2)==="="?0:e.indexOf(t.charAt(o+2)),c=t.charAt(o+3)==="="?0:e.indexOf(t.charAt(o+3)),l=s<<2|a>>4,p=(a&15)<<4|u>>2,f=(u&3)<<6|c;r.push(l),t.charAt(o+2)!=="="&&r.push(p),t.charAt(o+3)!=="="&&r.push(f)}let n=new ArrayBuffer(r.length);return new Uint8Array(n).set(r),n}function Cae(t){let e=new ArrayBuffer(t.length),r=new Uint8Array(e);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return e}function Pae(t){if(t=String(t),!/^data:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");let e=t.indexOf(",");if(e===-1||e<=4)throw new TypeError("malformed data: URI");let r=t.substring(5,e).split(";"),n="",i=!1,o=r[0]||"text/plain",s=o;for(let c=1;c<r.length;c++)r[c]==="base64"?i=!0:r[c]&&(s+=`;${r[c]}`,r[c].indexOf("charset=")===0&&(n=r[c].substring(8)));!r[0]&&!n.length&&(s+=";charset=US-ASCII",n="US-ASCII");let a=unescape(t.substring(e+1)),u=i?Dae(a):Cae(a);return{type:o,typeFull:s,charset:n,buffer:u}}hb.dataUriToBuffer=Pae});var us=y((as,mb)=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});var VU=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function xae(t){return VU.includes(t)}var Lae=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Blob","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement",...VU];function Tae(t){return Lae.includes(t)}var $ae=["null","undefined","string","number","bigint","boolean","symbol"];function Rae(t){return $ae.includes(t)}function hp(t){return e=>typeof e===t}var{toString:GU}=Object.prototype,Gh=t=>{let e=GU.call(t).slice(8,-1);if(/HTML\w+Element/.test(e)&&S.domElement(t))return"HTMLElement";if(Tae(e))return e},Ze=t=>e=>Gh(e)===t;function S(t){if(t===null)return"null";switch(typeof t){case"undefined":return"undefined";case"string":return"string";case"number":return"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol";default:}if(S.observable(t))return"Observable";if(S.array(t))return"Array";if(S.buffer(t))return"Buffer";let e=Gh(t);if(e)return e;if(t instanceof String||t instanceof Boolean||t instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}S.undefined=hp("undefined");S.string=hp("string");var Mae=hp("number");S.number=t=>Mae(t)&&!S.nan(t);S.bigint=hp("bigint");S.function_=hp("function");S.null_=t=>t===null;S.class_=t=>S.function_(t)&&t.toString().startsWith("class ");S.boolean=t=>t===!0||t===!1;S.symbol=hp("symbol");S.numericString=t=>S.string(t)&&!S.emptyStringOrWhitespace(t)&&!Number.isNaN(Number(t));S.array=(t,e)=>Array.isArray(t)?S.function_(e)?t.every(e):!0:!1;S.buffer=t=>{var e,r,n,i;return(i=(n=(r=(e=t)===null||e===void 0?void 0:e.constructor)===null||r===void 0?void 0:r.isBuffer)===null||n===void 0?void 0:n.call(r,t))!==null&&i!==void 0?i:!1};S.blob=t=>Ze("Blob")(t);S.nullOrUndefined=t=>S.null_(t)||S.undefined(t);S.object=t=>!S.null_(t)&&(typeof t=="object"||S.function_(t));S.iterable=t=>{var e;return S.function_((e=t)===null||e===void 0?void 0:e[Symbol.iterator])};S.asyncIterable=t=>{var e;return S.function_((e=t)===null||e===void 0?void 0:e[Symbol.asyncIterator])};S.generator=t=>{var e,r;return S.iterable(t)&&S.function_((e=t)===null||e===void 0?void 0:e.next)&&S.function_((r=t)===null||r===void 0?void 0:r.throw)};S.asyncGenerator=t=>S.asyncIterable(t)&&S.function_(t.next)&&S.function_(t.throw);S.nativePromise=t=>Ze("Promise")(t);var kae=t=>{var e,r;return S.function_((e=t)===null||e===void 0?void 0:e.then)&&S.function_((r=t)===null||r===void 0?void 0:r.catch)};S.promise=t=>S.nativePromise(t)||kae(t);S.generatorFunction=Ze("GeneratorFunction");S.asyncGeneratorFunction=t=>Gh(t)==="AsyncGeneratorFunction";S.asyncFunction=t=>Gh(t)==="AsyncFunction";S.boundFunction=t=>S.function_(t)&&!t.hasOwnProperty("prototype");S.regExp=Ze("RegExp");S.date=Ze("Date");S.error=Ze("Error");S.map=t=>Ze("Map")(t);S.set=t=>Ze("Set")(t);S.weakMap=t=>Ze("WeakMap")(t);S.weakSet=t=>Ze("WeakSet")(t);S.int8Array=Ze("Int8Array");S.uint8Array=Ze("Uint8Array");S.uint8ClampedArray=Ze("Uint8ClampedArray");S.int16Array=Ze("Int16Array");S.uint16Array=Ze("Uint16Array");S.int32Array=Ze("Int32Array");S.uint32Array=Ze("Uint32Array");S.float32Array=Ze("Float32Array");S.float64Array=Ze("Float64Array");S.bigInt64Array=Ze("BigInt64Array");S.bigUint64Array=Ze("BigUint64Array");S.arrayBuffer=Ze("ArrayBuffer");S.sharedArrayBuffer=Ze("SharedArrayBuffer");S.dataView=Ze("DataView");S.enumCase=(t,e)=>Object.values(e).includes(t);S.directInstanceOf=(t,e)=>Object.getPrototypeOf(t)===e.prototype;S.urlInstance=t=>Ze("URL")(t);S.urlString=t=>{if(!S.string(t))return!1;try{return new URL(t),!0}catch{return!1}};S.truthy=t=>!!t;S.falsy=t=>!t;S.nan=t=>Number.isNaN(t);S.primitive=t=>S.null_(t)||Rae(typeof t);S.integer=t=>Number.isInteger(t);S.safeInteger=t=>Number.isSafeInteger(t);S.plainObject=t=>{if(GU.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||e===Object.getPrototypeOf({})};S.typedArray=t=>xae(Gh(t));var Oae=t=>S.safeInteger(t)&&t>=0;S.arrayLike=t=>!S.nullOrUndefined(t)&&!S.function_(t)&&Oae(t.length);S.inRange=(t,e)=>{if(S.number(e))return t>=Math.min(0,e)&&t<=Math.max(e,0);if(S.array(e)&&e.length===2)return t>=Math.min(...e)&&t<=Math.max(...e);throw new TypeError(`Invalid range: ${JSON.stringify(e)}`)};var Fae=1,Nae=["innerHTML","ownerDocument","style","attributes","nodeValue"];S.domElement=t=>S.object(t)&&t.nodeType===Fae&&S.string(t.nodeName)&&!S.plainObject(t)&&Nae.every(e=>e in t);S.observable=t=>{var e,r,n,i;return t?t===((r=(e=t)[Symbol.observable])===null||r===void 0?void 0:r.call(e))||t===((i=(n=t)["@@observable"])===null||i===void 0?void 0:i.call(n)):!1};S.nodeStream=t=>S.object(t)&&S.function_(t.pipe)&&!S.observable(t);S.infinite=t=>t===1/0||t===-1/0;var KU=t=>e=>S.integer(e)&&Math.abs(e%2)===t;S.evenInteger=KU(0);S.oddInteger=KU(1);S.emptyArray=t=>S.array(t)&&t.length===0;S.nonEmptyArray=t=>S.array(t)&&t.length>0;S.emptyString=t=>S.string(t)&&t.length===0;var Bae=t=>S.string(t)&&!/\S/.test(t);S.emptyStringOrWhitespace=t=>S.emptyString(t)||Bae(t);S.nonEmptyString=t=>S.string(t)&&t.length>0;S.nonEmptyStringAndNotWhitespace=t=>S.string(t)&&!S.emptyStringOrWhitespace(t);S.emptyObject=t=>S.object(t)&&!S.map(t)&&!S.set(t)&&Object.keys(t).length===0;S.nonEmptyObject=t=>S.object(t)&&!S.map(t)&&!S.set(t)&&Object.keys(t).length>0;S.emptySet=t=>S.set(t)&&t.size===0;S.nonEmptySet=t=>S.set(t)&&t.size>0;S.emptyMap=t=>S.map(t)&&t.size===0;S.nonEmptyMap=t=>S.map(t)&&t.size>0;S.propertyKey=t=>S.any([S.string,S.number,S.symbol],t);S.formData=t=>Ze("FormData")(t);S.urlSearchParams=t=>Ze("URLSearchParams")(t);var zU=(t,e,r)=>{if(!S.function_(e))throw new TypeError(`Invalid predicate: ${JSON.stringify(e)}`);if(r.length===0)throw new TypeError("Invalid number of values");return t.call(r,e)};S.any=(t,...e)=>(S.array(t)?t:[t]).some(n=>zU(Array.prototype.some,n,e));S.all=(t,...e)=>zU(Array.prototype.every,t,e);var te=(t,e,r,n={})=>{if(!t){let{multipleValues:i}=n,o=i?`received values of types ${[...new Set(r.map(s=>`\`${S(s)}\``))].join(", ")}`:`received value of type \`${S(r)}\``;throw new TypeError(`Expected value which is \`${e}\`, ${o}.`)}};as.assert={undefined:t=>te(S.undefined(t),"undefined",t),string:t=>te(S.string(t),"string",t),number:t=>te(S.number(t),"number",t),bigint:t=>te(S.bigint(t),"bigint",t),function_:t=>te(S.function_(t),"Function",t),null_:t=>te(S.null_(t),"null",t),class_:t=>te(S.class_(t),"Class",t),boolean:t=>te(S.boolean(t),"boolean",t),symbol:t=>te(S.symbol(t),"symbol",t),numericString:t=>te(S.numericString(t),"string with a number",t),array:(t,e)=>{te(S.array(t),"Array",t),e&&t.forEach(e)},buffer:t=>te(S.buffer(t),"Buffer",t),blob:t=>te(S.blob(t),"Blob",t),nullOrUndefined:t=>te(S.nullOrUndefined(t),"null or undefined",t),object:t=>te(S.object(t),"Object",t),iterable:t=>te(S.iterable(t),"Iterable",t),asyncIterable:t=>te(S.asyncIterable(t),"AsyncIterable",t),generator:t=>te(S.generator(t),"Generator",t),asyncGenerator:t=>te(S.asyncGenerator(t),"AsyncGenerator",t),nativePromise:t=>te(S.nativePromise(t),"native Promise",t),promise:t=>te(S.promise(t),"Promise",t),generatorFunction:t=>te(S.generatorFunction(t),"GeneratorFunction",t),asyncGeneratorFunction:t=>te(S.asyncGeneratorFunction(t),"AsyncGeneratorFunction",t),asyncFunction:t=>te(S.asyncFunction(t),"AsyncFunction",t),boundFunction:t=>te(S.boundFunction(t),"Function",t),regExp:t=>te(S.regExp(t),"RegExp",t),date:t=>te(S.date(t),"Date",t),error:t=>te(S.error(t),"Error",t),map:t=>te(S.map(t),"Map",t),set:t=>te(S.set(t),"Set",t),weakMap:t=>te(S.weakMap(t),"WeakMap",t),weakSet:t=>te(S.weakSet(t),"WeakSet",t),int8Array:t=>te(S.int8Array(t),"Int8Array",t),uint8Array:t=>te(S.uint8Array(t),"Uint8Array",t),uint8ClampedArray:t=>te(S.uint8ClampedArray(t),"Uint8ClampedArray",t),int16Array:t=>te(S.int16Array(t),"Int16Array",t),uint16Array:t=>te(S.uint16Array(t),"Uint16Array",t),int32Array:t=>te(S.int32Array(t),"Int32Array",t),uint32Array:t=>te(S.uint32Array(t),"Uint32Array",t),float32Array:t=>te(S.float32Array(t),"Float32Array",t),float64Array:t=>te(S.float64Array(t),"Float64Array",t),bigInt64Array:t=>te(S.bigInt64Array(t),"BigInt64Array",t),bigUint64Array:t=>te(S.bigUint64Array(t),"BigUint64Array",t),arrayBuffer:t=>te(S.arrayBuffer(t),"ArrayBuffer",t),sharedArrayBuffer:t=>te(S.sharedArrayBuffer(t),"SharedArrayBuffer",t),dataView:t=>te(S.dataView(t),"DataView",t),enumCase:(t,e)=>te(S.enumCase(t,e),"EnumCase",t),urlInstance:t=>te(S.urlInstance(t),"URL",t),urlString:t=>te(S.urlString(t),"string with a URL",t),truthy:t=>te(S.truthy(t),"truthy",t),falsy:t=>te(S.falsy(t),"falsy",t),nan:t=>te(S.nan(t),"NaN",t),primitive:t=>te(S.primitive(t),"primitive",t),integer:t=>te(S.integer(t),"integer",t),safeInteger:t=>te(S.safeInteger(t),"integer",t),plainObject:t=>te(S.plainObject(t),"plain object",t),typedArray:t=>te(S.typedArray(t),"TypedArray",t),arrayLike:t=>te(S.arrayLike(t),"array-like",t),domElement:t=>te(S.domElement(t),"HTMLElement",t),observable:t=>te(S.observable(t),"Observable",t),nodeStream:t=>te(S.nodeStream(t),"Node.js Stream",t),infinite:t=>te(S.infinite(t),"infinite number",t),emptyArray:t=>te(S.emptyArray(t),"empty array",t),nonEmptyArray:t=>te(S.nonEmptyArray(t),"non-empty array",t),emptyString:t=>te(S.emptyString(t),"empty string",t),emptyStringOrWhitespace:t=>te(S.emptyStringOrWhitespace(t),"empty string or whitespace",t),nonEmptyString:t=>te(S.nonEmptyString(t),"non-empty string",t),nonEmptyStringAndNotWhitespace:t=>te(S.nonEmptyStringAndNotWhitespace(t),"non-empty string and not whitespace",t),emptyObject:t=>te(S.emptyObject(t),"empty object",t),nonEmptyObject:t=>te(S.nonEmptyObject(t),"non-empty object",t),emptySet:t=>te(S.emptySet(t),"empty set",t),nonEmptySet:t=>te(S.nonEmptySet(t),"non-empty set",t),emptyMap:t=>te(S.emptyMap(t),"empty map",t),nonEmptyMap:t=>te(S.nonEmptyMap(t),"non-empty map",t),propertyKey:t=>te(S.propertyKey(t),"PropertyKey",t),formData:t=>te(S.formData(t),"FormData",t),urlSearchParams:t=>te(S.urlSearchParams(t),"URLSearchParams",t),evenInteger:t=>te(S.evenInteger(t),"even integer",t),oddInteger:t=>te(S.oddInteger(t),"odd integer",t),directInstanceOf:(t,e)=>te(S.directInstanceOf(t,e),"T",t),inRange:(t,e)=>te(S.inRange(t,e),"in range",t),any:(t,...e)=>te(S.any(t,...e),"predicate returns truthy for any value",e,{multipleValues:!0}),all:(t,...e)=>te(S.all(t,...e),"predicate returns truthy for all values",e,{multipleValues:!0})};Object.defineProperties(S,{class:{value:S.class_},function:{value:S.function_},null:{value:S.null_}});Object.defineProperties(as.assert,{class:{value:as.assert.class_},function:{value:as.assert.function_},null:{value:as.assert.null_}});as.default=S;mb.exports=S;mb.exports.default=S;mb.exports.assert=as.assert});var XU=y((LMe,cD)=>{"use strict";var gb=class extends Error{constructor(e){super(e||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}},Hb=class t{static fn(e){return(...r)=>new t((n,i,o)=>{r.push(o),e(...r).then(n,i)})}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((r,n)=>{this._reject=n;let i=a=>{(!this._isCanceled||!s.shouldReject)&&(this._isPending=!1,r(a))},o=a=>{this._isPending=!1,n(a)},s=a=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(a)};return Object.defineProperties(s,{shouldReject:{get:()=>this._rejectOnCancel,set:a=>{this._rejectOnCancel=a}}}),e(i,o,s)})}then(e,r){return this._promise.then(e,r)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(!(!this._isPending||this._isCanceled)){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(let r of this._cancelHandlers)r()}catch(r){this._reject(r);return}this._rejectOnCancel&&this._reject(new gb(e))}}get isCanceled(){return this._isCanceled}};Object.setPrototypeOf(Hb.prototype,Promise.prototype);cD.exports=Hb;cD.exports.CancelError=gb});var JU=y((pD,fD)=>{"use strict";Object.defineProperty(pD,"__esModule",{value:!0});function Uae(t){return t.encrypted}var lD=(t,e)=>{let r;typeof e=="function"?r={connect:e}:r=e;let n=typeof r.connect=="function",i=typeof r.secureConnect=="function",o=typeof r.close=="function",s=()=>{n&&r.connect(),Uae(t)&&i&&(t.authorized?r.secureConnect():t.authorizationError||t.once("secureConnect",r.secureConnect)),o&&t.once("close",r.close)};t.writable&&!t.connecting?s():t.connecting?t.once("connect",s):t.destroyed&&o&&r.close(t._hadError)};pD.default=lD;fD.exports=lD;fD.exports.default=lD});var YU=y((hD,mD)=>{"use strict";Object.defineProperty(hD,"__esModule",{value:!0});var jae=JU(),qae=require("util"),Wae=Number(process.versions.node.split(".")[0]),dD=t=>{if(t.timings)return t.timings;let e={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};t.timings=e;let r=a=>{let u=a.emit.bind(a);a.emit=(c,...l)=>(c==="error"&&(e.error=Date.now(),e.phases.total=e.error-e.start,a.emit=u),u(c,...l))};r(t);let n=()=>{e.abort=Date.now(),(!e.response||Wae>=13)&&(e.phases.total=Date.now()-e.start)};t.prependOnceListener("abort",n);let i=a=>{if(e.socket=Date.now(),e.phases.wait=e.socket-e.start,qae.types.isProxy(a))return;let u=()=>{e.lookup=Date.now(),e.phases.dns=e.lookup-e.socket};a.prependOnceListener("lookup",u),jae.default(a,{connect:()=>{e.connect=Date.now(),e.lookup===void 0&&(a.removeListener("lookup",u),e.lookup=e.connect,e.phases.dns=e.lookup-e.socket),e.phases.tcp=e.connect-e.lookup},secureConnect:()=>{e.secureConnect=Date.now(),e.phases.tls=e.secureConnect-e.connect}})};t.socket?i(t.socket):t.prependOnceListener("socket",i);let o=()=>{var a;e.upload=Date.now(),e.phases.request=e.upload-((a=e.secureConnect)!==null&&a!==void 0?a:e.connect)};return(()=>typeof t.writableFinished=="boolean"?t.writableFinished:t.finished&&t.outputSize===0&&(!t.socket||t.socket.writableLength===0))()?o():t.prependOnceListener("finish",o),t.prependOnceListener("response",a=>{e.response=Date.now(),e.phases.firstByte=e.response-e.upload,a.timings=e,r(a),a.prependOnceListener("end",()=>{e.end=Date.now(),e.phases.download=e.end-e.response,e.phases.total=e.end-e.start}),a.prependOnceListener("aborted",n)}),e};hD.default=dD;mD.exports=dD;mD.exports.default=dD});var i3=y((TMe,yD)=>{"use strict";var{V4MAPPED:Vae,ADDRCONFIG:Gae,ALL:n3,promises:{Resolver:QU},lookup:Kae}=require("dns"),{promisify:gD}=require("util"),zae=require("os"),mp=Symbol("cacheableLookupCreateConnection"),HD=Symbol("cacheableLookupInstance"),ZU=Symbol("expires"),Xae=typeof n3=="number",e3=t=>{if(!(t&&typeof t.createConnection=="function"))throw new Error("Expected an Agent instance as the first argument")},Jae=t=>{for(let e of t)e.family!==6&&(e.address=`::ffff:${e.address}`,e.family=6)},t3=()=>{let t=!1,e=!1;for(let r of Object.values(zae.networkInterfaces()))for(let n of r)if(!n.internal&&(n.family==="IPv6"?e=!0:t=!0,t&&e))return{has4:t,has6:e};return{has4:t,has6:e}},Yae=t=>Symbol.iterator in t,r3={ttl:!0},Qae={all:!0},yb=class{constructor({cache:e=new Map,maxTtl:r=1/0,fallbackDuration:n=3600,errorTtl:i=.15,resolver:o=new QU,lookup:s=Kae}={}){if(this.maxTtl=r,this.errorTtl=i,this._cache=e,this._resolver=o,this._dnsLookup=gD(s),this._resolver instanceof QU?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=gD(this._resolver.resolve4.bind(this._resolver)),this._resolve6=gD(this._resolver.resolve6.bind(this._resolver))),this._iface=t3(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,n<1)this._fallback=!1;else{this._fallback=!0;let a=setInterval(()=>{this._hostnamesToFallback.clear()},n*1e3);a.unref&&a.unref()}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear(),this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,r,n){if(typeof r=="function"?(n=r,r={}):typeof r=="number"&&(r={family:r}),!n)throw new Error("Callback must be a function.");this.lookupAsync(e,r).then(i=>{r.all?n(null,i):n(null,i.address,i.family,i.expires,i.ttl)},n)}async lookupAsync(e,r={}){typeof r=="number"&&(r={family:r});let n=await this.query(e);if(r.family===6){let i=n.filter(o=>o.family===6);r.hints&Vae&&(Xae&&r.hints&n3||i.length===0)?Jae(n):n=i}else r.family===4&&(n=n.filter(i=>i.family===4));if(r.hints&Gae){let{_iface:i}=this;n=n.filter(o=>o.family===6?i.has6:i.has4)}if(n.length===0){let i=new Error(`cacheableLookup ENOTFOUND ${e}`);throw i.code="ENOTFOUND",i.hostname=e,i}return r.all?n:n[0]}async query(e){let r=await this._cache.get(e);if(!r){let n=this._pending[e];if(n)r=await n;else{let i=this.queryAndCache(e);this._pending[e]=i;try{r=await i}finally{delete this._pending[e]}}}return r=r.map(n=>({...n})),r}async _resolve(e){let r=async c=>{try{return await c}catch(l){if(l.code==="ENODATA"||l.code==="ENOTFOUND")return[];throw l}},[n,i]=await Promise.all([this._resolve4(e,r3),this._resolve6(e,r3)].map(c=>r(c))),o=0,s=0,a=0,u=Date.now();for(let c of n)c.family=4,c.expires=u+c.ttl*1e3,o=Math.max(o,c.ttl);for(let c of i)c.family=6,c.expires=u+c.ttl*1e3,s=Math.max(s,c.ttl);return n.length>0?i.length>0?a=Math.min(o,s):a=o:a=s,{entries:[...n,...i],cacheTtl:a}}async _lookup(e){try{return{entries:await this._dnsLookup(e,{all:!0}),cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(e,r,n){if(this.maxTtl>0&&n>0){n=Math.min(n,this.maxTtl)*1e3,r[ZU]=Date.now()+n;try{await this._cache.set(e,r,n)}catch(i){this.lookupAsync=async()=>{let o=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw o.cause=i,o}}Yae(this._cache)&&this._tick(n)}}async queryAndCache(e){if(this._hostnamesToFallback.has(e))return this._dnsLookup(e,Qae);let r=await this._resolve(e);r.entries.length===0&&this._fallback&&(r=await this._lookup(e),r.entries.length!==0&&this._hostnamesToFallback.add(e));let n=r.entries.length===0?this.errorTtl:r.cacheTtl;return await this._set(e,r.entries,n),r.entries}_tick(e){let r=this._nextRemovalTime;(!r||e<r)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=e,this._removalTimeout=setTimeout(()=>{this._nextRemovalTime=!1;let n=1/0,i=Date.now();for(let[o,s]of this._cache){let a=s[ZU];i>=a?this._cache.delete(o):a<n&&(n=a)}n!==1/0&&this._tick(n-i)},e),this._removalTimeout.unref&&this._removalTimeout.unref())}install(e){if(e3(e),mp in e)throw new Error("CacheableLookup has been already installed");e[mp]=e.createConnection,e[HD]=this,e.createConnection=(r,n)=>("lookup"in r||(r.lookup=this.lookup),e[mp](r,n))}uninstall(e){if(e3(e),e[mp]){if(e[HD]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");e.createConnection=e[mp],delete e[mp],delete e[HD]}}updateInterfaceInfo(){let{_iface:e}=this;this._iface=t3(),(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6)&&this._cache.clear()}clear(e){if(e){this._cache.delete(e);return}this._cache.clear()}};yD.exports=yb;yD.exports.default=yb});var a3=y(($Me,s3)=>{"use strict";var Zae="text/plain",eue="us-ascii",o3=(t,e)=>e.some(r=>r instanceof RegExp?r.test(t):r===t),tue=(t,{stripHash:e})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:n,data:i,hash:o}=r.groups,s=n.split(";");o=e?"":o;let a=!1;s[s.length-1]==="base64"&&(s.pop(),a=!0);let u=(s.shift()||"").toLowerCase(),l=[...s.map(p=>{let[f,m=""]=p.split("=").map(h=>h.trim());return f==="charset"&&(m=m.toLowerCase(),m===eue)?"":`${f}${m?`=${m}`:""}`}).filter(Boolean)];return a&&l.push("base64"),(l.length!==0||u&&u!==Zae)&&l.unshift(u),`data:${l.join(";")},${a?i.trim():i}${o?`#${o}`:""}`},rue=(t,e)=>{if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return tue(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let i=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),e.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),e.stripAuthentication&&(i.username="",i.password=""),e.stripHash?i.hash="":e.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname&&(i.pathname=i.pathname.replace(/(?<!\b(?:[a-z][a-z\d+\-.]{1,50}:))\/{2,}/g,"/")),i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let s=i.pathname.split("/"),a=s[s.length-1];o3(a,e.removeDirectoryIndex)&&(s=s.slice(0,s.length-1),i.pathname=s.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)(?:[a-z\-\d]{1,63})\.(?:[a-z.\-\d]{2,63})$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let s of[...i.searchParams.keys()])o3(s,e.removeQueryParameters)&&i.searchParams.delete(s);e.removeQueryParameters===!0&&(i.search=""),e.sortQueryParameters&&i.searchParams.sort(),e.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let o=t;return t=i.toString(),!e.removeSingleSlash&&i.pathname==="/"&&!o.endsWith("/")&&i.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t};s3.exports=rue});var vD=y((RMe,c3)=>{c3.exports=u3;function u3(t,e){if(t&&e)return u3(t)(e);if(typeof t!="function")throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(n){r[n]=t[n]}),r;function r(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var o=t.apply(this,n),s=n[n.length-1];return typeof o=="function"&&o!==s&&Object.keys(s).forEach(function(a){o[a]=s[a]}),o}}});var gp=y((MMe,bD)=>{var l3=vD();bD.exports=l3(vb);bD.exports.strict=l3(p3);vb.proto=vb(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return vb(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return p3(this)},configurable:!0})});function vb(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function p3(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},r=t.name||"Function wrapped with `once`";return e.onceError=r+" shouldn't be called more than once",e.called=!1,e}});var bb=y((kMe,d3)=>{var nue=gp(),iue=function(){},oue=function(t){return t.setHeader&&typeof t.abort=="function"},sue=function(t){return t.stdio&&Array.isArray(t.stdio)&&t.stdio.length===3},f3=function(t,e,r){if(typeof e=="function")return f3(t,null,e);e||(e={}),r=nue(r||iue);var n=t._writableState,i=t._readableState,o=e.readable||e.readable!==!1&&t.readable,s=e.writable||e.writable!==!1&&t.writable,a=!1,u=function(){t.writable||c()},c=function(){s=!1,o||r.call(t)},l=function(){o=!1,s||r.call(t)},p=function(v){r.call(t,v?new Error("exited with error code: "+v):null)},f=function(v){r.call(t,v)},m=function(){process.nextTick(h)},h=function(){if(!a){if(o&&!(i&&i.ended&&!i.destroyed))return r.call(t,new Error("premature close"));if(s&&!(n&&n.ended&&!n.destroyed))return r.call(t,new Error("premature close"))}},H=function(){t.req.on("finish",c)};return oue(t)?(t.on("complete",c),t.on("abort",m),t.req?H():t.on("request",H)):s&&!n&&(t.on("end",u),t.on("close",u)),sue(t)&&t.on("exit",p),t.on("end",l),t.on("finish",c),e.error!==!1&&t.on("error",f),t.on("close",m),function(){a=!0,t.removeListener("complete",c),t.removeListener("abort",m),t.removeListener("request",H),t.req&&t.req.removeListener("finish",c),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",c),t.removeListener("exit",p),t.removeListener("end",l),t.removeListener("error",f),t.removeListener("close",m)}};d3.exports=f3});var g3=y((OMe,m3)=>{var aue=gp(),uue=bb(),wD=require("fs"),Kh=function(){},cue=/^v?\.0/.test(process.version),wb=function(t){return typeof t=="function"},lue=function(t){return!cue||!wD?!1:(t instanceof(wD.ReadStream||Kh)||t instanceof(wD.WriteStream||Kh))&&wb(t.close)},pue=function(t){return t.setHeader&&wb(t.abort)},fue=function(t,e,r,n){n=aue(n);var i=!1;t.on("close",function(){i=!0}),uue(t,{readable:e,writable:r},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,lue(t))return t.close(Kh);if(pue(t))return t.abort();if(wb(t.destroy))return t.destroy();n(s||new Error("stream was destroyed"))}}},h3=function(t){t()},due=function(t,e){return t.pipe(e)},hue=function(){var t=Array.prototype.slice.call(arguments),e=wb(t[t.length-1]||Kh)&&t.pop()||Kh;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var r,n=t.map(function(i,o){var s=o<t.length-1,a=o>0;return fue(i,s,a,function(u){r||(r=u),u&&n.forEach(h3),!s&&(n.forEach(h3),e(r))})});return t.reduce(due)};m3.exports=hue});var y3=y((FMe,H3)=>{"use strict";var{PassThrough:mue}=require("stream");H3.exports=t=>{t={...t};let{array:e}=t,{encoding:r}=t,n=r==="buffer",i=!1;e?i=!(r||n):r=r||"utf8",n&&(r=null);let o=new mue({objectMode:i});r&&o.setEncoding(r);let s=0,a=[];return o.on("data",u=>{a.push(u),i?s=a.length:s+=u.length}),o.getBufferedValue=()=>e?a:n?Buffer.concat(a,s):a.join(""),o.getBufferedLength=()=>s,o}});var v3=y((NMe,Hp)=>{"use strict";var{constants:gue}=require("buffer"),Hue=g3(),yue=y3(),_b=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function Ab(t,e){if(!t)return Promise.reject(new Error("Expected a stream"));e={maxBuffer:1/0,...e};let{maxBuffer:r}=e,n;return await new Promise((i,o)=>{let s=a=>{a&&n.getBufferedLength()<=gue.MAX_LENGTH&&(a.bufferedData=n.getBufferedValue()),o(a)};n=Hue(t,yue(e),a=>{if(a){s(a);return}i()}),n.on("data",()=>{n.getBufferedLength()>r&&s(new _b)})}),n.getBufferedValue()}Hp.exports=Ab;Hp.exports.default=Ab;Hp.exports.buffer=(t,e)=>Ab(t,{...e,encoding:"buffer"});Hp.exports.array=(t,e)=>Ab(t,{...e,array:!0});Hp.exports.MaxBufferError=_b});var w3=y((UMe,b3)=>{"use strict";var vue=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),bue=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),wue=new Set([500,502,503,504]),_ue={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},Aue={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function Yu(t){let e=parseInt(t,10);return isFinite(e)?e:0}function Iue(t){return t?wue.has(t.status):!0}function _D(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let n of r){let[i,o]=n.split(/=/,2);e[i.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}function Sue(t){let e=[];for(let r in t){let n=t[r];e.push(n===!0?r:r+"="+n)}if(e.length)return e.join(", ")}b3.exports=class{constructor(e,r,{shared:n,cacheHeuristic:i,immutableMinTimeToLive:o,ignoreCargoCult:s,_fromObject:a}={}){if(a){this._fromObject(a);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=i!==void 0?i:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=_D(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=_D(e.headers["cache-control"]),s&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":Sue(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&bue.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||vue.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=_D(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of r)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let n in e)_ue[n]||(r[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let i of n)delete r[i]}if(r.warning){let n=r.warning.split(/,/).filter(i=>!/^\s*1[0-9][0-9]/.test(i));n.length?r.warning=n.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return Yu(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return Yu(this._rescc["s-maxage"])}if(this._rescc["max-age"])return Yu(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<r?0:Math.max(e,(n-r)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&r>n)return Math.max(e,(r-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+Yu(this._rescc["stale-if-error"]),n=e+Yu(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+Yu(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+Yu(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let i=r["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));i.length?r["if-none-match"]=i.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&Iue(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let n=!1;if(r.status!==void 0&&r.status!=304?n=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let i={};for(let s in this._resHeaders)i[s]=s in r.headers&&!Aue[s]?r.headers[s]:this._resHeaders[s];let o=Object.assign({},r,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var Ib=y((jMe,_3)=>{"use strict";_3.exports=t=>{let e={};for(let[r,n]of Object.entries(t))e[r.toLowerCase()]=n;return e}});var I3=y((qMe,A3)=>{"use strict";var Eue=require("stream").Readable,Due=Ib(),AD=class extends Eue{constructor(e,r,n,i){if(typeof e!="number")throw new TypeError("Argument `statusCode` should be a number");if(typeof r!="object")throw new TypeError("Argument `headers` should be an object");if(!(n instanceof Buffer))throw new TypeError("Argument `body` should be a buffer");if(typeof i!="string")throw new TypeError("Argument `url` should be a string");super(),this.statusCode=e,this.headers=Due(r),this.body=n,this.url=i}_read(){this.push(this.body),this.push(null)}};A3.exports=AD});var E3=y((WMe,S3)=>{"use strict";var Cue=["destroy","setTimeout","socket","headers","trailers","rawHeaders","statusCode","httpVersion","httpVersionMinor","httpVersionMajor","rawTrailers","statusMessage"];S3.exports=(t,e)=>{let r=new Set(Object.keys(t).concat(Cue));for(let n of r)n in e||(e[n]=typeof t[n]=="function"?t[n].bind(t):t[n])}});var C3=y((VMe,D3)=>{"use strict";var Pue=require("stream").PassThrough,xue=E3(),Lue=t=>{if(!(t&&t.pipe))throw new TypeError("Parameter `response` must be a response stream.");let e=new Pue;return xue(t,e),t.pipe(e)};D3.exports=Lue});var P3=y(ID=>{ID.stringify=function t(e){if(typeof e>"u")return e;if(e&&Buffer.isBuffer(e))return JSON.stringify(":base64:"+e.toString("base64"));if(e&&e.toJSON&&(e=e.toJSON()),e&&typeof e=="object"){var r="",n=Array.isArray(e);r=n?"[":"{";var i=!0;for(var o in e){var s=typeof e[o]=="function"||!n&&typeof e[o]>"u";Object.hasOwnProperty.call(e,o)&&!s&&(i||(r+=","),i=!1,n?e[o]==null?r+="null":r+=t(e[o]):e[o]!==void 0&&(r+=t(o)+":"+t(e[o])))}return r+=n?"]":"}",r}else return typeof e=="string"?JSON.stringify(/^:/.test(e)?":"+e:e):typeof e>"u"?"null":JSON.stringify(e)};ID.parse=function(t){return JSON.parse(t,function(e,r){return typeof r=="string"?/^:base64:/.test(r)?Buffer.from(r.substring(8),"base64"):/^:/.test(r)?r.substring(1):r:r})}});var $3=y((KMe,T3)=>{"use strict";var Tue=require("events"),x3=P3(),$ue=t=>{let e={redis:"@keyv/redis",rediss:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql",etcd:"@keyv/etcd",offline:"@keyv/offline",tiered:"@keyv/tiered"};if(t.adapter||t.uri){let r=t.adapter||/^[^:+]*/.exec(t.uri)[0];return new(require(e[r]))(t)}return new Map},L3=["sqlite","postgres","mysql","mongo","redis","tiered"],SD=class extends Tue{constructor(e,{emitErrors:r=!0,...n}={}){if(super(),this.opts={namespace:"keyv",serialize:x3.stringify,deserialize:x3.parse,...typeof e=="string"?{uri:e}:e,...n},!this.opts.store){let o={...this.opts};this.opts.store=$ue(o)}if(this.opts.compression){let o=this.opts.compression;this.opts.serialize=o.serialize.bind(o),this.opts.deserialize=o.deserialize.bind(o)}typeof this.opts.store.on=="function"&&r&&this.opts.store.on("error",o=>this.emit("error",o)),this.opts.store.namespace=this.opts.namespace;let i=o=>async function*(){for await(let[s,a]of typeof o=="function"?o(this.opts.store.namespace):o){let u=this.opts.deserialize(a);if(!(this.opts.store.namespace&&!s.includes(this.opts.store.namespace))){if(typeof u.expires=="number"&&Date.now()>u.expires){this.delete(s);continue}yield[this._getKeyUnprefix(s),u.value]}}};typeof this.opts.store[Symbol.iterator]=="function"&&this.opts.store instanceof Map?this.iterator=i(this.opts.store):typeof this.opts.store.iterator=="function"&&this.opts.store.opts&&this._checkIterableAdaptar()&&(this.iterator=i(this.opts.store.iterator.bind(this.opts.store)))}_checkIterableAdaptar(){return L3.includes(this.opts.store.opts.dialect)||L3.findIndex(e=>this.opts.store.opts.url.includes(e))>=0}_getKeyPrefix(e){return`${this.opts.namespace}:${e}`}_getKeyPrefixArray(e){return e.map(r=>`${this.opts.namespace}:${r}`)}_getKeyUnprefix(e){return e.split(":").splice(1).join(":")}get(e,r){let{store:n}=this.opts,i=Array.isArray(e),o=i?this._getKeyPrefixArray(e):this._getKeyPrefix(e);if(i&&n.getMany===void 0){let s=[];for(let a of o)s.push(Promise.resolve().then(()=>n.get(a)).then(u=>typeof u=="string"?this.opts.deserialize(u):this.opts.compression?this.opts.deserialize(u):u).then(u=>{if(u!=null)return typeof u.expires=="number"&&Date.now()>u.expires?this.delete(a).then(()=>{}):r&&r.raw?u:u.value}));return Promise.allSettled(s).then(a=>{let u=[];for(let c of a)u.push(c.value);return u})}return Promise.resolve().then(()=>i?n.getMany(o):n.get(o)).then(s=>typeof s=="string"?this.opts.deserialize(s):this.opts.compression?this.opts.deserialize(s):s).then(s=>{if(s!=null){if(i){let a=[];for(let u of s){if(typeof u=="string"&&(u=this.opts.deserialize(u)),u==null){a.push(void 0);continue}typeof u.expires=="number"&&Date.now()>u.expires?(this.delete(e).then(()=>{}),a.push(void 0)):a.push(r&&r.raw?u:u.value)}return a}return typeof s.expires=="number"&&Date.now()>s.expires?this.delete(e).then(()=>{}):r&&r.raw?s:s.value}})}set(e,r,n){let i=this._getKeyPrefix(e);typeof n>"u"&&(n=this.opts.ttl),n===0&&(n=void 0);let{store:o}=this.opts;return Promise.resolve().then(()=>{let s=typeof n=="number"?Date.now()+n:null;return typeof r=="symbol"&&this.emit("error","symbol cannot be serialized"),r={value:r,expires:s},this.opts.serialize(r)}).then(s=>o.set(i,s,n)).then(()=>!0)}delete(e){let{store:r}=this.opts;if(Array.isArray(e)){let i=this._getKeyPrefixArray(e);if(r.deleteMany===void 0){let o=[];for(let s of i)o.push(r.delete(s));return Promise.allSettled(o).then(s=>s.every(a=>a.value===!0))}return Promise.resolve().then(()=>r.deleteMany(i))}let n=this._getKeyPrefix(e);return Promise.resolve().then(()=>r.delete(n))}clear(){let{store:e}=this.opts;return Promise.resolve().then(()=>e.clear())}has(e){let r=this._getKeyPrefix(e),{store:n}=this.opts;return Promise.resolve().then(async()=>typeof n.has=="function"?n.has(r):await n.get(r)!==void 0)}disconnect(){let{store:e}=this.opts;if(typeof e.disconnect=="function")return e.disconnect()}};T3.exports=SD});var k3=y((zMe,M3)=>{"use strict";var Rue=require("events"),Sb=require("url"),Mue=a3(),kue=v3(),ED=w3(),R3=I3(),Oue=Ib(),Fue=C3(),Nue=$3(),zh=class t{constructor(e,r){if(typeof e!="function")throw new TypeError("Parameter `request` must be a function");return this.cache=new Nue({uri:typeof r=="string"&&r,store:typeof r!="string"&&r,namespace:"cacheable-request"}),this.createCacheableRequest(e)}createCacheableRequest(e){return(r,n)=>{let i;if(typeof r=="string")i=DD(Sb.parse(r)),r={};else if(r instanceof Sb.URL)i=DD(Sb.parse(r.toString())),r={};else{let[p,...f]=(r.path||"").split("?"),m=f.length>0?`?${f.join("?")}`:"";i=DD({...r,pathname:p,search:m})}r={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...r,...Bue(i)},r.headers=Oue(r.headers);let o=new Rue,s=Mue(Sb.format(i),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1}),a=`${r.method}:${s}`,u=!1,c=!1,l=p=>{c=!0;let f=!1,m,h=new Promise(v=>{m=()=>{f||(f=!0,v())}}),H=v=>{if(u&&!p.forceRefresh){v.status=v.statusCode;let x=ED.fromObject(u.cachePolicy).revalidatedPolicy(p,v);if(!x.modified){let k=x.policy.responseHeaders();v=new R3(u.statusCode,k,u.body,u.url),v.cachePolicy=x.policy,v.fromCache=!0}}v.fromCache||(v.cachePolicy=new ED(p,v,p),v.fromCache=!1);let _;p.cache&&v.cachePolicy.storable()?(_=Fue(v),(async()=>{try{let x=kue.buffer(v);if(await Promise.race([h,new Promise(K=>v.once("end",K))]),f)return;let k=await x,T={cachePolicy:v.cachePolicy.toObject(),url:v.url,statusCode:v.fromCache?u.statusCode:v.statusCode,body:k},j=p.strictTtl?v.cachePolicy.timeToLive():void 0;p.maxTtl&&(j=j?Math.min(j,p.maxTtl):p.maxTtl),await this.cache.set(a,T,j)}catch(x){o.emit("error",new t.CacheError(x))}})()):p.cache&&u&&(async()=>{try{await this.cache.delete(a)}catch(x){o.emit("error",new t.CacheError(x))}})(),o.emit("response",_||v),typeof n=="function"&&n(_||v)};try{let v=e(p,H);v.once("error",m),v.once("abort",m),o.emit("request",v)}catch(v){o.emit("error",new t.RequestError(v))}};return(async()=>{let p=async m=>{await Promise.resolve();let h=m.cache?await this.cache.get(a):void 0;if(typeof h>"u")return l(m);let H=ED.fromObject(h.cachePolicy);if(H.satisfiesWithoutRevalidation(m)&&!m.forceRefresh){let v=H.responseHeaders(),_=new R3(h.statusCode,v,h.body,h.url);_.cachePolicy=H,_.fromCache=!0,o.emit("response",_),typeof n=="function"&&n(_)}else u=h,m.headers=H.revalidationHeaders(m),l(m)},f=m=>o.emit("error",new t.CacheError(m));this.cache.once("error",f),o.on("response",()=>this.cache.removeListener("error",f));try{await p(r)}catch(m){r.automaticFailover&&!c&&l(r),o.emit("error",new t.CacheError(m))}})(),o}}};function Bue(t){let e={...t};return e.path=`${t.pathname||"/"}${t.search||""}`,delete e.pathname,delete e.search,e}function DD(t){return{protocol:t.protocol,auth:t.auth,hostname:t.hostname||t.host||"localhost",port:t.port,pathname:t.pathname,search:t.search}}zh.RequestError=class extends Error{constructor(t){super(t.message),this.name="RequestError",Object.assign(this,t)}};zh.CacheError=class extends Error{constructor(t){super(t.message),this.name="CacheError",Object.assign(this,t)}};M3.exports=zh});var F3=y((YMe,O3)=>{"use strict";var Uue=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];O3.exports=(t,e)=>{if(e._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");let r=new Set(Object.keys(t).concat(Uue)),n={};for(let i of r)i in e||(n[i]={get(){let o=t[i];return typeof o=="function"?o.bind(t):o},set(o){t[i]=o},enumerable:!0,configurable:!1});return Object.defineProperties(e,n),t.once("aborted",()=>{e.destroy(),e.emit("aborted")}),t.once("close",()=>{t.complete&&e.readable?e.once("end",()=>{e.emit("close")}):e.emit("close")}),e}});var B3=y((QMe,N3)=>{"use strict";var{Transform:jue,PassThrough:que}=require("stream"),CD=require("zlib"),Wue=F3();N3.exports=t=>{let e=(t.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(e))return t;let r=e==="br";if(r&&typeof CD.createBrotliDecompress!="function")return t.destroy(new Error("Brotli is not supported on Node.js < 12")),t;let n=!0,i=new jue({transform(a,u,c){n=!1,c(null,a)},flush(a){a()}}),o=new que({autoDestroy:!1,destroy(a,u){t.destroy(),u(a)}}),s=r?CD.createBrotliDecompress():CD.createUnzip();return s.once("error",a=>{if(n&&!t.readable){o.end();return}o.destroy(a)}),Wue(t,o),t.pipe(i).pipe(s).pipe(o),o}});var xD=y((ZMe,U3)=>{"use strict";var PD=class{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,r){if(this.cache.set(e,r),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(let[n,i]of this.oldCache.entries())this.onEviction(n,i);this.oldCache=this.cache,this.cache=new Map}}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){let r=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,r),r}}set(e,r){return this.cache.has(e)?this.cache.set(e,r):this._set(e,r),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e))return this.oldCache.get(e)}delete(e){let r=this.cache.delete(e);return r&&this._size--,this.oldCache.delete(e)||r}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(let[e]of this)yield e}*values(){for(let[,e]of this)yield e}*[Symbol.iterator](){for(let e of this.cache)yield e;for(let e of this.oldCache){let[r]=e;this.cache.has(r)||(yield e)}}get size(){let e=0;for(let r of this.oldCache.keys())this.cache.has(r)||e++;return Math.min(this._size+e,this.maxSize)}};U3.exports=PD});var TD=y((eke,V3)=>{"use strict";var Vue=require("events"),Gue=require("tls"),Kue=require("http2"),zue=xD(),Jr=Symbol("currentStreamsCount"),j3=Symbol("request"),Zn=Symbol("cachedOriginSet"),yp=Symbol("gracefullyClosing"),Xue=["maxDeflateDynamicTableSize","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","localAddress","path","rejectUnauthorized","minDHSize","ca","cert","clientCertEngine","ciphers","key","pfx","servername","minVersion","maxVersion","secureProtocol","crl","honorCipherOrder","ecdhCurve","dhparam","secureOptions","sessionIdContext"],Jue=(t,e,r)=>{let n=0,i=t.length;for(;n<i;){let o=n+i>>>1;r(t[o],e)?n=o+1:i=o}return n},Yue=(t,e)=>t.remoteSettings.maxConcurrentStreams>e.remoteSettings.maxConcurrentStreams,LD=(t,e)=>{for(let r of t)r[Zn].length<e[Zn].length&&r[Zn].every(n=>e[Zn].includes(n))&&r[Jr]+e[Jr]<=e.remoteSettings.maxConcurrentStreams&&W3(r)},Que=(t,e)=>{for(let r of t)e[Zn].length<r[Zn].length&&e[Zn].every(n=>r[Zn].includes(n))&&e[Jr]+r[Jr]<=r.remoteSettings.maxConcurrentStreams&&W3(e)},q3=({agent:t,isFree:e})=>{let r={};for(let n in t.sessions){let o=t.sessions[n].filter(s=>{let a=s[Qu.kCurrentStreamsCount]<s.remoteSettings.maxConcurrentStreams;return e?a:!a});o.length!==0&&(r[n]=o)}return r},W3=t=>{t[yp]=!0,t[Jr]===0&&t.close()},Qu=class t extends Vue{constructor({timeout:e=6e4,maxSessions:r=1/0,maxFreeSessions:n=10,maxCachedTlsSessions:i=100}={}){super(),this.sessions={},this.queue={},this.timeout=e,this.maxSessions=r,this.maxFreeSessions=n,this._freeSessionsCount=0,this._sessionsCount=0,this.settings={enablePush:!1},this.tlsSessionCache=new zue({maxSize:i})}static normalizeOrigin(e,r){return typeof e=="string"&&(e=new URL(e)),r&&e.hostname!==r&&(e.hostname=r),e.origin}normalizeOptions(e){let r="";if(e)for(let n of Xue)e[n]&&(r+=`:${e[n]}`);return r}_tryToCreateNewSession(e,r){if(!(e in this.queue)||!(r in this.queue[e]))return;let n=this.queue[e][r];this._sessionsCount<this.maxSessions&&!n.completed&&(n.completed=!0,n())}getSession(e,r,n){return new Promise((i,o)=>{Array.isArray(n)?(n=[...n],i()):n=[{resolve:i,reject:o}];let s=this.normalizeOptions(r),a=t.normalizeOrigin(e,r&&r.servername);if(a===void 0){for(let{reject:l}of n)l(new TypeError("The `origin` argument needs to be a string or an URL object"));return}if(s in this.sessions){let l=this.sessions[s],p=-1,f=-1,m;for(let h of l){let H=h.remoteSettings.maxConcurrentStreams;if(H<p)break;if(h[Zn].includes(a)){let v=h[Jr];if(v>=H||h[yp]||h.destroyed)continue;m||(p=H),v>f&&(m=h,f=v)}}if(m){if(n.length!==1){for(let{reject:h}of n){let H=new Error(`Expected the length of listeners to be 1, got ${n.length}.
Please report this to https://github.com/szmarczak/http2-wrapper/`);h(H)}return}n[0].resolve(m);return}}if(s in this.queue){if(a in this.queue[s]){this.queue[s][a].listeners.push(...n),this._tryToCreateNewSession(s,a);return}}else this.queue[s]={};let u=()=>{s in this.queue&&this.queue[s][a]===c&&(delete this.queue[s][a],Object.keys(this.queue[s]).length===0&&delete this.queue[s])},c=()=>{let l=`${a}:${s}`,p=!1;try{let f=Kue.connect(e,{createConnection:this.createConnection,settings:this.settings,session:this.tlsSessionCache.get(l),...r});f[Jr]=0,f[yp]=!1;let m=()=>f[Jr]<f.remoteSettings.maxConcurrentStreams,h=!0;f.socket.once("session",v=>{this.tlsSessionCache.set(l,v)}),f.once("error",v=>{for(let{reject:_}of n)_(v);this.tlsSessionCache.delete(l)}),f.setTimeout(this.timeout,()=>{f.destroy()}),f.once("close",()=>{if(p){h&&this._freeSessionsCount--,this._sessionsCount--;let v=this.sessions[s];v.splice(v.indexOf(f),1),v.length===0&&delete this.sessions[s]}else{let v=new Error("Session closed without receiving a SETTINGS frame");v.code="HTTP2WRAPPER_NOSETTINGS";for(let{reject:_}of n)_(v);u()}this._tryToCreateNewSession(s,a)});let H=()=>{if(!(!(s in this.queue)||!m())){for(let v of f[Zn])if(v in this.queue[s]){let{listeners:_}=this.queue[s][v];for(;_.length!==0&&m();)_.shift().resolve(f);let x=this.queue[s];if(x[v].listeners.length===0&&(delete x[v],Object.keys(x).length===0)){delete this.queue[s];break}if(!m())break}}};f.on("origin",()=>{f[Zn]=f.originSet,m()&&(H(),LD(this.sessions[s],f))}),f.once("remoteSettings",()=>{if(f.ref(),f.unref(),this._sessionsCount++,c.destroyed){let v=new Error("Agent has been destroyed");for(let _ of n)_.reject(v);f.destroy();return}f[Zn]=f.originSet;{let v=this.sessions;if(s in v){let _=v[s];_.splice(Jue(_,f,Yue),0,f)}else v[s]=[f]}this._freeSessionsCount+=1,p=!0,this.emit("session",f),H(),u(),f[Jr]===0&&this._freeSessionsCount>this.maxFreeSessions&&f.close(),n.length!==0&&(this.getSession(a,r,n),n.length=0),f.on("remoteSettings",()=>{H(),LD(this.sessions[s],f)})}),f[j3]=f.request,f.request=(v,_)=>{if(f[yp])throw new Error("The session is gracefully closing. No new streams are allowed.");let x=f[j3](v,_);return f.ref(),++f[Jr],f[Jr]===f.remoteSettings.maxConcurrentStreams&&this._freeSessionsCount--,x.once("close",()=>{if(h=m(),--f[Jr],!f.destroyed&&!f.closed&&(Que(this.sessions[s],f),m()&&!f.closed)){h||(this._freeSessionsCount++,h=!0);let k=f[Jr]===0;k&&f.unref(),k&&(this._freeSessionsCount>this.maxFreeSessions||f[yp])?f.close():(LD(this.sessions[s],f),H())}}),x}}catch(f){for(let m of n)m.reject(f);u()}};c.listeners=n,c.completed=!1,c.destroyed=!1,this.queue[s][a]=c,this._tryToCreateNewSession(s,a)})}request(e,r,n,i){return new Promise((o,s)=>{this.getSession(e,r,[{reject:s,resolve:a=>{try{o(a.request(n,i))}catch(u){s(u)}}}])})}createConnection(e,r){return t.connect(e,r)}static connect(e,r){r.ALPNProtocols=["h2"];let n=e.port||443,i=e.hostname||e.host;return typeof r.servername>"u"&&(r.servername=i),Gue.connect(n,i,r)}closeFreeSessions(){for(let e of Object.values(this.sessions))for(let r of e)r[Jr]===0&&r.close()}destroy(e){for(let r of Object.values(this.sessions))for(let n of r)n.destroy(e);for(let r of Object.values(this.queue))for(let n of Object.values(r))n.destroyed=!0;this.queue={}}get freeSessions(){return q3({agent:this,isFree:!0})}get busySessions(){return q3({agent:this,isFree:!1})}};Qu.kCurrentStreamsCount=Jr;Qu.kGracefullyClosing=yp;V3.exports={Agent:Qu,globalAgent:new Qu}});var RD=y((tke,G3)=>{"use strict";var{Readable:Zue}=require("stream"),$D=class extends Zue{constructor(e,r){super({highWaterMark:r,autoDestroy:!1}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=e,this.connection=e,this._dumped=!1}_destroy(e){this.req._request.destroy(e)}setTimeout(e,r){return this.req.setTimeout(e,r),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}};G3.exports=$D});var MD=y((rke,K3)=>{"use strict";K3.exports=t=>{let e={protocol:t.protocol,hostname:typeof t.hostname=="string"&&t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,host:t.host,hash:t.hash,search:t.search,pathname:t.pathname,href:t.href,path:`${t.pathname||""}${t.search||""}`};return typeof t.port=="string"&&t.port.length!==0&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=`${t.username||""}:${t.password||""}`),e}});var X3=y((nke,z3)=>{"use strict";z3.exports=(t,e,r)=>{for(let n of r)t.on(n,(...i)=>e.emit(n,...i))}});var Y3=y((ike,J3)=>{"use strict";J3.exports=t=>{switch(t){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}});var Z3=y((ske,Q3)=>{"use strict";var vp=(t,e,r)=>{Q3.exports[e]=class extends t{constructor(...i){super(typeof r=="string"?r:r(i)),this.name=`${super.name} [${e}]`,this.code=e}}};vp(TypeError,"ERR_INVALID_ARG_TYPE",t=>{let e=t[0].includes(".")?"property":"argument",r=t[1],n=Array.isArray(r);return n&&(r=`${r.slice(0,-1).join(", ")} or ${r.slice(-1)}`),`The "${t[0]}" ${e} must be ${n?"one of":"of"} type ${r}. Received ${typeof t[2]}`});vp(TypeError,"ERR_INVALID_PROTOCOL",t=>`Protocol "${t[0]}" not supported. Expected "${t[1]}"`);vp(Error,"ERR_HTTP_HEADERS_SENT",t=>`Cannot ${t[0]} headers after they are sent to the client`);vp(TypeError,"ERR_INVALID_HTTP_TOKEN",t=>`${t[0]} must be a valid HTTP token [${t[1]}]`);vp(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",t=>`Invalid value "${t[0]} for header "${t[1]}"`);vp(TypeError,"ERR_INVALID_CHAR",t=>`Invalid character in ${t[0]} [${t[1]}]`)});var BD=y((ake,s2)=>{"use strict";var ece=require("http2"),{Writable:tce}=require("stream"),{Agent:e2,globalAgent:rce}=TD(),nce=RD(),ice=MD(),oce=X3(),sce=Y3(),{ERR_INVALID_ARG_TYPE:kD,ERR_INVALID_PROTOCOL:ace,ERR_HTTP_HEADERS_SENT:t2,ERR_INVALID_HTTP_TOKEN:uce,ERR_HTTP_INVALID_HEADER_VALUE:cce,ERR_INVALID_CHAR:lce}=Z3(),{HTTP2_HEADER_STATUS:r2,HTTP2_HEADER_METHOD:n2,HTTP2_HEADER_PATH:i2,HTTP2_METHOD_CONNECT:pce}=ece.constants,Br=Symbol("headers"),OD=Symbol("origin"),FD=Symbol("session"),o2=Symbol("options"),Eb=Symbol("flushedHeaders"),Xh=Symbol("jobs"),fce=/^[\^`\-\w!#$%&*+.|~]+$/,dce=/[^\t\u0020-\u007E\u0080-\u00FF]/,ND=class extends tce{constructor(e,r,n){super({autoDestroy:!1});let i=typeof e=="string"||e instanceof URL;if(i&&(e=ice(e instanceof URL?e:new URL(e))),typeof r=="function"||r===void 0?(n=r,r=i?e:{...e}):r={...e,...r},r.h2session)this[FD]=r.h2session;else if(r.agent===!1)this.agent=new e2({maxFreeSessions:0});else if(typeof r.agent>"u"||r.agent===null)typeof r.createConnection=="function"?(this.agent=new e2({maxFreeSessions:0}),this.agent.createConnection=r.createConnection):this.agent=rce;else if(typeof r.agent.request=="function")this.agent=r.agent;else throw new kD("options.agent",["Agent-like Object","undefined","false"],r.agent);if(r.protocol&&r.protocol!=="https:")throw new ace(r.protocol,"https:");let o=r.port||r.defaultPort||this.agent&&this.agent.defaultPort||443,s=r.hostname||r.host||"localhost";delete r.hostname,delete r.host,delete r.port;let{timeout:a}=r;if(r.timeout=void 0,this[Br]=Object.create(null),this[Xh]=[],this.socket=null,this.connection=null,this.method=r.method||"GET",this.path=r.path,this.res=null,this.aborted=!1,this.reusedSocket=!1,r.headers)for(let[u,c]of Object.entries(r.headers))this.setHeader(u,c);r.auth&&!("authorization"in this[Br])&&(this[Br].authorization="Basic "+Buffer.from(r.auth).toString("base64")),r.session=r.tlsSession,r.path=r.socketPath,this[o2]=r,o===443?(this[OD]=`https://${s}`,":authority"in this[Br]||(this[Br][":authority"]=s)):(this[OD]=`https://${s}:${o}`,":authority"in this[Br]||(this[Br][":authority"]=`${s}:${o}`)),a&&this.setTimeout(a),n&&this.once("response",n),this[Eb]=!1}get method(){return this[Br][n2]}set method(e){e&&(this[Br][n2]=e.toUpperCase())}get path(){return this[Br][i2]}set path(e){e&&(this[Br][i2]=e)}get _mustNotHaveABody(){return this.method==="GET"||this.method==="HEAD"||this.method==="DELETE"}_write(e,r,n){if(this._mustNotHaveABody){n(new Error("The GET, HEAD and DELETE methods must NOT have a body"));return}this.flushHeaders();let i=()=>this._request.write(e,r,n);this._request?i():this[Xh].push(i)}_final(e){if(this.destroyed)return;this.flushHeaders();let r=()=>{if(this._mustNotHaveABody){e();return}this._request.end(e)};this._request?r():this[Xh].push(r)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick(()=>this.emit("abort")),this.aborted=!0,this.destroy())}_destroy(e,r){this.res&&this.res._dump(),this._request&&this._request.destroy(),r(e)}async flushHeaders(){if(this[Eb]||this.destroyed)return;this[Eb]=!0;let e=this.method===pce,r=n=>{if(this._request=n,this.destroyed){n.destroy();return}e||oce(n,this,["timeout","continue","close","error"]);let i=s=>(...a)=>{!this.writable&&!this.destroyed?s(...a):this.once("finish",()=>{s(...a)})};n.once("response",i((s,a,u)=>{let c=new nce(this.socket,n.readableHighWaterMark);this.res=c,c.req=this,c.statusCode=s[r2],c.headers=s,c.rawHeaders=u,c.once("end",()=>{this.aborted?(c.aborted=!0,c.emit("aborted")):(c.complete=!0,c.socket=null,c.connection=null)}),e?(c.upgrade=!0,this.emit("connect",c,n,Buffer.alloc(0))?this.emit("close"):n.destroy()):(n.on("data",l=>{!c._dumped&&!c.push(l)&&n.pause()}),n.once("end",()=>{c.push(null)}),this.emit("response",c)||c._dump())})),n.once("headers",i(s=>this.emit("information",{statusCode:s[r2]}))),n.once("trailers",i((s,a,u)=>{let{res:c}=this;c.trailers=s,c.rawTrailers=u}));let{socket:o}=n.session;this.socket=o,this.connection=o;for(let s of this[Xh])s();this.emit("socket",this.socket)};if(this[FD])try{r(this[FD].request(this[Br]))}catch(n){this.emit("error",n)}else{this.reusedSocket=!0;try{r(await this.agent.request(this[OD],this[o2],this[Br]))}catch(n){this.emit("error",n)}}}getHeader(e){if(typeof e!="string")throw new kD("name","string",e);return this[Br][e.toLowerCase()]}get headersSent(){return this[Eb]}removeHeader(e){if(typeof e!="string")throw new kD("name","string",e);if(this.headersSent)throw new t2("remove");delete this[Br][e.toLowerCase()]}setHeader(e,r){if(this.headersSent)throw new t2("set");if(typeof e!="string"||!fce.test(e)&&!sce(e))throw new uce("Header name",e);if(typeof r>"u")throw new cce(r,e);if(dce.test(r))throw new lce("header content",e);this[Br][e.toLowerCase()]=r}setNoDelay(){}setSocketKeepAlive(){}setTimeout(e,r){let n=()=>this._request.setTimeout(e,r);return this._request?n():this[Xh].push(n),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(e){}};s2.exports=ND});var u2=y((uke,a2)=>{"use strict";var hce=require("tls");a2.exports=(t={},e=hce.connect)=>new Promise((r,n)=>{let i=!1,o,s=async()=>{await u,o.off("timeout",a),o.off("error",n),t.resolveSocket?(r({alpnProtocol:o.alpnProtocol,socket:o,timeout:i}),i&&(await Promise.resolve(),o.emit("timeout"))):(o.destroy(),r({alpnProtocol:o.alpnProtocol,timeout:i}))},a=async()=>{i=!0,s()},u=(async()=>{try{o=await e(t,s),o.on("error",n),o.once("timeout",a)}catch(c){n(c)}})()})});var l2=y((cke,c2)=>{"use strict";var mce=require("net");c2.exports=t=>{let e=t.host,r=t.headers&&t.headers.host;return r&&(r.startsWith("[")?r.indexOf("]")===-1?e=r:e=r.slice(1,-1):e=r.split(":",1)[0]),mce.isIP(e)?"":e}});var d2=y((lke,jD)=>{"use strict";var p2=require("http"),UD=require("https"),gce=u2(),Hce=xD(),yce=BD(),vce=l2(),bce=MD(),Db=new Hce({maxSize:100}),Jh=new Map,f2=(t,e,r)=>{e._httpMessage={shouldKeepAlive:!0};let n=()=>{t.emit("free",e,r)};e.on("free",n);let i=()=>{t.removeSocket(e,r)};e.on("close",i);let o=()=>{t.removeSocket(e,r),e.off("close",i),e.off("free",n),e.off("agentRemove",o)};e.on("agentRemove",o),t.emit("free",e,r)},wce=async t=>{let e=`${t.host}:${t.port}:${t.ALPNProtocols.sort()}`;if(!Db.has(e)){if(Jh.has(e))return(await Jh.get(e)).alpnProtocol;let{path:r,agent:n}=t;t.path=t.socketPath;let i=gce(t);Jh.set(e,i);try{let{socket:o,alpnProtocol:s}=await i;if(Db.set(e,s),t.path=r,s==="h2")o.destroy();else{let{globalAgent:a}=UD,u=UD.Agent.prototype.createConnection;n?n.createConnection===u?f2(n,o,t):o.destroy():a.createConnection===u?f2(a,o,t):o.destroy()}return Jh.delete(e),s}catch(o){throw Jh.delete(e),o}}return Db.get(e)};jD.exports=async(t,e,r)=>{if((typeof t=="string"||t instanceof URL)&&(t=bce(new URL(t))),typeof e=="function"&&(r=e,e=void 0),e={ALPNProtocols:["h2","http/1.1"],...t,...e,resolveSocket:!0},!Array.isArray(e.ALPNProtocols)||e.ALPNProtocols.length===0)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");e.protocol=e.protocol||"https:";let n=e.protocol==="https:";e.host=e.hostname||e.host||"localhost",e.session=e.tlsSession,e.servername=e.servername||vce(e),e.port=e.port||(n?443:80),e._defaultAgent=n?UD.globalAgent:p2.globalAgent;let i=e.agent;if(i){if(i.addRequest)throw new Error("The `options.agent` object can contain only `http`, `https` or `http2` properties");e.agent=i[n?"https":"http"]}return n&&await wce(e)==="h2"?(i&&(e.agent=i.http2),new yce(e,r)):p2.request(e,r)};jD.exports.protocolCache=Db});var m2=y((pke,h2)=>{"use strict";var _ce=require("http2"),Ace=TD(),qD=BD(),Ice=RD(),Sce=d2(),Ece=(t,e,r)=>new qD(t,e,r),Dce=(t,e,r)=>{let n=new qD(t,e,r);return n.end(),n};h2.exports={..._ce,ClientRequest:qD,IncomingMessage:Ice,...Ace,request:Ece,get:Dce,auto:Sce}});var VD=y(WD=>{"use strict";Object.defineProperty(WD,"__esModule",{value:!0});var g2=us();WD.default=t=>g2.default.nodeStream(t)&&g2.default.function_(t.getBoundary)});var b2=y(GD=>{"use strict";Object.defineProperty(GD,"__esModule",{value:!0});var y2=require("fs"),v2=require("util"),H2=us(),Cce=VD(),Pce=v2.promisify(y2.stat);GD.default=async(t,e)=>{if(e&&"content-length"in e)return Number(e["content-length"]);if(!t)return 0;if(H2.default.string(t))return Buffer.byteLength(t);if(H2.default.buffer(t))return t.length;if(Cce.default(t))return v2.promisify(t.getLength.bind(t))();if(t instanceof y2.ReadStream){let{size:r}=await Pce(t.path);return r===0?void 0:r}}});var zD=y(KD=>{"use strict";Object.defineProperty(KD,"__esModule",{value:!0});function xce(t,e,r){let n={};for(let i of r)n[i]=(...o)=>{e.emit(i,...o)},t.on(i,n[i]);return()=>{for(let i of r)t.off(i,n[i])}}KD.default=xce});var w2=y(XD=>{"use strict";Object.defineProperty(XD,"__esModule",{value:!0});XD.default=()=>{let t=[];return{once(e,r,n){e.once(r,n),t.push({origin:e,event:r,fn:n})},unhandleAll(){for(let e of t){let{origin:r,event:n,fn:i}=e;r.removeListener(n,i)}t.length=0}}}});var A2=y(Yh=>{"use strict";Object.defineProperty(Yh,"__esModule",{value:!0});Yh.TimeoutError=void 0;var Lce=require("net"),Tce=w2(),_2=Symbol("reentry"),$ce=()=>{},Cb=class extends Error{constructor(e,r){super(`Timeout awaiting '${r}' for ${e}ms`),this.event=r,this.name="TimeoutError",this.code="ETIMEDOUT"}};Yh.TimeoutError=Cb;Yh.default=(t,e,r)=>{if(_2 in t)return $ce;t[_2]=!0;let n=[],{once:i,unhandleAll:o}=Tce.default(),s=(p,f,m)=>{var h;let H=setTimeout(f,p,p,m);(h=H.unref)===null||h===void 0||h.call(H);let v=()=>{clearTimeout(H)};return n.push(v),v},{host:a,hostname:u}=r,c=(p,f)=>{t.destroy(new Cb(p,f))},l=()=>{for(let p of n)p();o()};if(t.once("error",p=>{if(l(),t.listenerCount("error")===0)throw p}),t.once("close",l),i(t,"response",p=>{i(p,"end",l)}),typeof e.request<"u"&&s(e.request,c,"request"),typeof e.socket<"u"){let p=()=>{c(e.socket,"socket")};t.setTimeout(e.socket,p),n.push(()=>{t.removeListener("timeout",p)})}return i(t,"socket",p=>{var f;let{socketPath:m}=t;if(p.connecting){let h=!!(m??Lce.isIP((f=u??a)!==null&&f!==void 0?f:"")!==0);if(typeof e.lookup<"u"&&!h&&typeof p.address().address>"u"){let H=s(e.lookup,c,"lookup");i(p,"lookup",H)}if(typeof e.connect<"u"){let H=()=>s(e.connect,c,"connect");h?i(p,"connect",H()):i(p,"lookup",v=>{v===null&&i(p,"connect",H())})}typeof e.secureConnect<"u"&&r.protocol==="https:"&&i(p,"connect",()=>{let H=s(e.secureConnect,c,"secureConnect");i(p,"secureConnect",H)})}if(typeof e.send<"u"){let h=()=>s(e.send,c,"send");p.connecting?i(p,"connect",()=>{i(t,"upload-complete",h())}):i(t,"upload-complete",h())}}),typeof e.response<"u"&&i(t,"upload-complete",()=>{let p=s(e.response,c,"response");i(t,"response",p)}),l}});var S2=y(JD=>{"use strict";Object.defineProperty(JD,"__esModule",{value:!0});var I2=us();JD.default=t=>{t=t;let e={protocol:t.protocol,hostname:I2.default.string(t.hostname)&&t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,host:t.host,hash:t.hash,search:t.search,pathname:t.pathname,href:t.href,path:`${t.pathname||""}${t.search||""}`};return I2.default.string(t.port)&&t.port.length>0&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=`${t.username||""}:${t.password||""}`),e}});var E2=y(YD=>{"use strict";Object.defineProperty(YD,"__esModule",{value:!0});var Rce=require("url"),Mce=["protocol","host","hostname","port","pathname","search"];YD.default=(t,e)=>{var r,n;if(e.path){if(e.pathname)throw new TypeError("Parameters `path` and `pathname` are mutually exclusive.");if(e.search)throw new TypeError("Parameters `path` and `search` are mutually exclusive.");if(e.searchParams)throw new TypeError("Parameters `path` and `searchParams` are mutually exclusive.")}if(e.search&&e.searchParams)throw new TypeError("Parameters `search` and `searchParams` are mutually exclusive.");if(!t){if(!e.protocol)throw new TypeError("No URL protocol specified");t=`${e.protocol}//${(n=(r=e.hostname)!==null&&r!==void 0?r:e.host)!==null&&n!==void 0?n:""}`}let i=new Rce.URL(t);if(e.path){let o=e.path.indexOf("?");o===-1?e.pathname=e.path:(e.pathname=e.path.slice(0,o),e.search=e.path.slice(o+1)),delete e.path}for(let o of Mce)e[o]&&(i[o]=e[o].toString());return i}});var D2=y(ZD=>{"use strict";Object.defineProperty(ZD,"__esModule",{value:!0});var QD=class{constructor(){this.weakMap=new WeakMap,this.map=new Map}set(e,r){typeof e=="object"?this.weakMap.set(e,r):this.map.set(e,r)}get(e){return typeof e=="object"?this.weakMap.get(e):this.map.get(e)}has(e){return typeof e=="object"?this.weakMap.has(e):this.map.has(e)}};ZD.default=QD});var tC=y(eC=>{"use strict";Object.defineProperty(eC,"__esModule",{value:!0});var kce=async t=>{let e=[],r=0;for await(let n of t)e.push(n),r+=Buffer.byteLength(n);return Buffer.isBuffer(e[0])?Buffer.concat(e,r):Buffer.from(e.join(""))};eC.default=kce});var P2=y(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});Zu.dnsLookupIpVersionToFamily=Zu.isDnsLookupIpVersion=void 0;var C2={auto:0,ipv4:4,ipv6:6};Zu.isDnsLookupIpVersion=t=>t in C2;Zu.dnsLookupIpVersionToFamily=t=>{if(Zu.isDnsLookupIpVersion(t))return C2[t];throw new Error("Invalid DNS lookup IP version")}});var rC=y(Pb=>{"use strict";Object.defineProperty(Pb,"__esModule",{value:!0});Pb.isResponseOk=void 0;Pb.isResponseOk=t=>{let{statusCode:e}=t,r=t.request.options.followRedirect?299:399;return e>=200&&e<=r||e===304}});var L2=y(nC=>{"use strict";Object.defineProperty(nC,"__esModule",{value:!0});var x2=new Set;nC.default=t=>{x2.has(t)||(x2.add(t),process.emitWarning(`Got: ${t}`,{type:"DeprecationWarning"}))}});var T2=y(iC=>{"use strict";Object.defineProperty(iC,"__esModule",{value:!0});var ut=us(),Oce=(t,e)=>{if(ut.default.null_(t.encoding))throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");ut.assert.any([ut.default.string,ut.default.undefined],t.encoding),ut.assert.any([ut.default.boolean,ut.default.undefined],t.resolveBodyOnly),ut.assert.any([ut.default.boolean,ut.default.undefined],t.methodRewriting),ut.assert.any([ut.default.boolean,ut.default.undefined],t.isStream),ut.assert.any([ut.default.string,ut.default.undefined],t.responseType),t.responseType===void 0&&(t.responseType="text");let{retry:r}=t;if(e?t.retry={...e.retry}:t.retry={calculateDelay:n=>n.computedValue,limit:0,methods:[],statusCodes:[],errorCodes:[],maxRetryAfter:void 0},ut.default.object(r)?(t.retry={...t.retry,...r},t.retry.methods=[...new Set(t.retry.methods.map(n=>n.toUpperCase()))],t.retry.statusCodes=[...new Set(t.retry.statusCodes)],t.retry.errorCodes=[...new Set(t.retry.errorCodes)]):ut.default.number(r)&&(t.retry.limit=r),ut.default.undefined(t.retry.maxRetryAfter)&&(t.retry.maxRetryAfter=Math.min(...[t.timeout.request,t.timeout.connect].filter(ut.default.number))),ut.default.object(t.pagination)){e&&(t.pagination={...e.pagination,...t.pagination});let{pagination:n}=t;if(!ut.default.function_(n.transform))throw new Error("`options.pagination.transform` must be implemented");if(!ut.default.function_(n.shouldContinue))throw new Error("`options.pagination.shouldContinue` must be implemented");if(!ut.default.function_(n.filter))throw new TypeError("`options.pagination.filter` must be implemented");if(!ut.default.function_(n.paginate))throw new Error("`options.pagination.paginate` must be implemented")}return t.responseType==="json"&&t.headers.accept===void 0&&(t.headers.accept="application/json"),t};iC.default=Oce});var $2=y(Qh=>{"use strict";Object.defineProperty(Qh,"__esModule",{value:!0});Qh.retryAfterStatusCodes=void 0;Qh.retryAfterStatusCodes=new Set([413,429,503]);var Fce=({attemptCount:t,retryOptions:e,error:r,retryAfter:n})=>{if(t>e.limit)return 0;let i=e.methods.includes(r.options.method),o=e.errorCodes.includes(r.code),s=r.response&&e.statusCodes.includes(r.response.statusCode);if(!i||!o&&!s)return 0;if(r.response){if(n)return e.maxRetryAfter===void 0||n>e.maxRetryAfter?0:n;if(r.response.statusCode===413)return 0}let a=Math.random()*100;return 2**(t-1)*1e3+a};Qh.default=Fce});var tm=y(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.UnsupportedProtocolError=Fe.ReadError=Fe.TimeoutError=Fe.UploadError=Fe.CacheError=Fe.HTTPError=Fe.MaxRedirectsError=Fe.RequestError=Fe.setNonEnumerableProperties=Fe.knownHookEvents=Fe.withoutBody=Fe.kIsNormalizedAlready=void 0;var R2=require("util"),M2=require("stream"),Nce=require("fs"),wa=require("url"),k2=require("http"),oC=require("http"),Bce=require("https"),Uce=YU(),jce=i3(),O2=k3(),qce=B3(),Wce=m2(),Vce=Ib(),q=us(),Gce=b2(),F2=VD(),Kce=zD(),N2=A2(),zce=S2(),B2=E2(),Xce=D2(),Jce=tC(),U2=P2(),Yce=rC(),_a=L2(),Qce=T2(),Zce=$2(),sC,Hr=Symbol("request"),Tb=Symbol("response"),bp=Symbol("responseSize"),wp=Symbol("downloadedSize"),_p=Symbol("bodySize"),Ap=Symbol("uploadedSize"),xb=Symbol("serverResponsesPiped"),j2=Symbol("unproxyEvents"),q2=Symbol("isFromCache"),aC=Symbol("cancelTimeouts"),W2=Symbol("startedReading"),Ip=Symbol("stopReading"),Lb=Symbol("triggerRead"),Aa=Symbol("body"),Zh=Symbol("jobs"),V2=Symbol("originalResponse"),G2=Symbol("retryTimeout");Fe.kIsNormalizedAlready=Symbol("isNormalizedAlready");var ele=q.default.string(process.versions.brotli);Fe.withoutBody=new Set(["GET","HEAD"]);Fe.knownHookEvents=["init","beforeRequest","beforeRedirect","beforeError","beforeRetry","afterResponse"];function tle(t){for(let e in t){let r=t[e];if(!q.default.string(r)&&!q.default.number(r)&&!q.default.boolean(r)&&!q.default.null_(r)&&!q.default.undefined(r))throw new TypeError(`The \`searchParams\` value '${String(r)}' must be a string, number, boolean or null`)}}function rle(t){return q.default.object(t)&&!("statusCode"in t)}var uC=new Xce.default,nle=async t=>new Promise((e,r)=>{let n=i=>{r(i)};t.pending||e(),t.once("error",n),t.once("ready",()=>{t.off("error",n),e()})}),ile=new Set([300,301,302,303,304,307,308]),ole=["context","body","json","form"];Fe.setNonEnumerableProperties=(t,e)=>{let r={};for(let n of t)if(n)for(let i of ole)i in n&&(r[i]={writable:!0,configurable:!0,enumerable:!1,value:n[i]});Object.defineProperties(e,r)};var $t=class extends Error{constructor(e,r,n){var i,o;if(super(e),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=(i=r.code)!==null&&i!==void 0?i:"ERR_GOT_REQUEST_ERROR",n instanceof Nb?(Object.defineProperty(this,"request",{enumerable:!1,value:n}),Object.defineProperty(this,"response",{enumerable:!1,value:n[Tb]}),Object.defineProperty(this,"options",{enumerable:!1,value:n.options})):Object.defineProperty(this,"options",{enumerable:!1,value:n}),this.timings=(o=this.request)===null||o===void 0?void 0:o.timings,q.default.string(r.stack)&&q.default.string(this.stack)){let s=this.stack.indexOf(this.message)+this.message.length,a=this.stack.slice(s).split(`
`).reverse(),u=r.stack.slice(r.stack.indexOf(r.message)+r.message.length).split(`
`).reverse();for(;u.length!==0&&u[0]===a[0];)a.shift();this.stack=`${this.stack.slice(0,s)}${a.reverse().join(`
`)}${u.reverse().join(`
`)}`}}};Fe.RequestError=$t;var $b=class extends $t{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e),this.name="MaxRedirectsError",this.code="ERR_TOO_MANY_REDIRECTS"}};Fe.MaxRedirectsError=$b;var Rb=class extends $t{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request),this.name="HTTPError",this.code="ERR_NON_2XX_3XX_RESPONSE"}};Fe.HTTPError=Rb;var Mb=class extends $t{constructor(e,r){super(e.message,e,r),this.name="CacheError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_CACHE_ACCESS":this.code}};Fe.CacheError=Mb;var kb=class extends $t{constructor(e,r){super(e.message,e,r),this.name="UploadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_UPLOAD":this.code}};Fe.UploadError=kb;var Ob=class extends $t{constructor(e,r,n){super(e.message,e,n),this.name="TimeoutError",this.event=e.event,this.timings=r}};Fe.TimeoutError=Ob;var em=class extends $t{constructor(e,r){super(e.message,e,r),this.name="ReadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_READING_RESPONSE_STREAM":this.code}};Fe.ReadError=em;var Fb=class extends $t{constructor(e){super(`Unsupported protocol "${e.url.protocol}"`,{},e),this.name="UnsupportedProtocolError",this.code="ERR_UNSUPPORTED_PROTOCOL"}};Fe.UnsupportedProtocolError=Fb;var sle=["socket","connect","continue","information","upgrade","timeout"],Nb=class extends M2.Duplex{constructor(e,r={},n){super({autoDestroy:!1,highWaterMark:0}),this[wp]=0,this[Ap]=0,this.requestInitialized=!1,this[xb]=new Set,this.redirects=[],this[Ip]=!1,this[Lb]=!1,this[Zh]=[],this.retryCount=0,this._progressCallbacks=[];let i=()=>this._unlockWrite(),o=()=>this._lockWrite();this.on("pipe",c=>{c.prependListener("data",i),c.on("data",o),c.prependListener("end",i),c.on("end",o)}),this.on("unpipe",c=>{c.off("data",i),c.off("data",o),c.off("end",i),c.off("end",o)}),this.on("pipe",c=>{c instanceof oC.IncomingMessage&&(this.options.headers={...c.headers,...this.options.headers})});let{json:s,body:a,form:u}=r;if((s||a||u)&&this._lockWrite(),Fe.kIsNormalizedAlready in r)this.options=r;else try{this.options=this.constructor.normalizeArguments(e,r,n)}catch(c){q.default.nodeStream(r.body)&&r.body.destroy(),this.destroy(c);return}(async()=>{var c;try{this.options.body instanceof Nce.ReadStream&&await nle(this.options.body);let{url:l}=this.options;if(!l)throw new TypeError("Missing `url` property");if(this.requestUrl=l.toString(),decodeURI(this.requestUrl),await this._finalizeBody(),await this._makeRequest(),this.destroyed){(c=this[Hr])===null||c===void 0||c.destroy();return}for(let p of this[Zh])p();this[Zh].length=0,this.requestInitialized=!0}catch(l){if(l instanceof $t){this._beforeError(l);return}this.destroyed||this.destroy(l)}})()}static normalizeArguments(e,r,n){var i,o,s,a,u;let c=r;if(q.default.object(e)&&!q.default.urlInstance(e))r={...n,...e,...r};else{if(e&&r&&r.url!==void 0)throw new TypeError("The `url` option is mutually exclusive with the `input` argument");r={...n,...r},e!==void 0&&(r.url=e),q.default.urlInstance(r.url)&&(r.url=new wa.URL(r.url.toString()))}if(r.cache===!1&&(r.cache=void 0),r.dnsCache===!1&&(r.dnsCache=void 0),q.assert.any([q.default.string,q.default.undefined],r.method),q.assert.any([q.default.object,q.default.undefined],r.headers),q.assert.any([q.default.string,q.default.urlInstance,q.default.undefined],r.prefixUrl),q.assert.any([q.default.object,q.default.undefined],r.cookieJar),q.assert.any([q.default.object,q.default.string,q.default.undefined],r.searchParams),q.assert.any([q.default.object,q.default.string,q.default.undefined],r.cache),q.assert.any([q.default.object,q.default.number,q.default.undefined],r.timeout),q.assert.any([q.default.object,q.default.undefined],r.context),q.assert.any([q.default.object,q.default.undefined],r.hooks),q.assert.any([q.default.boolean,q.default.undefined],r.decompress),q.assert.any([q.default.boolean,q.default.undefined],r.ignoreInvalidCookies),q.assert.any([q.default.boolean,q.default.undefined],r.followRedirect),q.assert.any([q.default.number,q.default.undefined],r.maxRedirects),q.assert.any([q.default.boolean,q.default.undefined],r.throwHttpErrors),q.assert.any([q.default.boolean,q.default.undefined],r.http2),q.assert.any([q.default.boolean,q.default.undefined],r.allowGetBody),q.assert.any([q.default.string,q.default.undefined],r.localAddress),q.assert.any([U2.isDnsLookupIpVersion,q.default.undefined],r.dnsLookupIpVersion),q.assert.any([q.default.object,q.default.undefined],r.https),q.assert.any([q.default.boolean,q.default.undefined],r.rejectUnauthorized),r.https&&(q.assert.any([q.default.boolean,q.default.undefined],r.https.rejectUnauthorized),q.assert.any([q.default.function_,q.default.undefined],r.https.checkServerIdentity),q.assert.any([q.default.string,q.default.object,q.default.array,q.default.undefined],r.https.certificateAuthority),q.assert.any([q.default.string,q.default.object,q.default.array,q.default.undefined],r.https.key),q.assert.any([q.default.string,q.default.object,q.default.array,q.default.undefined],r.https.certificate),q.assert.any([q.default.string,q.default.undefined],r.https.passphrase),q.assert.any([q.default.string,q.default.buffer,q.default.array,q.default.undefined],r.https.pfx)),q.assert.any([q.default.object,q.default.undefined],r.cacheOptions),q.default.string(r.method)?r.method=r.method.toUpperCase():r.method="GET",r.headers===n?.headers?r.headers={...r.headers}:r.headers=Vce({...n?.headers,...r.headers}),"slashes"in r)throw new TypeError("The legacy `url.Url` has been deprecated. Use `URL` instead.");if("auth"in r)throw new TypeError("Parameter `auth` is deprecated. Use `username` / `password` instead.");if("searchParams"in r&&r.searchParams&&r.searchParams!==n?.searchParams){let m;if(q.default.string(r.searchParams)||r.searchParams instanceof wa.URLSearchParams)m=new wa.URLSearchParams(r.searchParams);else{tle(r.searchParams),m=new wa.URLSearchParams;for(let h in r.searchParams){let H=r.searchParams[h];H===null?m.append(h,""):H!==void 0&&m.append(h,H)}}(i=n?.searchParams)===null||i===void 0||i.forEach((h,H)=>{m.has(H)||m.append(H,h)}),r.searchParams=m}if(r.username=(o=r.username)!==null&&o!==void 0?o:"",r.password=(s=r.password)!==null&&s!==void 0?s:"",q.default.undefined(r.prefixUrl)?r.prefixUrl=(a=n?.prefixUrl)!==null&&a!==void 0?a:"":(r.prefixUrl=r.prefixUrl.toString(),r.prefixUrl!==""&&!r.prefixUrl.endsWith("/")&&(r.prefixUrl+="/")),q.default.string(r.url)){if(r.url.startsWith("/"))throw new Error("`input` must not start with a slash when using `prefixUrl`");r.url=B2.default(r.prefixUrl+r.url,r)}else(q.default.undefined(r.url)&&r.prefixUrl!==""||r.protocol)&&(r.url=B2.default(r.prefixUrl,r));if(r.url){"port"in r&&delete r.port;let{prefixUrl:m}=r;Object.defineProperty(r,"prefixUrl",{set:H=>{let v=r.url;if(!v.href.startsWith(H))throw new Error(`Cannot change \`prefixUrl\` from ${m} to ${H}: ${v.href}`);r.url=new wa.URL(H+v.href.slice(m.length)),m=H},get:()=>m});let{protocol:h}=r.url;if(h==="unix:"&&(h="http:",r.url=new wa.URL(`http://unix${r.url.pathname}${r.url.search}`)),r.searchParams&&(r.url.search=r.searchParams.toString()),h!=="http:"&&h!=="https:")throw new Fb(r);r.username===""?r.username=r.url.username:r.url.username=r.username,r.password===""?r.password=r.url.password:r.url.password=r.password}let{cookieJar:l}=r;if(l){let{setCookie:m,getCookieString:h}=l;q.assert.function_(m),q.assert.function_(h),m.length===4&&h.length===0&&(m=R2.promisify(m.bind(r.cookieJar)),h=R2.promisify(h.bind(r.cookieJar)),r.cookieJar={setCookie:m,getCookieString:h})}let{cache:p}=r;if(p&&(uC.has(p)||uC.set(p,new O2((m,h)=>{let H=m[Hr](m,h);return q.default.promise(H)&&(H.once=(v,_)=>{if(v==="error")H.catch(_);else if(v==="abort")(async()=>{try{(await H).once("abort",_)}catch{}})();else throw new Error(`Unknown HTTP2 promise event: ${v}`);return H}),H},p))),r.cacheOptions={...r.cacheOptions},r.dnsCache===!0)sC||(sC=new jce.default),r.dnsCache=sC;else if(!q.default.undefined(r.dnsCache)&&!r.dnsCache.lookup)throw new TypeError(`Parameter \`dnsCache\` must be a CacheableLookup instance or a boolean, got ${q.default(r.dnsCache)}`);q.default.number(r.timeout)?r.timeout={request:r.timeout}:n&&r.timeout!==n.timeout?r.timeout={...n.timeout,...r.timeout}:r.timeout={...r.timeout},r.context||(r.context={});let f=r.hooks===n?.hooks;r.hooks={...r.hooks};for(let m of Fe.knownHookEvents)if(m in r.hooks)if(q.default.array(r.hooks[m]))r.hooks[m]=[...r.hooks[m]];else throw new TypeError(`Parameter \`${m}\` must be an Array, got ${q.default(r.hooks[m])}`);else r.hooks[m]=[];if(n&&!f)for(let m of Fe.knownHookEvents)n.hooks[m].length>0&&(r.hooks[m]=[...n.hooks[m],...r.hooks[m]]);if("family"in r&&_a.default('"options.family" was never documented, please use "options.dnsLookupIpVersion"'),n?.https&&(r.https={...n.https,...r.https}),"rejectUnauthorized"in r&&_a.default('"options.rejectUnauthorized" is now deprecated, please use "options.https.rejectUnauthorized"'),"checkServerIdentity"in r&&_a.default('"options.checkServerIdentity" was never documented, please use "options.https.checkServerIdentity"'),"ca"in r&&_a.default('"options.ca" was never documented, please use "options.https.certificateAuthority"'),"key"in r&&_a.default('"options.key" was never documented, please use "options.https.key"'),"cert"in r&&_a.default('"options.cert" was never documented, please use "options.https.certificate"'),"passphrase"in r&&_a.default('"options.passphrase" was never documented, please use "options.https.passphrase"'),"pfx"in r&&_a.default('"options.pfx" was never documented, please use "options.https.pfx"'),"followRedirects"in r)throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.");if(r.agent){for(let m in r.agent)if(m!=="http"&&m!=="https"&&m!=="http2")throw new TypeError(`Expected the \`options.agent\` properties to be \`http\`, \`https\` or \`http2\`, got \`${m}\``)}return r.maxRedirects=(u=r.maxRedirects)!==null&&u!==void 0?u:0,Fe.setNonEnumerableProperties([n,c],r),Qce.default(r,n)}_lockWrite(){let e=()=>{throw new TypeError("The payload has been already provided")};this.write=e,this.end=e}_unlockWrite(){this.write=super.write,this.end=super.end}async _finalizeBody(){let{options:e}=this,{headers:r}=e,n=!q.default.undefined(e.form),i=!q.default.undefined(e.json),o=!q.default.undefined(e.body),s=n||i||o,a=Fe.withoutBody.has(e.method)&&!(e.method==="GET"&&e.allowGetBody);if(this._cannotHaveBody=a,s){if(a)throw new TypeError(`The \`${e.method}\` method cannot be used with a body`);if([o,n,i].filter(u=>u).length>1)throw new TypeError("The `body`, `json` and `form` options are mutually exclusive");if(o&&!(e.body instanceof M2.Readable)&&!q.default.string(e.body)&&!q.default.buffer(e.body)&&!F2.default(e.body))throw new TypeError("The `body` option must be a stream.Readable, string or Buffer");if(n&&!q.default.object(e.form))throw new TypeError("The `form` option must be an Object");{let u=!q.default.string(r["content-type"]);o?(F2.default(e.body)&&u&&(r["content-type"]=`multipart/form-data; boundary=${e.body.getBoundary()}`),this[Aa]=e.body):n?(u&&(r["content-type"]="application/x-www-form-urlencoded"),this[Aa]=new wa.URLSearchParams(e.form).toString()):(u&&(r["content-type"]="application/json"),this[Aa]=e.stringifyJson(e.json));let c=await Gce.default(this[Aa],e.headers);q.default.undefined(r["content-length"])&&q.default.undefined(r["transfer-encoding"])&&!a&&!q.default.undefined(c)&&(r["content-length"]=String(c))}}else a?this._lockWrite():this._unlockWrite();this[_p]=Number(r["content-length"])||void 0}async _onResponseBase(e){let{options:r}=this,{url:n}=r;this[V2]=e,r.decompress&&(e=qce(e));let i=e.statusCode,o=e;o.statusMessage=o.statusMessage?o.statusMessage:k2.STATUS_CODES[i],o.url=r.url.toString(),o.requestUrl=this.requestUrl,o.redirectUrls=this.redirects,o.request=this,o.isFromCache=e.fromCache||!1,o.ip=this.ip,o.retryCount=this.retryCount,this[q2]=o.isFromCache,this[bp]=Number(e.headers["content-length"])||void 0,this[Tb]=e,e.once("end",()=>{this[bp]=this[wp],this.emit("downloadProgress",this.downloadProgress)}),e.once("error",a=>{e.destroy(),this._beforeError(new em(a,this))}),e.once("aborted",()=>{this._beforeError(new em({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))}),this.emit("downloadProgress",this.downloadProgress);let s=e.headers["set-cookie"];if(q.default.object(r.cookieJar)&&s){let a=s.map(async u=>r.cookieJar.setCookie(u,n.toString()));r.ignoreInvalidCookies&&(a=a.map(async u=>u.catch(()=>{})));try{await Promise.all(a)}catch(u){this._beforeError(u);return}}if(r.followRedirect&&e.headers.location&&ile.has(i)){if(e.resume(),this[Hr]&&(this[aC](),delete this[Hr],this[j2]()),(i===303&&r.method!=="GET"&&r.method!=="HEAD"||!r.methodRewriting)&&(r.method="GET","body"in r&&delete r.body,"json"in r&&delete r.json,"form"in r&&delete r.form,this[Aa]=void 0,delete r.headers["content-length"]),this.redirects.length>=r.maxRedirects){this._beforeError(new $b(this));return}try{let p=function(f){return f.protocol==="unix:"||f.hostname==="unix"},u=Buffer.from(e.headers.location,"binary").toString(),c=new wa.URL(u,n),l=c.toString();if(decodeURI(l),!p(n)&&p(c)){this._beforeError(new $t("Cannot redirect to UNIX socket",{},this));return}c.hostname!==n.hostname||c.port!==n.port?("host"in r.headers&&delete r.headers.host,"cookie"in r.headers&&delete r.headers.cookie,"authorization"in r.headers&&delete r.headers.authorization,(r.username||r.password)&&(r.username="",r.password="")):(c.username=r.username,c.password=r.password),this.redirects.push(l),r.url=c;for(let f of r.hooks.beforeRedirect)await f(r,o);this.emit("redirect",o,r),await this._makeRequest()}catch(u){this._beforeError(u);return}return}if(r.isStream&&r.throwHttpErrors&&!Yce.isResponseOk(o)){this._beforeError(new Rb(o));return}e.on("readable",()=>{this[Lb]&&this._read()}),this.on("resume",()=>{e.resume()}),this.on("pause",()=>{e.pause()}),e.once("end",()=>{this.push(null)}),this.emit("response",e);for(let a of this[xb])if(!a.headersSent){for(let u in e.headers){let c=r.decompress?u!=="content-encoding":!0,l=e.headers[u];c&&a.setHeader(u,l)}a.statusCode=i}}async _onResponse(e){try{await this._onResponseBase(e)}catch(r){this._beforeError(r)}}_onRequest(e){let{options:r}=this,{timeout:n,url:i}=r;Uce.default(e),this[aC]=N2.default(e,n,i);let o=r.cache?"cacheableResponse":"response";e.once(o,u=>{this._onResponse(u)}),e.once("error",u=>{var c;e.destroy(),(c=e.res)===null||c===void 0||c.removeAllListeners("end"),u=u instanceof N2.TimeoutError?new Ob(u,this.timings,this):new $t(u.message,u,this),this._beforeError(u)}),this[j2]=Kce.default(e,this,sle),this[Hr]=e,this.emit("uploadProgress",this.uploadProgress);let s=this[Aa],a=this.redirects.length===0?this:e;q.default.nodeStream(s)?(s.pipe(a),s.once("error",u=>{this._beforeError(new kb(u,this))})):(this._unlockWrite(),q.default.undefined(s)?(this._cannotHaveBody||this._noPipe)&&(a.end(),this._lockWrite()):(this._writeRequest(s,void 0,()=>{}),a.end(),this._lockWrite())),this.emit("request",e)}async _createCacheableRequest(e,r){return new Promise((n,i)=>{Object.assign(r,zce.default(e)),delete r.url;let o,s=uC.get(r.cache)(r,async a=>{a._readableState.autoDestroy=!1,o&&(await o).emit("cacheableResponse",a),n(a)});r.url=e,s.once("error",i),s.once("request",async a=>{o=a,n(o)})})}async _makeRequest(){var e,r,n,i,o;let{options:s}=this,{headers:a}=s;for(let _ in a)if(q.default.undefined(a[_]))delete a[_];else if(q.default.null_(a[_]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${_}\` header`);if(s.decompress&&q.default.undefined(a["accept-encoding"])&&(a["accept-encoding"]=ele?"gzip, deflate, br":"gzip, deflate"),s.cookieJar){let _=await s.cookieJar.getCookieString(s.url.toString());q.default.nonEmptyString(_)&&(s.headers.cookie=_)}for(let _ of s.hooks.beforeRequest){let x=await _(s);if(!q.default.undefined(x)){s.request=()=>x;break}}s.body&&this[Aa]!==s.body&&(this[Aa]=s.body);let{agent:u,request:c,timeout:l,url:p}=s;if(s.dnsCache&&!("lookup"in s)&&(s.lookup=s.dnsCache.lookup),p.hostname==="unix"){let _=/(?<socketPath>.+?):(?<path>.+)/.exec(`${p.pathname}${p.search}`);if(_?.groups){let{socketPath:x,path:k}=_.groups;Object.assign(s,{socketPath:x,path:k,host:""})}}let f=p.protocol==="https:",m;s.http2?m=Wce.auto:m=f?Bce.request:k2.request;let h=(e=s.request)!==null&&e!==void 0?e:m,H=s.cache?this._createCacheableRequest:h;u&&!s.http2&&(s.agent=u[f?"https":"http"]),s[Hr]=h,delete s.request,delete s.timeout;let v=s;if(v.shared=(r=s.cacheOptions)===null||r===void 0?void 0:r.shared,v.cacheHeuristic=(n=s.cacheOptions)===null||n===void 0?void 0:n.cacheHeuristic,v.immutableMinTimeToLive=(i=s.cacheOptions)===null||i===void 0?void 0:i.immutableMinTimeToLive,v.ignoreCargoCult=(o=s.cacheOptions)===null||o===void 0?void 0:o.ignoreCargoCult,s.dnsLookupIpVersion!==void 0)try{v.family=U2.dnsLookupIpVersionToFamily(s.dnsLookupIpVersion)}catch{throw new Error("Invalid `dnsLookupIpVersion` option value")}s.https&&("rejectUnauthorized"in s.https&&(v.rejectUnauthorized=s.https.rejectUnauthorized),s.https.checkServerIdentity&&(v.checkServerIdentity=s.https.checkServerIdentity),s.https.certificateAuthority&&(v.ca=s.https.certificateAuthority),s.https.certificate&&(v.cert=s.https.certificate),s.https.key&&(v.key=s.https.key),s.https.passphrase&&(v.passphrase=s.https.passphrase),s.https.pfx&&(v.pfx=s.https.pfx));try{let _=await H(p,v);q.default.undefined(_)&&(_=m(p,v)),s.request=c,s.timeout=l,s.agent=u,s.https&&("rejectUnauthorized"in s.https&&delete v.rejectUnauthorized,s.https.checkServerIdentity&&delete v.checkServerIdentity,s.https.certificateAuthority&&delete v.ca,s.https.certificate&&delete v.cert,s.https.key&&delete v.key,s.https.passphrase&&delete v.passphrase,s.https.pfx&&delete v.pfx),rle(_)?this._onRequest(_):this.writable?(this.once("finish",()=>{this._onResponse(_)}),this._unlockWrite(),this.end(),this._lockWrite()):this._onResponse(_)}catch(_){throw _ instanceof O2.CacheError?new Mb(_,this):new $t(_.message,_,this)}}async _error(e){try{for(let r of this.options.hooks.beforeError)e=await r(e)}catch(r){e=new $t(r.message,r,this)}this.destroy(e)}_beforeError(e){if(this[Ip])return;let{options:r}=this,n=this.retryCount+1;this[Ip]=!0,e instanceof $t||(e=new $t(e.message,e,this));let i=e,{response:o}=i;(async()=>{if(o&&!o.body){o.setEncoding(this._readableState.encoding);try{o.rawBody=await Jce.default(o),o.body=o.rawBody.toString()}catch{}}if(this.listenerCount("retry")!==0){let s;try{let a;o&&"retry-after"in o.headers&&(a=Number(o.headers["retry-after"]),Number.isNaN(a)?(a=Date.parse(o.headers["retry-after"])-Date.now(),a<=0&&(a=1)):a*=1e3),s=await r.retry.calculateDelay({attemptCount:n,retryOptions:r.retry,error:i,retryAfter:a,computedValue:Zce.default({attemptCount:n,retryOptions:r.retry,error:i,retryAfter:a,computedValue:0})})}catch(a){this._error(new $t(a.message,a,this));return}if(s){let a=async()=>{try{for(let u of this.options.hooks.beforeRetry)await u(this.options,i,n)}catch(u){this._error(new $t(u.message,e,this));return}this.destroyed||(this.destroy(),this.emit("retry",n,e))};this[G2]=setTimeout(a,s);return}}this._error(i)})()}_read(){this[Lb]=!0;let e=this[Tb];if(e&&!this[Ip]){e.readableLength&&(this[Lb]=!1);let r;for(;(r=e.read())!==null;){this[wp]+=r.length,this[W2]=!0;let n=this.downloadProgress;n.percent<1&&this.emit("downloadProgress",n),this.push(r)}}}_write(e,r,n){let i=()=>{this._writeRequest(e,r,n)};this.requestInitialized?i():this[Zh].push(i)}_writeRequest(e,r,n){this[Hr].destroyed||(this._progressCallbacks.push(()=>{this[Ap]+=Buffer.byteLength(e,r);let i=this.uploadProgress;i.percent<1&&this.emit("uploadProgress",i)}),this[Hr].write(e,r,i=>{!i&&this._progressCallbacks.length>0&&this._progressCallbacks.shift()(),n(i)}))}_final(e){let r=()=>{for(;this._progressCallbacks.length!==0;)this._progressCallbacks.shift()();if(!(Hr in this)){e();return}if(this[Hr].destroyed){e();return}this[Hr].end(n=>{n||(this[_p]=this[Ap],this.emit("uploadProgress",this.uploadProgress),this[Hr].emit("upload-complete")),e(n)})};this.requestInitialized?r():this[Zh].push(r)}_destroy(e,r){var n;this[Ip]=!0,clearTimeout(this[G2]),Hr in this&&(this[aC](),!((n=this[Tb])===null||n===void 0)&&n.complete||this[Hr].destroy()),e!==null&&!q.default.undefined(e)&&!(e instanceof $t)&&(e=new $t(e.message,e,this)),r(e)}get _isAboutToError(){return this[Ip]}get ip(){var e;return(e=this.socket)===null||e===void 0?void 0:e.remoteAddress}get aborted(){var e,r,n;return((r=(e=this[Hr])===null||e===void 0?void 0:e.destroyed)!==null&&r!==void 0?r:this.destroyed)&&!(!((n=this[V2])===null||n===void 0)&&n.complete)}get socket(){var e,r;return(r=(e=this[Hr])===null||e===void 0?void 0:e.socket)!==null&&r!==void 0?r:void 0}get downloadProgress(){let e;return this[bp]?e=this[wp]/this[bp]:this[bp]===this[wp]?e=1:e=0,{percent:e,transferred:this[wp],total:this[bp]}}get uploadProgress(){let e;return this[_p]?e=this[Ap]/this[_p]:this[_p]===this[Ap]?e=1:e=0,{percent:e,transferred:this[Ap],total:this[_p]}}get timings(){var e;return(e=this[Hr])===null||e===void 0?void 0:e.timings}get isFromCache(){return this[q2]}pipe(e,r){if(this[W2])throw new Error("Failed to pipe. The response has been emitted already.");return e instanceof oC.ServerResponse&&this[xb].add(e),super.pipe(e,r)}unpipe(e){return e instanceof oC.ServerResponse&&this[xb].delete(e),super.unpipe(e),this}};Fe.default=Nb});var rm=y(Ei=>{"use strict";var ale=Ei&&Ei.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ule=Ei&&Ei.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ale(e,t,r)};Object.defineProperty(Ei,"__esModule",{value:!0});Ei.CancelError=Ei.ParseError=void 0;var K2=tm(),cC=class extends K2.RequestError{constructor(e,r){let{options:n}=r.request;super(`${e.message} in "${n.url.toString()}"`,e,r.request),this.name="ParseError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_BODY_PARSE_FAILURE":this.code}};Ei.ParseError=cC;var lC=class extends K2.RequestError{constructor(e){super("Promise was canceled",{},e),this.name="CancelError",this.code="ERR_CANCELED"}get isCanceled(){return!0}};Ei.CancelError=lC;ule(tm(),Ei)});var X2=y(pC=>{"use strict";Object.defineProperty(pC,"__esModule",{value:!0});var z2=rm(),cle=(t,e,r,n)=>{let{rawBody:i}=t;try{if(e==="text")return i.toString(n);if(e==="json")return i.length===0?"":r(i.toString());if(e==="buffer")return i;throw new z2.ParseError({message:`Unknown body type '${e}'`,name:"Error"},t)}catch(o){throw new z2.ParseError(o,t)}};pC.default=cle});var fC=y(Ia=>{"use strict";var lle=Ia&&Ia.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ple=Ia&&Ia.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&lle(e,t,r)};Object.defineProperty(Ia,"__esModule",{value:!0});var fle=require("events"),dle=us(),hle=XU(),Bb=rm(),J2=X2(),Y2=tm(),mle=zD(),gle=tC(),Q2=rC(),Hle=["request","response","redirect","uploadProgress","downloadProgress"];function Z2(t){let e,r,n=new fle.EventEmitter,i=new hle((s,a,u)=>{let c=l=>{let p=new Y2.default(void 0,t);p.retryCount=l,p._noPipe=!0,u(()=>p.destroy()),u.shouldReject=!1,u(()=>a(new Bb.CancelError(p))),e=p,p.once("response",async h=>{var H;if(h.retryCount=l,h.request.aborted)return;let v;try{v=await gle.default(p),h.rawBody=v}catch{return}if(p._isAboutToError)return;let _=((H=h.headers["content-encoding"])!==null&&H!==void 0?H:"").toLowerCase(),x=["gzip","deflate","br"].includes(_),{options:k}=p;if(x&&!k.decompress)h.body=v;else try{h.body=J2.default(h,k.responseType,k.parseJson,k.encoding)}catch(T){if(h.body=v.toString(),Q2.isResponseOk(h)){p._beforeError(T);return}}try{for(let[T,j]of k.hooks.afterResponse.entries())h=await j(h,async K=>{let G=Y2.default.normalizeArguments(void 0,{...K,retry:{calculateDelay:()=>0},throwHttpErrors:!1,resolveBodyOnly:!1},k);G.hooks.afterResponse=G.hooks.afterResponse.slice(0,T);for(let R of G.hooks.beforeRetry)await R(G);let F=Z2(G);return u(()=>{F.catch(()=>{}),F.cancel()}),F})}catch(T){p._beforeError(new Bb.RequestError(T.message,T,p));return}if(r=h,!Q2.isResponseOk(h)){p._beforeError(new Bb.HTTPError(h));return}p.destroy(),s(p.options.resolveBodyOnly?h.body:h)});let f=h=>{if(i.isCanceled)return;let{options:H}=p;if(h instanceof Bb.HTTPError&&!H.throwHttpErrors){let{response:v}=h;s(p.options.resolveBodyOnly?v.body:v);return}a(h)};p.once("error",f);let m=p.options.body;p.once("retry",(h,H)=>{var v,_;if(m===((v=H.request)===null||v===void 0?void 0:v.options.body)&&dle.default.nodeStream((_=H.request)===null||_===void 0?void 0:_.options.body)){f(H);return}c(h)}),mle.default(p,n,Hle)};c(0)});i.on=(s,a)=>(n.on(s,a),i);let o=s=>{let a=(async()=>{await i;let{options:u}=r.request;return J2.default(r,s,u.parseJson,u.encoding)})();return Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)),a};return i.json=()=>{let{headers:s}=e.options;return!e.writableFinished&&s.accept===void 0&&(s.accept="application/json"),o("json")},i.buffer=()=>o("buffer"),i.text=()=>o("text"),i}Ia.default=Z2;ple(rm(),Ia)});var ej=y(dC=>{"use strict";Object.defineProperty(dC,"__esModule",{value:!0});var yle=rm();function vle(t,...e){let r=(async()=>{if(t instanceof yle.RequestError)try{for(let i of e)if(i)for(let o of i)t=await o(t)}catch(i){t=i}throw t})(),n=()=>r;return r.json=n,r.text=n,r.buffer=n,r.on=n,r}dC.default=vle});var nj=y(hC=>{"use strict";Object.defineProperty(hC,"__esModule",{value:!0});var tj=us();function rj(t){for(let e of Object.values(t))(tj.default.plainObject(e)||tj.default.array(e))&&rj(e);return Object.freeze(t)}hC.default=rj});var oj=y(ij=>{"use strict";Object.defineProperty(ij,"__esModule",{value:!0})});var mC=y(ti=>{"use strict";var ble=ti&&ti.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),wle=ti&&ti.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ble(e,t,r)};Object.defineProperty(ti,"__esModule",{value:!0});ti.defaultHandler=void 0;var sj=us(),ei=fC(),_le=ej(),jb=tm(),Ale=nj(),Ile={RequestError:ei.RequestError,CacheError:ei.CacheError,ReadError:ei.ReadError,HTTPError:ei.HTTPError,MaxRedirectsError:ei.MaxRedirectsError,TimeoutError:ei.TimeoutError,ParseError:ei.ParseError,CancelError:ei.CancelError,UnsupportedProtocolError:ei.UnsupportedProtocolError,UploadError:ei.UploadError},Sle=async t=>new Promise(e=>{setTimeout(e,t)}),{normalizeArguments:Ub}=jb.default,aj=(...t)=>{let e;for(let r of t)e=Ub(void 0,r,e);return e},Ele=t=>t.isStream?new jb.default(void 0,t):ei.default(t),Dle=t=>"defaults"in t&&"options"in t.defaults,Cle=["get","post","put","patch","head","delete"];ti.defaultHandler=(t,e)=>e(t);var uj=(t,e)=>{if(t)for(let r of t)r(e)},cj=t=>{t._rawHandlers=t.handlers,t.handlers=t.handlers.map(n=>(i,o)=>{let s,a=n(i,u=>(s=o(u),s));if(a!==s&&!i.isStream&&s){let u=a,{then:c,catch:l,finally:p}=u;Object.setPrototypeOf(u,Object.getPrototypeOf(s)),Object.defineProperties(u,Object.getOwnPropertyDescriptors(s)),u.then=c,u.catch=l,u.finally=p}return a});let e=(n,i={},o)=>{var s,a;let u=0,c=l=>t.handlers[u++](l,u===t.handlers.length?Ele:c);if(sj.default.plainObject(n)){let l={...n,...i};jb.setNonEnumerableProperties([n,i],l),i=l,n=void 0}try{let l;try{uj(t.options.hooks.init,i),uj((s=i.hooks)===null||s===void 0?void 0:s.init,i)}catch(f){l=f}let p=Ub(n,i,o??t.options);if(p[jb.kIsNormalizedAlready]=!0,l)throw new ei.RequestError(l.message,l,p);return c(p)}catch(l){if(i.isStream)throw l;return _le.default(l,t.options.hooks.beforeError,(a=i.hooks)===null||a===void 0?void 0:a.beforeError)}};e.extend=(...n)=>{let i=[t.options],o=[...t._rawHandlers],s;for(let a of n)Dle(a)?(i.push(a.defaults.options),o.push(...a.defaults._rawHandlers),s=a.defaults.mutableDefaults):(i.push(a),"handlers"in a&&o.push(...a.handlers),s=a.mutableDefaults);return o=o.filter(a=>a!==ti.defaultHandler),o.length===0&&o.push(ti.defaultHandler),cj({options:aj(...i),handlers:o,mutableDefaults:!!s})};let r=async function*(n,i){let o=Ub(n,i,t.options);o.resolveBodyOnly=!1;let s=o.pagination;if(!sj.default.object(s))throw new TypeError("`options.pagination` must be implemented");let a=[],{countLimit:u}=s,c=0;for(;c<s.requestLimit;){c!==0&&await Sle(s.backoff);let l=await e(void 0,void 0,o),p=await s.transform(l),f=[];for(let h of p)if(s.filter(h,a,f)&&(!s.shouldContinue(h,a,f)||(yield h,s.stackAllItems&&a.push(h),f.push(h),--u<=0)))return;let m=s.paginate(l,a,f);if(m===!1)return;m===l.request.options?o=l.request.options:m!==void 0&&(o=Ub(void 0,m,o)),c++}};e.paginate=r,e.paginate.all=async(n,i)=>{let o=[];for await(let s of r(n,i))o.push(s);return o},e.paginate.each=r,e.stream=(n,i)=>e(n,{...i,isStream:!0});for(let n of Cle)e[n]=(i,o)=>e(i,{...o,method:n}),e.stream[n]=(i,o)=>e(i,{...o,method:n,isStream:!0});return Object.assign(e,Ile),Object.defineProperty(e,"defaults",{value:t.mutableDefaults?t:Ale.default(t),writable:t.mutableDefaults,configurable:t.mutableDefaults,enumerable:!0}),e.mergeOptions=aj,e};ti.default=cj;wle(oj(),ti)});var fj=y((cs,qb)=>{"use strict";var Ple=cs&&cs.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),lj=cs&&cs.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Ple(e,t,r)};Object.defineProperty(cs,"__esModule",{value:!0});var xle=require("url"),pj=mC(),Lle={options:{method:"GET",retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:t})=>t},timeout:{},headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},hooks:{init:[],beforeRequest:[],beforeRedirect:[],beforeRetry:[],beforeError:[],afterResponse:[]},cache:void 0,dnsCache:void 0,decompress:!0,throwHttpErrors:!0,followRedirect:!0,isStream:!1,responseType:"text",resolveBodyOnly:!1,maxRedirects:10,prefixUrl:"",methodRewriting:!0,ignoreInvalidCookies:!1,context:{},http2:!1,allowGetBody:!1,https:void 0,pagination:{transform:t=>t.request.options.responseType==="json"?t.body:JSON.parse(t.body),paginate:t=>{if(!Reflect.has(t.headers,"link"))return!1;let e=t.headers.link.split(","),r;for(let n of e){let i=n.split(";");if(i[1].includes("next")){r=i[0].trimStart().trim(),r=r.slice(1,-1);break}}return r?{url:new xle.URL(r)}:!1},filter:()=>!0,shouldContinue:()=>!0,countLimit:1/0,backoff:0,requestLimit:1e4,stackAllItems:!0},parseJson:t=>JSON.parse(t),stringifyJson:t=>JSON.stringify(t),cacheOptions:{}},handlers:[pj.defaultHandler],mutableDefaults:!1},gC=pj.default(Lle);cs.default=gC;qb.exports=gC;qb.exports.default=gC;qb.exports.__esModule=!0;lj(mC(),cs);lj(fC(),cs)});var wj=y((O1e,Vb)=>{var Xt=function(t){"use strict";var e=1e7,r=7,n=9007199254740992,i=f(n),o="0123456789abcdefghijklmnopqrstuvwxyz",s=typeof BigInt=="function";function a(d,g,w,A){return typeof d>"u"?a[0]:typeof g<"u"?+g==10&&!w?ve(d):yt(d,g,w,A):ve(d)}function u(d,g){this.value=d,this.sign=g,this.isSmall=!1}u.prototype=Object.create(a.prototype);function c(d){this.value=d,this.sign=d<0,this.isSmall=!0}c.prototype=Object.create(a.prototype);function l(d){this.value=d}l.prototype=Object.create(a.prototype);function p(d){return-n<d&&d<n}function f(d){return d<1e7?[d]:d<1e14?[d%1e7,Math.floor(d/1e7)]:[d%1e7,Math.floor(d/1e7)%1e7,Math.floor(d/1e14)]}function m(d){h(d);var g=d.length;if(g<4&&oe(d,i)<0)switch(g){case 0:return 0;case 1:return d[0];case 2:return d[0]+d[1]*e;default:return d[0]+(d[1]+d[2]*e)*e}return d}function h(d){for(var g=d.length;d[--g]===0;);d.length=g+1}function H(d){for(var g=new Array(d),w=-1;++w<d;)g[w]=0;return g}function v(d){return d>0?Math.floor(d):Math.ceil(d)}function _(d,g){var w=d.length,A=g.length,P=new Array(w),$=0,B=e,U,N;for(N=0;N<A;N++)U=d[N]+g[N]+$,$=U>=B?1:0,P[N]=U-$*B;for(;N<w;)U=d[N]+$,$=U===B?1:0,P[N++]=U-$*B;return $>0&&P.push($),P}function x(d,g){return d.length>=g.length?_(d,g):_(g,d)}function k(d,g){var w=d.length,A=new Array(w),P=e,$,B;for(B=0;B<w;B++)$=d[B]-P+g,g=Math.floor($/P),A[B]=$-g*P,g+=1;for(;g>0;)A[B++]=g%P,g=Math.floor(g/P);return A}u.prototype.add=function(d){var g=ve(d);if(this.sign!==g.sign)return this.subtract(g.negate());var w=this.value,A=g.value;return g.isSmall?new u(k(w,Math.abs(A)),this.sign):new u(x(w,A),this.sign)},u.prototype.plus=u.prototype.add,c.prototype.add=function(d){var g=ve(d),w=this.value;if(w<0!==g.sign)return this.subtract(g.negate());var A=g.value;if(g.isSmall){if(p(w+A))return new c(w+A);A=f(Math.abs(A))}return new u(k(A,Math.abs(w)),w<0)},c.prototype.plus=c.prototype.add,l.prototype.add=function(d){return new l(this.value+ve(d).value)},l.prototype.plus=l.prototype.add;function T(d,g){var w=d.length,A=g.length,P=new Array(w),$=0,B=e,U,N;for(U=0;U<A;U++)N=d[U]-$-g[U],N<0?(N+=B,$=1):$=0,P[U]=N;for(U=A;U<w;U++){if(N=d[U]-$,N<0)N+=B;else{P[U++]=N;break}P[U]=N}for(;U<w;U++)P[U]=d[U];return h(P),P}function j(d,g,w){var A;return oe(d,g)>=0?A=T(d,g):(A=T(g,d),w=!w),A=m(A),typeof A=="number"?(w&&(A=-A),new c(A)):new u(A,w)}function K(d,g,w){var A=d.length,P=new Array(A),$=-g,B=e,U,N;for(U=0;U<A;U++)N=d[U]+$,$=Math.floor(N/B),N%=B,P[U]=N<0?N+B:N;return P=m(P),typeof P=="number"?(w&&(P=-P),new c(P)):new u(P,w)}u.prototype.subtract=function(d){var g=ve(d);if(this.sign!==g.sign)return this.add(g.negate());var w=this.value,A=g.value;return g.isSmall?K(w,Math.abs(A),this.sign):j(w,A,this.sign)},u.prototype.minus=u.prototype.subtract,c.prototype.subtract=function(d){var g=ve(d),w=this.value;if(w<0!==g.sign)return this.add(g.negate());var A=g.value;return g.isSmall?new c(w-A):K(A,Math.abs(w),w>=0)},c.prototype.minus=c.prototype.subtract,l.prototype.subtract=function(d){return new l(this.value-ve(d).value)},l.prototype.minus=l.prototype.subtract,u.prototype.negate=function(){return new u(this.value,!this.sign)},c.prototype.negate=function(){var d=this.sign,g=new c(-this.value);return g.sign=!d,g},l.prototype.negate=function(){return new l(-this.value)},u.prototype.abs=function(){return new u(this.value,!1)},c.prototype.abs=function(){return new c(Math.abs(this.value))},l.prototype.abs=function(){return new l(this.value>=0?this.value:-this.value)};function G(d,g){var w=d.length,A=g.length,P=w+A,$=H(P),B=e,U,N,ie,fe,ge;for(ie=0;ie<w;++ie){fe=d[ie];for(var Te=0;Te<A;++Te)ge=g[Te],U=fe*ge+$[ie+Te],N=Math.floor(U/B),$[ie+Te]=U-N*B,$[ie+Te+1]+=N}return h($),$}function F(d,g){var w=d.length,A=new Array(w),P=e,$=0,B,U;for(U=0;U<w;U++)B=d[U]*g+$,$=Math.floor(B/P),A[U]=B-$*P;for(;$>0;)A[U++]=$%P,$=Math.floor($/P);return A}function R(d,g){for(var w=[];g-- >0;)w.push(0);return w.concat(d)}function M(d,g){var w=Math.max(d.length,g.length);if(w<=30)return G(d,g);w=Math.ceil(w/2);var A=d.slice(w),P=d.slice(0,w),$=g.slice(w),B=g.slice(0,w),U=M(P,B),N=M(A,$),ie=M(x(P,A),x(B,$)),fe=x(x(U,R(T(T(ie,U),N),w)),R(N,2*w));return h(fe),fe}function D(d,g){return-.012*d-.012*g+15e-6*d*g>0}u.prototype.multiply=function(d){var g=ve(d),w=this.value,A=g.value,P=this.sign!==g.sign,$;if(g.isSmall){if(A===0)return a[0];if(A===1)return this;if(A===-1)return this.negate();if($=Math.abs(A),$<e)return new u(F(w,$),P);A=f($)}return D(w.length,A.length)?new u(M(w,A),P):new u(G(w,A),P)},u.prototype.times=u.prototype.multiply;function W(d,g,w){return d<e?new u(F(g,d),w):new u(G(g,f(d)),w)}c.prototype._multiplyBySmall=function(d){return p(d.value*this.value)?new c(d.value*this.value):W(Math.abs(d.value),f(Math.abs(this.value)),this.sign!==d.sign)},u.prototype._multiplyBySmall=function(d){return d.value===0?a[0]:d.value===1?this:d.value===-1?this.negate():W(Math.abs(d.value),this.value,this.sign!==d.sign)},c.prototype.multiply=function(d){return ve(d)._multiplyBySmall(this)},c.prototype.times=c.prototype.multiply,l.prototype.multiply=function(d){return new l(this.value*ve(d).value)},l.prototype.times=l.prototype.multiply;function O(d){var g=d.length,w=H(g+g),A=e,P,$,B,U,N;for(B=0;B<g;B++){U=d[B],$=0-U*U;for(var ie=B;ie<g;ie++)N=d[ie],P=2*(U*N)+w[B+ie]+$,$=Math.floor(P/A),w[B+ie]=P-$*A;w[B+g]=$}return h(w),w}u.prototype.square=function(){return new u(O(this.value),!1)},c.prototype.square=function(){var d=this.value*this.value;return p(d)?new c(d):new u(O(f(Math.abs(this.value))),!1)},l.prototype.square=function(d){return new l(this.value*this.value)};function V(d,g){var w=d.length,A=g.length,P=e,$=H(g.length),B=g[A-1],U=Math.ceil(P/(2*B)),N=F(d,U),ie=F(g,U),fe,ge,Te,Hn,Qr,iA,oA;for(N.length<=w&&N.push(0),ie.push(0),B=ie[A-1],ge=w-A;ge>=0;ge--){for(fe=P-1,N[ge+A]!==B&&(fe=Math.floor((N[ge+A]*P+N[ge+A-1])/B)),Te=0,Hn=0,iA=ie.length,Qr=0;Qr<iA;Qr++)Te+=fe*ie[Qr],oA=Math.floor(Te/P),Hn+=N[ge+Qr]-(Te-oA*P),Te=oA,Hn<0?(N[ge+Qr]=Hn+P,Hn=-1):(N[ge+Qr]=Hn,Hn=0);for(;Hn!==0;){for(fe-=1,Te=0,Qr=0;Qr<iA;Qr++)Te+=N[ge+Qr]-P+ie[Qr],Te<0?(N[ge+Qr]=Te+P,Te=0):(N[ge+Qr]=Te,Te=1);Hn+=Te}$[ge]=fe}return N=L(N,U)[0],[m($),m(N)]}function E(d,g){for(var w=d.length,A=g.length,P=[],$=[],B=e,U,N,ie,fe,ge;w;){if($.unshift(d[--w]),h($),oe($,g)<0){P.push(0);continue}N=$.length,ie=$[N-1]*B+$[N-2],fe=g[A-1]*B+g[A-2],N>A&&(ie=(ie+1)*B),U=Math.ceil(ie/fe);do{if(ge=F(g,U),oe(ge,$)<=0)break;U--}while(U);P.push(U),$=T($,ge)}return P.reverse(),[m(P),m($)]}function L(d,g){var w=d.length,A=H(w),P=e,$,B,U,N;for(U=0,$=w-1;$>=0;--$)N=U*P+d[$],B=v(N/g),U=N-B*g,A[$]=B|0;return[A,U|0]}function ue(d,g){var w,A=ve(g);if(s)return[new l(d.value/A.value),new l(d.value%A.value)];var P=d.value,$=A.value,B;if($===0)throw new Error("Cannot divide by zero");if(d.isSmall)return A.isSmall?[new c(v(P/$)),new c(P%$)]:[a[0],d];if(A.isSmall){if($===1)return[d,a[0]];if($==-1)return[d.negate(),a[0]];var U=Math.abs($);if(U<e){w=L(P,U),B=m(w[0]);var N=w[1];return d.sign&&(N=-N),typeof B=="number"?(d.sign!==A.sign&&(B=-B),[new c(B),new c(N)]):[new u(B,d.sign!==A.sign),new c(N)]}$=f(U)}var ie=oe(P,$);if(ie===-1)return[a[0],d];if(ie===0)return[a[d.sign===A.sign?1:-1],a[0]];P.length+$.length<=200?w=V(P,$):w=E(P,$),B=w[0];var fe=d.sign!==A.sign,ge=w[1],Te=d.sign;return typeof B=="number"?(fe&&(B=-B),B=new c(B)):B=new u(B,fe),typeof ge=="number"?(Te&&(ge=-ge),ge=new c(ge)):ge=new u(ge,Te),[B,ge]}u.prototype.divmod=function(d){var g=ue(this,d);return{quotient:g[0],remainder:g[1]}},l.prototype.divmod=c.prototype.divmod=u.prototype.divmod,u.prototype.divide=function(d){return ue(this,d)[0]},l.prototype.over=l.prototype.divide=function(d){return new l(this.value/ve(d).value)},c.prototype.over=c.prototype.divide=u.prototype.over=u.prototype.divide,u.prototype.mod=function(d){return ue(this,d)[1]},l.prototype.mod=l.prototype.remainder=function(d){return new l(this.value%ve(d).value)},c.prototype.remainder=c.prototype.mod=u.prototype.remainder=u.prototype.mod,u.prototype.pow=function(d){var g=ve(d),w=this.value,A=g.value,P,$,B;if(A===0)return a[1];if(w===0)return a[0];if(w===1)return a[1];if(w===-1)return g.isEven()?a[1]:a[-1];if(g.sign)return a[0];if(!g.isSmall)throw new Error("The exponent "+g.toString()+" is too large.");if(this.isSmall&&p(P=Math.pow(w,A)))return new c(v(P));for($=this,B=a[1];A&!0&&(B=B.times($),--A),A!==0;)A/=2,$=$.square();return B},c.prototype.pow=u.prototype.pow,l.prototype.pow=function(d){var g=ve(d),w=this.value,A=g.value,P=BigInt(0),$=BigInt(1),B=BigInt(2);if(A===P)return a[1];if(w===P)return a[0];if(w===$)return a[1];if(w===BigInt(-1))return g.isEven()?a[1]:a[-1];if(g.isNegative())return new l(P);for(var U=this,N=a[1];(A&$)===$&&(N=N.times(U),--A),A!==P;)A/=B,U=U.square();return N},u.prototype.modPow=function(d,g){if(d=ve(d),g=ve(g),g.isZero())throw new Error("Cannot take modPow with modulus 0");var w=a[1],A=this.mod(g);for(d.isNegative()&&(d=d.multiply(a[-1]),A=A.modInv(g));d.isPositive();){if(A.isZero())return a[0];d.isOdd()&&(w=w.multiply(A).mod(g)),d=d.divide(2),A=A.square().mod(g)}return w},l.prototype.modPow=c.prototype.modPow=u.prototype.modPow;function oe(d,g){if(d.length!==g.length)return d.length>g.length?1:-1;for(var w=d.length-1;w>=0;w--)if(d[w]!==g[w])return d[w]>g[w]?1:-1;return 0}u.prototype.compareAbs=function(d){var g=ve(d),w=this.value,A=g.value;return g.isSmall?1:oe(w,A)},c.prototype.compareAbs=function(d){var g=ve(d),w=Math.abs(this.value),A=g.value;return g.isSmall?(A=Math.abs(A),w===A?0:w>A?1:-1):-1},l.prototype.compareAbs=function(d){var g=this.value,w=ve(d).value;return g=g>=0?g:-g,w=w>=0?w:-w,g===w?0:g>w?1:-1},u.prototype.compare=function(d){if(d===1/0)return-1;if(d===-1/0)return 1;var g=ve(d),w=this.value,A=g.value;return this.sign!==g.sign?g.sign?1:-1:g.isSmall?this.sign?-1:1:oe(w,A)*(this.sign?-1:1)},u.prototype.compareTo=u.prototype.compare,c.prototype.compare=function(d){if(d===1/0)return-1;if(d===-1/0)return 1;var g=ve(d),w=this.value,A=g.value;return g.isSmall?w==A?0:w>A?1:-1:w<0!==g.sign?w<0?-1:1:w<0?1:-1},c.prototype.compareTo=c.prototype.compare,l.prototype.compare=function(d){if(d===1/0)return-1;if(d===-1/0)return 1;var g=this.value,w=ve(d).value;return g===w?0:g>w?1:-1},l.prototype.compareTo=l.prototype.compare,u.prototype.equals=function(d){return this.compare(d)===0},l.prototype.eq=l.prototype.equals=c.prototype.eq=c.prototype.equals=u.prototype.eq=u.prototype.equals,u.prototype.notEquals=function(d){return this.compare(d)!==0},l.prototype.neq=l.prototype.notEquals=c.prototype.neq=c.prototype.notEquals=u.prototype.neq=u.prototype.notEquals,u.prototype.greater=function(d){return this.compare(d)>0},l.prototype.gt=l.prototype.greater=c.prototype.gt=c.prototype.greater=u.prototype.gt=u.prototype.greater,u.prototype.lesser=function(d){return this.compare(d)<0},l.prototype.lt=l.prototype.lesser=c.prototype.lt=c.prototype.lesser=u.prototype.lt=u.prototype.lesser,u.prototype.greaterOrEquals=function(d){return this.compare(d)>=0},l.prototype.geq=l.prototype.greaterOrEquals=c.prototype.geq=c.prototype.greaterOrEquals=u.prototype.geq=u.prototype.greaterOrEquals,u.prototype.lesserOrEquals=function(d){return this.compare(d)<=0},l.prototype.leq=l.prototype.lesserOrEquals=c.prototype.leq=c.prototype.lesserOrEquals=u.prototype.leq=u.prototype.lesserOrEquals,u.prototype.isEven=function(){return(this.value[0]&1)===0},c.prototype.isEven=function(){return(this.value&1)===0},l.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},u.prototype.isOdd=function(){return(this.value[0]&1)===1},c.prototype.isOdd=function(){return(this.value&1)===1},l.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},u.prototype.isPositive=function(){return!this.sign},c.prototype.isPositive=function(){return this.value>0},l.prototype.isPositive=c.prototype.isPositive,u.prototype.isNegative=function(){return this.sign},c.prototype.isNegative=function(){return this.value<0},l.prototype.isNegative=c.prototype.isNegative,u.prototype.isUnit=function(){return!1},c.prototype.isUnit=function(){return Math.abs(this.value)===1},l.prototype.isUnit=function(){return this.abs().value===BigInt(1)},u.prototype.isZero=function(){return!1},c.prototype.isZero=function(){return this.value===0},l.prototype.isZero=function(){return this.value===BigInt(0)},u.prototype.isDivisibleBy=function(d){var g=ve(d);return g.isZero()?!1:g.isUnit()?!0:g.compareAbs(2)===0?this.isEven():this.mod(g).isZero()},l.prototype.isDivisibleBy=c.prototype.isDivisibleBy=u.prototype.isDivisibleBy;function ne(d){var g=d.abs();if(g.isUnit())return!1;if(g.equals(2)||g.equals(3)||g.equals(5))return!0;if(g.isEven()||g.isDivisibleBy(3)||g.isDivisibleBy(5))return!1;if(g.lesser(49))return!0}function X(d,g){for(var w=d.prev(),A=w,P=0,$,B,U,N;A.isEven();)A=A.divide(2),P++;e:for(U=0;U<g.length;U++)if(!d.lesser(g[U])&&(N=Xt(g[U]).modPow(A,d),!(N.isUnit()||N.equals(w)))){for($=P-1;$!=0;$--){if(N=N.square().mod(d),N.isUnit())return!1;if(N.equals(w))continue e}return!1}return!0}u.prototype.isPrime=function(d){var g=ne(this);if(g!==t)return g;var w=this.abs(),A=w.bitLength();if(A<=64)return X(w,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var P=Math.log(2)*A.toJSNumber(),$=Math.ceil(d===!0?2*Math.pow(P,2):P),B=[],U=0;U<$;U++)B.push(Xt(U+2));return X(w,B)},l.prototype.isPrime=c.prototype.isPrime=u.prototype.isPrime,u.prototype.isProbablePrime=function(d,g){var w=ne(this);if(w!==t)return w;for(var A=this.abs(),P=d===t?5:d,$=[],B=0;B<P;B++)$.push(Xt.randBetween(2,A.minus(2),g));return X(A,$)},l.prototype.isProbablePrime=c.prototype.isProbablePrime=u.prototype.isProbablePrime,u.prototype.modInv=function(d){for(var g=Xt.zero,w=Xt.one,A=ve(d),P=this.abs(),$,B,U;!P.isZero();)$=A.divide(P),B=g,U=A,g=w,A=P,w=B.subtract($.multiply(w)),P=U.subtract($.multiply(P));if(!A.isUnit())throw new Error(this.toString()+" and "+d.toString()+" are not co-prime");return g.compare(0)===-1&&(g=g.add(d)),this.isNegative()?g.negate():g},l.prototype.modInv=c.prototype.modInv=u.prototype.modInv,u.prototype.next=function(){var d=this.value;return this.sign?K(d,1,this.sign):new u(k(d,1),this.sign)},c.prototype.next=function(){var d=this.value;return d+1<n?new c(d+1):new u(i,!1)},l.prototype.next=function(){return new l(this.value+BigInt(1))},u.prototype.prev=function(){var d=this.value;return this.sign?new u(k(d,1),!0):K(d,1,this.sign)},c.prototype.prev=function(){var d=this.value;return d-1>-n?new c(d-1):new u(i,!0)},l.prototype.prev=function(){return new l(this.value-BigInt(1))};for(var ee=[1];2*ee[ee.length-1]<=e;)ee.push(2*ee[ee.length-1]);var ae=ee.length,se=ee[ae-1];function he(d){return Math.abs(d)<=e}u.prototype.shiftLeft=function(d){var g=ve(d).toJSNumber();if(!he(g))throw new Error(String(g)+" is too large for shifting.");if(g<0)return this.shiftRight(-g);var w=this;if(w.isZero())return w;for(;g>=ae;)w=w.multiply(se),g-=ae-1;return w.multiply(ee[g])},l.prototype.shiftLeft=c.prototype.shiftLeft=u.prototype.shiftLeft,u.prototype.shiftRight=function(d){var g,w=ve(d).toJSNumber();if(!he(w))throw new Error(String(w)+" is too large for shifting.");if(w<0)return this.shiftLeft(-w);for(var A=this;w>=ae;){if(A.isZero()||A.isNegative()&&A.isUnit())return A;g=ue(A,se),A=g[1].isNegative()?g[0].prev():g[0],w-=ae-1}return g=ue(A,ee[w]),g[1].isNegative()?g[0].prev():g[0]},l.prototype.shiftRight=c.prototype.shiftRight=u.prototype.shiftRight;function Ht(d,g,w){g=ve(g);for(var A=d.isNegative(),P=g.isNegative(),$=A?d.not():d,B=P?g.not():g,U=0,N=0,ie=null,fe=null,ge=[];!$.isZero()||!B.isZero();)ie=ue($,se),U=ie[1].toJSNumber(),A&&(U=se-1-U),fe=ue(B,se),N=fe[1].toJSNumber(),P&&(N=se-1-N),$=ie[0],B=fe[0],ge.push(w(U,N));for(var Te=w(A?1:0,P?1:0)!==0?Xt(-1):Xt(0),Hn=ge.length-1;Hn>=0;Hn-=1)Te=Te.multiply(se).add(Xt(ge[Hn]));return Te}u.prototype.not=function(){return this.negate().prev()},l.prototype.not=c.prototype.not=u.prototype.not,u.prototype.and=function(d){return Ht(this,d,function(g,w){return g&w})},l.prototype.and=c.prototype.and=u.prototype.and,u.prototype.or=function(d){return Ht(this,d,function(g,w){return g|w})},l.prototype.or=c.prototype.or=u.prototype.or,u.prototype.xor=function(d){return Ht(this,d,function(g,w){return g^w})},l.prototype.xor=c.prototype.xor=u.prototype.xor;var me=1<<30,Rt=(e&-e)*(e&-e)|me;function Cr(d){var g=d.value,w=typeof g=="number"?g|me:typeof g=="bigint"?g|BigInt(me):g[0]+g[1]*e|Rt;return w&-w}function Q(d,g){if(g.compareTo(d)<=0){var w=Q(d,g.square(g)),A=w.p,P=w.e,$=A.multiply(g);return $.compareTo(d)<=0?{p:$,e:P*2+1}:{p:A,e:P*2}}return{p:Xt(1),e:0}}u.prototype.bitLength=function(){var d=this;return d.compareTo(Xt(0))<0&&(d=d.negate().subtract(Xt(1))),d.compareTo(Xt(0))===0?Xt(0):Xt(Q(d,Xt(2)).e).add(Xt(1))},l.prototype.bitLength=c.prototype.bitLength=u.prototype.bitLength;function be(d,g){return d=ve(d),g=ve(g),d.greater(g)?d:g}function Y(d,g){return d=ve(d),g=ve(g),d.lesser(g)?d:g}function ye(d,g){if(d=ve(d).abs(),g=ve(g).abs(),d.equals(g))return d;if(d.isZero())return g;if(g.isZero())return d;for(var w=a[1],A,P;d.isEven()&&g.isEven();)A=Y(Cr(d),Cr(g)),d=d.divide(A),g=g.divide(A),w=w.multiply(A);for(;d.isEven();)d=d.divide(Cr(d));do{for(;g.isEven();)g=g.divide(Cr(g));d.greater(g)&&(P=g,g=d,d=P),g=g.subtract(d)}while(!g.isZero());return w.isUnit()?d:d.multiply(w)}function Ne(d,g){return d=ve(d).abs(),g=ve(g).abs(),d.divide(ye(d,g)).multiply(g)}function ft(d,g,w){d=ve(d),g=ve(g);var A=w||Math.random,P=Y(d,g),$=be(d,g),B=$.subtract(P).add(1);if(B.isSmall)return P.add(Math.floor(A()*B));for(var U=fu(B,e).value,N=[],ie=!0,fe=0;fe<U.length;fe++){var ge=ie?U[fe]:e,Te=v(A()*ge);N.push(Te),Te<ge&&(ie=!1)}return P.add(a.fromArray(N,e,!1))}var yt=function(d,g,w,A){w=w||o,d=String(d),A||(d=d.toLowerCase(),w=w.toLowerCase());var P=d.length,$,B=Math.abs(g),U={};for($=0;$<w.length;$++)U[w[$]]=$;for($=0;$<P;$++){var N=d[$];if(N!=="-"&&N in U&&U[N]>=B){if(N==="1"&&B===1)continue;throw new Error(N+" is not a valid digit in base "+g+".")}}g=ve(g);var ie=[],fe=d[0]==="-";for($=fe?1:0;$<d.length;$++){var N=d[$];if(N in U)ie.push(ve(U[N]));else if(N==="<"){var ge=$;do $++;while(d[$]!==">"&&$<d.length);ie.push(ve(d.slice(ge+1,$)))}else throw new Error(N+" is not a valid character")}return Fs(ie,g,fe)};function Fs(d,g,w){var A=a[0],P=a[1],$;for($=d.length-1;$>=0;$--)A=A.add(d[$].times(P)),P=P.times(g);return w?A.negate():A}function Ns(d,g){return g=g||o,d<g.length?g[d]:"<"+d+">"}function fu(d,g){if(g=Xt(g),g.isZero()){if(d.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(g.equals(-1)){if(d.isZero())return{value:[0],isNegative:!1};if(d.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-d.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var w=Array.apply(null,Array(d.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return w.unshift([1]),{value:[].concat.apply([],w),isNegative:!1}}var A=!1;if(d.isNegative()&&g.isPositive()&&(A=!0,d=d.abs()),g.isUnit())return d.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(d.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:A};for(var P=[],$=d,B;$.isNegative()||$.compareAbs(g)>=0;){B=$.divmod(g),$=B.quotient;var U=B.remainder;U.isNegative()&&(U=g.minus(U).abs(),$=$.next()),P.push(U.toJSNumber())}return P.push($.toJSNumber()),{value:P.reverse(),isNegative:A}}function qc(d,g,w){var A=fu(d,g);return(A.isNegative?"-":"")+A.value.map(function(P){return Ns(P,w)}).join("")}u.prototype.toArray=function(d){return fu(this,d)},c.prototype.toArray=function(d){return fu(this,d)},l.prototype.toArray=function(d){return fu(this,d)},u.prototype.toString=function(d,g){if(d===t&&(d=10),d!==10)return qc(this,d,g);for(var w=this.value,A=w.length,P=String(w[--A]),$="0000000",B;--A>=0;)B=String(w[A]),P+=$.slice(B.length)+B;var U=this.sign?"-":"";return U+P},c.prototype.toString=function(d,g){return d===t&&(d=10),d!=10?qc(this,d,g):String(this.value)},l.prototype.toString=c.prototype.toString,l.prototype.toJSON=u.prototype.toJSON=c.prototype.toJSON=function(){return this.toString()},u.prototype.valueOf=function(){return parseInt(this.toString(),10)},u.prototype.toJSNumber=u.prototype.valueOf,c.prototype.valueOf=function(){return this.value},c.prototype.toJSNumber=c.prototype.valueOf,l.prototype.valueOf=l.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};function Mg(d){if(p(+d)){var g=+d;if(g===v(g))return s?new l(BigInt(g)):new c(g);throw new Error("Invalid integer: "+d)}var w=d[0]==="-";w&&(d=d.slice(1));var A=d.split(/e/i);if(A.length>2)throw new Error("Invalid integer: "+A.join("e"));if(A.length===2){var P=A[1];if(P[0]==="+"&&(P=P.slice(1)),P=+P,P!==v(P)||!p(P))throw new Error("Invalid integer: "+P+" is not a valid exponent.");var $=A[0],B=$.indexOf(".");if(B>=0&&(P-=$.length-B-1,$=$.slice(0,B)+$.slice(B+1)),P<0)throw new Error("Cannot include negative exponent part for integers");$+=new Array(P+1).join("0"),d=$}var U=/^([0-9][0-9]*)$/.test(d);if(!U)throw new Error("Invalid integer: "+d);if(s)return new l(BigInt(w?"-"+d:d));for(var N=[],ie=d.length,fe=r,ge=ie-fe;ie>0;)N.push(+d.slice(ge,ie)),ge-=fe,ge<0&&(ge=0),ie-=fe;return h(N),new u(N,w)}function nA(d){if(s)return new l(BigInt(d));if(p(d)){if(d!==v(d))throw new Error(d+" is not an integer.");return new c(d)}return Mg(d.toString())}function ve(d){return typeof d=="number"?nA(d):typeof d=="string"?Mg(d):typeof d=="bigint"?new l(d):d}for(var mi=0;mi<1e3;mi++)a[mi]=ve(mi),mi>0&&(a[-mi]=ve(-mi));return a.one=a[1],a.zero=a[0],a.minusOne=a[-1],a.max=be,a.min=Y,a.gcd=ye,a.lcm=Ne,a.isInstance=function(d){return d instanceof u||d instanceof c||d instanceof l},a.randBetween=ft,a.fromArray=function(d,g,w){return Fs(d.map(ve),ve(g||10),w)},a}();typeof Vb<"u"&&Vb.hasOwnProperty("exports")&&(Vb.exports=Xt);typeof define=="function"&&define.amd&&define(function(){return Xt})});var _j=y(Jt=>{"use strict";var Mle=require("fs"),kle=wj(),Ca=!1;Jt.maxObjectSize=100*1e3*1e3;Jt.maxObjectCount=32768;var Ole=9783072e5,Fle=Jt.UID=function(t){this.UID=t},F1e=Jt.parseFile=function(t,e){function r(n){var i=null,o;try{o=Nle(n)}catch(s){i=s}e(i,o)}if(Buffer.isBuffer(t))return r(t);Mle.readFile(t,function(n,i){if(n)return e(n);r(i)})},Nle=Jt.parseBuffer=function(t){var e={},r=t.slice(0,6).toString("utf8");if(r!=="bplist")throw new Error("Invalid binary plist. Expected 'bplist' at offset 0.");var n=t.slice(t.length-32,t.length),i=n.readUInt8(6);Ca&&console.log("offsetSize: "+i);var o=n.readUInt8(7);Ca&&console.log("objectRefSize: "+o);var s=HC(n,8);Ca&&console.log("numObjects: "+s);var a=HC(n,16);Ca&&console.log("topObject: "+a);var u=HC(n,24);if(Ca&&console.log("offsetTableOffset: "+u),s>Jt.maxObjectCount)throw new Error("maxObjectCount exceeded");for(var c=[],l=0;l<s;l++){var p=t.slice(u+l*i,u+(l+1)*i);c[l]=fn(p,0),Ca&&console.log("Offset for Object #"+l+" is "+c[l]+" ["+c[l].toString(16)+"]")}function f(m){var h=c[m],H=t[h],v=(H&240)>>4,_=H&15;switch(v){case 0:return x();case 1:return T();case 8:return j();case 2:return K();case 3:return G();case 4:return F();case 5:return R();case 6:return R(!0);case 10:return M();case 13:return D();default:throw new Error("Unhandled type 0x"+v.toString(16))}function x(){switch(_){case 0:return null;case 8:return!1;case 9:return!0;case 15:return null;default:throw new Error("Unhandled simple type 0x"+v.toString(16))}}function k(W){var O="",V;for(V=0;V<W.length&&W[V]==0;V++);for(;V<W.length;V++){var E="00"+W[V].toString(16);O+=E.substr(E.length-2)}return O}function T(){var W=Math.pow(2,_);if(W>4){var O=t.slice(h+1,h+1+W),V=k(O);return kle(V,16)}if(W<Jt.maxObjectSize)return fn(t.slice(h+1,h+1+W));throw new Error("To little heap space available! Wanted to read "+W+" bytes, but only "+Jt.maxObjectSize+" are available.")}function j(){var W=_+1;if(W<Jt.maxObjectSize)return new Fle(fn(t.slice(h+1,h+1+W)));throw new Error("To little heap space available! Wanted to read "+W+" bytes, but only "+Jt.maxObjectSize+" are available.")}function K(){var W=Math.pow(2,_);if(W<Jt.maxObjectSize){var O=t.slice(h+1,h+1+W);if(W===4)return O.readFloatBE(0);if(W===8)return O.readDoubleBE(0)}else throw new Error("To little heap space available! Wanted to read "+W+" bytes, but only "+Jt.maxObjectSize+" are available.")}function G(){_!=3&&console.error("Unknown date type :"+_+". Parsing anyway...");var W=t.slice(h+1,h+9);return new Date(Ole+1e3*W.readDoubleBE(0))}function F(){var W=1,O=_;if(_==15){var V=t[h+1],E=(V&240)/16;E!=1&&console.error("0x4: UNEXPECTED LENGTH-INT TYPE! "+E);var L=V&15,ue=Math.pow(2,L);W=2+ue,ue<3,O=fn(t.slice(h+2,h+2+ue))}if(O<Jt.maxObjectSize)return t.slice(h+W,h+W+O);throw new Error("To little heap space available! Wanted to read "+O+" bytes, but only "+Jt.maxObjectSize+" are available.")}function R(W){W=W||0;var O="utf8",V=_,E=1;if(_==15){var L=t[h+1],ue=(L&240)/16;ue!=1&&console.err("UNEXPECTED LENGTH-INT TYPE! "+ue);var oe=L&15,ne=Math.pow(2,oe),E=2+ne;ne<3,V=fn(t.slice(h+2,h+2+ne))}if(V*=W+1,V<Jt.maxObjectSize){var X=new Buffer(t.slice(h+E,h+E+V));return W&&(X=Ble(X),O="ucs2"),X.toString(O)}else throw new Error("To little heap space available! Wanted to read "+V+" bytes, but only "+Jt.maxObjectSize+" are available.")}function M(){var W=_,O=1;if(_==15){var V=t[h+1],E=(V&240)/16;E!=1&&console.error("0xa: UNEXPECTED LENGTH-INT TYPE! "+E);var L=V&15,ue=Math.pow(2,L);O=2+ue,ue<3,W=fn(t.slice(h+2,h+2+ue))}if(W*o>Jt.maxObjectSize)throw new Error("To little heap space available!");for(var oe=[],ne=0;ne<W;ne++){var X=fn(t.slice(h+O+ne*o,h+O+(ne+1)*o));oe[ne]=f(X)}return oe}function D(){var W=_,O=1;if(_==15){var V=t[h+1],E=(V&240)/16;E!=1&&console.error("0xD: UNEXPECTED LENGTH-INT TYPE! "+E);var L=V&15,ue=Math.pow(2,L);O=2+ue,ue<3,W=fn(t.slice(h+2,h+2+ue))}if(W*2*o>Jt.maxObjectSize)throw new Error("To little heap space available!");Ca&&console.log("Parsing dictionary #"+m);for(var oe={},ne=0;ne<W;ne++){var X=fn(t.slice(h+O+ne*o,h+O+(ne+1)*o)),ee=fn(t.slice(h+O+W*o+ne*o,h+O+W*o+(ne+1)*o)),ae=f(X),se=f(ee);Ca&&console.log("  DICT #"+m+": Mapped "+ae+" to "+se),oe[ae]=se}return oe}}return[f(a)]};function fn(t,e){e=e||0;for(var r=0,n=e;n<t.length;n++)r<<=8,r|=t[n]&255;return r}function HC(t,e){var r=t.slice(e,e+8);return r.readUInt32BE(4,8)}function Ble(t){for(var e=t.length,r=0;r<e;r+=2){var n=t[r];t[r]=t[r+1],t[r+1]=n}return t}});var Sj=y((B1e,Ij)=>{"use strict";var Aj=require("os");function Ule(){var t=process.env,e=t.HOME,r=t.LOGNAME||t.USER||t.LNAME||t.USERNAME;return process.platform==="win32"?t.USERPROFILE||t.HOMEDRIVE+t.HOMEPATH||e||null:process.platform==="darwin"?e||(r?"/Users/"+r:null):process.platform==="linux"?e||(process.getuid()===0?"/root":r?"/home/"+r:null):e||null}Ij.exports=typeof Aj.homedir=="function"?Aj.homedir:Ule});var Cj=y((U1e,Dj)=>{"use strict";var jle=Sj(),Ej=jle();Dj.exports=function(t){if(typeof t!="string")throw new TypeError("Expected a string");return Ej?t.replace(/^~($|\/|\\)/,Ej+"$1"):t}});var yC=y((j1e,Lj)=>{"use strict";var Pj=function(t,e,r){return function(){for(var n=this,i=new Array(arguments.length),o=0;o<arguments.length;o++)i[o]=arguments[o];return new e(function(s,a){i.push(function(u,c){if(u)a(u);else if(r.multiArgs){for(var l=new Array(arguments.length-1),p=1;p<arguments.length;p++)l[p-1]=arguments[p];s(l)}else s(c)}),t.apply(n,i)})}},xj=Lj.exports=function(t,e,r){typeof e!="function"&&(r=e,e=Promise),r=r||{},r.exclude=r.exclude||[/.+Sync$/];var n=function(o){var s=function(a){return typeof a=="string"?o===a:a.test(o)};return r.include?r.include.some(s):!r.exclude.some(s)},i=typeof t=="function"?function(){return r.excludeMain?t.apply(this,arguments):Pj(t,e,r).apply(this,arguments)}:{};return Object.keys(t).reduce(function(o,s){var a=t[s];return o[s]=typeof a=="function"&&n(s)?Pj(a,e,r):a,o},i)};xj.all=xj});var $j=y((q1e,Tj)=>{"use strict";var qle=require("os"),Wle=_j(),Vle=Cj(),Gle=yC(),Kle=Number(qle.release().split(".")[0]),zle=Vle(Kle>=14?"~/Library/Preferences/com.apple.LaunchServices/com.apple.launchservices.secure.plist":"~/Library/Preferences/com.apple.LaunchServices.plist");Tj.exports=()=>{if(process.platform!=="darwin")return Promise.reject(new Error("Only OS X is supported"));let t="com.apple.Safari";return Gle(Wle.parseFile)(zle).then(e=>{let r=e&&e[0].LSHandlers;if(!r||r.length===0)return t;for(let n of r)if(n.LSHandlerURLScheme==="http"&&n.LSHandlerRoleAll){t=n.LSHandlerRoleAll;break}return t})}});var Uj=y((W1e,Bj)=>{"use strict";var bC="pending",Rj="settled",Gb="fulfilled",Kb="rejected",Xle=function(){},Mj=typeof global<"u"&&typeof global.process<"u"&&typeof global.process.emit=="function",Jle=typeof setImmediate>"u"?setTimeout:setImmediate,im=[],vC;function Yle(){for(var t=0;t<im.length;t++)im[t][0](im[t][1]);im=[],vC=!1}function zb(t,e){im.push([t,e]),vC||(vC=!0,Jle(Yle,0))}function Qle(t,e){function r(i){wC(e,i)}function n(i){om(e,i)}try{t(r,n)}catch(i){n(i)}}function kj(t){var e=t.owner,r=e._state,n=e._data,i=t[r],o=t.then;if(typeof i=="function"){r=Gb;try{n=i(n)}catch(s){om(o,s)}}Oj(o,n)||(r===Gb&&wC(o,n),r===Kb&&om(o,n))}function Oj(t,e){var r;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&(typeof e=="function"||typeof e=="object")){var n=e.then;if(typeof n=="function")return n.call(e,function(i){r||(r=!0,e===i?Fj(t,i):wC(t,i))},function(i){r||(r=!0,om(t,i))}),!0}}catch(i){return r||om(t,i),!0}return!1}function wC(t,e){(t===e||!Oj(t,e))&&Fj(t,e)}function Fj(t,e){t._state===bC&&(t._state=Rj,t._data=e,zb(Zle,t))}function om(t,e){t._state===bC&&(t._state=Rj,t._data=e,zb(epe,t))}function Nj(t){t._then=t._then.forEach(kj)}function Zle(t){t._state=Gb,Nj(t)}function epe(t){t._state=Kb,Nj(t),!t._handled&&Mj&&global.process.emit("unhandledRejection",t._data,t)}function tpe(t){global.process.emit("rejectionHandled",t)}function xn(t){if(typeof t!="function")throw new TypeError("Promise resolver "+t+" is not a function");if(!(this instanceof xn))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],Qle(t,this)}xn.prototype={constructor:xn,_state:bC,_then:null,_data:void 0,_handled:!1,then:function(t,e){var r={owner:this,then:new this.constructor(Xle),fulfilled:t,rejected:e};return(e||t)&&!this._handled&&(this._handled=!0,this._state===Kb&&Mj&&zb(tpe,this)),this._state===Gb||this._state===Kb?zb(kj,r):this._then.push(r),r.then},catch:function(t){return this.then(null,t)}};xn.all=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.all().");return new xn(function(e,r){var n=[],i=0;function o(u){return i++,function(c){n[u]=c,--i||e(n)}}for(var s=0,a;s<t.length;s++)a=t[s],a&&typeof a.then=="function"?a.then(o(s),r):n[s]=a;i||e(n)})};xn.race=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.race().");return new xn(function(e,r){for(var n=0,i;n<t.length;n++)i=t[n],i&&typeof i.then=="function"?i.then(e,r):e(i)})};xn.resolve=function(t){return t&&typeof t=="object"&&t.constructor===xn?t:new xn(function(e){e(t)})};xn.reject=function(t){return new xn(function(e,r){r(t)})};Bj.exports=xn});var qj=y((V1e,jj)=>{"use strict";jj.exports=typeof Promise=="function"?Promise:Uj()});var Gj=y((G1e,Vj)=>{"use strict";var rpe=require("child_process").execFile,Wj=qj(),npe=yC();Vj.exports=function(t){return process.platform!=="darwin"?Wj.reject(new Error("Only OS X systems are supported")):npe(rpe,Wj)("osascript",["-e",t]).then(function(e){return e.trim()})}});var zj=y((K1e,Kj)=>{"use strict";var ipe=Gj();Kj.exports=t=>ipe(`tell application "Finder" to set app_path to application file id "${t}" as string
tell application "System Events" to get value of property list item "CFBundleName" of property list file (app_path & ":Contents:Info.plist")`)});var Qj=y((z1e,Yj)=>{var Xj=Object.prototype.hasOwnProperty;Yj.exports=Ln;function Ln(t){if(!(this instanceof Ln))throw new TypeError("Constructor PseudoMap requires 'new'");if(this.clear(),t)if(t instanceof Ln||typeof Map=="function"&&t instanceof Map)t.forEach(function(e,r){this.set(r,e)},this);else if(Array.isArray(t))t.forEach(function(e){this.set(e[0],e[1])},this);else throw new TypeError("invalid argument")}Ln.prototype.forEach=function(t,e){e=e||this,Object.keys(this._data).forEach(function(r){r!=="size"&&t.call(e,this._data[r].value,this._data[r].key)},this)};Ln.prototype.has=function(t){return!!_C(this._data,t)};Ln.prototype.get=function(t){var e=_C(this._data,t);return e&&e.value};Ln.prototype.set=function(t,e){spe(this._data,t,e)};Ln.prototype.delete=function(t){var e=_C(this._data,t);e&&(delete this._data[e._index],this._data.size--)};Ln.prototype.clear=function(){var t=Object.create(null);t.size=0,Object.defineProperty(this,"_data",{value:t,enumerable:!1,configurable:!0,writable:!1})};Object.defineProperty(Ln.prototype,"size",{get:function(){return this._data.size},set:function(t){},enumerable:!0,configurable:!0});Ln.prototype.values=Ln.prototype.keys=Ln.prototype.entries=function(){throw new Error("iterators are not implemented in this version")};function Jj(t,e){return t===e||t!==t&&e!==e}function ope(t,e,r){this.key=t,this.value=e,this._index=r}function _C(t,e){for(var r=0,n="_"+e,i=n;Xj.call(t,i);i=n+r++)if(Jj(t[i].key,e))return t[i]}function spe(t,e,r){for(var n=0,i="_"+e,o=i;Xj.call(t,o);o=i+n++)if(Jj(t[o].key,e)){t[o].value=r;return}t.size++,t[o]=new ope(e,r,o)}});var Zj=y((X1e,AC)=>{process.env.npm_package_name==="pseudomap"&&process.env.npm_lifecycle_script==="test"&&(process.env.TEST_PSEUDOMAP="true");typeof Map=="function"&&!process.env.TEST_PSEUDOMAP?AC.exports=Map:AC.exports=Qj()});var tq=y((J1e,eq)=>{eq.exports=qe;qe.Node=sm;qe.create=qe;function qe(t){var e=this;if(e instanceof qe||(e=new qe),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}qe.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null};qe.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};qe.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};qe.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)ape(this,arguments[t]);return this.length};qe.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)upe(this,arguments[t]);return this.length};qe.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};qe.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};qe.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};qe.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};qe.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};qe.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};qe.prototype.map=function(t,e){e=e||this;for(var r=new qe,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};qe.prototype.mapReverse=function(t,e){e=e||this;for(var r=new qe,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};qe.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};qe.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};qe.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};qe.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};qe.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new qe;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};qe.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new qe;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};qe.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function ape(t,e){t.tail=new sm(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function upe(t,e){t.head=new sm(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function sm(t,e,r,n){if(!(this instanceof sm))return new sm(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}});var SC=y((Y1e,iq)=>{"use strict";iq.exports=ct;var cpe=Zj(),am=require("util"),lpe=tq(),ppe=typeof Symbol=="function"&&process.env._nodeLRUCacheForceNoSymbol!=="1",Ci;ppe?Ci=function(t){return Symbol(t)}:Ci=function(t){return"_"+t};var ps=Ci("max"),Co=Ci("length"),rc=Ci("lengthCalculator"),Cp=Ci("allowStale"),Pa=Ci("maxAge"),ls=Ci("dispose"),rq=Ci("noDisposeOnSet"),Yt=Ci("lruList"),Di=Ci("cache");function um(){return 1}function ct(t){if(!(this instanceof ct))return new ct(t);typeof t=="number"&&(t={max:t}),t||(t={});var e=this[ps]=t.max;(!e||typeof e!="number"||e<=0)&&(this[ps]=1/0);var r=t.length||um;typeof r!="function"&&(r=um),this[rc]=r,this[Cp]=t.stale||!1,this[Pa]=t.maxAge||0,this[ls]=t.dispose,this[rq]=t.noDisposeOnSet||!1,this.reset()}Object.defineProperty(ct.prototype,"max",{set:function(t){(!t||typeof t!="number"||t<=0)&&(t=1/0),this[ps]=t,cm(this)},get:function(){return this[ps]},enumerable:!0});Object.defineProperty(ct.prototype,"allowStale",{set:function(t){this[Cp]=!!t},get:function(){return this[Cp]},enumerable:!0});Object.defineProperty(ct.prototype,"maxAge",{set:function(t){(!t||typeof t!="number"||t<0)&&(t=0),this[Pa]=t,cm(this)},get:function(){return this[Pa]},enumerable:!0});Object.defineProperty(ct.prototype,"lengthCalculator",{set:function(t){typeof t!="function"&&(t=um),t!==this[rc]&&(this[rc]=t,this[Co]=0,this[Yt].forEach(function(e){e.length=this[rc](e.value,e.key),this[Co]+=e.length},this)),cm(this)},get:function(){return this[rc]},enumerable:!0});Object.defineProperty(ct.prototype,"length",{get:function(){return this[Co]},enumerable:!0});Object.defineProperty(ct.prototype,"itemCount",{get:function(){return this[Yt].length},enumerable:!0});ct.prototype.rforEach=function(t,e){e=e||this;for(var r=this[Yt].tail;r!==null;){var n=r.prev;nq(this,t,r,e),r=n}};function nq(t,e,r,n){var i=r.value;lm(t,i)&&(Pp(t,r),t[Cp]||(i=void 0)),i&&e.call(n,i.value,i.key,t)}ct.prototype.forEach=function(t,e){e=e||this;for(var r=this[Yt].head;r!==null;){var n=r.next;nq(this,t,r,e),r=n}};ct.prototype.keys=function(){return this[Yt].toArray().map(function(t){return t.key},this)};ct.prototype.values=function(){return this[Yt].toArray().map(function(t){return t.value},this)};ct.prototype.reset=function(){this[ls]&&this[Yt]&&this[Yt].length&&this[Yt].forEach(function(t){this[ls](t.key,t.value)},this),this[Di]=new cpe,this[Yt]=new lpe,this[Co]=0};ct.prototype.dump=function(){return this[Yt].map(function(t){if(!lm(this,t))return{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}},this).toArray().filter(function(t){return t})};ct.prototype.dumpLru=function(){return this[Yt]};ct.prototype.inspect=function(t,e){var r="LRUCache {",n=!1,i=this[Cp];i&&(r+=`
  allowStale: true`,n=!0);var o=this[ps];o&&o!==1/0&&(n&&(r+=","),r+=`
  max: `+am.inspect(o,e),n=!0);var s=this[Pa];s&&(n&&(r+=","),r+=`
  maxAge: `+am.inspect(s,e),n=!0);var a=this[rc];a&&a!==um&&(n&&(r+=","),r+=`
  length: `+am.inspect(this[Co],e),n=!0);var u=!1;return this[Yt].forEach(function(c){u?r+=`,
  `:(n&&(r+=`,
`),u=!0,r+=`
  `);var l=am.inspect(c.key).split(`
`).join(`
  `),p={value:c.value};c.maxAge!==s&&(p.maxAge=c.maxAge),a!==um&&(p.length=c.length),lm(this,c)&&(p.stale=!0),p=am.inspect(p,e).split(`
`).join(`
  `),r+=l+" => "+p}),(u||n)&&(r+=`
`),r+="}",r};ct.prototype.set=function(t,e,r){r=r||this[Pa];var n=r?Date.now():0,i=this[rc](e,t);if(this[Di].has(t)){if(i>this[ps])return Pp(this,this[Di].get(t)),!1;var o=this[Di].get(t),s=o.value;return this[ls]&&(this[rq]||this[ls](t,s.value)),s.now=n,s.maxAge=r,s.value=e,this[Co]+=i-s.length,s.length=i,this.get(t),cm(this),!0}var a=new fpe(t,e,i,n,r);return a.length>this[ps]?(this[ls]&&this[ls](t,e),!1):(this[Co]+=a.length,this[Yt].unshift(a),this[Di].set(t,this[Yt].head),cm(this),!0)};ct.prototype.has=function(t){if(!this[Di].has(t))return!1;var e=this[Di].get(t).value;return!lm(this,e)};ct.prototype.get=function(t){return IC(this,t,!0)};ct.prototype.peek=function(t){return IC(this,t,!1)};ct.prototype.pop=function(){var t=this[Yt].tail;return t?(Pp(this,t),t.value):null};ct.prototype.del=function(t){Pp(this,this[Di].get(t))};ct.prototype.load=function(t){this.reset();for(var e=Date.now(),r=t.length-1;r>=0;r--){var n=t[r],i=n.e||0;if(i===0)this.set(n.k,n.v);else{var o=i-e;o>0&&this.set(n.k,n.v,o)}}};ct.prototype.prune=function(){var t=this;this[Di].forEach(function(e,r){IC(t,r,!1)})};function IC(t,e,r){var n=t[Di].get(e);if(n){var i=n.value;lm(t,i)?(Pp(t,n),t[Cp]||(i=void 0)):r&&t[Yt].unshiftNode(n),i&&(i=i.value)}return i}function lm(t,e){if(!e||!e.maxAge&&!t[Pa])return!1;var r=!1,n=Date.now()-e.now;return e.maxAge?r=n>e.maxAge:r=t[Pa]&&n>t[Pa],r}function cm(t){if(t[Co]>t[ps])for(var e=t[Yt].tail;t[Co]>t[ps]&&e!==null;){var r=e.prev;Pp(t,e),e=r}}function Pp(t,e){if(e){var r=e.value;t[ls]&&t[ls](r.key,r.value),t[Co]-=r.length,t[Di].delete(r.key),t[Yt].removeNode(e)}}function fpe(t,e,r,n,i){this.key=t,this.value=e,this.length=r,this.now=n,this.maxAge=i||0}});var pq=y((Q1e,lq)=>{lq.exports=cq;cq.sync=hpe;var EC=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",oq=require("path"),dpe=EC?";":":",sq=TA();function aq(t){var e=new Error("not found: "+t);return e.code="ENOENT",e}function uq(t,e){var r=e.colon||dpe,n=e.path||process.env.PATH||"",i=[""];n=n.split(r);var o="";return EC&&(n.unshift(process.cwd()),o=e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM",i=o.split(r),t.indexOf(".")!==-1&&i[0]!==""&&i.unshift("")),(t.match(/\//)||EC&&t.match(/\\/))&&(n=[""]),{env:n,ext:i,extExe:o}}function cq(t,e,r){typeof e=="function"&&(r=e,e={});var n=uq(t,e),i=n.env,o=n.ext,s=n.extExe,a=[];(function u(c,l){if(c===l)return e.all&&a.length?r(null,a):r(aq(t));var p=i[c];p.charAt(0)==='"'&&p.slice(-1)==='"'&&(p=p.slice(1,-1));var f=oq.join(p,t);!p&&/^\.[\\\/]/.test(t)&&(f=t.slice(0,2)+f),function m(h,H){if(h===H)return u(c+1,l);var v=o[h];sq(f+v,{pathExt:s},function(_,x){if(!_&&x)if(e.all)a.push(f+v);else return r(null,f+v);return m(h+1,H)})}(0,o.length)})(0,i.length)}function hpe(t,e){e=e||{};for(var r=uq(t,e),n=r.env,i=r.ext,o=r.extExe,s=[],a=0,u=n.length;a<u;a++){var c=n[a];c.charAt(0)==='"'&&c.slice(-1)==='"'&&(c=c.slice(1,-1));var l=oq.join(c,t);!c&&/^\.[\\\/]/.test(t)&&(l=t.slice(0,2)+l);for(var p=0,f=i.length;p<f;p++){var m=l+i[p],h;try{if(h=sq.sync(m,{pathExt:o}),h)if(e.all)s.push(m);else return m}catch{}}}if(e.all&&s.length)return s;if(e.nothrow)return null;throw aq(t)}});var mq=y((Z1e,hq)=>{"use strict";var fq=require("path"),dq=pq(),mpe=SC(),Xb=new mpe({max:50,maxAge:30*1e3}),gpe=new RegExp(process.platform==="win32"?/[\/\\]/:/\//);function Hpe(t,e){var r;if(gpe.test(t)&&(t=fq.resolve(t)),e=!!e,r=Xb.get(t+"!"+e),Xb.has(t))return Xb.get(t);try{r=e?dq.sync(t,{pathExt:fq.delimiter+(process.env.PATHEXT||"")}):dq.sync(t)}catch{}return Xb.set(t+"!"+e,r),r}hq.exports=Hpe});var vq=y((eOe,yq)=>{"use strict";var DC=require("fs"),ype=SC(),gq=mq(),vpe=process.platform==="win32",CC=new ype({max:50,maxAge:30*1e3});function bpe(t){var e,r,n,i;if(CC.has(t))return CC.get(t);e=new Buffer(150);try{r=DC.openSync(t,"r"),DC.readSync(r,e,0,150,0),DC.closeSync(r)}catch{}return n=e.toString().trim().match(/#!(.+)/i),n&&(i=n[1].replace(/\/usr\/bin\/env\s+/i,"")),CC.set(t,i),i}function Hq(t,e){return t=""+t,e?(t=t.replace(/(\\*)"/g,'$1$1\\"'),t=t.replace(/(\\*)$/,"$1$1"),t='"'+t+'"'):t=t.replace(/([\(\)%!\^<>&|;,"'\s])/g,"^$1"),t}function wpe(t){return/^[a-z0-9_-]+$/i.test(t)?t:Hq(t,!0)}function _pe(t,e,r){var n,i,o,s;return e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=r||{},s=t,vpe&&(o=gq(t),o=o||gq(t,!0),n=o&&bpe(o),n&&(e.unshift(o),t=n),i=t!=="echo",t=wpe(t),e=e.map(function(a){return Hq(a,i)}),e=["/s","/c",'"'+t+(e.length?" "+e.join(" "):"")+'"'],t=process.env.comspec||"cmd.exe",r.windowsVerbatimArguments=!0),{command:t,args:e,options:r,file:o,original:s}}yq.exports=_pe});var Aq=y((tOe,Jb)=>{"use strict";var bq=process.platform==="win32";function wq(t,e){var r;return r=new Error(e+" "+t+" ENOENT"),r.code=r.errno="ENOENT",r.syscall=e+" "+t,r}function Ape(t,e){var r;bq&&(r=t.emit,t.emit=function(n,i){var o;return n==="exit"&&(o=_q(i,e,"spawn"),o)?r.call(t,"error",o):r.apply(t,arguments)})}function _q(t,e,r){return bq&&t===1&&!e.file?wq(e.original,r):null}Jb.exports.hookChildProcess=Ape;Jb.exports.verifyENOENT=_q;Jb.exports.notFoundError=wq});var Dq=y((rOe,pm)=>{"use strict";var Ipe=require("child_process"),Iq=vq(),Sq=Aq();function Eq(t,e,r){var n,i;return n=Iq(t,e,r),i=Ipe.spawn(n.command,n.args,n.options),Sq.hookChildProcess(i,n),i}pm.exports=Eq;pm.exports.spawn=Eq;pm.exports._parse=Iq;pm.exports._enoent=Sq});var Pq=y((nOe,Cq)=>{"use strict";Cq.exports=function(t){var e=typeof t=="string"?`
`:`
`.charCodeAt(),r=typeof t=="string"?"\r":"\r".charCodeAt();return t[t.length-1]===e&&(t=t.slice(0,t.length-1)),t[t.length-1]===r&&(t=t.slice(0,t.length-1)),t}});var Tq=y((iOe,Lq)=>{"use strict";var xq=Object.getOwnPropertySymbols,Spe=Object.prototype.hasOwnProperty,Epe=Object.prototype.propertyIsEnumerable;function Dpe(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function Cpe(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(e).map(function(o){return e[o]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}Lq.exports=Cpe()?Object.assign:function(t,e){for(var r,n=Dpe(t),i,o=1;o<arguments.length;o++){r=Object(arguments[o]);for(var s in r)Spe.call(r,s)&&(n[s]=r[s]);if(xq){i=xq(r);for(var a=0;a<i.length;a++)Epe.call(r,i[a])&&(n[i[a]]=r[i[a]])}}return n}});var PC=y((oOe,$q)=>{"use strict";$q.exports=function(t){t=t||{};var e=t.env||process.env,r=t.platform||process.platform;return r!=="win32"?"PATH":Object.keys(e).filter(function(n){return n.toUpperCase()==="PATH"})[0]||"Path"}});var Mq=y((sOe,Rq)=>{"use strict";var fm=require("path"),Ppe=PC();Rq.exports=function(t){t=t||{};for(var e,r=fm.resolve(t.cwd||"."),n=[];e!==r;)n.push(fm.join(r,"node_modules/.bin")),e=r,r=fm.resolve(r,"..");return n.push(fm.dirname(process.execPath)),n.concat(t.path||process.env[Ppe()]).join(fm.delimiter)}});var Oq=y((aOe,dm)=>{"use strict";var xpe=require("child_process"),xC=Dq(),Lpe=Pq(),LC=Tq(),Tpe=Mq(),kq=PC()(),$pe=1024*1024*10;dm.exports=function(t,e,r){return new Promise(function(n,i){var o=xC._parse(t,e,r);r=LC({maxBuffer:$pe,stripEof:!0,preferLocal:!0},o.options);var s=function(u){return r.stripEof&&(u=Lpe(u)),u};r.preferLocal&&(r.env=LC({},r.env||process.env),r.env[kq]=Tpe({cwd:r.cwd,path:r.env[kq]}));var a=xpe.execFile(o.command,o.args,r,function(u,c,l){if(u){u.stdout=c,u.stderr=l,i(u);return}n({stdout:s(c),stderr:s(l)})});xC._enoent.hookChildProcess(a,o)})};dm.exports.shell=function(t,e){var r,n;return e=LC({},e),process.platform==="win32"?(r=process.env.comspec||"cmd.exe",n=["/s","/c",'"'+t+'"'],e.windowsVerbatimArguments=!0):(r="/bin/sh",n=["-c",t]),e.shell&&(r=e.shell),dm.exports(r,n,e)};dm.exports.spawn=xC});var Nq=y((uOe,Fq)=>{"use strict";Fq.exports=function(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.toLowerCase().replace(/(?:^|\s|-)\S/g,function(e){return e.toUpperCase()})}});var Uq=y((cOe,Bq)=>{"use strict";var Rpe=Oq(),Mpe=Nq();Bq.exports=function(){return process.platform!=="linux"?Promise.reject(new Error("Only Linux systems are supported")):Rpe("xdg-mime",["query","default","x-scheme-handler/http"]).then(t=>{let e=t.stdout.trim();return{name:Mpe(e.replace(/.desktop$/,"").replace("-"," ")),id:e}})}});var qq=y((lOe,jq)=>{"use strict";var kpe=$j(),Ope=zj();jq.exports=()=>process.platform==="linux"?Uq()():process.platform==="darwin"?kpe().then(t=>Ope(t).then(e=>({name:e,id:t}))):Promise.reject(new Error("Only macOS and Linux are supported"))});var fs=y((ROe,$C)=>{"use strict";typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?$C.exports={nextTick:Bpe}:$C.exports=process;function Bpe(t,e,r,n){if(typeof t!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,o,s;switch(i){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick(function(){t.call(null,e)});case 3:return process.nextTick(function(){t.call(null,e,r)});case 4:return process.nextTick(function(){t.call(null,e,r,n)});default:for(o=new Array(i-1),s=0;s<o.length;)o[s++]=arguments[s];return process.nextTick(function(){t.apply(null,o)})}}});var RC=y((MOe,Jq)=>{var Upe={}.toString;Jq.exports=Array.isArray||function(t){return Upe.call(t)=="[object Array]"}});var MC=y((kOe,Yq)=>{Yq.exports=require("stream")});var hs=y((kC,Zq)=>{var tw=require("buffer"),ds=tw.Buffer;function Qq(t,e){for(var r in t)e[r]=t[r]}ds.from&&ds.alloc&&ds.allocUnsafe&&ds.allocUnsafeSlow?Zq.exports=tw:(Qq(tw,kC),kC.Buffer=Tp);function Tp(t,e,r){return ds(t,e,r)}Qq(ds,Tp);Tp.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return ds(t,e,r)};Tp.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=ds(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Tp.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return ds(t)};Tp.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return tw.SlowBuffer(t)}});var Pi=y(Ur=>{function jpe(t){return Array.isArray?Array.isArray(t):rw(t)==="[object Array]"}Ur.isArray=jpe;function qpe(t){return typeof t=="boolean"}Ur.isBoolean=qpe;function Wpe(t){return t===null}Ur.isNull=Wpe;function Vpe(t){return t==null}Ur.isNullOrUndefined=Vpe;function Gpe(t){return typeof t=="number"}Ur.isNumber=Gpe;function Kpe(t){return typeof t=="string"}Ur.isString=Kpe;function zpe(t){return typeof t=="symbol"}Ur.isSymbol=zpe;function Xpe(t){return t===void 0}Ur.isUndefined=Xpe;function Jpe(t){return rw(t)==="[object RegExp]"}Ur.isRegExp=Jpe;function Ype(t){return typeof t=="object"&&t!==null}Ur.isObject=Ype;function Qpe(t){return rw(t)==="[object Date]"}Ur.isDate=Qpe;function Zpe(t){return rw(t)==="[object Error]"||t instanceof Error}Ur.isError=Zpe;function efe(t){return typeof t=="function"}Ur.isFunction=efe;function tfe(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}Ur.isPrimitive=tfe;Ur.isBuffer=Buffer.isBuffer;function rw(t){return Object.prototype.toString.call(t)}});var eW=y((FOe,OC)=>{typeof Object.create=="function"?OC.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:OC.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var Qt=y((NOe,NC)=>{try{if(FC=require("util"),typeof FC.inherits!="function")throw"";NC.exports=FC.inherits}catch{NC.exports=eW()}var FC});var rW=y((BOe,BC)=>{"use strict";function rfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var tW=hs().Buffer,mm=require("util");function nfe(t,e,r){t.copy(e,r)}BC.exports=function(){function t(){rfe(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},t.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},t.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i},t.prototype.concat=function(r){if(this.length===0)return tW.alloc(0);if(this.length===1)return this.head.data;for(var n=tW.allocUnsafe(r>>>0),i=this.head,o=0;i;)nfe(i.data,n,o),o+=i.data.length,i=i.next;return n},t}();mm&&mm.inspect&&mm.inspect.custom&&(BC.exports.prototype[mm.inspect.custom]=function(){var t=mm.inspect({length:this.length});return this.constructor.name+" "+t})});var UC=y((UOe,oW)=>{"use strict";var nW=fs();function ife(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(!this._writableState||!this._writableState.errorEmitted)&&nW.nextTick(iW,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(o){!e&&o?(nW.nextTick(iW,r,o),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(o)}),this)}function ofe(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function iW(t,e){t.emit("error",e)}oW.exports={destroy:ife,undestroy:ofe}});var nw=y((jOe,sW)=>{sW.exports=require("util").deprecate});var qC=y((qOe,hW)=>{"use strict";var ic=fs();hW.exports=Bt;function uW(t){var e=this;this.next=null,this.entry=null,this.finish=function(){Afe(e,t)}}var sfe=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:ic.nextTick,$p;Bt.WritableState=Hm;var cW=Object.create(Pi());cW.inherits=Qt();var afe={deprecate:nw()},lW=MC(),ow=hs().Buffer,ufe=global.Uint8Array||function(){};function cfe(t){return ow.from(t)}function lfe(t){return ow.isBuffer(t)||t instanceof ufe}var pW=UC();cW.inherits(Bt,lW);function pfe(){}function Hm(t,e){$p=$p||oc(),t=t||{};var r=e instanceof $p;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,i=t.writableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=t.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){yfe(e,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new uW(this)}Hm.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(Hm.prototype,"buffer",{get:afe.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var iw;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(iw=Function.prototype[Symbol.hasInstance],Object.defineProperty(Bt,Symbol.hasInstance,{value:function(t){return iw.call(this,t)?!0:this!==Bt?!1:t&&t._writableState instanceof Hm}})):iw=function(t){return t instanceof this};function Bt(t){if($p=$p||oc(),!iw.call(Bt,this)&&!(this instanceof $p))return new Bt(t);this._writableState=new Hm(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),lW.call(this)}Bt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function ffe(t,e){var r=new Error("write after end");t.emit("error",r),ic.nextTick(e,r)}function dfe(t,e,r,n){var i=!0,o=!1;return r===null?o=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!e.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),ic.nextTick(n,o),i=!1),i}Bt.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&lfe(t);return o&&!ow.isBuffer(t)&&(t=cfe(t)),typeof e=="function"&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=pfe),n.ended?ffe(this,r):(o||dfe(this,n,t,r))&&(n.pendingcb++,i=mfe(this,n,o,t,e,r)),i};Bt.prototype.cork=function(){var t=this._writableState;t.corked++};Bt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.finished&&!t.bufferProcessing&&t.bufferedRequest&&fW(this,t))};Bt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function hfe(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=ow.from(e,r)),e}Object.defineProperty(Bt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function mfe(t,e,r,n,i,o){if(!r){var s=hfe(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else jC(t,e,!1,a,n,i,o);return u}function jC(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function gfe(t,e,r,n,i){--e.pendingcb,r?(ic.nextTick(i,n),ic.nextTick(gm,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(i(n),t._writableState.errorEmitted=!0,t.emit("error",n),gm(t,e))}function Hfe(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function yfe(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(Hfe(r),e)gfe(t,r,n,e,i);else{var o=dW(r);!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&fW(t,r),n?sfe(aW,t,r,o,i):aW(t,r,o,i)}}function aW(t,e,r,n){r||vfe(t,e),e.pendingcb--,n(),gm(t,e)}function vfe(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function fW(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)i[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,jC(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new uW(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,l=r.callback,p=e.objectMode?1:u.length;if(jC(t,e,!1,p,u,c,l),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}Bt.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))};Bt.prototype._writev=null;Bt.prototype.end=function(t,e,r){var n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&_fe(this,n,r)};function dW(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function bfe(t,e){t._final(function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),gm(t,e)})}function wfe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"?(e.pendingcb++,e.finalCalled=!0,ic.nextTick(bfe,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function gm(t,e){var r=dW(e);return r&&(wfe(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"))),r}function _fe(t,e,r){e.ending=!0,gm(t,e),r&&(e.finished?ic.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function Afe(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}Object.defineProperty(Bt.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}});Bt.prototype.destroy=pW.destroy;Bt.prototype._undestroy=pW.undestroy;Bt.prototype._destroy=function(t,e){this.end(),e(t)}});var oc=y((WOe,yW)=>{"use strict";var mW=fs(),Ife=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};yW.exports=ms;var gW=Object.create(Pi());gW.inherits=Qt();var HW=GC(),VC=qC();gW.inherits(ms,HW);for(WC=Ife(VC.prototype),sw=0;sw<WC.length;sw++)aw=WC[sw],ms.prototype[aw]||(ms.prototype[aw]=VC.prototype[aw]);var WC,aw,sw;function ms(t){if(!(this instanceof ms))return new ms(t);HW.call(this,t),VC.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",Sfe)}Object.defineProperty(ms.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Sfe(){this.allowHalfOpen||this._writableState.ended||mW.nextTick(Efe,this)}function Efe(t){t.end()}Object.defineProperty(ms.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=t,this._writableState.destroyed=t)}});ms.prototype._destroy=function(t,e){this.push(null),this.end(),mW.nextTick(e,t)}});var XC=y(bW=>{"use strict";var zC=hs().Buffer,vW=zC.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Dfe(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Cfe(t){var e=Dfe(t);if(typeof e!="string"&&(zC.isEncoding===vW||!vW(t)))throw new Error("Unknown encoding: "+t);return e||t}bW.StringDecoder=ym;function ym(t){this.encoding=Cfe(t);var e;switch(this.encoding){case"utf16le":this.text=Rfe,this.end=Mfe,e=4;break;case"utf8":this.fillLast=Lfe,e=4;break;case"base64":this.text=kfe,this.end=Ofe,e=3;break;default:this.write=Ffe,this.end=Nfe;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=zC.allocUnsafe(e)}ym.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};ym.prototype.end=$fe;ym.prototype.text=Tfe;ym.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function KC(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Pfe(t,e,r){var n=e.length-1;if(n<r)return 0;var i=KC(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=KC(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=KC(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function xfe(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function Lfe(t){var e=this.lastTotal-this.lastNeed,r=xfe(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function Tfe(t,e){var r=Pfe(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function $fe(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function Rfe(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Mfe(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function kfe(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Ofe(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Ffe(t){return t.toString(this.encoding)}function Nfe(t){return t&&t.length?this.write(t):""}});var GC=y((KOe,TW)=>{"use strict";var Mp=fs();TW.exports=lt;var Bfe=RC(),vm;lt.ReadableState=DW;var GOe=require("events").EventEmitter,IW=function(t,e){return t.listeners(e).length},eP=MC(),bm=hs().Buffer,Ufe=global.Uint8Array||function(){};function jfe(t){return bm.from(t)}function qfe(t){return bm.isBuffer(t)||t instanceof Ufe}var SW=Object.create(Pi());SW.inherits=Qt();var JC=require("util"),Ue=void 0;JC&&JC.debuglog?Ue=JC.debuglog("stream"):Ue=function(){};var Wfe=rW(),EW=UC(),Rp;SW.inherits(lt,eP);var YC=["error","close","destroy","pause","resume"];function Vfe(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Bfe(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function DW(t,e){vm=vm||oc(),t=t||{};var r=e instanceof vm;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,i=t.readableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new Wfe,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Rp||(Rp=XC().StringDecoder),this.decoder=new Rp(t.encoding),this.encoding=t.encoding)}function lt(t){if(vm=vm||oc(),!(this instanceof lt))return new lt(t);this._readableState=new DW(t,this),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),eP.call(this)}Object.defineProperty(lt.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}});lt.prototype.destroy=EW.destroy;lt.prototype._undestroy=EW.undestroy;lt.prototype._destroy=function(t,e){this.push(null),e(t)};lt.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=bm.from(t,e),e=""),n=!0),CW(this,t,e,!1,n)};lt.prototype.unshift=function(t){return CW(this,t,null,!0,!1)};function CW(t,e,r,n,i){var o=t._readableState;if(e===null)o.reading=!1,Xfe(t,o);else{var s;i||(s=Gfe(o,e)),s?t.emit("error",s):o.objectMode||e&&e.length>0?(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==bm.prototype&&(e=jfe(e)),n?o.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):QC(t,o,e,!0):o.ended?t.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(e=o.decoder.write(e),o.objectMode||e.length!==0?QC(t,o,e,!1):PW(t,o)):QC(t,o,e,!1))):n||(o.reading=!1)}return Kfe(o)}function QC(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&uw(t)),PW(t,e)}function Gfe(t,e){var r;return!qfe(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function Kfe(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}lt.prototype.isPaused=function(){return this._readableState.flowing===!1};lt.prototype.setEncoding=function(t){return Rp||(Rp=XC().StringDecoder),this._readableState.decoder=new Rp(t),this._readableState.encoding=t,this};var wW=8388608;function zfe(t){return t>=wW?t=wW:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function _W(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=zfe(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}lt.prototype.read=function(t){Ue("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return Ue("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?ZC(this):uw(this),null;if(t=_W(t,e),t===0&&e.ended)return e.length===0&&ZC(this),null;var n=e.needReadable;Ue("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Ue("length less than watermark",n)),e.ended||e.reading?(n=!1,Ue("reading or ended",n)):n&&(Ue("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=_W(r,e)));var i;return t>0?i=xW(t,e):i=null,i===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&ZC(this)),i!==null&&this.emit("data",i),i};function Xfe(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,uw(t)}}function uw(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(Ue("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?Mp.nextTick(AW,t):AW(t))}function AW(t){Ue("emit readable"),t.emit("readable"),tP(t)}function PW(t,e){e.readingMore||(e.readingMore=!0,Mp.nextTick(Jfe,t,e))}function Jfe(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(Ue("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}lt.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))};lt.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,Ue("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,o=i?a:v;n.endEmitted?Mp.nextTick(o):r.once("end",o),t.on("unpipe",s);function s(_,x){Ue("onunpipe"),_===r&&x&&x.hasUnpiped===!1&&(x.hasUnpiped=!0,l())}function a(){Ue("onend"),t.end()}var u=Yfe(r);t.on("drain",u);var c=!1;function l(){Ue("cleanup"),t.removeListener("close",h),t.removeListener("finish",H),t.removeListener("drain",u),t.removeListener("error",m),t.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",v),r.removeListener("data",f),c=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}var p=!1;r.on("data",f);function f(_){Ue("ondata"),p=!1;var x=t.write(_);x===!1&&!p&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&LW(n.pipes,t)!==-1)&&!c&&(Ue("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function m(_){Ue("onerror",_),v(),t.removeListener("error",m),IW(t,"error")===0&&t.emit("error",_)}Vfe(t,"error",m);function h(){t.removeListener("finish",H),v()}t.once("close",h);function H(){Ue("onfinish"),t.removeListener("close",h),v()}t.once("finish",H);function v(){Ue("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(Ue("pipe resume"),r.resume()),t};function Yfe(t){return function(){var e=t._readableState;Ue("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&IW(t,"data")&&(e.flowing=!0,tP(t))}}lt.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var s=LW(e.pipes,t);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};lt.prototype.on=function(t,e){var r=eP.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&uw(this):Mp.nextTick(Qfe,this))}return r};lt.prototype.addListener=lt.prototype.on;function Qfe(t){Ue("readable nexttick read 0"),t.read(0)}lt.prototype.resume=function(){var t=this._readableState;return t.flowing||(Ue("resume"),t.flowing=!0,Zfe(this,t)),this};function Zfe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Mp.nextTick(ede,t,e))}function ede(t,e){e.reading||(Ue("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),tP(t),e.flowing&&!e.reading&&t.read(0)}lt.prototype.pause=function(){return Ue("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ue("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function tP(t){var e=t._readableState;for(Ue("flow",e.flowing);e.flowing&&t.read()!==null;);}lt.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(Ue("wrapped end"),r.decoder&&!r.ended){var s=r.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),t.on("data",function(s){if(Ue("wrapped data"),r.decoder&&(s=r.decoder.write(s)),!(r.objectMode&&s==null)&&!(!r.objectMode&&(!s||!s.length))){var a=e.push(s);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(s){return function(){return t[s].apply(t,arguments)}}(i));for(var o=0;o<YC.length;o++)t.on(YC[o],this.emit.bind(this,YC[o]));return this._read=function(s){Ue("wrapped _read",s),n&&(n=!1,t.resume())},this};Object.defineProperty(lt.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});lt._fromList=xW;function xW(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.head.data:r=e.buffer.concat(e.length),e.buffer.clear()):r=tde(t,e.buffer,e.decoder),r}function tde(t,e,r){var n;return t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):t===e.head.data.length?n=e.shift():n=r?rde(t,e):nde(t,e),n}function rde(t,e){var r=e.head,n=1,i=r.data;for(t-=i.length;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),t-=s,t===0){s===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++n}return e.length-=n,i}function nde(t,e){var r=bm.allocUnsafe(t),n=e.head,i=1;for(n.data.copy(r),t-=n.data.length;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,s),t-=s,t===0){s===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++i}return e.length-=i,r}function ZC(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,Mp.nextTick(ide,e,t))}function ide(t,e){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function LW(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var rP=y((zOe,MW)=>{"use strict";MW.exports=gs;var cw=oc(),RW=Object.create(Pi());RW.inherits=Qt();RW.inherits(gs,cw);function ode(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function gs(t){if(!(this instanceof gs))return new gs(t);cw.call(this,t),this._transformState={afterTransform:ode.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",sde)}function sde(){var t=this;typeof this._flush=="function"?this._flush(function(e,r){$W(t,e,r)}):$W(this,null,null)}gs.prototype.push=function(t,e){return this._transformState.needTransform=!1,cw.prototype.push.call(this,t,e)};gs.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")};gs.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};gs.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};gs.prototype._destroy=function(t,e){var r=this;cw.prototype._destroy.call(this,t,function(n){e(n),r.emit("close")})};function $W(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}});var NW=y((XOe,FW)=>{"use strict";FW.exports=wm;var kW=rP(),OW=Object.create(Pi());OW.inherits=Qt();OW.inherits(wm,kW);function wm(t){if(!(this instanceof wm))return new wm(t);kW.call(this,t)}wm.prototype._transform=function(t,e,r){r(null,t)}});var BW=y((yr,lw)=>{var Po=require("stream");process.env.READABLE_STREAM==="disable"&&Po?(lw.exports=Po,yr=lw.exports=Po.Readable,yr.Readable=Po.Readable,yr.Writable=Po.Writable,yr.Duplex=Po.Duplex,yr.Transform=Po.Transform,yr.PassThrough=Po.PassThrough,yr.Stream=Po):(yr=lw.exports=GC(),yr.Stream=Po||yr,yr.Readable=yr,yr.Writable=qC(),yr.Duplex=oc(),yr.Transform=rP(),yr.PassThrough=NW())});var qW=y((JOe,jW)=>{var UW=BW(),ade=require("util");function ude(t){return!(typeof t.pipe!="function"||!t.readable||typeof t._read!="function"||!t._readableState)}function cde(t,e){if(!ude(e))throw new Error("All input streams must be readable");var r=this;e._buffer=[],e.on("readable",function(){for(var n=e.read();n;)this===t[0]?r.push(n):this._buffer.push(n),n=e.read()}),e.on("end",function(){for(var n=t[0];n&&n._readableState.ended;n=t[0]){for(;n._buffer.length;)r.push(n._buffer.shift());t.shift()}t.length||r.push(null)}),e.on("error",this.emit.bind(this,"error")),t.push(e)}function _m(t,e){if(!(this instanceof _m))return new _m(t,e);if(t=t||[],e=e||{},e.objectMode=!0,UW.call(this,e),Array.isArray(t)||(t=[t]),!t.length)return this.push(null);var r=cde.bind(this,[]);t.forEach(function(n){Array.isArray(n)?n.forEach(r):r(n)})}ade.inherits(_m,UW);_m.prototype._read=function(){};jW.exports=_m});var nP=y((YOe,WW)=>{WW.exports=require("stream")});var GW=y((QOe,iP)=>{"use strict";function lde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var VW=hs().Buffer,Am=require("util");function pde(t,e,r){t.copy(e,r)}iP.exports=function(){function t(){lde(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},t.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},t.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i},t.prototype.concat=function(r){if(this.length===0)return VW.alloc(0);if(this.length===1)return this.head.data;for(var n=VW.allocUnsafe(r>>>0),i=this.head,o=0;i;)pde(i.data,n,o),o+=i.data.length,i=i.next;return n},t}();Am&&Am.inspect&&Am.inspect.custom&&(iP.exports.prototype[Am.inspect.custom]=function(){var t=Am.inspect({length:this.length});return this.constructor.name+" "+t})});var oP=y((ZOe,XW)=>{"use strict";var KW=fs();function fde(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(!this._writableState||!this._writableState.errorEmitted)&&KW.nextTick(zW,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(o){!e&&o?(KW.nextTick(zW,r,o),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(o)}),this)}function dde(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function zW(t,e){t.emit("error",e)}XW.exports={destroy:fde,undestroy:dde}});var aP=y((eFe,n8)=>{"use strict";var sc=fs();n8.exports=Ut;function YW(t){var e=this;this.next=null,this.entry=null,this.finish=function(){Lde(e,t)}}var hde=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:sc.nextTick,kp;Ut.WritableState=Sm;var QW=Pi();QW.inherits=Qt();var mde={deprecate:nw()},ZW=nP(),fw=hs().Buffer,gde=global.Uint8Array||function(){};function Hde(t){return fw.from(t)}function yde(t){return fw.isBuffer(t)||t instanceof gde}var e8=oP();QW.inherits(Ut,ZW);function vde(){}function Sm(t,e){kp=kp||ac(),t=t||{};var r=e instanceof kp;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,i=t.writableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=t.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){Ede(e,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new YW(this)}Sm.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(Sm.prototype,"buffer",{get:mde.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var pw;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(pw=Function.prototype[Symbol.hasInstance],Object.defineProperty(Ut,Symbol.hasInstance,{value:function(t){return pw.call(this,t)?!0:this!==Ut?!1:t&&t._writableState instanceof Sm}})):pw=function(t){return t instanceof this};function Ut(t){if(kp=kp||ac(),!pw.call(Ut,this)&&!(this instanceof kp))return new Ut(t);this._writableState=new Sm(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),ZW.call(this)}Ut.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function bde(t,e){var r=new Error("write after end");t.emit("error",r),sc.nextTick(e,r)}function wde(t,e,r,n){var i=!0,o=!1;return r===null?o=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!e.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),sc.nextTick(n,o),i=!1),i}Ut.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&yde(t);return o&&!fw.isBuffer(t)&&(t=Hde(t)),typeof e=="function"&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=vde),n.ended?bde(this,r):(o||wde(this,n,t,r))&&(n.pendingcb++,i=Ade(this,n,o,t,e,r)),i};Ut.prototype.cork=function(){var t=this._writableState;t.corked++};Ut.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.finished&&!t.bufferProcessing&&t.bufferedRequest&&t8(this,t))};Ut.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function _de(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=fw.from(e,r)),e}Object.defineProperty(Ut.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Ade(t,e,r,n,i,o){if(!r){var s=_de(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else sP(t,e,!1,a,n,i,o);return u}function sP(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function Ide(t,e,r,n,i){--e.pendingcb,r?(sc.nextTick(i,n),sc.nextTick(Im,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(i(n),t._writableState.errorEmitted=!0,t.emit("error",n),Im(t,e))}function Sde(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function Ede(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(Sde(r),e)Ide(t,r,n,e,i);else{var o=r8(r);!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&t8(t,r),n?hde(JW,t,r,o,i):JW(t,r,o,i)}}function JW(t,e,r,n){r||Dde(t,e),e.pendingcb--,n(),Im(t,e)}function Dde(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function t8(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)i[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,sP(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new YW(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,l=r.callback,p=e.objectMode?1:u.length;if(sP(t,e,!1,p,u,c,l),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}Ut.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))};Ut.prototype._writev=null;Ut.prototype.end=function(t,e,r){var n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&xde(this,n,r)};function r8(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function Cde(t,e){t._final(function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),Im(t,e)})}function Pde(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"?(e.pendingcb++,e.finalCalled=!0,sc.nextTick(Cde,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Im(t,e){var r=r8(e);return r&&(Pde(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"))),r}function xde(t,e,r){e.ending=!0,Im(t,e),r&&(e.finished?sc.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function Lde(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}Object.defineProperty(Ut.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}});Ut.prototype.destroy=e8.destroy;Ut.prototype._undestroy=e8.undestroy;Ut.prototype._destroy=function(t,e){this.end(),e(t)}});var ac=y((tFe,a8)=>{"use strict";var i8=fs(),Tde=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};a8.exports=Hs;var o8=Pi();o8.inherits=Qt();var s8=lP(),cP=aP();o8.inherits(Hs,s8);for(uP=Tde(cP.prototype),dw=0;dw<uP.length;dw++)hw=uP[dw],Hs.prototype[hw]||(Hs.prototype[hw]=cP.prototype[hw]);var uP,hw,dw;function Hs(t){if(!(this instanceof Hs))return new Hs(t);s8.call(this,t),cP.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",$de)}Object.defineProperty(Hs.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function $de(){this.allowHalfOpen||this._writableState.ended||i8.nextTick(Rde,this)}function Rde(t){t.end()}Object.defineProperty(Hs.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=t,this._writableState.destroyed=t)}});Hs.prototype._destroy=function(t,e){this.push(null),this.end(),i8.nextTick(e,t)}});var dP=y(c8=>{"use strict";var fP=hs().Buffer,u8=fP.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Mde(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function kde(t){var e=Mde(t);if(typeof e!="string"&&(fP.isEncoding===u8||!u8(t)))throw new Error("Unknown encoding: "+t);return e||t}c8.StringDecoder=Em;function Em(t){this.encoding=kde(t);var e;switch(this.encoding){case"utf16le":this.text=jde,this.end=qde,e=4;break;case"utf8":this.fillLast=Nde,e=4;break;case"base64":this.text=Wde,this.end=Vde,e=3;break;default:this.write=Gde,this.end=Kde;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=fP.allocUnsafe(e)}Em.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Em.prototype.end=Ude;Em.prototype.text=Bde;Em.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function pP(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Ode(t,e,r){var n=e.length-1;if(n<r)return 0;var i=pP(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=pP(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=pP(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function Fde(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function Nde(t){var e=this.lastTotal-this.lastNeed,r=Fde(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function Bde(t,e){var r=Ode(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function Ude(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function jde(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function qde(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function Wde(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Vde(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Gde(t){return t.toString(this.encoding)}function Kde(t){return t&&t.length?this.write(t):""}});var lP=y((iFe,w8)=>{"use strict";var Fp=fs();w8.exports=pt;var zde=RC(),Dm;pt.ReadableState=g8;var nFe=require("events").EventEmitter,d8=function(t,e){return t.listeners(e).length},yP=nP(),Cm=hs().Buffer,Xde=global.Uint8Array||function(){};function Jde(t){return Cm.from(t)}function Yde(t){return Cm.isBuffer(t)||t instanceof Xde}var h8=Pi();h8.inherits=Qt();var hP=require("util"),je=void 0;hP&&hP.debuglog?je=hP.debuglog("stream"):je=function(){};var Qde=GW(),m8=oP(),Op;h8.inherits(pt,yP);var mP=["error","close","destroy","pause","resume"];function Zde(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):zde(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function g8(t,e){Dm=Dm||ac(),t=t||{};var r=e instanceof Dm;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,i=t.readableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new Qde,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Op||(Op=dP().StringDecoder),this.decoder=new Op(t.encoding),this.encoding=t.encoding)}function pt(t){if(Dm=Dm||ac(),!(this instanceof pt))return new pt(t);this._readableState=new g8(t,this),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),yP.call(this)}Object.defineProperty(pt.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}});pt.prototype.destroy=m8.destroy;pt.prototype._undestroy=m8.undestroy;pt.prototype._destroy=function(t,e){this.push(null),e(t)};pt.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=Cm.from(t,e),e=""),n=!0),H8(this,t,e,!1,n)};pt.prototype.unshift=function(t){return H8(this,t,null,!0,!1)};function H8(t,e,r,n,i){var o=t._readableState;if(e===null)o.reading=!1,nhe(t,o);else{var s;i||(s=ehe(o,e)),s?t.emit("error",s):o.objectMode||e&&e.length>0?(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==Cm.prototype&&(e=Jde(e)),n?o.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):gP(t,o,e,!0):o.ended?t.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(e=o.decoder.write(e),o.objectMode||e.length!==0?gP(t,o,e,!1):y8(t,o)):gP(t,o,e,!1))):n||(o.reading=!1)}return the(o)}function gP(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&mw(t)),y8(t,e)}function ehe(t,e){var r;return!Yde(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function the(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}pt.prototype.isPaused=function(){return this._readableState.flowing===!1};pt.prototype.setEncoding=function(t){return Op||(Op=dP().StringDecoder),this._readableState.decoder=new Op(t),this._readableState.encoding=t,this};var l8=8388608;function rhe(t){return t>=l8?t=l8:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function p8(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=rhe(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}pt.prototype.read=function(t){je("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return je("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?HP(this):mw(this),null;if(t=p8(t,e),t===0&&e.ended)return e.length===0&&HP(this),null;var n=e.needReadable;je("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,je("length less than watermark",n)),e.ended||e.reading?(n=!1,je("reading or ended",n)):n&&(je("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=p8(r,e)));var i;return t>0?i=v8(t,e):i=null,i===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&HP(this)),i!==null&&this.emit("data",i),i};function nhe(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,mw(t)}}function mw(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(je("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?Fp.nextTick(f8,t):f8(t))}function f8(t){je("emit readable"),t.emit("readable"),vP(t)}function y8(t,e){e.readingMore||(e.readingMore=!0,Fp.nextTick(ihe,t,e))}function ihe(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(je("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}pt.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))};pt.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,je("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,o=i?a:v;n.endEmitted?Fp.nextTick(o):r.once("end",o),t.on("unpipe",s);function s(_,x){je("onunpipe"),_===r&&x&&x.hasUnpiped===!1&&(x.hasUnpiped=!0,l())}function a(){je("onend"),t.end()}var u=ohe(r);t.on("drain",u);var c=!1;function l(){je("cleanup"),t.removeListener("close",h),t.removeListener("finish",H),t.removeListener("drain",u),t.removeListener("error",m),t.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",v),r.removeListener("data",f),c=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}var p=!1;r.on("data",f);function f(_){je("ondata"),p=!1;var x=t.write(_);x===!1&&!p&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&b8(n.pipes,t)!==-1)&&!c&&(je("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function m(_){je("onerror",_),v(),t.removeListener("error",m),d8(t,"error")===0&&t.emit("error",_)}Zde(t,"error",m);function h(){t.removeListener("finish",H),v()}t.once("close",h);function H(){je("onfinish"),t.removeListener("close",h),v()}t.once("finish",H);function v(){je("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(je("pipe resume"),r.resume()),t};function ohe(t){return function(){var e=t._readableState;je("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&d8(t,"data")&&(e.flowing=!0,vP(t))}}pt.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var s=b8(e.pipes,t);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};pt.prototype.on=function(t,e){var r=yP.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&mw(this):Fp.nextTick(she,this))}return r};pt.prototype.addListener=pt.prototype.on;function she(t){je("readable nexttick read 0"),t.read(0)}pt.prototype.resume=function(){var t=this._readableState;return t.flowing||(je("resume"),t.flowing=!0,ahe(this,t)),this};function ahe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Fp.nextTick(uhe,t,e))}function uhe(t,e){e.reading||(je("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),vP(t),e.flowing&&!e.reading&&t.read(0)}pt.prototype.pause=function(){return je("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(je("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function vP(t){var e=t._readableState;for(je("flow",e.flowing);e.flowing&&t.read()!==null;);}pt.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(je("wrapped end"),r.decoder&&!r.ended){var s=r.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),t.on("data",function(s){if(je("wrapped data"),r.decoder&&(s=r.decoder.write(s)),!(r.objectMode&&s==null)&&!(!r.objectMode&&(!s||!s.length))){var a=e.push(s);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(s){return function(){return t[s].apply(t,arguments)}}(i));for(var o=0;o<mP.length;o++)t.on(mP[o],this.emit.bind(this,mP[o]));return this._read=function(s){je("wrapped _read",s),n&&(n=!1,t.resume())},this};Object.defineProperty(pt.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});pt._fromList=v8;function v8(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.head.data:r=e.buffer.concat(e.length),e.buffer.clear()):r=che(t,e.buffer,e.decoder),r}function che(t,e,r){var n;return t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):t===e.head.data.length?n=e.shift():n=r?lhe(t,e):phe(t,e),n}function lhe(t,e){var r=e.head,n=1,i=r.data;for(t-=i.length;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),t-=s,t===0){s===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++n}return e.length-=n,i}function phe(t,e){var r=Cm.allocUnsafe(t),n=e.head,i=1;for(n.data.copy(r),t-=n.data.length;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,s),t-=s,t===0){s===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++i}return e.length-=i,r}function HP(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,Fp.nextTick(fhe,e,t))}function fhe(t,e){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function b8(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var bP=y((oFe,I8)=>{"use strict";I8.exports=ys;var gw=ac(),A8=Pi();A8.inherits=Qt();A8.inherits(ys,gw);function dhe(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function ys(t){if(!(this instanceof ys))return new ys(t);gw.call(this,t),this._transformState={afterTransform:dhe.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",hhe)}function hhe(){var t=this;typeof this._flush=="function"?this._flush(function(e,r){_8(t,e,r)}):_8(this,null,null)}ys.prototype.push=function(t,e){return this._transformState.needTransform=!1,gw.prototype.push.call(this,t,e)};ys.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")};ys.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};ys.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};ys.prototype._destroy=function(t,e){var r=this;gw.prototype._destroy.call(this,t,function(n){e(n),r.emit("close")})};function _8(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}});var C8=y((sFe,D8)=>{"use strict";D8.exports=Pm;var S8=bP(),E8=Pi();E8.inherits=Qt();E8.inherits(Pm,S8);function Pm(t){if(!(this instanceof Pm))return new Pm(t);S8.call(this,t)}Pm.prototype._transform=function(t,e,r){r(null,t)}});var P8=y((vr,Hw)=>{var xo=require("stream");process.env.READABLE_STREAM==="disable"&&xo?(Hw.exports=xo,vr=Hw.exports=xo.Readable,vr.Readable=xo.Readable,vr.Writable=xo.Writable,vr.Duplex=xo.Duplex,vr.Transform=xo.Transform,vr.PassThrough=xo.PassThrough,vr.Stream=xo):(vr=Hw.exports=lP(),vr.Stream=xo||vr,vr.Readable=vr,vr.Writable=aP(),vr.Duplex=ac(),vr.Transform=bP(),vr.PassThrough=C8())});var wP=y((aFe,x8)=>{x8.exports=ghe;var mhe=Object.prototype.hasOwnProperty;function ghe(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)mhe.call(r,n)&&(t[n]=r[n])}return t}});var R8=y((uFe,yw)=>{var L8=P8().Transform,T8=require("util").inherits,$8=wP();function Np(t){L8.call(this,t),this._destroyed=!1}T8(Np,L8);Np.prototype.destroy=function(t){if(!this._destroyed){this._destroyed=!0;var e=this;process.nextTick(function(){t&&e.emit("error",t),e.emit("close")})}};function Hhe(t,e,r){r(null,t)}function _P(t){return function(e,r,n){return typeof e=="function"&&(n=r,r=e,e={}),typeof r!="function"&&(r=Hhe),typeof n!="function"&&(n=null),t(e,r,n)}}yw.exports=_P(function(t,e,r){var n=new Np(t);return n._transform=e,r&&(n._flush=r),n});yw.exports.ctor=_P(function(t,e,r){function n(i){if(!(this instanceof n))return new n(i);this.options=$8(t,i),Np.call(this,this.options)}return T8(n,Np),n.prototype._transform=e,r&&(n.prototype._flush=r),n});yw.exports.obj=_P(function(t,e,r){var n=new Np($8({objectMode:!0,highWaterMark:16},t));return n._transform=e,r&&(n._flush=r),n})});var O8=y((cFe,xm)=>{"use strict";xm.exports=k8;xm.exports.ctor=AP;xm.exports.objCtor=vhe;xm.exports.obj=bhe;var yhe=R8(),M8=wP();function AP(t,e){typeof t=="function"&&(e=t,t={});var r=yhe.ctor(t,function(n,i,o){this.options.wantStrings&&(n=n.toString());try{return e.call(this,n,this._index++)&&this.push(n),o()}catch(s){return o(s)}});return r.prototype._index=0,r}function vhe(t,e){return typeof t=="function"&&(e=t,t={}),t=M8({objectMode:!0,highWaterMark:16},t),AP(t,e)}function k8(t,e){return AP(t,e)()}function bhe(t,e){return typeof t=="function"&&(e=t,t={}),t=M8({objectMode:!0,highWaterMark:16},t),k8(t,e)}});var N8=y((lFe,F8)=>{F8.exports=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=e.space||"";typeof r=="number"&&(r=Array(r+1).join(" "));var n=typeof e.cycles=="boolean"?e.cycles:!1,i=e.replacer||function(a,u){return u},o=e.cmp&&function(a){return function(u){return function(c,l){var p={key:c,value:u[c]},f={key:l,value:u[l]};return a(p,f)}}}(e.cmp),s=[];return function a(u,c,l,p){var f=r?`
`+new Array(p+1).join(r):"",m=r?": ":":";if(l&&l.toJSON&&typeof l.toJSON=="function"&&(l=l.toJSON()),l=i.call(u,c,l),l!==void 0){if(typeof l!="object"||l===null)return JSON.stringify(l);if(whe(l)){for(var h=[],H=0;H<l.length;H++){var v=a(l,H,l[H],p+1)||JSON.stringify(null);h.push(f+r+v)}return"["+h.join(",")+f+"]"}else{if(s.indexOf(l)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}else s.push(l);for(var _=_he(l).sort(o&&o(l)),h=[],H=0;H<_.length;H++){var c=_[H],x=a(l,c,l[c],p+1);if(x){var k=JSON.stringify(c)+m+x;h.push(f+r+k)}}return s.splice(s.indexOf(l),1),"{"+h.join(",")+f+"}"}}}({"":t},"",t,0)};var whe=Array.isArray||function(t){return{}.toString.call(t)==="[object Array]"},_he=Object.keys||function(t){var e=Object.prototype.hasOwnProperty||function(){return!0},r=[];for(var n in t)e.call(t,n)&&r.push(n);return r}});var U8=y((pFe,B8)=>{"use strict";var Ahe=O8().obj,Ihe=N8(),IP;typeof global.Set=="function"?IP=global.Set:IP=function(){this.keys=[],this.has=function(t){return this.keys.indexOf(t)!==-1},this.add=function(t){this.keys.push(t)}};function She(t){return function(e){return e[t]}}B8.exports=Ehe;function Ehe(t,e){e=e||new IP;var r=Ihe;return typeof t=="string"?r=She(t):typeof t=="function"&&(r=t),Ahe(function(n){var i=r(n);return e.has(i)?!1:(e.add(i),!0)})}});var W8=y((fFe,q8)=>{var Dhe=gp(),Che=bb(),SP=require("fs"),Lm=function(){},Phe=/^v?\.0/.test(process.version),vw=function(t){return typeof t=="function"},xhe=function(t){return!Phe||!SP?!1:(t instanceof(SP.ReadStream||Lm)||t instanceof(SP.WriteStream||Lm))&&vw(t.close)},Lhe=function(t){return t.setHeader&&vw(t.abort)},The=function(t,e,r,n){n=Dhe(n);var i=!1;t.on("close",function(){i=!0}),Che(t,{readable:e,writable:r},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,xhe(t))return t.close(Lm);if(Lhe(t))return t.abort();if(vw(t.destroy))return t.destroy();n(s||new Error("stream was destroyed"))}}},j8=function(t){t()},$he=function(t,e){return t.pipe(e)},Rhe=function(){var t=Array.prototype.slice.call(arguments),e=vw(t[t.length-1]||Lm)&&t.pop()||Lm;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var r,n=t.map(function(i,o){var s=o<t.length-1,a=o>0;return The(i,s,a,function(u){r||(r=u),u&&n.forEach(j8),!s&&(n.forEach(j8),e(r))})});return t.reduce($he)};q8.exports=Rhe});var EP=y((dFe,V8)=>{V8.exports=require("stream")});var X8=y((hFe,z8)=>{"use strict";function G8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Mhe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?G8(Object(r),!0).forEach(function(n){khe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function khe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ohe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Fhe(t,e,r){return e&&K8(t.prototype,e),r&&K8(t,r),t}var Nhe=require("buffer"),bw=Nhe.Buffer,Bhe=require("util"),DP=Bhe.inspect,Uhe=DP&&DP.custom||"inspect";function jhe(t,e,r){bw.prototype.copy.call(t,e,r)}z8.exports=function(){function t(){Ohe(this,t),this.head=null,this.tail=null,this.length=0}return Fhe(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return bw.alloc(0);for(var n=bw.allocUnsafe(r>>>0),i=this.head,o=0;i;)jhe(i.data,n,o),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,o=n.data;for(r-=o.length;n=n.next;){var s=n.data,a=r>s.length?s.length:r;if(a===s.length?o+=s:o+=s.slice(0,r),r-=a,r===0){a===s.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(a));break}++i}return this.length-=i,o}},{key:"_getBuffer",value:function(r){var n=bw.allocUnsafe(r),i=this.head,o=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var s=i.data,a=r>s.length?s.length:r;if(s.copy(n,n.length-r,0,a),r-=a,r===0){a===s.length?(++o,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=s.slice(a));break}++o}return this.length-=o,n}},{key:Uhe,value:function(r,n){return DP(this,Mhe({},n,{depth:0,customInspect:!1}))}}]),t}()});var PP=y((mFe,Y8)=>{"use strict";function qhe(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(CP,this,t)):process.nextTick(CP,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(o){!e&&o?r._writableState?r._writableState.errorEmitted?process.nextTick(ww,r):(r._writableState.errorEmitted=!0,process.nextTick(J8,r,o)):process.nextTick(J8,r,o):e?(process.nextTick(ww,r),e(o)):process.nextTick(ww,r)}),this)}function J8(t,e){CP(t,e),ww(t)}function ww(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function Whe(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function CP(t,e){t.emit("error",e)}function Vhe(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}Y8.exports={destroy:qhe,undestroy:Whe,errorOrDestroy:Vhe}});var xa=y((gFe,eV)=>{"use strict";var Z8={};function ii(t,e,r){r||(r=Error);function n(o,s,a){return typeof e=="string"?e:e(o,s,a)}class i extends r{constructor(s,a,u){super(n(s,a,u))}}i.prototype.name=r.name,i.prototype.code=t,Z8[t]=i}function Q8(t,e){if(Array.isArray(t)){let r=t.length;return t=t.map(n=>String(n)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function Ghe(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function Khe(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function zhe(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}ii("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);ii("ERR_INVALID_ARG_TYPE",function(t,e,r){let n;typeof e=="string"&&Ghe(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";let i;if(Khe(t," argument"))i=`The ${t} ${n} ${Q8(e,"type")}`;else{let o=zhe(t,".")?"property":"argument";i=`The "${t}" ${o} ${n} ${Q8(e,"type")}`}return i+=`. Received type ${typeof r}`,i},TypeError);ii("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");ii("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});ii("ERR_STREAM_PREMATURE_CLOSE","Premature close");ii("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});ii("ERR_MULTIPLE_CALLBACK","Callback called multiple times");ii("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");ii("ERR_STREAM_WRITE_AFTER_END","write after end");ii("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ii("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);ii("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");eV.exports.codes=Z8});var xP=y((HFe,tV)=>{"use strict";var Xhe=xa().codes.ERR_INVALID_OPT_VALUE;function Jhe(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function Yhe(t,e,r,n){var i=Jhe(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var o=n?r:"highWaterMark";throw new Xhe(o,i)}return Math.floor(i)}return t.objectMode?16:16*1024}tV.exports={getHighWaterMark:Yhe}});var $P=y((yFe,aV)=>{"use strict";aV.exports=Dt;function nV(t){var e=this;this.next=null,this.entry=null,this.finish=function(){Ime(e,t)}}var Bp;Dt.WritableState=$m;var Qhe={deprecate:nw()},iV=EP(),Aw=require("buffer").Buffer,Zhe=global.Uint8Array||function(){};function eme(t){return Aw.from(t)}function tme(t){return Aw.isBuffer(t)||t instanceof Zhe}var TP=PP(),rme=xP(),nme=rme.getHighWaterMark,La=xa().codes,ime=La.ERR_INVALID_ARG_TYPE,ome=La.ERR_METHOD_NOT_IMPLEMENTED,sme=La.ERR_MULTIPLE_CALLBACK,ame=La.ERR_STREAM_CANNOT_PIPE,ume=La.ERR_STREAM_DESTROYED,cme=La.ERR_STREAM_NULL_VALUES,lme=La.ERR_STREAM_WRITE_AFTER_END,pme=La.ERR_UNKNOWN_ENCODING,Up=TP.errorOrDestroy;Qt()(Dt,iV);function fme(){}function $m(t,e,r){Bp=Bp||uc(),t=t||{},typeof r!="boolean"&&(r=e instanceof Bp),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=nme(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){vme(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new nV(this)}$m.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty($m.prototype,"buffer",{get:Qhe.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var _w;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(_w=Function.prototype[Symbol.hasInstance],Object.defineProperty(Dt,Symbol.hasInstance,{value:function(e){return _w.call(this,e)?!0:this!==Dt?!1:e&&e._writableState instanceof $m}})):_w=function(e){return e instanceof this};function Dt(t){Bp=Bp||uc();var e=this instanceof Bp;if(!e&&!_w.call(Dt,this))return new Dt(t);this._writableState=new $m(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),iV.call(this)}Dt.prototype.pipe=function(){Up(this,new ame)};function dme(t,e){var r=new lme;Up(t,r),process.nextTick(e,r)}function hme(t,e,r,n){var i;return r===null?i=new cme:typeof r!="string"&&!e.objectMode&&(i=new ime("chunk",["string","Buffer"],r)),i?(Up(t,i),process.nextTick(n,i),!1):!0}Dt.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&tme(t);return o&&!Aw.isBuffer(t)&&(t=eme(t)),typeof e=="function"&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=fme),n.ending?dme(this,r):(o||hme(this,n,t,r))&&(n.pendingcb++,i=gme(this,n,o,t,e,r)),i};Dt.prototype.cork=function(){this._writableState.corked++};Dt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&oV(this,t))};Dt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new pme(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(Dt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function mme(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Aw.from(e,r)),e}Object.defineProperty(Dt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function gme(t,e,r,n,i,o){if(!r){var s=mme(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else LP(t,e,!1,a,n,i,o);return u}function LP(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new ume("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function Hme(t,e,r,n,i){--e.pendingcb,r?(process.nextTick(i,n),process.nextTick(Tm,t,e),t._writableState.errorEmitted=!0,Up(t,n)):(i(n),t._writableState.errorEmitted=!0,Up(t,n),Tm(t,e))}function yme(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function vme(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new sme;if(yme(r),e)Hme(t,r,n,e,i);else{var o=sV(r)||t.destroyed;!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&oV(t,r),n?process.nextTick(rV,t,r,o,i):rV(t,r,o,i)}}function rV(t,e,r,n){r||bme(t,e),e.pendingcb--,n(),Tm(t,e)}function bme(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function oV(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)i[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,LP(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new nV(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,l=r.callback,p=e.objectMode?1:u.length;if(LP(t,e,!1,p,u,c,l),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}Dt.prototype._write=function(t,e,r){r(new ome("_write()"))};Dt.prototype._writev=null;Dt.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||Ame(this,n,r),this};Object.defineProperty(Dt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function sV(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function wme(t,e){t._final(function(r){e.pendingcb--,r&&Up(t,r),e.prefinished=!0,t.emit("prefinish"),Tm(t,e)})}function _me(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(wme,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Tm(t,e){var r=sV(e);if(r&&(_me(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function Ame(t,e,r){e.ending=!0,Tm(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function Ime(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(Dt.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});Dt.prototype.destroy=TP.destroy;Dt.prototype._undestroy=TP.undestroy;Dt.prototype._destroy=function(t,e){e(t)}});var uc=y((vFe,cV)=>{"use strict";var Sme=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};cV.exports=Lo;var uV=kP(),MP=$P();Qt()(Lo,uV);for(RP=Sme(MP.prototype),Iw=0;Iw<RP.length;Iw++)Sw=RP[Iw],Lo.prototype[Sw]||(Lo.prototype[Sw]=MP.prototype[Sw]);var RP,Sw,Iw;function Lo(t){if(!(this instanceof Lo))return new Lo(t);uV.call(this,t),MP.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",Eme)))}Object.defineProperty(Lo.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(Lo.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Lo.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Eme(){this._writableState.ended||process.nextTick(Dme,this)}function Dme(t){t.end()}Object.defineProperty(Lo.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var fV=y((OP,pV)=>{var Ew=require("buffer"),To=Ew.Buffer;function lV(t,e){for(var r in t)e[r]=t[r]}To.from&&To.alloc&&To.allocUnsafe&&To.allocUnsafeSlow?pV.exports=Ew:(lV(Ew,OP),OP.Buffer=cc);function cc(t,e,r){return To(t,e,r)}cc.prototype=Object.create(To.prototype);lV(To,cc);cc.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return To(t,e,r)};cc.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=To(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};cc.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return To(t)};cc.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ew.SlowBuffer(t)}});var BP=y(hV=>{"use strict";var NP=fV().Buffer,dV=NP.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Cme(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Pme(t){var e=Cme(t);if(typeof e!="string"&&(NP.isEncoding===dV||!dV(t)))throw new Error("Unknown encoding: "+t);return e||t}hV.StringDecoder=Rm;function Rm(t){this.encoding=Pme(t);var e;switch(this.encoding){case"utf16le":this.text=Mme,this.end=kme,e=4;break;case"utf8":this.fillLast=Tme,e=4;break;case"base64":this.text=Ome,this.end=Fme,e=3;break;default:this.write=Nme,this.end=Bme;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=NP.allocUnsafe(e)}Rm.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Rm.prototype.end=Rme;Rm.prototype.text=$me;Rm.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function FP(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function xme(t,e,r){var n=e.length-1;if(n<r)return 0;var i=FP(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=FP(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=FP(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function Lme(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function Tme(t){var e=this.lastTotal-this.lastNeed,r=Lme(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function $me(t,e){var r=xme(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function Rme(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function Mme(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function kme(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function Ome(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Fme(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Nme(t){return t.toString(this.encoding)}function Bme(t){return t&&t.length?this.write(t):""}});var Dw=y((wFe,HV)=>{"use strict";var mV=xa().codes.ERR_STREAM_PREMATURE_CLOSE;function Ume(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function jme(){}function qme(t){return t.setHeader&&typeof t.abort=="function"}function gV(t,e,r){if(typeof e=="function")return gV(t,null,e);e||(e={}),r=Ume(r||jme);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,o=function(){t.writable||a()},s=t._writableState&&t._writableState.finished,a=function(){i=!1,s=!0,n||r.call(t)},u=t._readableState&&t._readableState.endEmitted,c=function(){n=!1,u=!0,i||r.call(t)},l=function(h){r.call(t,h)},p=function(){var h;if(n&&!u)return(!t._readableState||!t._readableState.ended)&&(h=new mV),r.call(t,h);if(i&&!s)return(!t._writableState||!t._writableState.ended)&&(h=new mV),r.call(t,h)},f=function(){t.req.on("finish",a)};return qme(t)?(t.on("complete",a),t.on("abort",p),t.req?f():t.on("request",f)):i&&!t._writableState&&(t.on("end",o),t.on("close",o)),t.on("end",c),t.on("finish",a),e.error!==!1&&t.on("error",l),t.on("close",p),function(){t.removeListener("complete",a),t.removeListener("abort",p),t.removeListener("request",f),t.req&&t.req.removeListener("finish",a),t.removeListener("end",o),t.removeListener("close",o),t.removeListener("finish",a),t.removeListener("end",c),t.removeListener("error",l),t.removeListener("close",p)}}HV.exports=gV});var vV=y((_Fe,yV)=>{"use strict";var Cw;function Ta(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Wme=Dw(),$a=Symbol("lastResolve"),lc=Symbol("lastReject"),Mm=Symbol("error"),Pw=Symbol("ended"),pc=Symbol("lastPromise"),UP=Symbol("handlePromise"),fc=Symbol("stream");function Ra(t,e){return{value:t,done:e}}function Vme(t){var e=t[$a];if(e!==null){var r=t[fc].read();r!==null&&(t[pc]=null,t[$a]=null,t[lc]=null,e(Ra(r,!1)))}}function Gme(t){process.nextTick(Vme,t)}function Kme(t,e){return function(r,n){t.then(function(){if(e[Pw]){r(Ra(void 0,!0));return}e[UP](r,n)},n)}}var zme=Object.getPrototypeOf(function(){}),Xme=Object.setPrototypeOf((Cw={get stream(){return this[fc]},next:function(){var e=this,r=this[Mm];if(r!==null)return Promise.reject(r);if(this[Pw])return Promise.resolve(Ra(void 0,!0));if(this[fc].destroyed)return new Promise(function(s,a){process.nextTick(function(){e[Mm]?a(e[Mm]):s(Ra(void 0,!0))})});var n=this[pc],i;if(n)i=new Promise(Kme(n,this));else{var o=this[fc].read();if(o!==null)return Promise.resolve(Ra(o,!1));i=new Promise(this[UP])}return this[pc]=i,i}},Ta(Cw,Symbol.asyncIterator,function(){return this}),Ta(Cw,"return",function(){var e=this;return new Promise(function(r,n){e[fc].destroy(null,function(i){if(i){n(i);return}r(Ra(void 0,!0))})})}),Cw),zme),Jme=function(e){var r,n=Object.create(Xme,(r={},Ta(r,fc,{value:e,writable:!0}),Ta(r,$a,{value:null,writable:!0}),Ta(r,lc,{value:null,writable:!0}),Ta(r,Mm,{value:null,writable:!0}),Ta(r,Pw,{value:e._readableState.endEmitted,writable:!0}),Ta(r,UP,{value:function(o,s){var a=n[fc].read();a?(n[pc]=null,n[$a]=null,n[lc]=null,o(Ra(a,!1))):(n[$a]=o,n[lc]=s)},writable:!0}),r));return n[pc]=null,Wme(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var o=n[lc];o!==null&&(n[pc]=null,n[$a]=null,n[lc]=null,o(i)),n[Mm]=i;return}var s=n[$a];s!==null&&(n[pc]=null,n[$a]=null,n[lc]=null,s(Ra(void 0,!0))),n[Pw]=!0}),e.on("readable",Gme.bind(null,n)),n};yV.exports=Jme});var AV=y((AFe,_V)=>{"use strict";function bV(t,e,r,n,i,o,s){try{var a=t[o](s),u=a.value}catch(c){r(c);return}a.done?e(u):Promise.resolve(u).then(n,i)}function Yme(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function s(u){bV(o,n,i,s,a,"next",u)}function a(u){bV(o,n,i,s,a,"throw",u)}s(void 0)})}}function wV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Qme(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wV(Object(r),!0).forEach(function(n){Zme(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Zme(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ege=xa().codes.ERR_INVALID_ARG_TYPE;function tge(t,e,r){var n;if(e&&typeof e.next=="function")n=e;else if(e&&e[Symbol.asyncIterator])n=e[Symbol.asyncIterator]();else if(e&&e[Symbol.iterator])n=e[Symbol.iterator]();else throw new ege("iterable",["Iterable"],e);var i=new t(Qme({objectMode:!0},r)),o=!1;i._read=function(){o||(o=!0,s())};function s(){return a.apply(this,arguments)}function a(){return a=Yme(function*(){try{var u=yield n.next(),c=u.value,l=u.done;l?i.push(null):i.push(yield c)?s():o=!1}catch(p){i.destroy(p)}}),a.apply(this,arguments)}return i}_V.exports=tge});var kP=y((SFe,$V)=>{"use strict";$V.exports=Re;var jp;Re.ReadableState=DV;var IFe=require("events").EventEmitter,EV=function(e,r){return e.listeners(r).length},Om=EP(),xw=require("buffer").Buffer,rge=global.Uint8Array||function(){};function nge(t){return xw.from(t)}function ige(t){return xw.isBuffer(t)||t instanceof rge}var jP=require("util"),De;jP&&jP.debuglog?De=jP.debuglog("stream"):De=function(){};var oge=X8(),XP=PP(),sge=xP(),age=sge.getHighWaterMark,Lw=xa().codes,uge=Lw.ERR_INVALID_ARG_TYPE,cge=Lw.ERR_STREAM_PUSH_AFTER_EOF,lge=Lw.ERR_METHOD_NOT_IMPLEMENTED,pge=Lw.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,qp,qP,WP;Qt()(Re,Om);var km=XP.errorOrDestroy,VP=["error","close","destroy","pause","resume"];function fge(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function DV(t,e,r){jp=jp||uc(),t=t||{},typeof r!="boolean"&&(r=e instanceof jp),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=age(this,t,"readableHighWaterMark",r),this.buffer=new oge,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(qp||(qp=BP().StringDecoder),this.decoder=new qp(t.encoding),this.encoding=t.encoding)}function Re(t){if(jp=jp||uc(),!(this instanceof Re))return new Re(t);var e=this instanceof jp;this._readableState=new DV(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),Om.call(this)}Object.defineProperty(Re.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});Re.prototype.destroy=XP.destroy;Re.prototype._undestroy=XP.undestroy;Re.prototype._destroy=function(t,e){e(t)};Re.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=xw.from(t,e),e=""),n=!0),CV(this,t,e,!1,n)};Re.prototype.unshift=function(t){return CV(this,t,null,!0,!1)};function CV(t,e,r,n,i){De("readableAddChunk",e);var o=t._readableState;if(e===null)o.reading=!1,mge(t,o);else{var s;if(i||(s=dge(o,e)),s)km(t,s);else if(o.objectMode||e&&e.length>0)if(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==xw.prototype&&(e=nge(e)),n)o.endEmitted?km(t,new pge):GP(t,o,e,!0);else if(o.ended)km(t,new cge);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!r?(e=o.decoder.write(e),o.objectMode||e.length!==0?GP(t,o,e,!1):zP(t,o)):GP(t,o,e,!1)}else n||(o.reading=!1,zP(t,o))}return!o.ended&&(o.length<o.highWaterMark||o.length===0)}function GP(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&Tw(t)),zP(t,e)}function dge(t,e){var r;return!ige(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new uge("chunk",["string","Buffer","Uint8Array"],e)),r}Re.prototype.isPaused=function(){return this._readableState.flowing===!1};Re.prototype.setEncoding=function(t){qp||(qp=BP().StringDecoder);var e=new qp(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var IV=1073741824;function hge(t){return t>=IV?t=IV:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function SV(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=hge(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Re.prototype.read=function(t){De("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return De("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?KP(this):Tw(this),null;if(t=SV(t,e),t===0&&e.ended)return e.length===0&&KP(this),null;var n=e.needReadable;De("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,De("length less than watermark",n)),e.ended||e.reading?(n=!1,De("reading or ended",n)):n&&(De("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=SV(r,e)));var i;return t>0?i=LV(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&KP(this)),i!==null&&this.emit("data",i),i};function mge(t,e){if(De("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Tw(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,PV(t)))}}function Tw(t){var e=t._readableState;De("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(De("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(PV,t))}function PV(t){var e=t._readableState;De("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,JP(t)}function zP(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(gge,t,e))}function gge(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(De("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Re.prototype._read=function(t){km(this,new lge("_read()"))};Re.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,De("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,o=i?a:H;n.endEmitted?process.nextTick(o):r.once("end",o),t.on("unpipe",s);function s(v,_){De("onunpipe"),v===r&&_&&_.hasUnpiped===!1&&(_.hasUnpiped=!0,l())}function a(){De("onend"),t.end()}var u=Hge(r);t.on("drain",u);var c=!1;function l(){De("cleanup"),t.removeListener("close",m),t.removeListener("finish",h),t.removeListener("drain",u),t.removeListener("error",f),t.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",H),r.removeListener("data",p),c=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}r.on("data",p);function p(v){De("ondata");var _=t.write(v);De("dest.write",_),_===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&TV(n.pipes,t)!==-1)&&!c&&(De("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function f(v){De("onerror",v),H(),t.removeListener("error",f),EV(t,"error")===0&&km(t,v)}fge(t,"error",f);function m(){t.removeListener("finish",h),H()}t.once("close",m);function h(){De("onfinish"),t.removeListener("close",m),H()}t.once("finish",h);function H(){De("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(De("pipe resume"),r.resume()),t};function Hge(t){return function(){var r=t._readableState;De("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&EV(t,"data")&&(r.flowing=!0,JP(t))}}Re.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=TV(e.pipes,t);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};Re.prototype.on=function(t,e){var r=Om.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,De("on readable",n.length,n.reading),n.length?Tw(this):n.reading||process.nextTick(yge,this)),r};Re.prototype.addListener=Re.prototype.on;Re.prototype.removeListener=function(t,e){var r=Om.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(xV,this),r};Re.prototype.removeAllListeners=function(t){var e=Om.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(xV,this),e};function xV(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function yge(t){De("readable nexttick read 0"),t.read(0)}Re.prototype.resume=function(){var t=this._readableState;return t.flowing||(De("resume"),t.flowing=!t.readableListening,vge(this,t)),t.paused=!1,this};function vge(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(bge,t,e))}function bge(t,e){De("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),JP(t),e.flowing&&!e.reading&&t.read(0)}Re.prototype.pause=function(){return De("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(De("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function JP(t){var e=t._readableState;for(De("flow",e.flowing);e.flowing&&t.read()!==null;);}Re.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(De("wrapped end"),r.decoder&&!r.ended){var s=r.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),t.on("data",function(s){if(De("wrapped data"),r.decoder&&(s=r.decoder.write(s)),!(r.objectMode&&s==null)&&!(!r.objectMode&&(!s||!s.length))){var a=e.push(s);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));for(var o=0;o<VP.length;o++)t.on(VP[o],this.emit.bind(this,VP[o]));return this._read=function(s){De("wrapped _read",s),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(Re.prototype[Symbol.asyncIterator]=function(){return qP===void 0&&(qP=vV()),qP(this)});Object.defineProperty(Re.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Re.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Re.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});Re._fromList=LV;Object.defineProperty(Re.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function LV(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function KP(t){var e=t._readableState;De("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(wge,e,t))}function wge(t,e){if(De("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(Re.from=function(t,e){return WP===void 0&&(WP=AV()),WP(Re,t,e)});function TV(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var YP=y((EFe,MV)=>{"use strict";MV.exports=vs;var $w=xa().codes,_ge=$w.ERR_METHOD_NOT_IMPLEMENTED,Age=$w.ERR_MULTIPLE_CALLBACK,Ige=$w.ERR_TRANSFORM_ALREADY_TRANSFORMING,Sge=$w.ERR_TRANSFORM_WITH_LENGTH_0,Rw=uc();Qt()(vs,Rw);function Ege(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new Age);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function vs(t){if(!(this instanceof vs))return new vs(t);Rw.call(this,t),this._transformState={afterTransform:Ege.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Dge)}function Dge(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){RV(t,e,r)}):RV(this,null,null)}vs.prototype.push=function(t,e){return this._transformState.needTransform=!1,Rw.prototype.push.call(this,t,e)};vs.prototype._transform=function(t,e,r){r(new _ge("_transform()"))};vs.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};vs.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};vs.prototype._destroy=function(t,e){Rw.prototype._destroy.call(this,t,function(r){e(r)})};function RV(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new Sge;if(t._transformState.transforming)throw new Ige;return t.push(null)}});var FV=y((DFe,OV)=>{"use strict";OV.exports=Fm;var kV=YP();Qt()(Fm,kV);function Fm(t){if(!(this instanceof Fm))return new Fm(t);kV.call(this,t)}Fm.prototype._transform=function(t,e,r){r(null,t)}});var qV=y((CFe,jV)=>{"use strict";var QP;function Cge(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var UV=xa().codes,Pge=UV.ERR_MISSING_ARGS,xge=UV.ERR_STREAM_DESTROYED;function NV(t){if(t)throw t}function Lge(t){return t.setHeader&&typeof t.abort=="function"}function Tge(t,e,r,n){n=Cge(n);var i=!1;t.on("close",function(){i=!0}),QP===void 0&&(QP=Dw()),QP(t,{readable:e,writable:r},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,Lge(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(s||new xge("pipe"))}}}function BV(t){t()}function $ge(t,e){return t.pipe(e)}function Rge(t){return!t.length||typeof t[t.length-1]!="function"?NV:t.pop()}function Mge(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=Rge(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Pge("streams");var i,o=e.map(function(s,a){var u=a<e.length-1,c=a>0;return Tge(s,u,c,function(l){i||(i=l),l&&o.forEach(BV),!u&&(o.forEach(BV),n(i))})});return e.reduce($ge)}jV.exports=Mge});var ZP=y((oi,Bm)=>{var Nm=require("stream");process.env.READABLE_STREAM==="disable"&&Nm?(Bm.exports=Nm.Readable,Object.assign(Bm.exports,Nm),Bm.exports.Stream=Nm):(oi=Bm.exports=kP(),oi.Stream=Nm||oi,oi.Readable=oi,oi.Writable=$P(),oi.Duplex=uc(),oi.Transform=YP(),oi.PassThrough=FV(),oi.finished=Dw(),oi.pipeline=qV())});var VV=y((PFe,WV)=>{WV.exports=kge;function kge(t){var e=t._readableState;return e?e.objectMode?t.read():t.read(Oge(e)):null}function Oge(t){return t.buffer.length?t.buffer.head?t.buffer.head.data.length:t.buffer[0].length:t.length}});var JV=y((xFe,XV)=>{var Mw=ZP(),GV=bb(),Fge=Qt(),Nge=VV(),KV=Buffer.from&&Buffer.from!==Uint8Array.from?Buffer.from([0]):new Buffer([0]),ex=function(t,e){t._corked?t.once("uncork",e):e()},Bge=function(t,e){t._autoDestroy&&t.destroy(e)},zV=function(t,e){return function(r){r?Bge(t,r.message==="premature close"?null:r):e&&!t._ended&&t.end()}},Uge=function(t,e){if(!t||t._writableState&&t._writableState.finished)return e();if(t._writableState)return t.end(e);t.end(),e()},jge=function(){},qge=function(t){return new Mw.Readable({objectMode:!0,highWaterMark:16}).wrap(t)},br=function(t,e,r){if(!(this instanceof br))return new br(t,e,r);Mw.Duplex.call(this,r),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!r||r.autoDestroy!==!1,this._forwardDestroy=!r||r.destroy!==!1,this._forwardEnd=!r||r.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,t&&this.setWritable(t),e&&this.setReadable(e)};Fge(br,Mw.Duplex);br.obj=function(t,e,r){return r||(r={}),r.objectMode=!0,r.highWaterMark=16,new br(t,e,r)};br.prototype.cork=function(){++this._corked===1&&this.emit("cork")};br.prototype.uncork=function(){this._corked&&--this._corked===0&&this.emit("uncork")};br.prototype.setWritable=function(t){if(this._unwrite&&this._unwrite(),this.destroyed){t&&t.destroy&&t.destroy();return}if(t===null||t===!1){this.end();return}var e=this,r=GV(t,{writable:!0,readable:!1},zV(this,this._forwardEnd)),n=function(){var o=e._ondrain;e._ondrain=null,o&&o()},i=function(){e._writable.removeListener("drain",n),r()};this._unwrite&&process.nextTick(n),this._writable=t,this._writable.on("drain",n),this._unwrite=i,this.uncork()};br.prototype.setReadable=function(t){if(this._unread&&this._unread(),this.destroyed){t&&t.destroy&&t.destroy();return}if(t===null||t===!1){this.push(null),this.resume();return}var e=this,r=GV(t,{writable:!1,readable:!0},zV(this)),n=function(){e._forward()},i=function(){e.push(null)},o=function(){e._readable2.removeListener("readable",n),e._readable2.removeListener("end",i),r()};this._drained=!0,this._readable=t,this._readable2=t._readableState?t:qge(t),this._readable2.on("readable",n),this._readable2.on("end",i),this._unread=o,this._forward()};br.prototype._read=function(){this._drained=!0,this._forward()};br.prototype._forward=function(){if(!(this._forwarding||!this._readable2||!this._drained)){this._forwarding=!0;for(var t;this._drained&&(t=Nge(this._readable2))!==null;)this.destroyed||(this._drained=this.push(t));this._forwarding=!1}};br.prototype.destroy=function(t,e){if(e||(e=jge),this.destroyed)return e(null);this.destroyed=!0;var r=this;process.nextTick(function(){r._destroy(t),e(null)})};br.prototype._destroy=function(t){if(t){var e=this._ondrain;this._ondrain=null,e?e(t):this.emit("error",t)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")};br.prototype._write=function(t,e,r){if(!this.destroyed){if(this._corked)return ex(this,this._write.bind(this,t,e,r));if(t===KV)return this._finish(r);if(!this._writable)return r();this._writable.write(t)===!1?this._ondrain=r:this.destroyed||r()}};br.prototype._finish=function(t){var e=this;this.emit("preend"),ex(this,function(){Uge(e._forwardEnd&&e._writable,function(){e._writableState.prefinished===!1&&(e._writableState.prefinished=!0),e.emit("prefinish"),ex(e,t)})})};br.prototype.end=function(t,e,r){return typeof t=="function"?this.end(null,null,t):typeof e=="function"?this.end(t,null,e):(this._ended=!0,t&&this.write(t),!this._writableState.ending&&!this._writableState.destroyed&&this.write(KV),Mw.Writable.prototype.end.call(this,r))};XV.exports=br});var ZV=y((LFe,kw)=>{var Wge=W8(),Vge=Qt(),YV=JV(),QV=function(t){return t.length?Array.isArray(t[0])?t[0]:Array.prototype.slice.call(t):[]},tx=function(t){var e=function(){var r=QV(arguments);if(!(this instanceof e))return new e(r);YV.call(this,null,null,t),r.length&&this.setPipeline(r)};return Vge(e,YV),e.prototype.setPipeline=function(){var r=QV(arguments),n=this,i=!1,o=r[0],s=r[r.length-1];s=s.readable?s:null,o=o.writable?o:null;var a=function(){r[0].emit("error",new Error("stream was destroyed"))};if(this.on("close",a),this.on("prefinish",function(){i||n.cork()}),Wge(r,function(u){if(n.removeListener("close",a),u)return n.destroy(u.message==="premature close"?null:u);i=!0,n._autoDestroy===!1&&(n._autoDestroy=!0),n.uncork()}),this.destroyed)return a();this.setWritable(o),this.setReadable(s)},e};kw.exports=tx({autoDestroy:!1,destroy:!1});kw.exports.obj=tx({autoDestroy:!1,destroy:!1,objectMode:!0,highWaterMark:16});kw.exports.ctor=tx});var rx=y((TFe,e4)=>{"use strict";e4.exports=function(t){if(typeof t!="string")throw new TypeError("expected a string");var e={negated:!1,pattern:t,original:t};return t.charAt(0)==="!"&&t.charAt(1)!=="("&&(e.negated=!0,e.pattern=t.slice(1)),e}});var nx=y(($Fe,u4)=>{"use strict";var Ow=Object.prototype.hasOwnProperty,a4=Object.prototype.toString,t4=Object.defineProperty,r4=Object.getOwnPropertyDescriptor,n4=function(e){return typeof Array.isArray=="function"?Array.isArray(e):a4.call(e)==="[object Array]"},i4=function(e){if(!e||a4.call(e)!=="[object Object]")return!1;var r=Ow.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&Ow.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!n)return!1;var i;for(i in e);return typeof i>"u"||Ow.call(e,i)},o4=function(e,r){t4&&r.name==="__proto__"?t4(e,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):e[r.name]=r.newValue},s4=function(e,r){if(r==="__proto__")if(Ow.call(e,r)){if(r4)return r4(e,r).value}else return;return e[r]};u4.exports=function t(){var e,r,n,i,o,s,a=arguments[0],u=1,c=arguments.length,l=!1;for(typeof a=="boolean"&&(l=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<c;++u)if(e=arguments[u],e!=null)for(r in e)n=s4(a,r),i=s4(e,r),a!==i&&(l&&i&&(i4(i)||(o=n4(i)))?(o?(o=!1,s=n&&n4(n)?n:[]):s=n&&i4(n)?n:{},o4(a,{name:r,newValue:t(l,s,i)})):typeof i<"u"&&o4(a,{name:r,newValue:i}));return a}});var c4=y(ix=>{var dc=require("path"),ka=process.platform==="win32",Ma=require("fs"),Gge=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function Kge(){var t;if(Gge){var e=new Error;t=r}else t=n;return t;function r(i){i&&(e.message=i.message,i=e,n(i))}function n(i){if(i){if(process.throwDeprecation)throw i;if(!process.noDeprecation){var o="fs: missing callback "+(i.stack||i.message);process.traceDeprecation?console.trace(o):console.error(o)}}}}function zge(t){return typeof t=="function"?t:Kge()}var RFe=dc.normalize;ka?bs=/(.*?)(?:[\/\\]+|$)/g:bs=/(.*?)(?:[\/]+|$)/g;var bs;ka?Um=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:Um=/^[\/]*/;var Um;ix.realpathSync=function(e,r){if(e=dc.resolve(e),r&&Object.prototype.hasOwnProperty.call(r,e))return r[e];var n=e,i={},o={},s,a,u,c;l();function l(){var v=Um.exec(e);s=v[0].length,a=v[0],u=v[0],c="",ka&&!o[u]&&(Ma.lstatSync(u),o[u]=!0)}for(;s<e.length;){bs.lastIndex=s;var p=bs.exec(e);if(c=a,a+=p[0],u=c+p[1],s=bs.lastIndex,!(o[u]||r&&r[u]===u)){var f;if(r&&Object.prototype.hasOwnProperty.call(r,u))f=r[u];else{var m=Ma.lstatSync(u);if(!m.isSymbolicLink()){o[u]=!0,r&&(r[u]=u);continue}var h=null;if(!ka){var H=m.dev.toString(32)+":"+m.ino.toString(32);i.hasOwnProperty(H)&&(h=i[H])}h===null&&(Ma.statSync(u),h=Ma.readlinkSync(u)),f=dc.resolve(c,h),r&&(r[u]=f),ka||(i[H]=h)}e=dc.resolve(f,e.slice(s)),l()}}return r&&(r[n]=e),e};ix.realpath=function(e,r,n){if(typeof n!="function"&&(n=zge(r),r=null),e=dc.resolve(e),r&&Object.prototype.hasOwnProperty.call(r,e))return process.nextTick(n.bind(null,null,r[e]));var i=e,o={},s={},a,u,c,l;p();function p(){var v=Um.exec(e);a=v[0].length,u=v[0],c=v[0],l="",ka&&!s[c]?Ma.lstat(c,function(_){if(_)return n(_);s[c]=!0,f()}):process.nextTick(f)}function f(){if(a>=e.length)return r&&(r[i]=e),n(null,e);bs.lastIndex=a;var v=bs.exec(e);return l=u,u+=v[0],c=l+v[1],a=bs.lastIndex,s[c]||r&&r[c]===c?process.nextTick(f):r&&Object.prototype.hasOwnProperty.call(r,c)?H(r[c]):Ma.lstat(c,m)}function m(v,_){if(v)return n(v);if(!_.isSymbolicLink())return s[c]=!0,r&&(r[c]=c),process.nextTick(f);if(!ka){var x=_.dev.toString(32)+":"+_.ino.toString(32);if(o.hasOwnProperty(x))return h(null,o[x],c)}Ma.stat(c,function(k){if(k)return n(k);Ma.readlink(c,function(T,j){ka||(o[x]=j),h(T,j)})})}function h(v,_,x){if(v)return n(v);var k=dc.resolve(l,_);r&&(r[x]=k),H(k)}function H(v){e=dc.resolve(v,e.slice(a)),p()}}});var ux=y((kFe,d4)=>{d4.exports=Oa;Oa.realpath=Oa;Oa.sync=ax;Oa.realpathSync=ax;Oa.monkeypatch=Jge;Oa.unmonkeypatch=Yge;var Wp=require("fs"),ox=Wp.realpath,sx=Wp.realpathSync,Xge=process.version,l4=/^v[0-5]\./.test(Xge),p4=c4();function f4(t){return t&&t.syscall==="realpath"&&(t.code==="ELOOP"||t.code==="ENOMEM"||t.code==="ENAMETOOLONG")}function Oa(t,e,r){if(l4)return ox(t,e,r);typeof e=="function"&&(r=e,e=null),ox(t,e,function(n,i){f4(n)?p4.realpath(t,e,r):r(n,i)})}function ax(t,e){if(l4)return sx(t,e);try{return sx(t,e)}catch(r){if(f4(r))return p4.realpathSync(t,e);throw r}}function Jge(){Wp.realpath=Oa,Wp.realpathSync=ax}function Yge(){Wp.realpath=ox,Wp.realpathSync=sx}});var m4=y((OFe,h4)=>{h4.exports=function(t,e){for(var r=[],n=0;n<t.length;n++){var i=e(t[n],n);Qge(i)?r.push.apply(r,i):r.push(i)}return r};var Qge=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"}});var b4=y((FFe,v4)=>{"use strict";v4.exports=H4;function H4(t,e,r){t instanceof RegExp&&(t=g4(t,r)),e instanceof RegExp&&(e=g4(e,r));var n=y4(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function g4(t,e){var r=e.match(t);return r?r[0]:null}H4.range=y4;function y4(t,e,r){var n,i,o,s,a,u=r.indexOf(t),c=r.indexOf(e,u+1),l=u;if(u>=0&&c>0){for(n=[],o=r.length;l>=0&&!a;)l==u?(n.push(l),u=r.indexOf(t,l+1)):n.length==1?a=[n.pop(),c]:(i=n.pop(),i<o&&(o=i,s=c),c=r.indexOf(e,l+1)),l=u<c&&u>=0?u:c;n.length&&(a=[o,s])}return a}});var C4=y((NFe,D4)=>{var Zge=m4(),w4=b4();D4.exports=rHe;var _4="\0SLASH"+Math.random()+"\0",A4="\0OPEN"+Math.random()+"\0",lx="\0CLOSE"+Math.random()+"\0",I4="\0COMMA"+Math.random()+"\0",S4="\0PERIOD"+Math.random()+"\0";function cx(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function eHe(t){return t.split("\\\\").join(_4).split("\\{").join(A4).split("\\}").join(lx).split("\\,").join(I4).split("\\.").join(S4)}function tHe(t){return t.split(_4).join("\\").split(A4).join("{").split(lx).join("}").split(I4).join(",").split(S4).join(".")}function E4(t){if(!t)return[""];var e=[],r=w4("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var a=E4(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),e.push.apply(e,s),e}function rHe(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),Vp(eHe(t),!0).map(tHe)):[]}function nHe(t){return"{"+t+"}"}function iHe(t){return/^-?0\d/.test(t)}function oHe(t,e){return t<=e}function sHe(t,e){return t>=e}function Vp(t,e){var r=[],n=w4("{","}",t);if(!n||/\$$/.test(n.pre))return[t];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),o=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),s=i||o,a=n.body.indexOf(",")>=0;if(!s&&!a)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+lx+n.post,Vp(t)):[t];var u;if(s)u=n.body.split(/\.\./);else if(u=E4(n.body),u.length===1&&(u=Vp(u[0],!1).map(nHe),u.length===1)){var l=n.post.length?Vp(n.post,!1):[""];return l.map(function(D){return n.pre+u[0]+D})}var c=n.pre,l=n.post.length?Vp(n.post,!1):[""],p;if(s){var f=cx(u[0]),m=cx(u[1]),h=Math.max(u[0].length,u[1].length),H=u.length==3?Math.abs(cx(u[2])):1,v=oHe,_=m<f;_&&(H*=-1,v=sHe);var x=u.some(iHe);p=[];for(var k=f;v(k,m);k+=H){var T;if(o)T=String.fromCharCode(k),T==="\\"&&(T="");else if(T=String(k),x){var j=h-T.length;if(j>0){var K=new Array(j+1).join("0");k<0?T="-"+K+T.slice(1):T=K+T}}p.push(T)}}else p=Zge(u,function(M){return Vp(M,!1)});for(var G=0;G<p.length;G++)for(var F=0;F<l.length;F++){var R=c+p[G]+l[F];(!e||s||R)&&r.push(R)}return r}});var Bw=y((BFe,$4)=>{$4.exports=Tn;Tn.Minimatch=wr;var jm=function(){try{return require("path")}catch{}}()||{sep:"/"};Tn.sep=jm.sep;var dx=Tn.GLOBSTAR=wr.GLOBSTAR={},aHe=C4(),P4={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},px="[^/]",fx=px+"*?",uHe="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",cHe="(?:(?!(?:\\/|^)\\.).)*?",x4=lHe("().*{}+?[]^$\\!");function lHe(t){return t.split("").reduce(function(e,r){return e[r]=!0,e},{})}var L4=/\/+/;Tn.filter=pHe;function pHe(t,e){return e=e||{},function(r,n,i){return Tn(r,t,e)}}function Fa(t,e){e=e||{};var r={};return Object.keys(t).forEach(function(n){r[n]=t[n]}),Object.keys(e).forEach(function(n){r[n]=e[n]}),r}Tn.defaults=function(t){if(!t||typeof t!="object"||!Object.keys(t).length)return Tn;var e=Tn,r=function(i,o,s){return e(i,o,Fa(t,s))};return r.Minimatch=function(i,o){return new e.Minimatch(i,Fa(t,o))},r.Minimatch.defaults=function(i){return e.defaults(Fa(t,i)).Minimatch},r.filter=function(i,o){return e.filter(i,Fa(t,o))},r.defaults=function(i){return e.defaults(Fa(t,i))},r.makeRe=function(i,o){return e.makeRe(i,Fa(t,o))},r.braceExpand=function(i,o){return e.braceExpand(i,Fa(t,o))},r.match=function(n,i,o){return e.match(n,i,Fa(t,o))},r};wr.defaults=function(t){return Tn.defaults(t).Minimatch};function Tn(t,e,r){return Nw(e),r||(r={}),!r.nocomment&&e.charAt(0)==="#"?!1:new wr(e,r).match(t)}function wr(t,e){if(!(this instanceof wr))return new wr(t,e);Nw(t),e||(e={}),t=t.trim(),!e.allowWindowsEscape&&jm.sep!=="/"&&(t=t.split(jm.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.make()}wr.prototype.debug=function(){};wr.prototype.make=fHe;function fHe(){var t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate();var r=this.globSet=this.braceExpand();e.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,r),r=this.globParts=r.map(function(n){return n.split(L4)}),this.debug(this.pattern,r),r=r.map(function(n,i,o){return n.map(this.parse,this)},this),this.debug(this.pattern,r),r=r.filter(function(n){return n.indexOf(!1)===-1}),this.debug(this.pattern,r),this.set=r}wr.prototype.parseNegate=dHe;function dHe(){var t=this.pattern,e=!1,r=this.options,n=0;if(!r.nonegate){for(var i=0,o=t.length;i<o&&t.charAt(i)==="!";i++)e=!e,n++;n&&(this.pattern=t.substr(n)),this.negate=e}}Tn.braceExpand=function(t,e){return T4(t,e)};wr.prototype.braceExpand=T4;function T4(t,e){return e||(this instanceof wr?e=this.options:e={}),t=typeof t>"u"?this.pattern:t,Nw(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:aHe(t)}var hHe=1024*64,Nw=function(t){if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>hHe)throw new TypeError("pattern is too long")};wr.prototype.parse=mHe;var Fw={};function mHe(t,e){Nw(t);var r=this.options;if(t==="**")if(r.noglobstar)t="*";else return dx;if(t==="")return"";var n="",i=!!r.nocase,o=!1,s=[],a=[],u,c=!1,l=-1,p=-1,f=t.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",m=this;function h(){if(u){switch(u){case"*":n+=fx,i=!0;break;case"?":n+=px,i=!0;break;default:n+="\\"+u;break}m.debug("clearStateChar %j %j",u,n),u=!1}}for(var H=0,v=t.length,_;H<v&&(_=t.charAt(H));H++){if(this.debug("%s	%s %s %j",t,H,n,_),o&&x4[_]){n+="\\"+_,o=!1;continue}switch(_){case"/":return!1;case"\\":h(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",t,H,n,_),c){this.debug("  in class"),_==="!"&&H===p+1&&(_="^"),n+=_;continue}m.debug("call clearStateChar %j",u),h(),u=_,r.noext&&h();continue;case"(":if(c){n+="(";continue}if(!u){n+="\\(";continue}s.push({type:u,start:H-1,reStart:n.length,open:P4[u].open,close:P4[u].close}),n+=u==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",u,n),u=!1;continue;case")":if(c||!s.length){n+="\\)";continue}h(),i=!0;var x=s.pop();n+=x.close,x.type==="!"&&a.push(x),x.reEnd=n.length;continue;case"|":if(c||!s.length||o){n+="\\|",o=!1;continue}h(),n+="|";continue;case"[":if(h(),c){n+="\\"+_;continue}c=!0,p=H,l=n.length,n+=_;continue;case"]":if(H===p+1||!c){n+="\\"+_,o=!1;continue}var k=t.substring(p+1,H);try{RegExp("["+k+"]")}catch{var T=this.parse(k,Fw);n=n.substr(0,l)+"\\["+T[0]+"\\]",i=i||T[1],c=!1;continue}i=!0,c=!1,n+=_;continue;default:h(),o?o=!1:x4[_]&&!(_==="^"&&c)&&(n+="\\"),n+=_}}for(c&&(k=t.substr(p+1),T=this.parse(k,Fw),n=n.substr(0,l)+"\\["+T[0],i=i||T[1]),x=s.pop();x;x=s.pop()){var j=n.slice(x.reStart+x.open.length);this.debug("setting tail",n,x),j=j.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(X,ee,ae){return ae||(ae="\\"),ee+ee+ae+"|"}),this.debug(`tail=%j
   %s`,j,j,x,n);var K=x.type==="*"?fx:x.type==="?"?px:"\\"+x.type;i=!0,n=n.slice(0,x.reStart)+K+"\\("+j}h(),o&&(n+="\\\\");var G=!1;switch(n.charAt(0)){case"[":case".":case"(":G=!0}for(var F=a.length-1;F>-1;F--){var R=a[F],M=n.slice(0,R.reStart),D=n.slice(R.reStart,R.reEnd-8),W=n.slice(R.reEnd-8,R.reEnd),O=n.slice(R.reEnd);W+=O;var V=M.split("(").length-1,E=O;for(H=0;H<V;H++)E=E.replace(/\)[+*?]?/,"");O=E;var L="";O===""&&e!==Fw&&(L="$");var ue=M+D+O+L+W;n=ue}if(n!==""&&i&&(n="(?=.)"+n),G&&(n=f+n),e===Fw)return[n,i];if(!i)return HHe(t);var oe=r.nocase?"i":"";try{var ne=new RegExp("^"+n+"$",oe)}catch{return new RegExp("$.")}return ne._glob=t,ne._src=n,ne}Tn.makeRe=function(t,e){return new wr(t,e||{}).makeRe()};wr.prototype.makeRe=gHe;function gHe(){if(this.regexp||this.regexp===!1)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,r=e.noglobstar?fx:e.dot?uHe:cHe,n=e.nocase?"i":"",i=t.map(function(o){return o.map(function(s){return s===dx?r:typeof s=="string"?yHe(s):s._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch{this.regexp=!1}return this.regexp}Tn.match=function(t,e,r){r=r||{};var n=new wr(e,r);return t=t.filter(function(i){return n.match(i)}),n.options.nonull&&!t.length&&t.push(e),t};wr.prototype.match=function(e,r){if(typeof r>"u"&&(r=this.partial),this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;var n=this.options;jm.sep!=="/"&&(e=e.split(jm.sep).join("/")),e=e.split(L4),this.debug(this.pattern,"split",e);var i=this.set;this.debug(this.pattern,"set",i);var o,s;for(s=e.length-1;s>=0&&(o=e[s],!o);s--);for(s=0;s<i.length;s++){var a=i[s],u=e;n.matchBase&&a.length===1&&(u=[o]);var c=this.matchOne(u,a,r);if(c)return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate};wr.prototype.matchOne=function(t,e,r){var n=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var i=0,o=0,s=t.length,a=e.length;i<s&&o<a;i++,o++){this.debug("matchOne loop");var u=e[o],c=t[i];if(this.debug(e,u,c),u===!1)return!1;if(u===dx){this.debug("GLOBSTAR",[e,u,c]);var l=i,p=o+1;if(p===a){for(this.debug("** at the end");i<s;i++)if(t[i]==="."||t[i]===".."||!n.dot&&t[i].charAt(0)===".")return!1;return!0}for(;l<s;){var f=t[l];if(this.debug(`
globstar while`,t,l,e,p,f),this.matchOne(t.slice(l),e.slice(p),r))return this.debug("globstar found match!",l,s,f),!0;if(f==="."||f===".."||!n.dot&&f.charAt(0)==="."){this.debug("dot detected!",t,l,e,p);break}this.debug("globstar swallow a segment, and continue"),l++}return!!(r&&(this.debug(`
>>> no match, partial?`,t,l,e,p),l===s))}var m;if(typeof u=="string"?(m=c===u,this.debug("string match",u,c,m)):(m=c.match(u),this.debug("pattern match",u,c,m)),!m)return!1}if(i===s&&o===a)return!0;if(i===s)return r;if(o===a)return i===s-1&&t[i]==="";throw new Error("wtf?")};function HHe(t){return t.replace(/\\(.)/g,"$1")}function yHe(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var jw=y((UFe,Uw)=>{"use strict";function R4(t){return t.charAt(0)==="/"}function M4(t){var e=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,r=e.exec(t),n=r[1]||"",i=!!(n&&n.charAt(1)!==":");return!!(r[2]||i)}Uw.exports=process.platform==="win32"?M4:R4;Uw.exports.posix=R4;Uw.exports.win32=M4});var mx=y(Na=>{Na.setopts=IHe;Na.ownProp=k4;Na.makeAbs=qm;Na.finish=SHe;Na.mark=EHe;Na.isIgnored=F4;Na.childrenIgnored=DHe;function k4(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var vHe=require("fs"),Gp=require("path"),bHe=Bw(),O4=jw(),hx=bHe.Minimatch;function wHe(t,e){return t.localeCompare(e,"en")}function _He(t,e){t.ignore=e.ignore||[],Array.isArray(t.ignore)||(t.ignore=[t.ignore]),t.ignore.length&&(t.ignore=t.ignore.map(AHe))}function AHe(t){var e=null;if(t.slice(-3)==="/**"){var r=t.replace(/(\/\*\*)+$/,"");e=new hx(r,{dot:!0})}return{matcher:new hx(t,{dot:!0}),gmatcher:e}}function IHe(t,e,r){if(r||(r={}),r.matchBase&&e.indexOf("/")===-1){if(r.noglobstar)throw new Error("base matching requires globstar");e="**/"+e}t.silent=!!r.silent,t.pattern=e,t.strict=r.strict!==!1,t.realpath=!!r.realpath,t.realpathCache=r.realpathCache||Object.create(null),t.follow=!!r.follow,t.dot=!!r.dot,t.mark=!!r.mark,t.nodir=!!r.nodir,t.nodir&&(t.mark=!0),t.sync=!!r.sync,t.nounique=!!r.nounique,t.nonull=!!r.nonull,t.nosort=!!r.nosort,t.nocase=!!r.nocase,t.stat=!!r.stat,t.noprocess=!!r.noprocess,t.absolute=!!r.absolute,t.fs=r.fs||vHe,t.maxLength=r.maxLength||1/0,t.cache=r.cache||Object.create(null),t.statCache=r.statCache||Object.create(null),t.symlinks=r.symlinks||Object.create(null),_He(t,r),t.changedCwd=!1;var n=process.cwd();k4(r,"cwd")?(t.cwd=Gp.resolve(r.cwd),t.changedCwd=t.cwd!==n):t.cwd=n,t.root=r.root||Gp.resolve(t.cwd,"/"),t.root=Gp.resolve(t.root),process.platform==="win32"&&(t.root=t.root.replace(/\\/g,"/")),t.cwdAbs=O4(t.cwd)?t.cwd:qm(t,t.cwd),process.platform==="win32"&&(t.cwdAbs=t.cwdAbs.replace(/\\/g,"/")),t.nomount=!!r.nomount,r.nonegate=!0,r.nocomment=!0,t.minimatch=new hx(e,r),t.options=t.minimatch.options}function SHe(t){for(var e=t.nounique,r=e?[]:Object.create(null),n=0,i=t.matches.length;n<i;n++){var o=t.matches[n];if(!o||Object.keys(o).length===0){if(t.nonull){var s=t.minimatch.globSet[n];e?r.push(s):r[s]=!0}}else{var a=Object.keys(o);e?r.push.apply(r,a):a.forEach(function(u){r[u]=!0})}}if(e||(r=Object.keys(r)),t.nosort||(r=r.sort(wHe)),t.mark){for(var n=0;n<r.length;n++)r[n]=t._mark(r[n]);t.nodir&&(r=r.filter(function(u){var c=!/\/$/.test(u),l=t.cache[u]||t.cache[qm(t,u)];return c&&l&&(c=l!=="DIR"&&!Array.isArray(l)),c}))}t.ignore.length&&(r=r.filter(function(u){return!F4(t,u)})),t.found=r}function EHe(t,e){var r=qm(t,e),n=t.cache[r],i=e;if(n){var o=n==="DIR"||Array.isArray(n),s=e.slice(-1)==="/";if(o&&!s?i+="/":!o&&s&&(i=i.slice(0,-1)),i!==e){var a=qm(t,i);t.statCache[a]=t.statCache[r],t.cache[a]=t.cache[r]}}return i}function qm(t,e){var r=e;return e.charAt(0)==="/"?r=Gp.join(t.root,e):O4(e)||e===""?r=e:t.changedCwd?r=Gp.resolve(t.cwd,e):r=Gp.resolve(e),process.platform==="win32"&&(r=r.replace(/\\/g,"/")),r}function F4(t,e){return t.ignore.length?t.ignore.some(function(r){return r.matcher.match(e)||!!(r.gmatcher&&r.gmatcher.match(e))}):!1}function DHe(t,e){return t.ignore.length?t.ignore.some(function(r){return!!(r.gmatcher&&r.gmatcher.match(e))}):!1}});var q4=y((GFe,j4)=>{j4.exports=U4;U4.GlobSync=Zt;var CHe=ux(),N4=Bw(),qFe=N4.Minimatch,WFe=yx().Glob,VFe=require("util"),gx=require("path"),B4=require("assert"),qw=jw(),hc=mx(),PHe=hc.setopts,Hx=hc.ownProp,xHe=hc.childrenIgnored,LHe=hc.isIgnored;function U4(t,e){if(typeof e=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new Zt(t,e).found}function Zt(t,e){if(!t)throw new Error("must provide pattern");if(typeof e=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof Zt))return new Zt(t,e);if(PHe(this,t,e),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var n=0;n<r;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}Zt.prototype._finish=function(){if(B4(this instanceof Zt),this.realpath){var t=this;this.matches.forEach(function(e,r){var n=t.matches[r]=Object.create(null);for(var i in e)try{i=t._makeAbs(i);var o=CHe.realpathSync(i,t.realpathCache);n[o]=!0}catch(s){if(s.syscall==="stat")n[t._makeAbs(i)]=!0;else throw s}})}hc.finish(this)};Zt.prototype._process=function(t,e,r){B4(this instanceof Zt);for(var n=0;typeof t[n]=="string";)n++;var i;switch(n){case t.length:this._processSimple(t.join("/"),e);return;case 0:i=null;break;default:i=t.slice(0,n).join("/");break}var o=t.slice(n),s;i===null?s=".":((qw(i)||qw(t.join("/")))&&(!i||!qw(i))&&(i="/"+i),s=i);var a=this._makeAbs(s);if(!xHe(this,s)){var u=o[0]===N4.GLOBSTAR;u?this._processGlobStar(i,s,a,o,e,r):this._processReaddir(i,s,a,o,e,r)}};Zt.prototype._processReaddir=function(t,e,r,n,i,o){var s=this._readdir(r,o);if(s){for(var a=n[0],u=!!this.minimatch.negate,c=a._glob,l=this.dot||c.charAt(0)===".",p=[],f=0;f<s.length;f++){var m=s[f];if(m.charAt(0)!=="."||l){var h;u&&!t?h=!m.match(a):h=m.match(a),h&&p.push(m)}}var H=p.length;if(H!==0){if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var f=0;f<H;f++){var m=p[f];t&&(t.slice(-1)!=="/"?m=t+"/"+m:m=t+m),m.charAt(0)==="/"&&!this.nomount&&(m=gx.join(this.root,m)),this._emitMatch(i,m)}return}n.shift();for(var f=0;f<H;f++){var m=p[f],v;t?v=[t,m]:v=[m],this._process(v.concat(n),i,o)}}}};Zt.prototype._emitMatch=function(t,e){if(!LHe(this,e)){var r=this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=r),!this.matches[t][e]){if(this.nodir){var n=this.cache[r];if(n==="DIR"||Array.isArray(n))return}this.matches[t][e]=!0,this.stat&&this._stat(e)}}};Zt.prototype._readdirInGlobStar=function(t){if(this.follow)return this._readdir(t,!1);var e,r,n;try{r=this.fs.lstatSync(t)}catch(o){if(o.code==="ENOENT")return null}var i=r&&r.isSymbolicLink();return this.symlinks[t]=i,!i&&r&&!r.isDirectory()?this.cache[t]="FILE":e=this._readdir(t,!1),e};Zt.prototype._readdir=function(t,e){var r;if(e&&!Hx(this.symlinks,t))return this._readdirInGlobStar(t);if(Hx(this.cache,t)){var n=this.cache[t];if(!n||n==="FILE")return null;if(Array.isArray(n))return n}try{return this._readdirEntries(t,this.fs.readdirSync(t))}catch(i){return this._readdirError(t,i),null}};Zt.prototype._readdirEntries=function(t,e){if(!this.mark&&!this.stat)for(var r=0;r<e.length;r++){var n=e[r];t==="/"?n=t+n:n=t+"/"+n,this.cache[n]=!0}return this.cache[t]=e,e};Zt.prototype._readdirError=function(t,e){switch(e.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(t);if(this.cache[r]="FILE",r===this.cwdAbs){var n=new Error(e.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=e.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:if(this.cache[this._makeAbs(t)]=!1,this.strict)throw e;this.silent||console.error("glob error",e);break}};Zt.prototype._processGlobStar=function(t,e,r,n,i,o){var s=this._readdir(r,o);if(s){var a=n.slice(1),u=t?[t]:[],c=u.concat(a);this._process(c,i,!1);var l=s.length,p=this.symlinks[r];if(!(p&&o))for(var f=0;f<l;f++){var m=s[f];if(!(m.charAt(0)==="."&&!this.dot)){var h=u.concat(s[f],a);this._process(h,i,!0);var H=u.concat(s[f],n);this._process(H,i,!0)}}}};Zt.prototype._processSimple=function(t,e){var r=this._stat(t);if(this.matches[e]||(this.matches[e]=Object.create(null)),!!r){if(t&&qw(t)&&!this.nomount){var n=/[\/\\]$/.test(t);t.charAt(0)==="/"?t=gx.join(this.root,t):(t=gx.resolve(this.root,t),n&&(t+="/"))}process.platform==="win32"&&(t=t.replace(/\\/g,"/")),this._emitMatch(e,t)}};Zt.prototype._stat=function(t){var e=this._makeAbs(t),r=t.slice(-1)==="/";if(t.length>this.maxLength)return!1;if(!this.stat&&Hx(this.cache,e)){var s=this.cache[e];if(Array.isArray(s)&&(s="DIR"),!r||s==="DIR")return s;if(r&&s==="FILE")return!1}var n,i=this.statCache[e];if(!i){var o;try{o=this.fs.lstatSync(e)}catch(a){if(a&&(a.code==="ENOENT"||a.code==="ENOTDIR"))return this.statCache[e]=!1,!1}if(o&&o.isSymbolicLink())try{i=this.fs.statSync(e)}catch{i=o}else i=o}this.statCache[e]=i;var s=!0;return i&&(s=i.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||s,r&&s==="FILE"?!1:s};Zt.prototype._mark=function(t){return hc.mark(this,t)};Zt.prototype._makeAbs=function(t){return hc.makeAbs(this,t)}});var V4=y((KFe,W4)=>{var THe=vD(),Wm=Object.create(null),$He=gp();W4.exports=THe(RHe);function RHe(t,e){return Wm[t]?(Wm[t].push(e),null):(Wm[t]=[e],MHe(t))}function MHe(t){return $He(function e(){var r=Wm[t],n=r.length,i=kHe(arguments);try{for(var o=0;o<n;o++)r[o].apply(null,i)}finally{r.length>n?(r.splice(0,n),process.nextTick(function(){e.apply(null,i)})):delete Wm[t]}})}function kHe(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n]=t[n];return r}});var yx=y((JFe,K4)=>{K4.exports=mc;var OHe=ux(),G4=Bw(),zFe=G4.Minimatch,FHe=Qt(),NHe=require("events").EventEmitter,vx=require("path"),bx=require("assert"),Vm=jw(),_x=q4(),gc=mx(),BHe=gc.setopts,wx=gc.ownProp,Ax=V4(),XFe=require("util"),UHe=gc.childrenIgnored,jHe=gc.isIgnored,qHe=gp();function mc(t,e,r){if(typeof e=="function"&&(r=e,e={}),e||(e={}),e.sync){if(r)throw new TypeError("callback provided to sync glob");return _x(t,e)}return new We(t,e,r)}mc.sync=_x;var WHe=mc.GlobSync=_x.GlobSync;mc.glob=mc;function VHe(t,e){if(e===null||typeof e!="object")return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}mc.hasMagic=function(t,e){var r=VHe({},e);r.noprocess=!0;var n=new We(t,r),i=n.minimatch.set;if(!t)return!1;if(i.length>1)return!0;for(var o=0;o<i[0].length;o++)if(typeof i[0][o]!="string")return!0;return!1};mc.Glob=We;FHe(We,NHe);function We(t,e,r){if(typeof e=="function"&&(r=e,e=null),e&&e.sync){if(r)throw new TypeError("callback provided to sync glob");return new WHe(t,e)}if(!(this instanceof We))return new We(t,e,r);BHe(this,t,e),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),typeof r=="function"&&(r=qHe(r),this.on("error",r),this.on("end",function(u){r(null,u)}));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(n===0)return a();for(var o=!0,s=0;s<n;s++)this._process(this.minimatch.set[s],s,!1,a);o=!1;function a(){--i._processing,i._processing<=0&&(o?process.nextTick(function(){i._finish()}):i._finish())}}We.prototype._finish=function(){if(bx(this instanceof We),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();gc.finish(this),this.emit("end",this.found)}};We.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var t=this.matches.length;if(t===0)return this._finish();for(var e=this,r=0;r<this.matches.length;r++)this._realpathSet(r,n);function n(){--t===0&&e._finish()}};We.prototype._realpathSet=function(t,e){var r=this.matches[t];if(!r)return e();var n=Object.keys(r),i=this,o=n.length;if(o===0)return e();var s=this.matches[t]=Object.create(null);n.forEach(function(a,u){a=i._makeAbs(a),OHe.realpath(a,i.realpathCache,function(c,l){c?c.syscall==="stat"?s[a]=!0:i.emit("error",c):s[l]=!0,--o===0&&(i.matches[t]=s,e())})})};We.prototype._mark=function(t){return gc.mark(this,t)};We.prototype._makeAbs=function(t){return gc.makeAbs(this,t)};We.prototype.abort=function(){this.aborted=!0,this.emit("abort")};We.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))};We.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var t=this._emitQueue.slice(0);this._emitQueue.length=0;for(var e=0;e<t.length;e++){var r=t[e];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(var e=0;e<n.length;e++){var i=n[e];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}};We.prototype._process=function(t,e,r,n){if(bx(this instanceof We),bx(typeof n=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([t,e,r,n]);return}for(var i=0;typeof t[i]=="string";)i++;var o;switch(i){case t.length:this._processSimple(t.join("/"),e,n);return;case 0:o=null;break;default:o=t.slice(0,i).join("/");break}var s=t.slice(i),a;o===null?a=".":((Vm(o)||Vm(t.join("/")))&&(!o||!Vm(o))&&(o="/"+o),a=o);var u=this._makeAbs(a);if(UHe(this,a))return n();var c=s[0]===G4.GLOBSTAR;c?this._processGlobStar(o,a,u,s,e,r,n):this._processReaddir(o,a,u,s,e,r,n)}};We.prototype._processReaddir=function(t,e,r,n,i,o,s){var a=this;this._readdir(r,o,function(u,c){return a._processReaddir2(t,e,r,n,i,o,c,s)})};We.prototype._processReaddir2=function(t,e,r,n,i,o,s,a){if(!s)return a();for(var u=n[0],c=!!this.minimatch.negate,l=u._glob,p=this.dot||l.charAt(0)===".",f=[],m=0;m<s.length;m++){var h=s[m];if(h.charAt(0)!=="."||p){var H;c&&!t?H=!h.match(u):H=h.match(u),H&&f.push(h)}}var v=f.length;if(v===0)return a();if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var m=0;m<v;m++){var h=f[m];t&&(t!=="/"?h=t+"/"+h:h=t+h),h.charAt(0)==="/"&&!this.nomount&&(h=vx.join(this.root,h)),this._emitMatch(i,h)}return a()}n.shift();for(var m=0;m<v;m++){var h=f[m],_;t&&(t!=="/"?h=t+"/"+h:h=t+h),this._process([h].concat(n),i,o,a)}a()};We.prototype._emitMatch=function(t,e){if(!this.aborted&&!jHe(this,e)){if(this.paused){this._emitQueue.push([t,e]);return}var r=Vm(e)?e:this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=r),!this.matches[t][e]){if(this.nodir){var n=this.cache[r];if(n==="DIR"||Array.isArray(n))return}this.matches[t][e]=!0;var i=this.statCache[r];i&&this.emit("stat",e,i),this.emit("match",e)}}};We.prototype._readdirInGlobStar=function(t,e){if(this.aborted)return;if(this.follow)return this._readdir(t,!1,e);var r="lstat\0"+t,n=this,i=Ax(r,o);i&&n.fs.lstat(t,i);function o(s,a){if(s&&s.code==="ENOENT")return e();var u=a&&a.isSymbolicLink();n.symlinks[t]=u,!u&&a&&!a.isDirectory()?(n.cache[t]="FILE",e()):n._readdir(t,!1,e)}};We.prototype._readdir=function(t,e,r){if(!this.aborted&&(r=Ax("readdir\0"+t+"\0"+e,r),!!r)){if(e&&!wx(this.symlinks,t))return this._readdirInGlobStar(t,r);if(wx(this.cache,t)){var n=this.cache[t];if(!n||n==="FILE")return r();if(Array.isArray(n))return r(null,n)}var i=this;i.fs.readdir(t,GHe(this,t,r))}};function GHe(t,e,r){return function(n,i){n?t._readdirError(e,n,r):t._readdirEntries(e,i,r)}}We.prototype._readdirEntries=function(t,e,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<e.length;n++){var i=e[n];t==="/"?i=t+i:i=t+"/"+i,this.cache[i]=!0}return this.cache[t]=e,r(null,e)}};We.prototype._readdirError=function(t,e,r){if(!this.aborted){switch(e.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(t);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(e.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=e.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:this.cache[this._makeAbs(t)]=!1,this.strict&&(this.emit("error",e),this.abort()),this.silent||console.error("glob error",e);break}return r()}};We.prototype._processGlobStar=function(t,e,r,n,i,o,s){var a=this;this._readdir(r,o,function(u,c){a._processGlobStar2(t,e,r,n,i,o,c,s)})};We.prototype._processGlobStar2=function(t,e,r,n,i,o,s,a){if(!s)return a();var u=n.slice(1),c=t?[t]:[],l=c.concat(u);this._process(l,i,!1,a);var p=this.symlinks[r],f=s.length;if(p&&o)return a();for(var m=0;m<f;m++){var h=s[m];if(!(h.charAt(0)==="."&&!this.dot)){var H=c.concat(s[m],u);this._process(H,i,!0,a);var v=c.concat(s[m],n);this._process(v,i,!0,a)}}a()};We.prototype._processSimple=function(t,e,r){var n=this;this._stat(t,function(i,o){n._processSimple2(t,e,i,o,r)})};We.prototype._processSimple2=function(t,e,r,n,i){if(this.matches[e]||(this.matches[e]=Object.create(null)),!n)return i();if(t&&Vm(t)&&!this.nomount){var o=/[\/\\]$/.test(t);t.charAt(0)==="/"?t=vx.join(this.root,t):(t=vx.resolve(this.root,t),o&&(t+="/"))}process.platform==="win32"&&(t=t.replace(/\\/g,"/")),this._emitMatch(e,t),i()};We.prototype._stat=function(t,e){var r=this._makeAbs(t),n=t.slice(-1)==="/";if(t.length>this.maxLength)return e();if(!this.stat&&wx(this.cache,r)){var i=this.cache[r];if(Array.isArray(i)&&(i="DIR"),!n||i==="DIR")return e(null,i);if(n&&i==="FILE")return e()}var o,s=this.statCache[r];if(s!==void 0){if(s===!1)return e(null,s);var a=s.isDirectory()?"DIR":"FILE";return n&&a==="FILE"?e():e(null,a,s)}var u=this,c=Ax("stat\0"+r,l);c&&u.fs.lstat(r,c);function l(p,f){if(f&&f.isSymbolicLink())return u.fs.stat(r,function(m,h){m?u._stat2(t,r,null,f,e):u._stat2(t,r,m,h,e)});u._stat2(t,r,p,f,e)}};We.prototype._stat2=function(t,e,r,n,i){if(r&&(r.code==="ENOENT"||r.code==="ENOTDIR"))return this.statCache[e]=!1,i();var o=t.slice(-1)==="/";if(this.statCache[e]=n,e.slice(-1)==="/"&&n&&!n.isDirectory())return i(null,!1,n);var s=!0;return n&&(s=n.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||s,o&&s==="FILE"?i():i(null,s,n)}});var X4=y((YFe,z4)=>{z4.exports=function(e){if(typeof e!="string"||e==="")return!1;for(var r;r=/(\\).|([@?!+*]\(.*\))/g.exec(e);){if(r[2])return!0;e=e.slice(r.index+r[0].length)}return!1}});var Q4=y((QFe,Y4)=>{var KHe=X4(),J4={"{":"}","(":")","[":"]"},zHe=function(t){if(t[0]==="!")return!0;for(var e=0,r=-2,n=-2,i=-2,o=-2,s=-2;e<t.length;){if(t[e]==="*"||t[e+1]==="?"&&/[\].+)]/.test(t[e])||n!==-1&&t[e]==="["&&t[e+1]!=="]"&&(n<e&&(n=t.indexOf("]",e)),n>e&&(s===-1||s>n||(s=t.indexOf("\\",e),s===-1||s>n)))||i!==-1&&t[e]==="{"&&t[e+1]!=="}"&&(i=t.indexOf("}",e),i>e&&(s=t.indexOf("\\",e),s===-1||s>i))||o!==-1&&t[e]==="("&&t[e+1]==="?"&&/[:!=]/.test(t[e+2])&&t[e+3]!==")"&&(o=t.indexOf(")",e),o>e&&(s=t.indexOf("\\",e),s===-1||s>o))||r!==-1&&t[e]==="("&&t[e+1]!=="|"&&(r<e&&(r=t.indexOf("|",e)),r!==-1&&t[r+1]!==")"&&(o=t.indexOf(")",r),o>r&&(s=t.indexOf("\\",r),s===-1||s>o))))return!0;if(t[e]==="\\"){var a=t[e+1];e+=2;var u=J4[a];if(u){var c=t.indexOf(u,e);c!==-1&&(e=c+1)}if(t[e]==="!")return!0}else e++}return!1},XHe=function(t){if(t[0]==="!")return!0;for(var e=0;e<t.length;){if(/[*?{}()[\]]/.test(t[e]))return!0;if(t[e]==="\\"){var r=t[e+1];e+=2;var n=J4[r];if(n){var i=t.indexOf(n,e);i!==-1&&(e=i+1)}if(t[e]==="!")return!0}else e++}return!1};Y4.exports=function(e,r){if(typeof e!="string"||e==="")return!1;if(KHe(e))return!0;var n=zHe;return r&&r.strict===!1&&(n=XHe),n(e)}});var e5=y((ZFe,Z4)=>{"use strict";var JHe=Q4(),YHe=require("path").posix.dirname,QHe=require("os").platform()==="win32",Ww="/",ZHe=/\\/g,eye=/\\([!*?|[\](){}])/g;Z4.exports=function(e,r){var n=Object.assign({flipBackslashes:!0},r);n.flipBackslashes&&QHe&&e.indexOf(Ww)<0&&(e=e.replace(ZHe,Ww)),tye(e)&&(e+=Ww),e+="a";do e=YHe(e);while(rye(e));return e.replace(eye,"$1")};function tye(t){var e=t.slice(-1),r;switch(e){case"}":r="{";break;case"]":r="[";break;default:return!1}var n=t.indexOf(r);return n<0?!1:t.slice(n+1,-1).includes(Ww)}function rye(t){return/\([^()]+$/.test(t)||t[0]==="{"||t[0]==="["||/[^\\][{[]/.test(t)?!0:JHe(t)}});var r5=y((eNe,t5)=>{"use strict";t5.exports=function(){return/^[\\\/]{2,}[^\\\/]+[\\\/]+[^\\\/]+/}});var i5=y((tNe,n5)=>{"use strict";var nye=r5()();n5.exports=function(t){if(typeof t!="string")throw new TypeError("expected a string");return nye.test(t)}});var s5=y((rNe,o5)=>{"use strict";var iye=i5();o5.exports=function(e){if(typeof e!="string")throw new TypeError("expected filepath to be a string");return!iye(e)&&!/^([a-z]:)?[\\\/]/i.test(e)}});var a5=y((Ix,Sx)=>{(function(t){Ix&&typeof Ix=="object"&&typeof Sx<"u"?Sx.exports=t():typeof define=="function"&&define.amd?define([],t):typeof window<"u"?window.isWindows=t():typeof global<"u"?global.isWindows=t():typeof self<"u"?self.isWindows=t():this.isWindows=t()})(function(){"use strict";return function(){return process&&(process.platform==="win32"||/^(msys|cygwin)$/.test(process.env.OSTYPE))}})});var c5=y((nNe,u5)=>{"use strict";var oye=s5(),sye=a5();u5.exports=Gm;function Gm(t){if(typeof t!="string")throw new TypeError("isAbsolute expects a string.");return sye()?Gm.win32(t):Gm.posix(t)}Gm.posix=function(e){return e.charAt(0)==="/"};Gm.win32=function(e){return/[a-z]/i.test(e.charAt(0))&&e.charAt(1)===":"&&e.charAt(2)==="\\"||e.slice(0,2)==="\\\\"?!0:!oye(e)}});var Dx=y((iNe,d5)=>{"use strict";var l5=require("path"),aye=rx(),p5=c5();d5.exports=function(t,e){var r=e||{},n=l5.resolve(r.cwd?r.cwd:process.cwd());n=Ex(n);var i=r.root;i&&(i=Ex(i),(process.platform==="win32"||!p5(i))&&(i=Ex(l5.resolve(i)))),t.slice(0,2)==="./"&&(t=t.slice(2)),t.length===1&&t==="."&&(t="");var o=t.slice(-1),s=aye(t);return t=s.pattern,i&&t.charAt(0)==="/"?t=f5(i,t):(!p5(t)||t.slice(0,1)==="\\")&&(t=f5(n,t)),o==="/"&&t.slice(-1)!=="/"&&(t+="/"),s.negated?"!"+t:t};function Ex(t){return t.replace(/\\/g,"/")}function f5(t,e){return t.charAt(t.length-1)==="/"&&(t=t.slice(0,-1)),e.charAt(0)==="/"&&(e=e.slice(1)),e?t+"/"+e:t}});var m5=y((oNe,h5)=>{var uye=process.platform==="win32";h5.exports=function(t){var e=t.length-1;if(e<2)return t;for(;cye(t,e);)e--;return t.substr(0,e+1)};function cye(t,e){var r=t[e];return e>0&&(r==="/"||uye&&r==="\\")}});var y5=y((sNe,H5)=>{"use strict";var lye=require("util").inherits,pye=yx(),fye=nx(),g5=ZP().Readable,dye=e5(),Cx=Dx(),hye=m5(),mye="File not found with singular glob: ",gye=" (if this was purposeful, use `allowEmpty` option)";function Hye(t,e){return dye(Cx(t,e))}function yye(t){var e=t.minimatch.set;return e.length!==1?!1:e[0].every(function(n){return typeof n=="string"})}function Kp(t,e,r){if(!(this instanceof Kp))return new Kp(t,e,r);var n=fye({},r);g5.call(this,{objectMode:!0,highWaterMark:n.highWaterMark||16}),delete n.highWaterMark;var i=this;function o(m){return Cx(m,n)}var s=e.map(o);n.ignore=s;var a=n.cwd,u=n.allowEmpty||!1,c=n.base||Hye(t,n);t=Cx(t,n),delete n.root;var l=new pye.Glob(t,n);this._globber=l;var p=!1;l.on("match",function(m){p=!0;var h={cwd:a,base:c,path:hye(m)};i.push(h)||l.pause()}),l.once("end",function(){if(u!==!0&&!p&&yye(l)){var m=new Error(mye+t+gye);return i.destroy(m)}i.push(null)});function f(m){i.destroy(m)}l.once("error",f)}lye(Kp,g5);Kp.prototype._read=function(){this._globber.resume()};Kp.prototype.destroy=function(t){var e=this;this._globber.abort(),process.nextTick(function(){t&&e.emit("error",t),e.emit("close")})};H5.exports=Kp});var b5=y((aNe,v5)=>{"use strict";var vye=qW(),bye=U8(),wye=ZV(),_ye=rx(),Aye=nx(),Iye=y5();function Sye(t,e){e||(e={});var r=Aye({},e),n=r.ignore;r.cwd=typeof r.cwd=="string"?r.cwd:process.cwd(),r.dot=typeof r.dot=="boolean"?r.dot:!1,r.silent=typeof r.silent=="boolean"?r.silent:!0,r.cwdbase=typeof r.cwdbase=="boolean"?r.cwdbase:!1,r.uniqueBy=typeof r.uniqueBy=="string"||typeof r.uniqueBy=="function"?r.uniqueBy:"path",r.cwdbase&&(r.base=r.cwd),typeof n=="string"&&(n=[n]),Array.isArray(n)||(n=[]),Array.isArray(t)||(t=[t]);var i=[],o=[];t.forEach(s);function s(p,f){if(typeof p!="string")throw new Error("Invalid glob at index "+f);var m=_ye(p),h=m.negated?o:i;h.push({index:f,glob:m.pattern})}if(i.length===0)throw new Error("Missing positive glob");var a=i.map(l),u=new vye(a),c=bye(r.uniqueBy);return wye.obj(u,c);function l(p){var f=o.filter(Eye(p.index)).map(Dye).concat(n);return new Iye(p.glob,f,r)}}function Eye(t){return function(e){return e.index>t}}function Dye(t){return t.glob}v5.exports=Sye});var Zw=y((ZNe,L5)=>{"use strict";var{Transform:Tye}=require("stream"),{StringDecoder:$ye}=require("string_decoder"),qa=Symbol("last"),Qw=Symbol("decoder");function Rye(t,e,r){let n;if(this.overflow){if(n=this[Qw].write(t).split(this.matcher),n.length===1)return r();n.shift(),this.overflow=!1}else this[qa]+=this[Qw].write(t),n=this[qa].split(this.matcher);this[qa]=n.pop();for(let i=0;i<n.length;i++)try{x5(this,this.mapper(n[i]))}catch(o){return r(o)}if(this.overflow=this[qa].length>this.maxLength,this.overflow&&!this.skipOverflow){r(new Error("maximum buffer reached"));return}r()}function Mye(t){if(this[qa]+=this[Qw].end(),this[qa])try{x5(this,this.mapper(this[qa]))}catch(e){return t(e)}t()}function x5(t,e){e!==void 0&&t.push(e)}function P5(t){return t}function kye(t,e,r){switch(t=t||/\r?\n/,e=e||P5,r=r||{},arguments.length){case 1:typeof t=="function"?(e=t,t=/\r?\n/):typeof t=="object"&&!(t instanceof RegExp)&&!t[Symbol.split]&&(r=t,t=/\r?\n/);break;case 2:typeof t=="function"?(r=e,e=t,t=/\r?\n/):typeof e=="object"&&(r=e,e=P5)}r=Object.assign({},r),r.autoDestroy=!0,r.transform=Rye,r.flush=Mye,r.readableObjectMode=!0;let n=new Tye(r);return n[qa]="",n[Qw]=new $ye("utf8"),n.matcher=t,n.mapper=e,n.maxLength=r.maxLength,n.skipOverflow=r.skipOverflow||!1,n.overflow=!1,n._destroy=function(i,o){this._writableState.errorEmitted=!1,o(i)},n}L5.exports=kye});var Z5,Q5=aX(()=>{Z5="./w32appcontainertokens-XTRA77NA.node"});var tG=y((E3e,eG)=>{Q5();try{eG.exports=require(Z5)}catch{}});var nG=y(s_=>{"use strict";Object.defineProperty(s_,"__esModule",{value:!0});s_.getAppContainerProcessTokens=void 0;var jye=require("path"),rG,qye=()=>{if(process.platform==="win32")return rG??=tG(),rG},Wye=t=>qye()?.getAppContainerProcessTokens().map(e=>(0,jye.join)(e,t));s_.getAppContainerProcessTokens=Wye});var bG=y((Ije,Qye)=>{Qye.exports={name:"dotenv",version:"16.3.1",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard","lint-readme":"standard-markdown",pretest:"npm run lint && npm run dts-check",test:"tap tests/*.js --100 -Rspec",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},funding:"https://github.com/motdotla/dotenv?sponsor=1",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3",decache:"^4.6.1",sinon:"^14.0.1",standard:"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0",tap:"^16.3.0",tar:"^6.1.11",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var IG=y((Sje,Ss)=>{var wG=require("fs"),qx=require("path"),Zye=require("os"),eve=require("crypto"),tve=bG(),Wx=tve.version,rve=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function nve(t){let e={},r=t.toString();r=r.replace(/\r\n?/mg,`
`);let n;for(;(n=rve.exec(r))!=null;){let i=n[1],o=n[2]||"";o=o.trim();let s=o[0];o=o.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),s==='"'&&(o=o.replace(/\\n/g,`
`),o=o.replace(/\\r/g,"\r")),e[i]=o}return e}function ive(t){let e=AG(t),r=cr.configDotenv({path:e});if(!r.parsed)throw new Error(`MISSING_DATA: Cannot parse ${e} for an unknown reason`);let n=_G(t).split(","),i=n.length,o;for(let s=0;s<i;s++)try{let a=n[s].trim(),u=ave(r,a);o=cr.decrypt(u.ciphertext,u.key);break}catch(a){if(s+1>=i)throw a}return cr.parse(o)}function ove(t){console.log(`[dotenv@${Wx}][INFO] ${t}`)}function sve(t){console.log(`[dotenv@${Wx}][WARN] ${t}`)}function jx(t){console.log(`[dotenv@${Wx}][DEBUG] ${t}`)}function _G(t){return t&&t.DOTENV_KEY&&t.DOTENV_KEY.length>0?t.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function ave(t,e){let r;try{r=new URL(e)}catch(a){throw a.code==="ERR_INVALID_URL"?new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenv.org/vault/.env.vault?environment=development"):a}let n=r.password;if(!n)throw new Error("INVALID_DOTENV_KEY: Missing key part");let i=r.searchParams.get("environment");if(!i)throw new Error("INVALID_DOTENV_KEY: Missing environment part");let o=`DOTENV_VAULT_${i.toUpperCase()}`,s=t.parsed[o];if(!s)throw new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${o} in your .env.vault file.`);return{ciphertext:s,key:n}}function AG(t){let e=qx.resolve(process.cwd(),".env");return t&&t.path&&t.path.length>0&&(e=t.path),e.endsWith(".vault")?e:`${e}.vault`}function uve(t){return t[0]==="~"?qx.join(Zye.homedir(),t.slice(1)):t}function cve(t){ove("Loading env from encrypted .env.vault");let e=cr._parseVault(t),r=process.env;return t&&t.processEnv!=null&&(r=t.processEnv),cr.populate(r,e,t),{parsed:e}}function lve(t){let e=qx.resolve(process.cwd(),".env"),r="utf8",n=!!(t&&t.debug);t&&(t.path!=null&&(e=uve(t.path)),t.encoding!=null&&(r=t.encoding));try{let i=cr.parse(wG.readFileSync(e,{encoding:r})),o=process.env;return t&&t.processEnv!=null&&(o=t.processEnv),cr.populate(o,i,t),{parsed:i}}catch(i){return n&&jx(`Failed to load ${e} ${i.message}`),{error:i}}}function pve(t){let e=AG(t);return _G(t).length===0?cr.configDotenv(t):wG.existsSync(e)?cr._configVault(t):(sve(`You set DOTENV_KEY but you are missing a .env.vault file at ${e}. Did you forget to build it?`),cr.configDotenv(t))}function fve(t,e){let r=Buffer.from(e.slice(-64),"hex"),n=Buffer.from(t,"base64"),i=n.slice(0,12),o=n.slice(-16);n=n.slice(12,-16);try{let s=eve.createDecipheriv("aes-256-gcm",r,i);return s.setAuthTag(o),`${s.update(n)}${s.final()}`}catch(s){let a=s instanceof RangeError,u=s.message==="Invalid key length",c=s.message==="Unsupported state or unable to authenticate data";if(a||u){let l="INVALID_DOTENV_KEY: It must be 64 characters long (or more)";throw new Error(l)}else if(c){let l="DECRYPTION_FAILED: Please check your DOTENV_KEY";throw new Error(l)}else throw console.error("Error: ",s.code),console.error("Error: ",s.message),s}}function dve(t,e,r={}){let n=!!(r&&r.debug),i=!!(r&&r.override);if(typeof e!="object")throw new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");for(let o of Object.keys(e))Object.prototype.hasOwnProperty.call(t,o)?(i===!0&&(t[o]=e[o]),n&&jx(i===!0?`"${o}" is already defined and WAS overwritten`:`"${o}" is already defined and was NOT overwritten`)):t[o]=e[o]}var cr={configDotenv:lve,_configVault:cve,_parseVault:ive,config:pve,decrypt:fve,parse:nve,populate:dve};Ss.exports.configDotenv=cr.configDotenv;Ss.exports._configVault=cr._configVault;Ss.exports._parseVault=cr._parseVault;Ss.exports.config=cr.config;Ss.exports.decrypt=cr.decrypt;Ss.exports.parse=cr.parse;Ss.exports.populate=cr.populate;Ss.exports=cr});var eL=y(Ec=>{"use strict";Object.defineProperty(Ec,"__esModule",{value:!0});var k_=require("vscode"),Zx=class t{constructor(e,r,n){this.extensionName=e,this.extensionVersion=r,this.targetPopulation=n}static trimVersionSuffix(e){let r=/\-[a-zA-Z0-9]+$/;return e.split(r)[0]}getFilterValue(e){switch(e){case Ps.ApplicationVersion:return t.trimVersionSuffix(k_.version);case Ps.Build:return k_.env.appName;case Ps.ClientId:return k_.env.machineId;case Ps.ExtensionName:return this.extensionName;case Ps.ExtensionVersion:return t.trimVersionSuffix(this.extensionVersion);case Ps.Language:return k_.env.language;case Ps.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,r=Object.values(Ps);for(let n of r)e.set(n,this.getFilterValue(n));return e}};Ec.VSCodeFilterProvider=Zx;var Ps;(function(t){t.Market="X-MSEdge-Market",t.CorpNet="X-FD-Corpnet",t.ApplicationVersion="X-VSCode-AppVersion",t.Build="X-VSCode-Build",t.ClientId="X-MSEdge-ClientId",t.ExtensionName="X-VSCode-ExtensionName",t.ExtensionVersion="X-VSCode-ExtensionVersion",t.Language="X-VSCode-Language",t.TargetPopulation="X-VSCode-TargetPopulation"})(Ps=Ec.Filters||(Ec.Filters={}));var Lve;(function(t){t.Team="team",t.Internal="internal",t.Insiders="insider",t.Public="public"})(Lve=Ec.TargetPopulation||(Ec.TargetPopulation={}))});var u6=y(rL=>{"use strict";Object.defineProperty(rL,"__esModule",{value:!0});var tL=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}};rL.BaseFeatureProvider=tL});var c6=y(iL=>{"use strict";Object.defineProperty(iL,"__esModule",{value:!0});var Tve=u6(),nL=class extends Tve.BaseFeatureProvider{constructor(e,r){super(e),this.telemetry=e,this.filterProviders=r,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let r of this.filterProviders){let n=r.getFilters();for(let i of n.keys()){let o=n.get(i);e.set(i,o)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;let r=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",r]])),this.cachedTelemetryEvents.push(e)}};iL.FilteredFeatureProvider=nL});var l6=y(If=>{"use strict";Object.defineProperty(If,"__esModule",{value:!0});var $ve=c6();If.TASAPI_FETCHERROR_EVENTNAME="call-tas-error";var oL="ErrorType",sL=class extends $ve.FilteredFeatureProvider{constructor(e,r,n){super(r,n),this.httpClient=e,this.telemetry=r,this.filterProviders=n}async fetch(){let e=this.getFilters(),r={};for(let a of e.keys()){let u=e.get(a);r[a]=u}let n;try{n=await this.httpClient.get({headers:r})}catch(a){let u=a,c=new Map;u.response?c.set(oL,"ServerError"):u.request?c.set(oL,"NoResponse"):c.set(oL,"GenericError"),this.telemetry.postEvent(If.TASAPI_FETCHERROR_EVENTNAME,c)}if(!n)throw Error(If.TASAPI_FETCHERROR_EVENTNAME);e.keys.length>0&&this.PostEventToTelemetry(r);let i=n.data,o=i.Configs,s=[];for(let a of o)if(a.Parameters)for(let u of Object.keys(a.Parameters)){let c=u+(a.Parameters[u]?"":"cf");s.includes(c)||s.push(c)}return{features:s,assignmentContext:i.AssignmentContext,configs:o}}};If.TasApiFeatureProvider=sL});var aL=y((TVe,p6)=>{"use strict";p6.exports=function(e,r){return function(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return e.apply(r,i)}}});var jr=y(($Ve,m6)=>{"use strict";var Rve=aL(),Za=Object.prototype.toString;function lL(t){return Array.isArray(t)}function uL(t){return typeof t>"u"}function Mve(t){return t!==null&&!uL(t)&&t.constructor!==null&&!uL(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function f6(t){return Za.call(t)==="[object ArrayBuffer]"}function kve(t){return Za.call(t)==="[object FormData]"}function Ove(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&f6(t.buffer),e}function Fve(t){return typeof t=="string"}function Nve(t){return typeof t=="number"}function d6(t){return t!==null&&typeof t=="object"}function O_(t){if(Za.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Bve(t){return Za.call(t)==="[object Date]"}function Uve(t){return Za.call(t)==="[object File]"}function jve(t){return Za.call(t)==="[object Blob]"}function h6(t){return Za.call(t)==="[object Function]"}function qve(t){return d6(t)&&h6(t.pipe)}function Wve(t){return Za.call(t)==="[object URLSearchParams]"}function Vve(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Gve(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function pL(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),lL(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function cL(){var t={};function e(i,o){O_(t[o])&&O_(i)?t[o]=cL(t[o],i):O_(i)?t[o]=cL({},i):lL(i)?t[o]=i.slice():t[o]=i}for(var r=0,n=arguments.length;r<n;r++)pL(arguments[r],e);return t}function Kve(t,e,r){return pL(e,function(i,o){r&&typeof i=="function"?t[o]=Rve(i,r):t[o]=i}),t}function zve(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}m6.exports={isArray:lL,isArrayBuffer:f6,isBuffer:Mve,isFormData:kve,isArrayBufferView:Ove,isString:Fve,isNumber:Nve,isObject:d6,isPlainObject:O_,isUndefined:uL,isDate:Bve,isFile:Uve,isBlob:jve,isFunction:h6,isStream:qve,isURLSearchParams:Wve,isStandardBrowserEnv:Gve,forEach:pL,merge:cL,extend:Kve,trim:Vve,stripBOM:zve}});var F_=y((RVe,H6)=>{"use strict";var Sf=jr();function g6(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}H6.exports=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(Sf.isURLSearchParams(r))i=r.toString();else{var o=[];Sf.forEach(r,function(u,c){u===null||typeof u>"u"||(Sf.isArray(u)?c=c+"[]":u=[u],Sf.forEach(u,function(p){Sf.isDate(p)?p=p.toISOString():Sf.isObject(p)&&(p=JSON.stringify(p)),o.push(g6(c)+"="+g6(p))}))}),i=o.join("&")}if(i){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}});var v6=y((MVe,y6)=>{"use strict";var Xve=jr();function N_(){this.handlers=[]}N_.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};N_.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};N_.prototype.forEach=function(e){Xve.forEach(this.handlers,function(n){n!==null&&e(n)})};y6.exports=N_});var w6=y((kVe,b6)=>{"use strict";var Jve=jr();b6.exports=function(e,r){Jve.forEach(e,function(i,o){o!==r&&o.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[o])})}});var B_=y((OVe,_6)=>{"use strict";_6.exports=function(e,r,n,i,o){return e.config=r,n&&(e.code=n),e.request=i,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}});var U_=y((FVe,A6)=>{"use strict";A6.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}});var j_=y((NVe,I6)=>{"use strict";var Yve=B_();I6.exports=function(e,r,n,i,o){var s=new Error(e);return Yve(s,r,n,i,o)}});var fL=y((BVe,S6)=>{"use strict";var Qve=j_();S6.exports=function(e,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):r(Qve("Request failed with status code "+n.status,n.config,null,n.request,n))}});var D6=y((UVe,E6)=>{"use strict";var q_=jr();E6.exports=q_.isStandardBrowserEnv()?function(){return{write:function(r,n,i,o,s,a){var u=[];u.push(r+"="+encodeURIComponent(n)),q_.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),q_.isString(o)&&u.push("path="+o),q_.isString(s)&&u.push("domain="+s),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var P6=y((jVe,C6)=>{"use strict";C6.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}});var L6=y((qVe,x6)=>{"use strict";x6.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}});var dL=y((WVe,T6)=>{"use strict";var Zve=P6(),ebe=L6();T6.exports=function(e,r){return e&&!Zve(r)?ebe(e,r):r}});var R6=y((VVe,$6)=>{"use strict";var hL=jr(),tbe=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];$6.exports=function(e){var r={},n,i,o;return e&&hL.forEach(e.split(`
`),function(a){if(o=a.indexOf(":"),n=hL.trim(a.substr(0,o)).toLowerCase(),i=hL.trim(a.substr(o+1)),n){if(r[n]&&tbe.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r}});var O6=y((GVe,k6)=>{"use strict";var M6=jr();k6.exports=M6.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(o){var s=o;return e&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(s){var a=M6.isString(s)?i(s):s;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}()});var Ef=y((KVe,F6)=>{"use strict";function mL(t){this.message=t}mL.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};mL.prototype.__CANCEL__=!0;F6.exports=mL});var B6=y((zVe,N6)=>{"use strict";var W_=jr(),rbe=fL(),nbe=D6(),ibe=F_(),obe=dL(),sbe=R6(),abe=O6(),gL=j_(),ube=U_(),cbe=Ef();N6.exports=function(e){return new Promise(function(n,i){var o=e.data,s=e.headers,a=e.responseType,u;function c(){e.cancelToken&&e.cancelToken.unsubscribe(u),e.signal&&e.signal.removeEventListener("abort",u)}W_.isFormData(o)&&delete s["Content-Type"];var l=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.Authorization="Basic "+btoa(p+":"+f)}var m=obe(e.baseURL,e.url);l.open(e.method.toUpperCase(),ibe(m,e.params,e.paramsSerializer),!0),l.timeout=e.timeout;function h(){if(l){var v="getAllResponseHeaders"in l?sbe(l.getAllResponseHeaders()):null,_=!a||a==="text"||a==="json"?l.responseText:l.response,x={data:_,status:l.status,statusText:l.statusText,headers:v,config:e,request:l};rbe(function(T){n(T),c()},function(T){i(T),c()},x),l=null}}if("onloadend"in l?l.onloadend=h:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(h)},l.onabort=function(){l&&(i(gL("Request aborted",e,"ECONNABORTED",l)),l=null)},l.onerror=function(){i(gL("Network Error",e,null,l)),l=null},l.ontimeout=function(){var _=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",x=e.transitional||ube;e.timeoutErrorMessage&&(_=e.timeoutErrorMessage),i(gL(_,e,x.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",l)),l=null},W_.isStandardBrowserEnv()){var H=(e.withCredentials||abe(m))&&e.xsrfCookieName?nbe.read(e.xsrfCookieName):void 0;H&&(s[e.xsrfHeaderName]=H)}"setRequestHeader"in l&&W_.forEach(s,function(_,x){typeof o>"u"&&x.toLowerCase()==="content-type"?delete s[x]:l.setRequestHeader(x,_)}),W_.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),a&&a!=="json"&&(l.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&l.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(u=function(v){l&&(i(!v||v&&v.type?new cbe("canceled"):v),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(u),e.signal&&(e.signal.aborted?u():e.signal.addEventListener("abort",u))),o||(o=null),l.send(o)})}});var j6=y((XVe,U6)=>{var Df=1e3,Cf=Df*60,Pf=Cf*60,Dc=Pf*24,lbe=Dc*7,pbe=Dc*365.25;U6.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return fbe(t);if(r==="number"&&isFinite(t))return e.long?hbe(t):dbe(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function fbe(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*pbe;case"weeks":case"week":case"w":return r*lbe;case"days":case"day":case"d":return r*Dc;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Pf;case"minutes":case"minute":case"mins":case"min":case"m":return r*Cf;case"seconds":case"second":case"secs":case"sec":case"s":return r*Df;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function dbe(t){var e=Math.abs(t);return e>=Dc?Math.round(t/Dc)+"d":e>=Pf?Math.round(t/Pf)+"h":e>=Cf?Math.round(t/Cf)+"m":e>=Df?Math.round(t/Df)+"s":t+"ms"}function hbe(t){var e=Math.abs(t);return e>=Dc?V_(t,e,Dc,"day"):e>=Pf?V_(t,e,Pf,"hour"):e>=Cf?V_(t,e,Cf,"minute"):e>=Df?V_(t,e,Df,"second"):t+" ms"}function V_(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var HL=y((JVe,q6)=>{function mbe(t){r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=i,r.enabled=s,r.humanize=j6(),r.destroy=c,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let p=0;for(let f=0;f<l.length;f++)p=(p<<5)-p+l.charCodeAt(f),p|=0;return r.colors[Math.abs(p)%r.colors.length]}r.selectColor=e;function r(l){let p,f=null,m,h;function H(...v){if(!H.enabled)return;let _=H,x=Number(new Date),k=x-(p||x);_.diff=k,_.prev=p,_.curr=x,p=x,v[0]=r.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let T=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(K,G)=>{if(K==="%%")return"%";T++;let F=r.formatters[G];if(typeof F=="function"){let R=v[T];K=F.call(_,R),v.splice(T,1),T--}return K}),r.formatArgs.call(_,v),(_.log||r.log).apply(_,v)}return H.namespace=l,H.useColors=r.useColors(),H.color=r.selectColor(l),H.extend=n,H.destroy=r.destroy,Object.defineProperty(H,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(m!==r.namespaces&&(m=r.namespaces,h=r.enabled(l)),h),set:v=>{f=v}}),typeof r.init=="function"&&r.init(H),H}function n(l,p){let f=r(this.namespace+(typeof p>"u"?":":p)+l);return f.log=this.log,f}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let p,f=(typeof l=="string"?l:"").split(/[\s,]+/),m=f.length;for(p=0;p<m;p++)f[p]&&(l=f[p].replace(/\*/g,".*?"),l[0]==="-"?r.skips.push(new RegExp("^"+l.slice(1)+"$")):r.names.push(new RegExp("^"+l+"$")))}function o(){let l=[...r.names.map(a),...r.skips.map(a).map(p=>"-"+p)].join(",");return r.enable(""),l}function s(l){if(l[l.length-1]==="*")return!0;let p,f;for(p=0,f=r.skips.length;p<f;p++)if(r.skips[p].test(l))return!1;for(p=0,f=r.names.length;p<f;p++)if(r.names[p].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function u(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}q6.exports=mbe});var W6=y((kn,G_)=>{kn.formatArgs=Hbe;kn.save=ybe;kn.load=vbe;kn.useColors=gbe;kn.storage=bbe();kn.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();kn.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function gbe(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Hbe(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+G_.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}kn.log=console.debug||console.log||(()=>{});function ybe(t){try{t?kn.storage.setItem("debug",t):kn.storage.removeItem("debug")}catch{}}function vbe(){let t;try{t=kn.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function bbe(){try{return localStorage}catch{}}G_.exports=HL()(kn);var{formatters:wbe}=G_.exports;wbe.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var G6=y((YVe,V6)=>{"use strict";V6.exports=(t,e)=>{e=e||process.argv;let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1?!0:n<i)}});var z6=y((QVe,K6)=>{"use strict";var _be=require("os"),Mi=G6(),qr=process.env,xf;Mi("no-color")||Mi("no-colors")||Mi("color=false")?xf=!1:(Mi("color")||Mi("colors")||Mi("color=true")||Mi("color=always"))&&(xf=!0);"FORCE_COLOR"in qr&&(xf=qr.FORCE_COLOR.length===0||parseInt(qr.FORCE_COLOR,10)!==0);function Abe(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function Ibe(t){if(xf===!1)return 0;if(Mi("color=16m")||Mi("color=full")||Mi("color=truecolor"))return 3;if(Mi("color=256"))return 2;if(t&&!t.isTTY&&xf!==!0)return 0;let e=xf?1:0;if(process.platform==="win32"){let r=_be.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in qr)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(r=>r in qr)||qr.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in qr)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(qr.TEAMCITY_VERSION)?1:0;if(qr.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in qr){let r=parseInt((qr.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(qr.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(qr.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(qr.TERM)||"COLORTERM"in qr?1:(qr.TERM==="dumb",e)}function yL(t){let e=Ibe(t);return Abe(e)}K6.exports={supportsColor:yL,stdout:yL(process.stdout),stderr:yL(process.stderr)}});var J6=y((Ar,z_)=>{var Sbe=require("tty"),K_=require("util");Ar.init=Tbe;Ar.log=Pbe;Ar.formatArgs=Dbe;Ar.save=xbe;Ar.load=Lbe;Ar.useColors=Ebe;Ar.destroy=K_.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Ar.colors=[6,2,3,4,5,1];try{let t=z6();t&&(t.stderr||t).level>=2&&(Ar.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Ar.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function Ebe(){return"colors"in Ar.inspectOpts?!!Ar.inspectOpts.colors:Sbe.isatty(process.stderr.fd)}function Dbe(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+z_.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=Cbe()+e+" "+t[0]}function Cbe(){return Ar.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Pbe(...t){return process.stderr.write(K_.format(...t)+`
`)}function xbe(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function Lbe(){return process.env.DEBUG}function Tbe(t){t.inspectOpts={};let e=Object.keys(Ar.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Ar.inspectOpts[e[r]]}z_.exports=HL()(Ar);var{formatters:X6}=z_.exports;X6.o=function(t){return this.inspectOpts.colors=this.useColors,K_.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};X6.O=function(t){return this.inspectOpts.colors=this.useColors,K_.inspect(t,this.inspectOpts)}});var Y6=y((ZVe,vL)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?vL.exports=W6():vL.exports=J6()});var Z6=y((e4e,Q6)=>{var og;Q6.exports=function(){if(!og){try{og=Y6()("follow-redirects")}catch{}typeof og!="function"&&(og=function(){})}og.apply(null,arguments)}});var DL=y((t4e,EL)=>{var Cc=require("url"),bL=Cc.URL,$be=require("http"),Rbe=require("https"),_L=require("stream").Writable,r9=require("assert"),n9=Z6(),AL=["abort","aborted","connect","error","socket","timeout"],IL=Object.create(null);AL.forEach(function(t){IL[t]=function(e,r,n){this._redirectable.emit(t,e,r,n)}});var Mbe=ag("ERR_INVALID_URL","Invalid URL",TypeError),e9=ag("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),kbe=ag("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),Obe=ag("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),Fbe=ag("ERR_STREAM_WRITE_AFTER_END","write after end"),Nbe=_L.prototype.destroy||o9;function hn(t,e){_L.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var r=this;this._onNativeResponse=function(n){r._processResponse(n)},this._performRequest()}hn.prototype=Object.create(_L.prototype);hn.prototype.abort=function(){SL(this._currentRequest),this._currentRequest.abort(),this.emit("abort")};hn.prototype.destroy=function(t){return SL(this._currentRequest,t),Nbe.call(this,t),this};hn.prototype.write=function(t,e,r){if(this._ending)throw new Fbe;if(!Pc(t)&&!Ube(t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(sg(e)&&(r=e,e=null),t.length===0){r&&r();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new Obe),this.abort())};hn.prototype.end=function(t,e,r){if(sg(t)?(r=t,t=e=null):sg(e)&&(r=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var n=this,i=this._currentRequest;this.write(t,e,function(){n._ended=!0,i.end(null,null,r)}),this._ending=!0}};hn.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};hn.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};hn.prototype.setTimeout=function(t,e){var r=this;function n(s){s.setTimeout(t),s.removeListener("timeout",s.destroy),s.addListener("timeout",s.destroy)}function i(s){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),o()},t),n(s)}function o(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",o),r.removeListener("error",o),r.removeListener("response",o),r.removeListener("close",o),e&&r.removeListener("timeout",e),r.socket||r._currentRequest.removeListener("socket",i)}return e&&this.on("timeout",e),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",n),this.on("abort",o),this.on("error",o),this.on("response",o),this.on("close",o),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){hn.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(hn.prototype,t,{get:function(){return this._currentRequest[t]}})});hn.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};hn.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e){this.emit("error",new TypeError("Unsupported protocol "+t));return}if(this._options.agents){var r=t.slice(0,-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);n._redirectable=this;for(var i of AL)n.on(i,IL[i]);if(this._currentUrl=/^\//.test(this._options.path)?Cc.format(this._options):this._options.path,this._isRedirect){var o=0,s=this,a=this._requestBodyBuffers;(function u(c){if(n===s._currentRequest)if(c)s.emit("error",c);else if(o<a.length){var l=a[o++];n.finished||n.write(l.data,l.encoding,u)}else s._ended&&n.end()})()}};hn.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var r=t.headers.location;if(!r||this._options.followRedirects===!1||e<300||e>=400){t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[];return}if(SL(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new kbe);return}var n,i=this._options.beforeRedirect;i&&(n=Object.assign({Host:t.req.getHeader("host")},this._options.headers));var o=this._options.method;((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],wL(/^content-/i,this._options.headers));var s=wL(/^host$/i,this._options.headers),a=Cc.parse(this._currentUrl),u=s||a.host,c=/^\w+:/.test(r)?this._currentUrl:Cc.format(Object.assign(a,{host:u})),l;try{l=Cc.resolve(c,r)}catch(h){this.emit("error",new e9({cause:h}));return}n9("redirecting to",l),this._isRedirect=!0;var p=Cc.parse(l);if(Object.assign(this._options,p),(p.protocol!==a.protocol&&p.protocol!=="https:"||p.host!==u&&!Bbe(p.host,u))&&wL(/^(?:authorization|cookie)$/i,this._options.headers),sg(i)){var f={headers:t.headers,statusCode:e},m={url:c,method:o,headers:n};try{i(this._options,f,m)}catch(h){this.emit("error",h);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(h){this.emit("error",new e9({cause:h}))}};function i9(t){var e={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(t).forEach(function(n){var i=n+":",o=r[i]=t[n],s=e[n]=Object.create(o);function a(c,l,p){if(Pc(c)){var f;try{f=t9(new bL(c))}catch{f=Cc.parse(c)}if(!Pc(f.protocol))throw new Mbe({input:c});c=f}else bL&&c instanceof bL?c=t9(c):(p=l,l=c,c={protocol:i});return sg(l)&&(p=l,l=null),l=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},c,l),l.nativeProtocols=r,!Pc(l.host)&&!Pc(l.hostname)&&(l.hostname="::1"),r9.equal(l.protocol,i,"protocol mismatch"),n9("options",l),new hn(l,p)}function u(c,l,p){var f=s.request(c,l,p);return f.end(),f}Object.defineProperties(s,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:u,configurable:!0,enumerable:!0,writable:!0}})}),e}function o9(){}function t9(t){var e={protocol:t.protocol,hostname:t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:t.pathname+t.search,href:t.href};return t.port!==""&&(e.port=Number(t.port)),e}function wL(t,e){var r;for(var n in e)t.test(n)&&(r=e[n],delete e[n]);return r===null||typeof r>"u"?void 0:String(r).trim()}function ag(t,e,r){function n(i){Error.captureStackTrace(this,this.constructor),Object.assign(this,i||{}),this.code=t,this.message=this.cause?e+": "+this.cause.message:e}return n.prototype=new(r||Error),n.prototype.constructor=n,n.prototype.name="Error ["+t+"]",n}function SL(t,e){for(var r of AL)t.removeListener(r,IL[r]);t.on("error",o9),t.destroy(e)}function Bbe(t,e){r9(Pc(t)&&Pc(e));var r=t.length-e.length-1;return r>0&&t[r]==="."&&t.endsWith(e)}function Pc(t){return typeof t=="string"||t instanceof String}function sg(t){return typeof t=="function"}function Ube(t){return typeof t=="object"&&"length"in t}EL.exports=i9({http:$be,https:Rbe});EL.exports.wrap=i9});var X_=y((r4e,s9)=>{s9.exports={version:"0.26.1"}});var d9=y((n4e,f9)=>{"use strict";var ug=jr(),a9=fL(),jbe=dL(),u9=F_(),qbe=require("http"),Wbe=require("https"),Vbe=DL().http,Gbe=DL().https,c9=require("url"),Kbe=require("zlib"),zbe=X_().version,Lf=j_(),J_=B_(),Xbe=U_(),Jbe=Ef(),l9=/https:?/;function p9(t,e,r){if(t.hostname=e.host,t.host=e.host,t.port=e.port,t.path=r,e.auth){var n=Buffer.from(e.auth.username+":"+e.auth.password,"utf8").toString("base64");t.headers["Proxy-Authorization"]="Basic "+n}t.beforeRedirect=function(o){o.headers.host=o.host,p9(o,e,o.href)}}f9.exports=function(e){return new Promise(function(n,i){var o;function s(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}var a=function(se){s(),n(se)},u=!1,c=function(se){s(),u=!0,i(se)},l=e.data,p=e.headers,f={};if(Object.keys(p).forEach(function(se){f[se.toLowerCase()]=se}),"user-agent"in f?p[f["user-agent"]]||delete p[f["user-agent"]]:p["User-Agent"]="axios/"+zbe,l&&!ug.isStream(l)){if(!Buffer.isBuffer(l))if(ug.isArrayBuffer(l))l=Buffer.from(new Uint8Array(l));else if(ug.isString(l))l=Buffer.from(l,"utf-8");else return c(Lf("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));if(e.maxBodyLength>-1&&l.length>e.maxBodyLength)return c(Lf("Request body larger than maxBodyLength limit",e));f["content-length"]||(p["Content-Length"]=l.length)}var m=void 0;if(e.auth){var h=e.auth.username||"",H=e.auth.password||"";m=h+":"+H}var v=jbe(e.baseURL,e.url),_=c9.parse(v),x=_.protocol||"http:";if(!m&&_.auth){var k=_.auth.split(":"),T=k[0]||"",j=k[1]||"";m=T+":"+j}m&&f.authorization&&delete p[f.authorization];var K=l9.test(x),G=K?e.httpsAgent:e.httpAgent;try{u9(_.path,e.params,e.paramsSerializer).replace(/^\?/,"")}catch(ae){var F=new Error(ae.message);F.config=e,F.url=e.url,F.exists=!0,c(F)}var R={path:u9(_.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:p,agent:G,agents:{http:e.httpAgent,https:e.httpsAgent},auth:m};e.socketPath?R.socketPath=e.socketPath:(R.hostname=_.hostname,R.port=_.port);var M=e.proxy;if(!M&&M!==!1){var D=x.slice(0,-1)+"_proxy",W=process.env[D]||process.env[D.toUpperCase()];if(W){var O=c9.parse(W),V=process.env.no_proxy||process.env.NO_PROXY,E=!0;if(V){var L=V.split(",").map(function(se){return se.trim()});E=!L.some(function(se){return se?se==="*"||se[0]==="."&&_.hostname.substr(_.hostname.length-se.length)===se?!0:_.hostname===se:!1})}if(E&&(M={host:O.hostname,port:O.port,protocol:O.protocol},O.auth)){var ue=O.auth.split(":");M.auth={username:ue[0],password:ue[1]}}}}M&&(R.headers.host=_.hostname+(_.port?":"+_.port:""),p9(R,M,x+"//"+_.hostname+(_.port?":"+_.port:"")+R.path));var oe,ne=K&&(M?l9.test(M.protocol):!0);e.transport?oe=e.transport:e.maxRedirects===0?oe=ne?Wbe:qbe:(e.maxRedirects&&(R.maxRedirects=e.maxRedirects),oe=ne?Gbe:Vbe),e.maxBodyLength>-1&&(R.maxBodyLength=e.maxBodyLength),e.insecureHTTPParser&&(R.insecureHTTPParser=e.insecureHTTPParser);var X=oe.request(R,function(se){if(!X.aborted){var he=se,Ht=se.req||X;if(se.statusCode!==204&&Ht.method!=="HEAD"&&e.decompress!==!1)switch(se.headers["content-encoding"]){case"gzip":case"compress":case"deflate":he=he.pipe(Kbe.createUnzip()),delete se.headers["content-encoding"];break}var me={status:se.statusCode,statusText:se.statusMessage,headers:se.headers,config:e,request:Ht};if(e.responseType==="stream")me.data=he,a9(a,c,me);else{var Rt=[],Cr=0;he.on("data",function(be){Rt.push(be),Cr+=be.length,e.maxContentLength>-1&&Cr>e.maxContentLength&&(u=!0,he.destroy(),c(Lf("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,Ht)))}),he.on("aborted",function(){u||(he.destroy(),c(Lf("error request aborted",e,"ERR_REQUEST_ABORTED",Ht)))}),he.on("error",function(be){X.aborted||c(J_(be,e,null,Ht))}),he.on("end",function(){try{var be=Rt.length===1?Rt[0]:Buffer.concat(Rt);e.responseType!=="arraybuffer"&&(be=be.toString(e.responseEncoding),(!e.responseEncoding||e.responseEncoding==="utf8")&&(be=ug.stripBOM(be))),me.data=be}catch(Y){c(J_(Y,e,Y.code,me.request,me))}a9(a,c,me)})}}});if(X.on("error",function(se){X.aborted&&se.code!=="ERR_FR_TOO_MANY_REDIRECTS"||c(J_(se,e,null,X))}),X.on("socket",function(se){se.setKeepAlive(!0,1e3*60)}),e.timeout){var ee=parseInt(e.timeout,10);if(isNaN(ee)){c(Lf("error trying to parse `config.timeout` to int",e,"ERR_PARSE_TIMEOUT",X));return}X.setTimeout(ee,function(){X.abort();var se="";e.timeoutErrorMessage?se=e.timeoutErrorMessage:se="timeout of "+e.timeout+"ms exceeded";var he=e.transitional||Xbe;c(Lf(se,e,he.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",X))})}(e.cancelToken||e.signal)&&(o=function(ae){X.aborted||(X.abort(),c(!ae||ae&&ae.type?new Jbe("canceled"):ae))},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o))),ug.isStream(l)?l.on("error",function(se){c(J_(se,e,null,X))}).pipe(X):X.end(l)})}});var Q_=y((i4e,g9)=>{"use strict";var Ir=jr(),h9=w6(),Ybe=B_(),Qbe=U_(),Zbe={"Content-Type":"application/x-www-form-urlencoded"};function m9(t,e){!Ir.isUndefined(t)&&Ir.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function ewe(){var t;return typeof XMLHttpRequest<"u"?t=B6():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(t=d9()),t}function twe(t,e,r){if(Ir.isString(t))try{return(e||JSON.parse)(t),Ir.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Y_={transitional:Qbe,adapter:ewe(),transformRequest:[function(e,r){return h9(r,"Accept"),h9(r,"Content-Type"),Ir.isFormData(e)||Ir.isArrayBuffer(e)||Ir.isBuffer(e)||Ir.isStream(e)||Ir.isFile(e)||Ir.isBlob(e)?e:Ir.isArrayBufferView(e)?e.buffer:Ir.isURLSearchParams(e)?(m9(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Ir.isObject(e)||r&&r["Content-Type"]==="application/json"?(m9(r,"application/json"),twe(e)):e}],transformResponse:[function(e){var r=this.transitional||Y_.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,o=!n&&this.responseType==="json";if(o||i&&Ir.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(o)throw s.name==="SyntaxError"?Ybe(s,this,"E_JSON_PARSE"):s}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ir.forEach(["delete","get","head"],function(e){Y_.headers[e]={}});Ir.forEach(["post","put","patch"],function(e){Y_.headers[e]=Ir.merge(Zbe)});g9.exports=Y_});var y9=y((o4e,H9)=>{"use strict";var rwe=jr(),nwe=Q_();H9.exports=function(e,r,n){var i=this||nwe;return rwe.forEach(n,function(s){e=s.call(i,e,r)}),e}});var CL=y((s4e,v9)=>{"use strict";v9.exports=function(e){return!!(e&&e.__CANCEL__)}});var _9=y((a4e,w9)=>{"use strict";var b9=jr(),PL=y9(),iwe=CL(),owe=Q_(),swe=Ef();function xL(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new swe("canceled")}w9.exports=function(e){xL(e),e.headers=e.headers||{},e.data=PL.call(e,e.data,e.headers,e.transformRequest),e.headers=b9.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),b9.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||owe.adapter;return r(e).then(function(i){return xL(e),i.data=PL.call(e,i.data,i.headers,e.transformResponse),i},function(i){return iwe(i)||(xL(e),i&&i.response&&(i.response.data=PL.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})}});var LL=y((u4e,A9)=>{"use strict";var On=jr();A9.exports=function(e,r){r=r||{};var n={};function i(l,p){return On.isPlainObject(l)&&On.isPlainObject(p)?On.merge(l,p):On.isPlainObject(p)?On.merge({},p):On.isArray(p)?p.slice():p}function o(l){if(On.isUndefined(r[l])){if(!On.isUndefined(e[l]))return i(void 0,e[l])}else return i(e[l],r[l])}function s(l){if(!On.isUndefined(r[l]))return i(void 0,r[l])}function a(l){if(On.isUndefined(r[l])){if(!On.isUndefined(e[l]))return i(void 0,e[l])}else return i(void 0,r[l])}function u(l){if(l in r)return i(e[l],r[l]);if(l in e)return i(void 0,e[l])}var c={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u};return On.forEach(Object.keys(e).concat(Object.keys(r)),function(p){var f=c[p]||o,m=f(p);On.isUndefined(m)&&f!==u||(n[p]=m)}),n}});var E9=y((c4e,S9)=>{"use strict";var awe=X_().version,TL={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){TL[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var I9={};TL.transitional=function(e,r,n){function i(o,s){return"[Axios v"+awe+"] Transitional option '"+o+"'"+s+(n?". "+n:"")}return function(o,s,a){if(e===!1)throw new Error(i(s," has been removed"+(r?" in "+r:"")));return r&&!I9[s]&&(I9[s]=!0,console.warn(i(s," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(o,s,a):!0}};function uwe(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var o=n[i],s=e[o];if(s){var a=t[o],u=a===void 0||s(a,o,t);if(u!==!0)throw new TypeError("option "+o+" must be "+u);continue}if(r!==!0)throw Error("Unknown option "+o)}}S9.exports={assertOptions:uwe,validators:TL}});var T9=y((l4e,L9)=>{"use strict";var P9=jr(),cwe=F_(),D9=v6(),C9=_9(),Z_=LL(),x9=E9(),Tf=x9.validators;function cg(t){this.defaults=t,this.interceptors={request:new D9,response:new D9}}cg.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Z_(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&x9.assertOptions(n,{silentJSONParsing:Tf.transitional(Tf.boolean),forcedJSONParsing:Tf.transitional(Tf.boolean),clarifyTimeoutError:Tf.transitional(Tf.boolean)},!1);var i=[],o=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(r)===!1||(o=o&&m.synchronous,i.unshift(m.fulfilled,m.rejected))});var s=[];this.interceptors.response.forEach(function(m){s.push(m.fulfilled,m.rejected)});var a;if(!o){var u=[C9,void 0];for(Array.prototype.unshift.apply(u,i),u=u.concat(s),a=Promise.resolve(r);u.length;)a=a.then(u.shift(),u.shift());return a}for(var c=r;i.length;){var l=i.shift(),p=i.shift();try{c=l(c)}catch(f){p(f);break}}try{a=C9(c)}catch(f){return Promise.reject(f)}for(;s.length;)a=a.then(s.shift(),s.shift());return a};cg.prototype.getUri=function(e){return e=Z_(this.defaults,e),cwe(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};P9.forEach(["delete","get","head","options"],function(e){cg.prototype[e]=function(r,n){return this.request(Z_(n||{},{method:e,url:r,data:(n||{}).data}))}});P9.forEach(["post","put","patch"],function(e){cg.prototype[e]=function(r,n,i){return this.request(Z_(i||{},{method:e,url:r,data:n}))}});L9.exports=cg});var R9=y((p4e,$9)=>{"use strict";var lwe=Ef();function $f(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var r=this;this.promise.then(function(n){if(r._listeners){var i,o=r._listeners.length;for(i=0;i<o;i++)r._listeners[i](n);r._listeners=null}}),this.promise.then=function(n){var i,o=new Promise(function(s){r.subscribe(s),i=s}).then(n);return o.cancel=function(){r.unsubscribe(i)},o},t(function(i){r.reason||(r.reason=new lwe(i),e(r.reason))})}$f.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};$f.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};$f.prototype.unsubscribe=function(e){if(this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}};$f.source=function(){var e,r=new $f(function(i){e=i});return{token:r,cancel:e}};$9.exports=$f});var k9=y((f4e,M9)=>{"use strict";M9.exports=function(e){return function(n){return e.apply(null,n)}}});var F9=y((d4e,O9)=>{"use strict";var pwe=jr();O9.exports=function(e){return pwe.isObject(e)&&e.isAxiosError===!0}});var U9=y((h4e,$L)=>{"use strict";var N9=jr(),fwe=aL(),e0=T9(),dwe=LL(),hwe=Q_();function B9(t){var e=new e0(t),r=fwe(e0.prototype.request,e);return N9.extend(r,e0.prototype,e),N9.extend(r,e),r.create=function(i){return B9(dwe(t,i))},r}var No=B9(hwe);No.Axios=e0;No.Cancel=Ef();No.CancelToken=R9();No.isCancel=CL();No.VERSION=X_().version;No.all=function(e){return Promise.all(e)};No.spread=k9();No.isAxiosError=F9();$L.exports=No;$L.exports.default=No});var q9=y((m4e,j9)=>{j9.exports=U9()});var W9=y(ML=>{"use strict";Object.defineProperty(ML,"__esModule",{value:!0});var mwe=q9(),RL=class{constructor(e){this.endpoint=e}get(e){return mwe.default.get(this.endpoint,Object.assign(Object.assign({},e),{proxy:!1}))}};ML.AxiosHttpClient=RL});var V9=y(OL=>{"use strict";Object.defineProperty(OL,"__esModule",{value:!0});var kL=class{constructor(){this.storage=new Map}async getValue(e,r){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(r||void 0)}setValue(e,r){this.storage.set(e,r)}};OL.MemoryKeyValueStorage=kL});var G9=y(NL=>{"use strict";Object.defineProperty(NL,"__esModule",{value:!0});var gwe=V9(),FL=class{constructor(e,r,n,i,o){this.telemetry=e,this.assignmentContextTelemetryPropertyName=r,this.telemetryEventName=n,this.storageKey=i,this.storage=o,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(o=new gwe.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise((s,a)=>{this.resolveInitialFetchPromise=s})}get features(){return this._features}set features(e){this._features=e,this.telemetry&&this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext)}async getFeaturesAsync(e=!1){if(this.fetchPromise!=null){try{await this.fetchPromise}catch{}return this.features}if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});try{this.fetchPromise=Promise.all(this.featureProviders.map(async n=>await n.getFeatures()));let r=await this.fetchPromise;this.updateFeatures(r,e)}catch{}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,r=!1){let n={features:[],assignmentContext:"",configs:[]};for(let i of e){for(let o of i.features)n.features.includes(o)||n.features.push(o);for(let o of i.configs){let s=n.configs.find(a=>a.Id===o.Id);s?s.Parameters=Object.assign(Object.assign({},s.Parameters),o.Parameters):n.configs.push(o)}n.assignmentContext+=i.assignmentContext}(r||!this.featuresConsumed)&&(this.features=n),this.storage&&this.storage.setValue(this.storageKey,n)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),e!==void 0&&e.configs===void 0&&(e.configs=[])),this.features.features.length===0&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){let r=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),r.features.includes(e)}getTreatmentVariable(e,r){var n;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${r}`),(n=this.features.configs.find(o=>o.Id===e))===null||n===void 0?void 0:n.Parameters[r]}async getTreatmentVariableAsync(e,r,n){if(n){let i=this.featuresConsumed,o=this.getTreatmentVariable(e,r);if(o===void 0)this.featuresConsumed=i;else return o}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,r)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(!(e==null||this.featureProviders==null))for(let r of e)this.featureProviders.push(r)}};NL.ExperimentationServiceBase=FL});var K9=y(UL=>{"use strict";Object.defineProperty(UL,"__esModule",{value:!0});var BL=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(e&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}};UL.PollingService=BL});var z9=y(qL=>{"use strict";Object.defineProperty(qL,"__esModule",{value:!0});var Hwe=G9(),ywe=K9(),jL=class extends Hwe.ExperimentationServiceBase{constructor(e,r,n,i,o,s,a){if(super(e,i,o,s,a),this.telemetry=e,this.filterProviders=r,this.refreshRateMs=n,this.assignmentContextTelemetryPropertyName=i,this.telemetryEventName=o,this.storageKey=s,this.storage=a,n<1e3&&n!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");n>0&&(this.pollingService=new ywe.PollingService(n),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let r=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),r}else return await super.getFeaturesAsync(e)}};qL.ExperimentationServiceAutoPolling=jL});var X9=y(WL=>{"use strict";Object.defineProperty(WL,"__esModule",{value:!0});var vwe=l6(),bwe=W9(),wwe=z9(),t0=class extends wwe.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],e.refetchInterval!=null?e.refetchInterval:0,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage),this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new vwe.TasApiFeatureProvider(new bwe.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}};WL.ExperimentationService=t0;t0.REFRESH_RATE_IN_MINUTES=30});var J9=y(VL=>{"use strict";Object.defineProperty(VL,"__esModule",{value:!0});var _we=X9();VL.ExperimentationService=_we.ExperimentationService});var Y9=y(KL=>{"use strict";Object.defineProperty(KL,"__esModule",{value:!0});var GL=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,r){return await this.mementoGlobalStorage.get(e)||r}setValue(e,r){this.mementoGlobalStorage.update(e,r)}};KL.MementoKeyValueStorage=GL});var Q9=y(XL=>{"use strict";Object.defineProperty(XL,"__esModule",{value:!0});var zL=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}};XL.default=zL});var eK=y(r0=>{"use strict";Object.defineProperty(r0,"__esModule",{value:!0});var Awe=eL(),Iwe=J9(),JL=require("vscode"),Swe=Y9(),Ewe=Q9(),Dwe="https://default.exp-tas.com/vscode/ab",Cwe="query-expfeature",Pwe="abexp.assignmentcontext",xwe="VSCode.ABExp.FeatureData",Lwe=1e3*60*30;function Z9(t,e,r,n,i,...o){if(!i)throw new Error("Memento storage was not provided.");let s=JL.workspace.getConfiguration("telemetry");if(!(JL.env.isTelemetryEnabled===void 0?s.get("enableTelemetry",!0):JL.env.isTelemetryEnabled))return new Ewe.default;let c=[new Awe.VSCodeFilterProvider(t,e,r),...o],l=new Swe.MementoKeyValueStorage(i);return new Iwe.ExperimentationService({filterProviders:c,telemetry:n,storageKey:xwe,keyValueStorage:l,featuresTelemetryPropertyName:"",assignmentContextTelemetryPropertyName:Pwe,telemetryEventName:Cwe,endpoint:Dwe,refetchInterval:Lwe})}r0.getExperimentationService=Z9;async function Twe(t,e,r,n,i,...o){let s=Z9(t,e,r,n,i,...o);return await s.initializePromise,s}r0.getExperimentationServiceAsync=Twe});var rK=y(lg=>{"use strict";Object.defineProperty(lg,"__esModule",{value:!0});var tK=eK();lg.getExperimentationService=tK.getExperimentationService;lg.getExperimentationServiceAsync=tK.getExperimentationServiceAsync;var $we=eL();lg.TargetPopulation=$we.TargetPopulation});var lz=y(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});function vT(t){this.j={},this.jr=[],this.jd=null,this.t=t}vT.prototype={accepts:function(){return!!this.t},tt:function(e,r){if(r&&r.j)return this.j[e]=r,r;var n=r,i=this.j[e];if(i)return n&&(i.t=n),i;i=Ye();var o=A0(this,e);return o?(Object.assign(i.j,o.j),i.jr.append(o.jr),i.jr=o.jd,i.t=n||o.t):i.t=n,this.j[e]=i,i}};var Ye=function(){return new vT},He=function(e){return new vT(e)},re=function(e,r,n){e.j[r]||(e.j[r]=n)},pr=function(e,r,n){e.jr.push([r,n])},A0=function(e,r){var n=e.j[r];if(n)return n;for(var i=0;i<e.jr.length;i++){var o=e.jr[i][0],s=e.jr[i][1];if(o.test(r))return s}return e.jd},Ce=function(e,r,n){for(var i=0;i<r.length;i++)re(e,r[i],n)},o_e=function(e,r){for(var n=0;n<r.length;n++){var i=r[n][0],o=r[n][1];re(e,i,o)}},Fc=function(e,r,n,i){for(var o=0,s=r.length,a;o<s&&(a=e.j[r[o]]);)e=a,o++;if(o>=s)return[];for(;o<s-1;)a=i(),re(e,r[o],a),e=a,o++;re(e,r[s-1],n)},Fi="DOMAIN",Ms="LOCALHOST",jo="TLD",di="NUM",wd="PROTOCOL",bT="MAILTO",sz="WS",wT="NL",gd="OPENBRACE",Eg="OPENBRACKET",Dg="OPENANGLEBRACKET",Cg="OPENPAREN",Nc="CLOSEBRACE",Hd="CLOSEBRACKET",yd="CLOSEANGLEBRACKET",vd="CLOSEPAREN",I0="AMPERSAND",S0="APOSTROPHE",E0="ASTERISK",bd="AT",D0="BACKSLASH",C0="BACKTICK",P0="CARET",Pg="COLON",_T="COMMA",x0="DOLLAR",uu="DOT",L0="EQUALS",AT="EXCLAMATION",T0="HYPHEN",$0="PERCENT",R0="PIPE",M0="PLUS",k0="POUND",O0="QUERY",IT="QUOTE",ST="SEMI",ks="SLASH",F0="TILDE",N0="UNDERSCORE",B0="SYM",s_e=Object.freeze({__proto__:null,DOMAIN:Fi,LOCALHOST:Ms,TLD:jo,NUM:di,PROTOCOL:wd,MAILTO:bT,WS:sz,NL:wT,OPENBRACE:gd,OPENBRACKET:Eg,OPENANGLEBRACKET:Dg,OPENPAREN:Cg,CLOSEBRACE:Nc,CLOSEBRACKET:Hd,CLOSEANGLEBRACKET:yd,CLOSEPAREN:vd,AMPERSAND:I0,APOSTROPHE:S0,ASTERISK:E0,AT:bd,BACKSLASH:D0,BACKTICK:C0,CARET:P0,COLON:Pg,COMMA:_T,DOLLAR:x0,DOT:uu,EQUALS:L0,EXCLAMATION:AT,HYPHEN:T0,PERCENT:$0,PIPE:R0,PLUS:M0,POUND:k0,QUERY:O0,QUOTE:IT,SEMI:ST,SLASH:ks,TILDE:F0,UNDERSCORE:N0,SYM:B0}),nz="aaa aarp abarth abb abbott abbvie abc able abogado abudhabi ac academy accenture accountant accountants aco actor ad adac ads adult ae aeg aero aetna af afamilycompany afl africa ag agakhan agency ai aig airbus airforce airtel akdn al alfaromeo alibaba alipay allfinanz allstate ally alsace alstom am amazon americanexpress americanfamily amex amfam amica amsterdam analytics android anquan anz ao aol apartments app apple aq aquarelle ar arab aramco archi army arpa art arte as asda asia associates at athleta attorney au auction audi audible audio auspost author auto autos avianca aw aws ax axa az azure ba baby baidu banamex bananarepublic band bank bar barcelona barclaycard barclays barefoot bargains baseball basketball bauhaus bayern bb bbc bbt bbva bcg bcn bd be beats beauty beer bentley berlin best bestbuy bet bf bg bh bharti bi bible bid bike bing bingo bio biz bj black blackfriday blockbuster blog bloomberg blue bm bms bmw bn bnpparibas bo boats boehringer bofa bom bond boo book booking bosch bostik boston bot boutique box br bradesco bridgestone broadway broker brother brussels bs bt budapest bugatti build builders business buy buzz bv bw by bz bzh ca cab cafe cal call calvinklein cam camera camp cancerresearch canon capetown capital capitalone car caravan cards care career careers cars casa case cash casino cat catering catholic cba cbn cbre cbs cc cd center ceo cern cf cfa cfd cg ch chanel channel charity chase chat cheap chintai christmas chrome church ci cipriani circle cisco citadel citi citic city cityeats ck cl claims cleaning click clinic clinique clothing cloud club clubmed cm cn co coach codes coffee college cologne com comcast commbank community company compare computer comsec condos construction consulting contact contractors cooking cookingchannel cool coop corsica country coupon coupons courses cpa cr credit creditcard creditunion cricket crown crs cruise cruises csc cu cuisinella cv cw cx cy cymru cyou cz dabur dad dance data date dating datsun day dclk dds de deal dealer deals degree delivery dell deloitte delta democrat dental dentist desi design dev dhl diamonds diet digital direct directory discount discover dish diy dj dk dm dnp do docs doctor dog domains dot download drive dtv dubai duck dunlop dupont durban dvag dvr dz earth eat ec eco edeka edu education ee eg email emerck energy engineer engineering enterprises epson equipment er ericsson erni es esq estate et etisalat eu eurovision eus events exchange expert exposed express extraspace fage fail fairwinds faith family fan fans farm farmers fashion fast fedex feedback ferrari ferrero fi fiat fidelity fido film final finance financial fire firestone firmdale fish fishing fit fitness fj fk flickr flights flir florist flowers fly fm fo foo food foodnetwork football ford forex forsale forum foundation fox fr free fresenius frl frogans frontdoor frontier ftr fujitsu fujixerox fun fund furniture futbol fyi ga gal gallery gallo gallup game games gap garden gay gb gbiz gd gdn ge gea gent genting george gf gg ggee gh gi gift gifts gives giving gl glade glass gle global globo gm gmail gmbh gmo gmx gn godaddy gold goldpoint golf goo goodyear goog google gop got gov gp gq gr grainger graphics gratis green gripe grocery group gs gt gu guardian gucci guge guide guitars guru gw gy hair hamburg hangout haus hbo hdfc hdfcbank health healthcare help helsinki here hermes hgtv hiphop hisamitsu hitachi hiv hk hkt hm hn hockey holdings holiday homedepot homegoods homes homesense honda horse hospital host hosting hot hoteles hotels hotmail house how hr hsbc ht hu hughes hyatt hyundai ibm icbc ice icu id ie ieee ifm ikano il im imamat imdb immo immobilien in inc industries infiniti info ing ink institute insurance insure int international intuit investments io ipiranga iq ir irish is ismaili ist istanbul it itau itv iveco jaguar java jcb je jeep jetzt jewelry jio jll jm jmp jnj jo jobs joburg jot joy jp jpmorgan jprs juegos juniper kaufen kddi ke kerryhotels kerrylogistics kerryproperties kfh kg kh ki kia kim kinder kindle kitchen kiwi km kn koeln komatsu kosher kp kpmg kpn kr krd kred kuokgroup kw ky kyoto kz la lacaixa lamborghini lamer lancaster lancia land landrover lanxess lasalle lat latino latrobe law lawyer lb lc lds lease leclerc lefrak legal lego lexus lgbt li lidl life lifeinsurance lifestyle lighting like lilly limited limo lincoln linde link lipsy live living lixil lk llc llp loan loans locker locus loft lol london lotte lotto love lpl lplfinancial lr ls lt ltd ltda lu lundbeck luxe luxury lv ly ma macys madrid maif maison makeup man management mango map market marketing markets marriott marshalls maserati mattel mba mc mckinsey md me med media meet melbourne meme memorial men menu merckmsd mg mh miami microsoft mil mini mint mit mitsubishi mk ml mlb mls mm mma mn mo mobi mobile moda moe moi mom monash money monster mormon mortgage moscow moto motorcycles mov movie mp mq mr ms msd mt mtn mtr mu museum mutual mv mw mx my mz na nab nagoya name nationwide natura navy nba nc ne nec net netbank netflix network neustar new news next nextdirect nexus nf nfl ng ngo nhk ni nico nike nikon ninja nissan nissay nl no nokia northwesternmutual norton now nowruz nowtv np nr nra nrw ntt nu nyc nz obi observer off office okinawa olayan olayangroup oldnavy ollo om omega one ong onl online onyourside ooo open oracle orange org organic origins osaka otsuka ott ovh pa page panasonic paris pars partners parts party passagens pay pccw pe pet pf pfizer pg ph pharmacy phd philips phone photo photography photos physio pics pictet pictures pid pin ping pink pioneer pizza pk pl place play playstation plumbing plus pm pn pnc pohl poker politie porn post pr pramerica praxi press prime pro prod productions prof progressive promo properties property protection pru prudential ps pt pub pw pwc py qa qpon quebec quest qvc racing radio raid re read realestate realtor realty recipes red redstone redumbrella rehab reise reisen reit reliance ren rent rentals repair report republican rest restaurant review reviews rexroth rich richardli ricoh ril rio rip rmit ro rocher rocks rodeo rogers room rs rsvp ru rugby ruhr run rw rwe ryukyu sa saarland safe safety sakura sale salon samsclub samsung sandvik sandvikcoromant sanofi sap sarl sas save saxo sb sbi sbs sc sca scb schaeffler schmidt scholarships school schule schwarz science scjohnson scot sd se search seat secure security seek select sener services ses seven sew sex sexy sfr sg sh shangrila sharp shaw shell shia shiksha shoes shop shopping shouji show showtime si silk sina singles site sj sk ski skin sky skype sl sling sm smart smile sn sncf so soccer social softbank software sohu solar solutions song sony soy spa space sport spot spreadbetting sr srl ss st stada staples star statebank statefarm stc stcgroup stockholm storage store stream studio study style su sucks supplies supply support surf surgery suzuki sv swatch swiftcover swiss sx sy sydney systems sz tab taipei talk taobao target tatamotors tatar tattoo tax taxi tc tci td tdk team tech technology tel temasek tennis teva tf tg th thd theater theatre tiaa tickets tienda tiffany tips tires tirol tj tjmaxx tjx tk tkmaxx tl tm tmall tn to today tokyo tools top toray toshiba total tours town toyota toys tr trade trading training travel travelchannel travelers travelersinsurance trust trv tt tube tui tunes tushu tv tvs tw tz ua ubank ubs ug uk unicom university uno uol ups us uy uz va vacations vana vanguard vc ve vegas ventures verisign versicherung vet vg vi viajes video vig viking villas vin vip virgin visa vision viva vivo vlaanderen vn vodka volkswagen volvo vote voting voto voyage vu vuelos wales walmart walter wang wanggou watch watches weather weatherchannel webcam weber website wed wedding weibo weir wf whoswho wien wiki williamhill win windows wine winners wme wolterskluwer woodside work works world wow ws wtc wtf xbox xerox xfinity xihuan xin xxx xyz yachts yahoo yamaxun yandex ye yodobashi yoga yokohama you youtube yt yun za zappos zara zero zip zm zone zuerich zw verm\xF6gensberater-ctb verm\xF6gensberatung-pwb \u03B5\u03BB \u03B5\u03C5 \u0431\u0433 \u0431\u0435\u043B \u0434\u0435\u0442\u0438 \u0435\u044E \u043A\u0430\u0442\u043E\u043B\u0438\u043A \u043A\u043E\u043C \u049B\u0430\u0437 \u043C\u043A\u0434 \u043C\u043E\u043D \u043C\u043E\u0441\u043A\u0432\u0430 \u043E\u043D\u043B\u0430\u0439\u043D \u043E\u0440\u0433 \u0440\u0443\u0441 \u0440\u0444 \u0441\u0430\u0439\u0442 \u0441\u0440\u0431 \u0443\u043A\u0440 \u10D2\u10D4 \u0570\u0561\u0575 \u05D9\u05E9\u05E8\u05D0\u05DC \u05E7\u05D5\u05DD \u0627\u0628\u0648\u0638\u0628\u064A \u0627\u062A\u0635\u0627\u0644\u0627\u062A \u0627\u0631\u0627\u0645\u0643\u0648 \u0627\u0644\u0627\u0631\u062F\u0646 \u0627\u0644\u0628\u062D\u0631\u064A\u0646 \u0627\u0644\u062C\u0632\u0627\u0626\u0631 \u0627\u0644\u0633\u0639\u0648\u062F\u064A\u0629 \u0627\u0644\u0639\u0644\u064A\u0627\u0646 \u0627\u0644\u0645\u063A\u0631\u0628 \u0627\u0645\u0627\u0631\u0627\u062A \u0627\u06CC\u0631\u0627\u0646 \u0628\u0627\u0631\u062A \u0628\u0627\u0632\u0627\u0631 \u0628\u06BE\u0627\u0631\u062A \u0628\u064A\u062A\u0643 \u067E\u0627\u06A9\u0633\u062A\u0627\u0646 \u0680\u0627\u0631\u062A \u062A\u0648\u0646\u0633 \u0633\u0648\u062F\u0627\u0646 \u0633\u0648\u0631\u064A\u0629 \u0634\u0628\u0643\u0629 \u0639\u0631\u0627\u0642 \u0639\u0631\u0628 \u0639\u0645\u0627\u0646 \u0641\u0644\u0633\u0637\u064A\u0646 \u0642\u0637\u0631 \u0643\u0627\u062B\u0648\u0644\u064A\u0643 \u0643\u0648\u0645 \u0645\u0635\u0631 \u0645\u0644\u064A\u0633\u064A\u0627 \u0645\u0648\u0631\u064A\u062A\u0627\u0646\u064A\u0627 \u0645\u0648\u0642\u0639 \u0647\u0645\u0631\u0627\u0647 \u0915\u0949\u092E \u0928\u0947\u091F \u092D\u093E\u0930\u0924 \u092D\u093E\u0930\u0924\u092E\u094D \u092D\u093E\u0930\u094B\u0924 \u0938\u0902\u0917\u0920\u0928 \u09AC\u09BE\u0982\u09B2\u09BE \u09AD\u09BE\u09B0\u09A4 \u09AD\u09BE\u09F0\u09A4 \u0A2D\u0A3E\u0A30\u0A24 \u0AAD\u0ABE\u0AB0\u0AA4 \u0B2D\u0B3E\u0B30\u0B24 \u0B87\u0BA8\u0BCD\u0BA4\u0BBF\u0BAF\u0BBE \u0B87\u0BB2\u0B99\u0BCD\u0B95\u0BC8 \u0B9A\u0BBF\u0B99\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0BC2\u0BB0\u0BCD \u0C2D\u0C3E\u0C30\u0C24\u0C4D \u0CAD\u0CBE\u0CB0\u0CA4 \u0D2D\u0D3E\u0D30\u0D24\u0D02 \u0DBD\u0D82\u0D9A\u0DCF \u0E04\u0E2D\u0E21 \u0E44\u0E17\u0E22 \u0EA5\u0EB2\u0EA7 \uB2F7\uB137 \uB2F7\uCEF4 \uC0BC\uC131 \uD55C\uAD6D \u30A2\u30DE\u30BE\u30F3 \u30B0\u30FC\u30B0\u30EB \u30AF\u30E9\u30A6\u30C9 \u30B3\u30E0 \u30B9\u30C8\u30A2 \u30BB\u30FC\u30EB \u30D5\u30A1\u30C3\u30B7\u30E7\u30F3 \u30DD\u30A4\u30F3\u30C8 \u307F\u3093\u306A \u4E16\u754C \u4E2D\u4FE1 \u4E2D\u56FD \u4E2D\u570B \u4E2D\u6587\u7F51 \u4E9A\u9A6C\u900A \u4F01\u4E1A \u4F5B\u5C71 \u4FE1\u606F \u5065\u5EB7 \u516B\u5366 \u516C\u53F8 \u516C\u76CA \u53F0\u6E7E \u53F0\u7063 \u5546\u57CE \u5546\u5E97 \u5546\u6807 \u5609\u91CC \u5609\u91CC\u5927\u9152\u5E97 \u5728\u7EBF \u5927\u4F17\u6C7D\u8F66 \u5927\u62FF \u5929\u4E3B\u6559 \u5A31\u4E50 \u5BB6\u96FB \u5E7F\u4E1C \u5FAE\u535A \u6148\u5584 \u6211\u7231\u4F60 \u624B\u673A \u62DB\u8058 \u653F\u52A1 \u653F\u5E9C \u65B0\u52A0\u5761 \u65B0\u95FB \u65F6\u5C1A \u66F8\u7C4D \u673A\u6784 \u6DE1\u9A6C\u9521 \u6E38\u620F \u6FB3\u9580 \u70B9\u770B \u79FB\u52A8 \u7EC4\u7EC7\u673A\u6784 \u7F51\u5740 \u7F51\u5E97 \u7F51\u7AD9 \u7F51\u7EDC \u8054\u901A \u8BFA\u57FA\u4E9A \u8C37\u6B4C \u8D2D\u7269 \u901A\u8CA9 \u96C6\u56E2 \u96FB\u8A0A\u76C8\u79D1 \u98DE\u5229\u6D66 \u98DF\u54C1 \u9910\u5385 \u9999\u683C\u91CC\u62C9 \u9999\u6E2F".split(" "),_g=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,Ag=/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDD-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6])/,Ig=/\uFE0F/,Sg=/\d/,iz=/\s/;function a_e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=Ye(),r=He(di),n=He(Fi),i=Ye(),o=He(sz),s=[[Sg,n],[_g,n],[Ag,n],[Ig,n]],a=function(){var T=He(Fi);return T.j={"-":i},T.jr=[].concat(s),T},u=function(T){var j=a();return j.t=T,j};o_e(e,[["'",He(S0)],["{",He(gd)],["[",He(Eg)],["<",He(Dg)],["(",He(Cg)],["}",He(Nc)],["]",He(Hd)],[">",He(yd)],[")",He(vd)],["&",He(I0)],["*",He(E0)],["@",He(bd)],["`",He(C0)],["^",He(P0)],[":",He(Pg)],[",",He(_T)],["$",He(x0)],[".",He(uu)],["=",He(L0)],["!",He(AT)],["-",He(T0)],["%",He($0)],["|",He(R0)],["+",He(M0)],["#",He(k0)],["?",He(O0)],['"',He(IT)],["/",He(ks)],[";",He(ST)],["~",He(F0)],["_",He(N0)],["\\",He(D0)]]),re(e,`
`,He(wT)),pr(e,iz,o),re(o,`
`,Ye()),pr(o,iz,o);for(var c=0;c<nz.length;c++)Fc(e,nz[c],u(jo),a);var l=a(),p=a(),f=a(),m=a();Fc(e,"file",l,a),Fc(e,"ftp",p,a),Fc(e,"http",f,a),Fc(e,"mailto",m,a);var h=a(),H=He(wd),v=He(bT);re(p,"s",h),re(p,":",H),re(f,"s",h),re(f,":",H),re(l,":",H),re(h,":",H),re(m,":",v);for(var _=a(),x=0;x<t.length;x++)Fc(e,t[x],_,a);return re(_,":",H),Fc(e,"localhost",u(Ms),a),pr(e,Sg,r),pr(e,_g,n),pr(e,Ag,n),pr(e,Ig,n),pr(r,Sg,r),pr(r,_g,n),pr(r,Ag,n),pr(r,Ig,n),re(r,"-",i),re(n,"-",i),re(i,"-",i),pr(n,Sg,n),pr(n,_g,n),pr(n,Ag,n),pr(n,Ig,n),pr(i,Sg,n),pr(i,_g,n),pr(i,Ag,n),pr(i,Ig,n),e.jd=He(B0),e}function u_e(t,e){for(var r=c_e(e.replace(/[A-Z]/g,function(m){return m.toLowerCase()})),n=r.length,i=[],o=0,s=0;s<n;){for(var a=t,u=null,c=0,l=null,p=-1,f=-1;s<n&&(u=A0(a,r[s]));)a=u,a.accepts()?(p=0,f=0,l=a):p>=0&&(p+=r[s].length,f++),c+=r[s].length,o+=r[s].length,s++;o-=p,s-=f,c-=p,i.push({t:l.t,v:e.substr(o-c,c),s:o-c,e:o})}return i}function c_e(t){for(var e=[],r=t.length,n=0;n<r;){var i=t.charCodeAt(n),o=void 0,s=i<55296||i>56319||n+1===r||(o=t.charCodeAt(n+1))<56320||o>57343?t[n]:t.slice(n,n+2);e.push(s),n+=s.length}return e}function _0(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_0=function(e){return typeof e}:_0=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_0(t)}var Er={defaultProtocol:"http",events:null,format:oz,formatHref:oz,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:0,className:null,attributes:null,ignoreTags:[]};function ET(t){t=t||{},this.defaultProtocol="defaultProtocol"in t?t.defaultProtocol:Er.defaultProtocol,this.events="events"in t?t.events:Er.events,this.format="format"in t?t.format:Er.format,this.formatHref="formatHref"in t?t.formatHref:Er.formatHref,this.nl2br="nl2br"in t?t.nl2br:Er.nl2br,this.tagName="tagName"in t?t.tagName:Er.tagName,this.target="target"in t?t.target:Er.target,this.rel="rel"in t?t.rel:Er.rel,this.validate="validate"in t?t.validate:Er.validate,this.truncate="truncate"in t?t.truncate:Er.truncate,this.className="className"in t?t.className:Er.className,this.attributes=t.attributes||Er.attributes,this.ignoreTags=[];for(var e=("ignoreTags"in t)?t.ignoreTags:Er.ignoreTags,r=0;r<e.length;r++)this.ignoreTags.push(e[r].toUpperCase())}ET.prototype={resolve:function(e){var r=e.toHref(this.defaultProtocol);return{formatted:this.get("format",e.toString(),e),formattedHref:this.get("formatHref",r,e),tagName:this.get("tagName",r,e),className:this.get("className",r,e),target:this.get("target",r,e),rel:this.get("rel",r,e),events:this.getObject("events",r,e),attributes:this.getObject("attributes",r,e),truncate:this.get("truncate",r,e)}},check:function(e){return this.get("validate",e.toString(),e)},get:function(e,r,n){var i=this[e];if(!i)return i;var o;switch(_0(i)){case"function":return i(r,n.t);case"object":return o=n.t in i?i[n.t]:Er[e],typeof o=="function"?o(r,n.t):o}return i},getObject:function(e,r,n){var i=this[e];return typeof i=="function"?i(r,n.t):i}};function oz(t){return t}var l_e=Object.freeze({__proto__:null,defaults:Er,Options:ET});function p_e(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=Object.create(t.prototype);for(var i in r)n[i]=r[i];return n.constructor=e,e.prototype=n,e}function U0(){}U0.prototype={t:"token",isLink:!1,toString:function(){return this.v},toHref:function(){return this.toString()},startIndex:function(){return this.tk[0].s},endIndex:function(){return this.tk[this.tk.length-1].e},toObject:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Er.defaultProtocol;return{type:this.t,value:this.v,isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}}};function Bc(t,e){function r(n,i){this.t=t,this.v=n,this.tk=i}return p_e(U0,r,e),r}var az=Bc("email",{isLink:!0}),gT=Bc("email",{isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),HT=Bc("text"),uz=Bc("nl"),au=Bc("url",{isLink:!0,toHref:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Er.defaultProtocol,r=this.tk,n=!1,i=!1,o=[],s=0;r[s].t===wd;)n=!0,o.push(r[s].v),s++;for(;r[s].t===ks;)i=!0,o.push(r[s].v),s++;for(;s<r.length;s++)o.push(r[s].v);return o=o.join(""),n||i||(o="".concat(e,"://").concat(o)),o},hasProtocol:function(){return this.tk[0].t===wd}}),f_e=Object.freeze({__proto__:null,MultiToken:U0,Base:U0,createTokenClass:Bc,MailtoEmail:az,Email:gT,Text:HT,Nl:uz,Url:au});function d_e(){var t=Ye(),e=Ye(),r=Ye(),n=Ye(),i=Ye(),o=Ye(),s=Ye(),a=He(au),u=Ye(),c=He(au),l=He(au),p=Ye(),f=Ye(),m=Ye(),h=Ye(),H=Ye(),v=He(au),_=He(au),x=He(au),k=He(au),T=Ye(),j=Ye(),K=Ye(),G=Ye(),F=Ye(),R=Ye(),M=He(gT),D=Ye(),W=He(gT),O=He(az),V=Ye(),E=Ye(),L=Ye(),ue=Ye(),oe=He(uz);re(t,wT,oe),re(t,wd,e),re(t,bT,r),re(e,ks,n),re(n,ks,i),re(t,jo,o),re(t,Fi,o),re(t,Ms,a),re(t,di,o),re(i,jo,l),re(i,Fi,l),re(i,di,l),re(i,Ms,l),re(o,uu,s),re(F,uu,R),re(s,jo,a),re(s,Fi,o),re(s,di,o),re(s,Ms,o),re(R,jo,M),re(R,Fi,F),re(R,di,F),re(R,Ms,F),re(a,uu,s),re(M,uu,R),re(a,Pg,u),re(a,ks,l),re(u,di,c),re(c,ks,l),re(M,Pg,D),re(D,di,W);var ne=[I0,E0,bd,D0,C0,P0,x0,Fi,L0,T0,Ms,di,$0,R0,M0,k0,wd,ks,B0,F0,jo,N0],X=[S0,yd,Nc,Hd,vd,Pg,_T,uu,AT,Dg,gd,Eg,Cg,O0,IT,ST];re(l,gd,f),re(l,Eg,m),re(l,Dg,h),re(l,Cg,H),re(p,gd,f),re(p,Eg,m),re(p,Dg,h),re(p,Cg,H),re(f,Nc,l),re(m,Hd,l),re(h,yd,l),re(H,vd,l),re(v,Nc,l),re(_,Hd,l),re(x,yd,l),re(k,vd,l),re(T,Nc,l),re(j,Hd,l),re(K,yd,l),re(G,vd,l),Ce(f,ne,v),Ce(m,ne,_),Ce(h,ne,x),Ce(H,ne,k),Ce(f,X,T),Ce(m,X,j),Ce(h,X,K),Ce(H,X,G),Ce(v,ne,v),Ce(_,ne,_),Ce(x,ne,x),Ce(k,ne,k),Ce(v,X,v),Ce(_,X,_),Ce(x,X,x),Ce(k,X,k),Ce(T,ne,v),Ce(j,ne,_),Ce(K,ne,x),Ce(G,ne,k),Ce(T,X,T),Ce(j,X,j),Ce(K,X,K),Ce(G,X,G),Ce(l,ne,l),Ce(p,ne,l),Ce(l,X,p),Ce(p,X,p),re(r,jo,O),re(r,Fi,O),re(r,di,O),re(r,Ms,O),Ce(O,ne,O),Ce(O,X,V),Ce(V,ne,O),Ce(V,X,V);var ee=[I0,S0,E0,D0,C0,P0,Nc,x0,Fi,L0,T0,di,gd,$0,R0,M0,k0,O0,ks,B0,F0,jo,N0];return Ce(o,ee,E),re(o,bd,L),Ce(a,ee,E),re(a,bd,L),Ce(s,ee,E),Ce(E,ee,E),re(E,bd,L),re(E,uu,ue),Ce(ue,ee,E),re(L,jo,F),re(L,Fi,F),re(L,di,F),re(L,Ms,M),t}function h_e(t,e,r){for(var n=r.length,i=0,o=[],s=[];i<n;){for(var a=t,u=null,c=null,l=0,p=null,f=-1;i<n&&!(u=A0(a,r[i].t));)s.push(r[i++]);for(;i<n&&(c=u||A0(a,r[i].t));)u=null,a=c,a.accepts()?(f=0,p=a):f>=0&&f++,i++,l++;if(f<0)for(var m=i-l;m<i;m++)s.push(r[m]);else{s.length>0&&(o.push(mT(HT,e,s)),s=[]),i-=f,l-=f;var h=p.t,H=r.slice(i-l,i);o.push(mT(h,e,H))}}return s.length>0&&o.push(mT(HT,e,s)),o}function mT(t,e,r){var n=r[0].s,i=r[r.length-1].e,o=e.substr(n,i-n);return new t(o,r)}var yT=typeof console<"u"&&console&&console.warn||function(){},_t={scanner:null,parser:null,pluginQueue:[],customProtocols:[],initialized:!1};function m_e(){_t.scanner=null,_t.parser=null,_t.pluginQueue=[],_t.customProtocols=[],_t.initialized=!1}function g_e(t,e){for(var r=0;r<_t.pluginQueue.length;r++)if(t===_t.pluginQueue[r][0]){yT('linkifyjs: plugin "'.concat(t,'" already registered - will be overwritten')),_t.pluginQueue[r]=[t,e];return}_t.pluginQueue.push([t,e]),_t.initialized&&yT('linkifyjs: already initialized - will not register plugin "'.concat(t,'" until you manually call linkify.init(). To avoid this warning, please register all plugins before invoking linkify the first time.'))}function H_e(t){if(_t.initialized&&yT('linkifyjs: already initialized - will not register custom protocol "'.concat(t,'" until you manually call linkify.init(). To avoid this warning, please register all custom protocols before invoking linkify the first time.')),!/^[a-z-]+$/.test(t))throw Error("linkifyjs: protocols containing characters other than a-z or - (hyphen) are not supported");_t.customProtocols.push(t)}function cz(){_t.scanner={start:a_e(_t.customProtocols),tokens:s_e},_t.parser={start:d_e(),tokens:f_e};for(var t={createTokenClass:Bc},e=0;e<_t.pluginQueue.length;e++)_t.pluginQueue[e][1]({scanner:_t.scanner,parser:_t.parser,utils:t});_t.initialized=!0}function DT(t){return _t.initialized||cz(),h_e(_t.parser.start,t,u_e(_t.scanner.start,t))}function y_e(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=DT(t),n=[],i=0;i<r.length;i++){var o=r[i];o.isLink&&(!e||o.t===e)&&n.push(o.toObject())}return n}function v_e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=DT(t);return r.length===1&&r[0].isLink&&(!e||r[0].t===e)}Ni.Options=ET;Ni.find=y_e;Ni.init=cz;Ni.options=l_e;Ni.registerCustomProtocol=H_e;Ni.registerPlugin=g_e;Ni.reset=m_e;Ni.test=v_e;Ni.tokenize=DT});var fz=y((B9e,pz)=>{pz.exports=lz()});var M_e={};uX(M_e,{activate:()=>$_e,deactivate:()=>R_e});module.exports=cX(M_e);var tX=I(_e()),rX=require("os"),Wt=I(require("vscode"));var Ed=new Map([["pwa-node","node"],["pwa-chrome","chrome"],["pwa-extensionHost","extensionHost"],["pwa-msedge","msedge"]]),Wc=t=>Ed.get(t)||t,SX={"pwa-extensionHost":null,"node-terminal":null,"pwa-node":null,"pwa-chrome":null,"pwa-msedge":null},EX={"extension.js-debug.addCustomBreakpoints":null,"extension.pwa-node-debug.attachNodeProcess":null,"extension.js-debug.clearAutoAttachVariables":null,"extension.js-debug.setAutoAttachVariables":null,"extension.js-debug.autoAttachToProcess":null,"extension.js-debug.createDebuggerTerminal":null,"extension.js-debug.createDiagnostics":null,"extension.js-debug.getDiagnosticLogs":null,"extension.js-debug.debugLink":null,"extension.js-debug.npmScript":null,"extension.js-debug.pickNodeProcess":null,"extension.js-debug.prettyPrint":null,"extension.js-debug.removeAllCustomBreakpoints":null,"extension.js-debug.revealPage":null,"extension.js-debug.startProfile":null,"extension.js-debug.stopProfile":null,"extension.js-debug.toggleSkippingFile":null,"extension.node-debug.startWithStopOnEntry":null,"extension.js-debug.requestCDPProxy":null,"extension.js-debug.openEdgeDevTools":null,"extension.js-debug.callers.add":null,"extension.js-debug.callers.goToCaller":null,"extension.js-debug.callers.gotToTarget":null,"extension.js-debug.callers.remove":null,"extension.js-debug.callers.removeAll":null,"extension.js-debug.enableSourceMapStepping":null,"extension.js-debug.disableSourceMapStepping":null},F_e=new Set(Object.keys(EX)),sA=new Set(Object.keys(SX)),Bs=t=>sA.has(t);var Pe=(t,e,r)=>t.registerCommand(e,r),Fg=async(t,e,...r)=>await t.executeCommand(e,...r);var It=(t,e,r)=>t.getConfiguration(void 0,r).get(e),aA=(t,e,r,n)=>t.getConfiguration().update(e,r,n);var Dd=async(t,e,r)=>await t.executeCommand("setContext",e,r);var St=t=>!!t,Vc=t=>Bg(t,e=>e!==null),WT=t=>Bg(t,e=>e!==void 0),du=t=>e=>e instanceof t,Ng=(t,e)=>{debugger;throw new Error(e.replace("{value}",JSON.stringify(t)))};function Bg(t,e){let r={};for(let n of Object.keys(t)){let i=t[n];e(i,n)&&(r[n]=i)}return r}function qo(t,e){let r={};for(let n of Object.keys(t)){let i=t[n];r[n]=e(i,n)}return r}function VT(t,e){let r={};for(let n of Object.keys(t))e(n,t[n])&&(r[n]=t[n]);return r}function GT(...t){if(t.length===0)return{};let e={},r=Object.create(null);for(let n of t)if(n)for(let i of Object.keys(n)){let o=i.toLowerCase();r[o]?e[r[o]]=n[i]:(r[o]=i,e[i]=n[i])}return e}function KT(t,e){if(t.hasOwnProperty(e))return t[e];let r=e.toLowerCase();for(let n of Object.keys(t))if(n.toLowerCase()===r)return t[n]}var uA=Symbol("unset");function Ae(t){let e=uA,r=(...n)=>(e===uA&&(r.value=e=t(...n)),e);return r.forget=()=>{e=uA,r.value=void 0},r.value=void 0,r}function Wo(t){let e=new Map,r=n=>{if(e.has(n))return e.get(n);let i=t(n);return e.set(n,i),i};return r.clear=()=>e.clear(),r}function zT(t){let e,r=n=>(e?.arg===n||(e={arg:n,val:t(n)}),e.val);return r.clear=()=>e=void 0,r}function XT(t,e){let r,n=()=>{r!==void 0&&clearTimeout(r),r=setTimeout(()=>{r=void 0,e()},t)};return n.clear=()=>{r&&(clearTimeout(r),r=void 0)},n}function JT(t,e){let r,n=()=>{r===void 0&&(r=setTimeout(()=>{r=void 0,e()},t))};return n.queued=()=>!!r,n.clear=()=>{r&&(clearTimeout(r),r=void 0)},n}async function YT(t,e){let r=[],n=[];for(let i of t)await e(i)?r.push(i):n.push(i);return[r,n]}function Vo(t){let e=[];for(let r of t)e=e.concat(r);return e}var DX=2**31-1,Ug=()=>{let t=0;return()=>t++&DX};var $e=Symbol("AnyLaunchConfiguration"),jg={type:"",name:"",request:"",trace:!1,outputCapture:"console",timeout:1e4,timeouts:{},showAsyncStacks:!0,skipFiles:[],smartStep:!0,sourceMaps:!0,sourceMapRenames:!0,pauseForSourceMap:!0,resolveSourceMapLocations:null,rootPath:"${workspaceFolder}",outFiles:["${workspaceFolder}/**/*.js","!**/node_modules/**"],sourceMapPathOverrides:dA("${workspaceFolder}"),enableContentValidation:!0,cascadeTerminateToConfigurations:[],enableDWARF:!0,__workspaceFolder:"",__remoteFilePrefix:void 0,__breakOnConditionalError:!1,customDescriptionGenerator:void 0,customPropertiesGenerator:void 0},Cd={...jg,cwd:"${workspaceFolder}",env:{},envFile:null,pauseForSourceMap:!1,sourceMaps:!0,localRoot:null,remoteRoot:null,resolveSourceMapLocations:["**","!**/node_modules/**"],autoAttachChildProcesses:!0,runtimeSourcemapPausePatterns:[],skipFiles:["<node_internals>/**"]},qg={...Cd,showAsyncStacks:{onceBreakpointResolved:16},type:"node-terminal",request:"launch",name:"JavaScript Debug Terminal"},CX={...Cd,type:"node-terminal",request:"attach",name:qg.name,showAsyncStacks:{onceBreakpointResolved:16},delegateId:-1},cA={...Cd,type:"pwa-extensionHost",name:"Debug Extension",request:"launch",args:["--extensionDevelopmentPath=${workspaceFolder}"],outFiles:["${workspaceFolder}/out/**/*.js"],resolveSourceMapLocations:["${workspaceFolder}/**","!**/node_modules/**"],rendererDebugOptions:{},runtimeExecutable:"${execPath}",autoAttachChildProcesses:!1,debugWebviews:!1,debugWebWorkerHost:!1,__sessionId:""},PX={...Cd,type:"pwa-node",request:"launch",program:"",cwd:"${workspaceFolder}",stopOnEntry:!1,console:"internalConsole",restart:!1,args:[],runtimeExecutable:"node",runtimeVersion:"default",runtimeArgs:[],profileStartup:!1,attachSimplePort:null,killBehavior:"forceful"},Pd={...jg,type:"pwa-chrome",request:"attach",address:"localhost",port:0,disableNetworkCache:!0,pathMapping:{},url:null,restart:!1,urlFilter:"",sourceMapPathOverrides:dA("${webRoot}"),webRoot:"${workspaceFolder}",server:null,browserAttachLocation:"workspace",targetSelection:"automatic",vueComponentPaths:["${workspaceFolder}/**/*.vue","!**/node_modules/**"],perScriptSourcemaps:"auto"},lA={...Pd,type:"pwa-msedge",useWebView:!1},Wg={...Pd,type:"pwa-chrome",request:"launch",cwd:null,file:null,env:{},urlFilter:"*",includeDefaultArgs:!0,includeLaunchArgs:!0,runtimeArgs:null,runtimeExecutable:"*",userDataDir:!0,browserLaunchLocation:"workspace",profileStartup:!1,cleanUp:"wholeBrowser"},pA={...Wg,type:"pwa-msedge",useWebView:!1},fA={...Cd,type:"pwa-node",attachExistingChildren:!0,address:"localhost",port:9229,restart:!1,request:"attach",continueOnAttach:!1};function dA(t){return{"webpack:///./~/*":`${t}/node_modules/*`,"webpack:////*":"/*","webpack://@?:*/?:*/*":`${t}/*`,"webpack://?:*/*":`${t}/*`,"webpack:///([a-z]):/(.+)":"$1:/$2","meteor://\u{1F4BB}app/*":`${t}/*`}}var Vg=t=>{!t.sourceMapPathOverrides&&t.cwd&&(t.sourceMapPathOverrides=dA(t.cwd)),t.resolveSourceMapLocations===void 0&&!t.remoteRoot&&(t.resolveSourceMapLocations=t.outFiles)};function hA({...t}){return Vg(t),t.request==="attach"?{...fA,...t}:{...PX,...t}}function xX(t,e){return t.request==="attach"?{...Pd,browserAttachLocation:e,...t}:{...Wg,browserLaunchLocation:e,...t}}function LX(t,e){return t.request==="attach"?{...lA,browserAttachLocation:e,...t}:{...pA,browserLaunchLocation:e,...t}}function TX(t){let e={...cA,...t};return e.skipFiles=[...e.skipFiles,"**/node_modules.asar/**","**/bootstrap-fork.js"],e}function mA(t){return Vg(t),t.request==="launch"?{...qg,...t}:{...CX,...t}}function Us(t,e){let r,n=e==="remote"?"ui":"workspace";switch(t.type){case"pwa-node":r=hA(t);break;case"pwa-msedge":r=LX(t,n);break;case"pwa-chrome":r=xX(t,n);break;case"pwa-extensionHost":r=TX(t);break;case"node-terminal":r=mA(t);break;default:throw Ng(t,"Unknown config: {value}")}return HA(r)}function gA(t){let e="${workspaceFolder}",r={...t,rootPath:void 0,outFiles:t.outFiles.filter(n=>!n.includes(e)),sourceMapPathOverrides:Bg(t.sourceMapPathOverrides,n=>!n.includes("${workspaceFolder}"))};return"vueComponentPaths"in r&&(r.vueComponentPaths=r.vueComponentPaths.filter(n=>!n.includes(e))),"resolveSourceMapLocations"in r&&(r.resolveSourceMapLocations=r.resolveSourceMapLocations?.filter(n=>!n.includes(e))??null),"cwd"in r&&r.cwd?.includes(e)&&(r.cwd=void 0),"webRoot"in r&&r.webRoot?.includes(e)&&(r.webRoot="/"),r}function HA(t){return t.__workspaceFolder||(t=gA(t)),t=Bi(t,"workspaceFolder",t.__workspaceFolder),t=Bi(t,"webRoot","webRoot"in t?t.webRoot:t.__workspaceFolder),t}function Bi(t,e,r){let n;if(typeof t=="string")n=t.replace(new RegExp(`\\$\\{${e}\\}`,"g"),()=>{if(!r)throw new Error(`Unable to resolve \${${e}} in configuration (${JSON.stringify(e)})`);return r});else if(t instanceof Array)n=t.map(i=>Bi(i,e,r));else if(typeof t=="object"&&t){let i={};for(let[o,s]of Object.entries(t))i[Bi(o,e,r)]=Bi(s,e,r);n=i}else n=t;return n}var Gg=["javascript","typescript","typescriptreact","javascriptreact","fsharp","html","wat","c","cpp","rust","zig"],Kg="js-debug-nightly",hu="2023.11.717",$X="ms-vscode",zg=Kg.includes("nightly"),QT=`${$X}.${Kg}`;var W0=I(xA()),Hz=I(QA()),q0=require("fs"),V0=I(J());var bk;(function(t){(function(e){var r=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),n=i(t);typeof r.Reflect>"u"?r.Reflect=t:n=i(r.Reflect,n),e(n);function i(o,s){return function(a,u){typeof o[a]!="function"&&Object.defineProperty(o,a,{configurable:!0,writable:!0,value:u}),s&&s(a,u)}}})(function(e){var r=Object.prototype.hasOwnProperty,n=typeof Symbol=="function",i=n&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=n&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",s=typeof Object.create=="function",a={__proto__:[]}instanceof Array,u=!s&&!a,c={create:s?function(){return mi(Object.create(null))}:a?function(){return mi({__proto__:null})}:function(){return mi({})},has:u?function(d,g){return r.call(d,g)}:function(d,g){return g in d},get:u?function(d,g){return r.call(d,g)?d[g]:void 0}:function(d,g){return d[g]}},l=Object.getPrototypeOf(Function),p=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",f=!p&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Mg(),m=!p&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:nA(),h=!p&&typeof WeakMap=="function"?WeakMap:ve(),H=new h;function v(d,g,w,A){if(ee(w)){if(!be(d))throw new TypeError;if(!ye(g))throw new TypeError;return M(d,g)}else{if(!be(d))throw new TypeError;if(!he(g))throw new TypeError;if(!he(A)&&!ee(A)&&!ae(A))throw new TypeError;return ae(A)&&(A=void 0),w=Q(w),D(d,g,w,A)}}e("decorate",v);function _(d,g){function w(A,P){if(!he(A))throw new TypeError;if(!ee(P)&&!Ne(P))throw new TypeError;ue(d,g,A,P)}return w}e("metadata",_);function x(d,g,w,A){if(!he(w))throw new TypeError;return ee(A)||(A=Q(A)),ue(d,g,w,A)}e("defineMetadata",x);function k(d,g,w){if(!he(g))throw new TypeError;return ee(w)||(w=Q(w)),O(d,g,w)}e("hasMetadata",k);function T(d,g,w){if(!he(g))throw new TypeError;return ee(w)||(w=Q(w)),V(d,g,w)}e("hasOwnMetadata",T);function j(d,g,w){if(!he(g))throw new TypeError;return ee(w)||(w=Q(w)),E(d,g,w)}e("getMetadata",j);function K(d,g,w){if(!he(g))throw new TypeError;return ee(w)||(w=Q(w)),L(d,g,w)}e("getOwnMetadata",K);function G(d,g){if(!he(d))throw new TypeError;return ee(g)||(g=Q(g)),oe(d,g)}e("getMetadataKeys",G);function F(d,g){if(!he(d))throw new TypeError;return ee(g)||(g=Q(g)),ne(d,g)}e("getOwnMetadataKeys",F);function R(d,g,w){if(!he(g))throw new TypeError;ee(w)||(w=Q(w));var A=W(g,w,!1);if(ee(A)||!A.delete(d))return!1;if(A.size>0)return!0;var P=H.get(g);return P.delete(w),P.size>0||H.delete(g),!0}e("deleteMetadata",R);function M(d,g){for(var w=d.length-1;w>=0;--w){var A=d[w],P=A(g);if(!ee(P)&&!ae(P)){if(!ye(P))throw new TypeError;g=P}}return g}function D(d,g,w,A){for(var P=d.length-1;P>=0;--P){var $=d[P],B=$(g,w,A);if(!ee(B)&&!ae(B)){if(!he(B))throw new TypeError;A=B}}return A}function W(d,g,w){var A=H.get(d);if(ee(A)){if(!w)return;A=new f,H.set(d,A)}var P=A.get(g);if(ee(P)){if(!w)return;P=new f,A.set(g,P)}return P}function O(d,g,w){var A=V(d,g,w);if(A)return!0;var P=qc(g);return ae(P)?!1:O(d,P,w)}function V(d,g,w){var A=W(g,w,!1);return ee(A)?!1:Rt(A.has(d))}function E(d,g,w){var A=V(d,g,w);if(A)return L(d,g,w);var P=qc(g);if(!ae(P))return E(d,P,w)}function L(d,g,w){var A=W(g,w,!1);if(!ee(A))return A.get(d)}function ue(d,g,w,A){var P=W(w,A,!0);P.set(d,g)}function oe(d,g){var w=ne(d,g),A=qc(d);if(A===null)return w;var P=oe(A,g);if(P.length<=0)return w;if(w.length<=0)return P;for(var $=new m,B=[],U=0,N=w;U<N.length;U++){var ie=N[U],fe=$.has(ie);fe||($.add(ie),B.push(ie))}for(var ge=0,Te=P;ge<Te.length;ge++){var ie=Te[ge],fe=$.has(ie);fe||($.add(ie),B.push(ie))}return B}function ne(d,g){var w=[],A=W(d,g,!1);if(ee(A))return w;for(var P=A.keys(),$=yt(P),B=0;;){var U=Ns($);if(!U)return w.length=B,w;var N=Fs(U);try{w[B]=N}catch(ie){try{fu($)}finally{throw ie}}B++}}function X(d){if(d===null)return 1;switch(typeof d){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return d===null?1:6;default:return 6}}function ee(d){return d===void 0}function ae(d){return d===null}function se(d){return typeof d=="symbol"}function he(d){return typeof d=="object"?d!==null:typeof d=="function"}function Ht(d,g){switch(X(d)){case 0:return d;case 1:return d;case 2:return d;case 3:return d;case 4:return d;case 5:return d}var w=g===3?"string":g===5?"number":"default",A=ft(d,i);if(A!==void 0){var P=A.call(d,w);if(he(P))throw new TypeError;return P}return me(d,w==="default"?"number":w)}function me(d,g){if(g==="string"){var w=d.toString;if(Y(w)){var A=w.call(d);if(!he(A))return A}var P=d.valueOf;if(Y(P)){var A=P.call(d);if(!he(A))return A}}else{var P=d.valueOf;if(Y(P)){var A=P.call(d);if(!he(A))return A}var $=d.toString;if(Y($)){var A=$.call(d);if(!he(A))return A}}throw new TypeError}function Rt(d){return!!d}function Cr(d){return""+d}function Q(d){var g=Ht(d,3);return se(g)?g:Cr(g)}function be(d){return Array.isArray?Array.isArray(d):d instanceof Object?d instanceof Array:Object.prototype.toString.call(d)==="[object Array]"}function Y(d){return typeof d=="function"}function ye(d){return typeof d=="function"}function Ne(d){switch(X(d)){case 3:return!0;case 4:return!0;default:return!1}}function ft(d,g){var w=d[g];if(w!=null){if(!Y(w))throw new TypeError;return w}}function yt(d){var g=ft(d,o);if(!Y(g))throw new TypeError;var w=g.call(d);if(!he(w))throw new TypeError;return w}function Fs(d){return d.value}function Ns(d){var g=d.next();return g.done?!1:g}function fu(d){var g=d.return;g&&g.call(d)}function qc(d){var g=Object.getPrototypeOf(d);if(typeof d!="function"||d===l||g!==l)return g;var w=d.prototype,A=w&&Object.getPrototypeOf(w);if(A==null||A===Object.prototype)return g;var P=A.constructor;return typeof P!="function"||P===d?g:P}function Mg(){var d={},g=[],w=function(){function B(U,N,ie){this._index=0,this._keys=U,this._values=N,this._selector=ie}return B.prototype["@@iterator"]=function(){return this},B.prototype[o]=function(){return this},B.prototype.next=function(){var U=this._index;if(U>=0&&U<this._keys.length){var N=this._selector(this._keys[U],this._values[U]);return U+1>=this._keys.length?(this._index=-1,this._keys=g,this._values=g):this._index++,{value:N,done:!1}}return{value:void 0,done:!0}},B.prototype.throw=function(U){throw this._index>=0&&(this._index=-1,this._keys=g,this._values=g),U},B.prototype.return=function(U){return this._index>=0&&(this._index=-1,this._keys=g,this._values=g),{value:U,done:!0}},B}();return function(){function B(){this._keys=[],this._values=[],this._cacheKey=d,this._cacheIndex=-2}return Object.defineProperty(B.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),B.prototype.has=function(U){return this._find(U,!1)>=0},B.prototype.get=function(U){var N=this._find(U,!1);return N>=0?this._values[N]:void 0},B.prototype.set=function(U,N){var ie=this._find(U,!0);return this._values[ie]=N,this},B.prototype.delete=function(U){var N=this._find(U,!1);if(N>=0){for(var ie=this._keys.length,fe=N+1;fe<ie;fe++)this._keys[fe-1]=this._keys[fe],this._values[fe-1]=this._values[fe];return this._keys.length--,this._values.length--,U===this._cacheKey&&(this._cacheKey=d,this._cacheIndex=-2),!0}return!1},B.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=d,this._cacheIndex=-2},B.prototype.keys=function(){return new w(this._keys,this._values,A)},B.prototype.values=function(){return new w(this._keys,this._values,P)},B.prototype.entries=function(){return new w(this._keys,this._values,$)},B.prototype["@@iterator"]=function(){return this.entries()},B.prototype[o]=function(){return this.entries()},B.prototype._find=function(U,N){return this._cacheKey!==U&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=U)),this._cacheIndex<0&&N&&(this._cacheIndex=this._keys.length,this._keys.push(U),this._values.push(void 0)),this._cacheIndex},B}();function A(B,U){return B}function P(B,U){return U}function $(B,U){return[B,U]}}function nA(){return function(){function d(){this._map=new f}return Object.defineProperty(d.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),d.prototype.has=function(g){return this._map.has(g)},d.prototype.add=function(g){return this._map.set(g,g),this},d.prototype.delete=function(g){return this._map.delete(g)},d.prototype.clear=function(){this._map.clear()},d.prototype.keys=function(){return this._map.keys()},d.prototype.values=function(){return this._map.values()},d.prototype.entries=function(){return this._map.entries()},d.prototype["@@iterator"]=function(){return this.keys()},d.prototype[o]=function(){return this.keys()},d}()}function ve(){var d=16,g=c.create(),w=A();return function(){function N(){this._key=A()}return N.prototype.has=function(ie){var fe=P(ie,!1);return fe!==void 0?c.has(fe,this._key):!1},N.prototype.get=function(ie){var fe=P(ie,!1);return fe!==void 0?c.get(fe,this._key):void 0},N.prototype.set=function(ie,fe){var ge=P(ie,!0);return ge[this._key]=fe,this},N.prototype.delete=function(ie){var fe=P(ie,!1);return fe!==void 0?delete fe[this._key]:!1},N.prototype.clear=function(){this._key=A()},N}();function A(){var N;do N="@@WeakMap@@"+U();while(c.has(g,N));return g[N]=!0,N}function P(N,ie){if(!r.call(N,w)){if(!ie)return;Object.defineProperty(N,w,{value:c.create()})}return N[w]}function $(N,ie){for(var fe=0;fe<ie;++fe)N[fe]=Math.random()*255|0;return N}function B(N){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(N)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(N)):$(new Uint8Array(N),N):$(new Array(N),N)}function U(){var N=B(d);N[6]=N[6]&79|64,N[8]=N[8]&191|128;for(var ie="",fe=0;fe<d;++fe){var ge=N[fe];(fe===4||fe===6||fe===8)&&(ie+="-"),ge<16&&(ie+="0"),ie+=ge.toString(16).toLowerCase()}return ie}}function mi(d){return d.__=void 0,delete d.__,d}})})(bk||(bk={}));var uh=require("fs"),nr=I(J()),ky=I(require("path"));var z=class{constructor(){this._listeners=new Set;this.event=(e,r,n)=>{let i={listener:e,thisArg:r};this._listeners.add(i);let o={dispose:()=>{o.dispose=()=>{},this._listeners.delete(i)}};return n&&n.push(o),o}}get size(){return this._listeners.size}fire(e){let r=!this._deliveryQueue;this._deliveryQueue||(this._deliveryQueue=[]);for(let n of this._listeners)this._deliveryQueue.push({data:n,event:e});if(r){for(let n=0;n<this._deliveryQueue.length;n++){let{data:i,event:o}=this._deliveryQueue[n];i.listener.call(i.thisArg,o)}this._deliveryQueue=void 0}}dispose(){this._listeners.clear(),this._deliveryQueue&&(this._deliveryQueue=[])}},qd=class{constructor(){this.map=new Map;this.listeners=this.map}listen(e,r){let n=this.map.get(e);n||(n=new z,this.map.set(e,n));let i=n.event(r);return{dispose:Ae(()=>{i.dispose(),n?.size===0&&this.map.delete(e)})}}emit(e,r){this.listeners.get(e)?.fire(r)}};var vu=I(J()),Gd=I(require("path"));var Ik=require("crypto"),Sk=I(QA()),Ek=require("os"),Me=I(require("path"));var Xo=I(require("fs")),wk=I(require("util"));async function yu({access:t},e){if(!e)return!1;try{return await t(e),!0}catch{return!1}}async function LI(t,e,r){try{await t.copyFile(e,r)}catch(n){try{if(await yu(t,r))await t.unlink(r),await t.copyFile(e,r);else throw n}catch{throw n}}}async function bn({stat:t},e){if(e)try{return await t(e)}catch{return}}async function _k({lstat:t},e){if(e)try{return await t(e)}catch{return}}async function Ak({copyFile:t,rename:e,unlink:r},n,i){try{await e(n,i)}catch{await t(n,i),await r(n)}}function JH(t){return new Promise(e=>{Xo.readFile(t,"utf8",async(r,n)=>{e(r?"":n)})})}var NAe=wk.promisify(Xo.writeFile);var Mr=Symbol("FsUtils"),vn=class{constructor(e){this.fs=e}realPath(e){return this.fs.realpath(e)}async exists(e){try{return await this.fs.access(e,Xo.constants.F_OK),!0}catch{return!1}}readFile(e){return this.fs.readFile(e)}},xI=class{constructor(e){this.dap=e}async realPath(){throw new Error("not implemented")}async exists(e){try{let{doesExists:r}=await this.dap.remoteFileExistsRequest({localFilePath:e});return r}catch{return!1}}readFile(){throw new Error("not implemented")}},XH=class{constructor(e,r,n){this.remoteFilePrefix=e;this.localFsUtils=r;this.remoteFsUtils=n}static create(e,r,n){let i=new vn(r);return e!==void 0?new this(e.toLowerCase(),i,new xI(n)):i}async exists(e){return this.selectFs(e).exists(e)}async readFile(e){return this.selectFs(e).readFile(e)}async realPath(e){return this.selectFs(e).realPath(e)}selectFs(e){return e.toLowerCase().startsWith(this.remoteFilePrefix)?this.remoteFsUtils:this.localFsUtils}};var Zte=process.platform==="win32"?"\\\\.\\pipe\\":(0,Ek.tmpdir)(),ere=0,YH=()=>Me.join(Zte,`node-cdp.${process.pid}-${(0,Ik.randomBytes)(4).toString("hex")}-${ere++}.sock`);async function QH(t,e,r){let n;if(process.platform==="win32"){let i=r.WINDIR||"C:\\Windows";n=Me.join(i,"System32","where.exe")}else n="/usr/bin/which";try{if(await bn(t,n)){let o=(await(0,Sk.default)(n,[e],{env:Vc(r)})).stdout.split(/\r?\n/);if(process.platform==="win32"){let s=String(r.PATHEXT||".exe").toUpperCase().split(";");for(let a of o){let u=Me.extname(a).toUpperCase();if(u&&s.includes(u))return a}}else if(o.length>0)return o[0];return}return e}catch{}}async function Dk(t,e,r){if(e){if(process.platform==="win32"&&!Me.extname(e)){let n=r.lookup("PATHEXT");if(n){let i=n.split(";");for(let o of i){let s=e+o;if(await bn(t,s))return s}}}if(await bn(t,e))return e}}var Ck=t=>t.includes(`.asar${Me.sep}`);function Ws(...t){return Me.posix.isAbsolute(t[0])?Ge(Me.posix.join(...t)):Me.win32.isAbsolute(t[0])?Me.win32.join(...t):Me.join(...t)}function wn(...t){return Me.posix.isAbsolute(t[0])?Me.posix.resolve(...t):Me.win32.isAbsolute(t[0])?Me.win32.resolve(...t):Me.resolve(...t)}function Vd(t,e){return Me.posix.isAbsolute(t)?Me.posix.relative(t,e):Me.win32.isAbsolute(t)?Me.win32.relative(t,e):Me.relative(t,e)}var tre=/\/|\\/,Wd="file:///",Pk=t=>t.startsWith(Wd)&&t[Wd.length+1]===":",TI=t=>t.split(tre);function $I(t,e=!1){if(!t)return t;if(Pk(t)){let r=Wd.length;t=Wd+t[r].toLowerCase()+t.substr(r+1)}else ty(t)&&(t=(e?t[0].toUpperCase():t[0].toLowerCase())+t.substr(1));return t}function Pt(t,e=!1){if(!t)return t;if(t=$I(t,e),Pk(t)){let r=Wd.length;t=t.substr(0,r+1)+t.substr(r+1).replace(/\//g,"\\")}else ty(t)&&(t=t.replace(/\//g,"\\"));return t}function Ge(t){return t.replace(/\\\//g,"/").replace(/\\/g,"/")}var ZH=(t,e)=>{let r=Me.relative(t,e);return r.length&&!Me.isAbsolute(r)&&!r.startsWith("..")},ey=(t,e)=>{let r=Me.relative(t,e);return!Me.isAbsolute(r)&&!r.startsWith("..")},RI=t=>t.startsWith("\\\\"),ty=t=>/^[A-Za-z]:/.test(t)||RI(t);var sl=class{get empty(){return this.patterns.length===0}constructor({rootPath:e,patterns:r}){!e||!r?(this.rootPath="",this.patterns=[]):(this.rootPath=e,this.patterns=r.map(n=>{let i=n.startsWith("!");return{negated:i,pattern:n.slice(i?1:0)}}))}*explode(){for(let e=0;e<this.patterns.length;e++){let{negated:r,pattern:n}=this.patterns[e];if(r)continue;let i=Gd.resolve(this.rootPath,n).split(/[\\/]/g),o=i.findIndex(u=>u.includes("*"));if(o===-1){yield{cwd:i.slice(0,-1).join("/"),pattern:i[i.length-1],negations:[]};continue}let s=i.slice(0,o).join("/"),a=[];for(let u=e+1;u<this.patterns.length;u++){let{negated:c,pattern:l}=this.patterns[u];if(c)if(l.startsWith("**"))a.push(Ge(l));else{let p=Gd.relative(s,Gd.resolve(this.rootPath,l));p.startsWith("..")||a.push(Ge(p))}}yield{cwd:s,negations:a,pattern:i.slice(o).join("/")}}}};sl=C([(0,vu.injectable)()],sl);var io=class extends sl{constructor({rootPath:e,outFiles:r}){super({rootPath:e,patterns:r})}};io=C([(0,vu.injectable)(),b(0,(0,vu.inject)($e))],io);var Jo=class extends sl{constructor(e){super({rootPath:e.rootPath,patterns:"vueComponentPaths"in e?e.vueComponentPaths:[]})}};Jo=C([(0,vu.injectable)(),b(0,(0,vu.inject)($e))],Jo);var Lk=require("crypto"),Tk=require("os"),$k=I(require("path"));var Kd=require("fs"),xk=require("path"),ny=require("zlib"),nre=(t,e)=>e instanceof Error?{message:e.message,stack:e.stack}:typeof e=="bigint"?e.toString():e,ry=class{constructor(e,r){this.file=e;this.dap=r;try{(0,Kd.mkdirSync)((0,xk.dirname)(e),{recursive:!0})}catch{}e.endsWith(".gz")?(this.stream=(0,ny.createGzip)(),this.stream.pipe((0,Kd.createWriteStream)(e))):this.stream=(0,Kd.createWriteStream)(e)}async setup(){this.dap?.output({category:"console",output:`Verbose logs are written to:
${this.file}
`})}dispose(){this.stream&&(this.stream.end(),this.stream=void 0)}write(e){this.stream&&(this.stream.write(JSON.stringify(e,nre)+`
`),this.stream.flush?.(ny.constants.Z_SYNC_FLUSH))}};var ire={runtime:null,"runtime.sourcecreate":null,"runtime.assertion":null,"runtime.launch":null,"runtime.target":null,"runtime.welcome":null,"runtime.exception":null,"runtime.sourcemap":null,"runtime.breakpoints":null,"sourcemap.parsing":null,"perf.function":null,"cdp.send":null,"cdp.receive":null,"dap.send":null,"dap.receive":null,internal:null,proxyActivity:null},JAe=Object.keys(ire),ce=Symbol("ILogger");function MI(t,e=(0,Tk.tmpdir)()){if(t===!1)return{stdio:!1,logFile:null};let r={stdio:!0,logFile:$k.join(e,`vscode-debugadapter-${(0,Lk.randomBytes)(4).toString("hex")}.json.gz`)};return t===!0?r:{...r,...t}}function Rk(t,e){let r=MI(e),n={sinks:[]};return r.logFile&&n.sinks.push(new ry(r.logFile,t)),n}var lo=I(J()),Z1=I(ly());var py=class extends Error{constructor(r,n,i){super(`Unexpected ${r} response from ${n}: ${i??"<empty body>"}`);this.statusCode=r;this.url=n;this.body=i}},wu=Symbol("IResourceProvider");var Le=t=>isFinite(t)?new Promise(e=>setTimeout(e,t)):new Promise(()=>{}),i1=(t,e)=>{let r=setTimeout(t,e);return{dispose:()=>clearTimeout(r)}};function so(t){return new Promise((e,r)=>{let n=t.length;for(let i of t)i.then(o=>{o?(e(o),n=-1):--n===0&&e(void 0)}).catch(r)})}function Be(){let t=null,e=null,r=!1,n,i=new Promise((o,s)=>{t=a=>{r=!0,n=a,o(a)},e=a=>{r=!0,s(a)}});return{resolve:t,reject:e,promise:i,get settledValue(){return n},hasSettled:()=>r}}var it=I(_e());var Z=class extends Error{constructor(r){super("__errorMarker"in r?r.error.format:r.format);this._cause="__errorMarker"in r?r.error:r}get cause(){return this._cause}};function o1(t,e){t.output({category:"console",output:e+`
`})}function Ke(t,e=9222){return{__errorMarker:!0,error:{id:e,format:t,showUser:!1}}}function Xe(t,e=9223){return{__errorMarker:!0,error:{id:e,format:t,showUser:!0}}}var QI=()=>Xe(it.t("Attribute 'runtimeVersion' requires Node.js version manager 'nvs', 'nvm' or 'fnm' to be installed."),9224),s1=()=>Xe(it.t("Attribute 'runtimeVersion' with a flavor/architecture requires 'nvs' to be installed."),9225),a1=()=>Xe(it.t("Attribute 'runtimeVersion' requires Node.js version manager 'nvm-windows' or 'nvs'."),9226),ZI=(t,e)=>Xe(it.t("Node.js version '{0}' not installed using version manager {1}.",t,e),9226),u1=t=>Xe(it.t("Cannot launch debug target in terminal ({0}).",t),9227),c1=t=>Xe(it.t("Can't load environment variables from file ({0}).",t),9228),l1=t=>Xe(it.t("The configured `cwd` {0} does not exist.",t),9245),eS=(t,e)=>Xe(it.t(`Can't find Node.js binary "{0}": {1}. Make sure Node.js is installed and in your PATH, or set the "runtimeExecutable" in your launch.json`,t,e),9229),p1=(t,e)=>Xe(it.t('The Node version in "{0}" is outdated (version {1}), we require at least Node 8.x.',e,t),9230),tS=t=>Xe(it.t('Invalid hit condition "{0}". Expected an expression like "> 42" or "== 2".',t),9231),ll=()=>Xe(it.t("An error occurred taking a profile from the target."),9235),f1=()=>Xe(it.t("Please stop the running profile before starting a new one."),9236),d1=t=>Ke(t,9238),fy=(t,e,r)=>Xe(e==="*"&&!r.length?it.t('Unable to find an installation of the browser on your system. Try installing it, or providing an absolute path to the browser in the "runtimeExecutable" in your launch.json.'):it.t('Unable to find {0} version {1}. Available auto-discovered versions are: {2}. You can set the "runtimeExecutable" in your launch.json to one of these, or provide an absolute path to the browser executable.',t,e,JSON.stringify([...new Set(r)])),9233),h1=t=>Xe(it.t('Unable to launch browser: "{0}"',t.message),9240),Zd=t=>Xe(t??it.t("Unable to attach to browser"),9242),dy=()=>Xe(it.t('Target page not found. You may need to update your "urlFilter" to match the page you want to debug.'),9241);var m1=()=>Ke(it.t("Variables not available in async stacks"),9234),Ks=(t,e)=>Xe(it.t("Syntax error setting breakpoint with condition {0} on line {1}: {2}",JSON.stringify(t.condition),t.line,e),9237),rS=()=>Ke(it.t("Thread not found"),9244),hy=(t,e)=>Xe(it.t("Could not read source map for {0}: {1}",t,e)),g1=()=>Xe(it.t("UWP webview debugging is not available on your platform.")),H1=()=>Xe(it.t("Could not connect to any UWP Webview pipe. Make sure your webview is hosted in debug mode, and that the `pipeName` in your `launch.json` is correct.")),y1=t=>typeof t=="object"&&!!t&&"__errorMarker"in t,v1=(t,e)=>t instanceof Z&&t.cause.id===e,b1=t=>Xe(it.t("The browser process exited with code {0} before connecting to the debug server. Make sure the `runtimeExecutable` is configured correctly and that it can run without errors.",t));var w1=new WeakSet;var Mre="Request",kre=t=>t.endsWith("Request"),rn=Symbol("IDapApi"),fl=Symbol("IRootDapApi"),pl=class{constructor(e,r){this.transport=e;this.logger=r;this._pendingRequests=new Map;this._requestHandlers=new Map;this._eventListeners=new Map;this.disposables=[];this._initialized=Be();this.closed=!1;this._sequence=1,this.disposables.push(this.transport.messageReceived(n=>this._onMessage(n.message,n.receivedTime))),this._dap=this._createApi()}get initializedBlocker(){return this._initialized.promise}attachTelemetry(e){this.telemetryReporter=e,e.attachDap(this._dap)}dap(){return this._dap}_createApi(){return new Proxy({},{get:(e,r)=>{if(r!=="then")return r==="on"?(n,i)=>(this._requestHandlers.set(n,i),()=>this._requestHandlers.delete(n)):r==="off"?n=>this._requestHandlers.delete(n):n=>{if(kre(r))return this.enqueueRequest(r.slice(0,-Mre.length),n);this._send({seq:0,type:"event",event:r,body:n})}}})}createTestApi(){let e=(i,o)=>{let s=this._eventListeners.get(i);s||(s=new Set,this._eventListeners.set(i,s)),s.add(o)},r=(i,o)=>{let s=this._eventListeners.get(i);s&&s.delete(o)},n=(i,o)=>new Promise(s=>{let a=u=>{o&&!o(u)||(r(i,a),s(u))};e(i,a)});return new Proxy({},{get:(i,o)=>o==="on"?e:o==="off"?r:o==="once"?n:s=>this.enqueueRequest(o,s)})}enqueueRequest(e,r){return new Promise(n=>{let i={seq:0,type:"request",command:e,arguments:r||{}};this._send(i),this._pendingRequests.set(i.seq,n)})}stop(){this.closed=!0,this.transport.close()}_send(e,r){if(this.closed)this.logger.warn("dap.send","Not sending message because the connection has ended",e),r?.();else{e.seq=this._sequence++;let n=e.type!=="event"||!w1.has(e.body);this.transport.send(e,n,r)}}async _onMessage(e,r){if(e.type==="request"){let n={seq:0,type:"response",request_seq:e.seq,command:e.command,success:!0};try{let i=this._requestHandlers.get(e.command);if(!i)console.error(`Unknown request: ${e.command}`);else{let o=await i(e.arguments);if(y1(o))this._send({...n,success:!1,message:o.error.format,body:{error:o.error}});else{let s={...n,body:o};n.command==="initialize"?(this._send(s),this._initialized.resolve(this)):n.command==="disconnect"?this._send({...n,body:o},()=>{this.stop()}):this._send(s)}}this.telemetryReporter?.reportOperation("dapOperation",e.command,r.elapsed().ms)}catch(i){i instanceof Z?this._send({...n,success:!1,body:{error:i.cause}}):(console.error(i),this._send({...n,success:!1,body:{error:{id:9221,format:`Error processing ${e.command}: ${i.stack||i.message}`,showUser:!1,sendTelemetry:!1}}})),this.telemetryReporter?.reportOperation("dapOperation",e.command,r.elapsed().ms,i)}}if(e.type==="event"){let n=this._eventListeners.get(e.event)||new Set;for(let i of n)i(e.body)}if(e.type==="response"){let n=this._pendingRequests.get(e.request_seq);if(!this.logger.assert(n,`Expected callback for request sequence ID ${e.request_seq}`))return;if(this._pendingRequests.delete(e.request_seq),e.success)n(e.body);else{let i=e.body?.error?.format;n(i||e.message||"Unknown error")}}}};var gy=class{constructor(e,r){this.key=e;this.value=r}toString(){return`${this.key}: ${this.value}`}},ao=class{constructor(e,r){this.projection=e;this.initialContents=r;let n=Array.from(r||[]).map(i=>[this.projection(i[0]),new gy(i[0],i[1])]);this.projectionToKeyAndValue=new Map(n)}clear(){this.projectionToKeyAndValue.clear()}delete(e){let r=this.projection(e);return this.projectionToKeyAndValue.delete(r)}forEach(e,r){this.projectionToKeyAndValue.forEach(n=>{e.call(r,n.value,n.key,this)},r)}get(e){let r=this.projection(e),n=this.projectionToKeyAndValue.get(r);return n?n.value:void 0}has(e){return this.projectionToKeyAndValue.has(this.projection(e))}set(e,r){return this.projectionToKeyAndValue.set(this.projection(e),new gy(e,r)),this}get size(){return this.projectionToKeyAndValue.size}*entries(){for(let e of this.projectionToKeyAndValue.values())yield[e.key,e.value]}*keys(){for(let e of this.projectionToKeyAndValue.values())yield e.key}*values(){for(let e of this.projectionToKeyAndValue.values())yield e.value}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return JSON.stringify(Array.from(this.entries()))}toString(){return`MapUsingProjection<${JSON.stringify([...this.entries()])}>`}};var Qe=Symbol("ISourcePathResolver");var z1=require("dns"),_n=I(require("path")),Qo=require("url");var j1=require("url");var N1=require("./vendor/acorn.js"),B1=require("crypto");var Sy=require("./vendor/acorn.js");var{stringify:Ore}=JSON;if(!String.prototype.repeat)throw new Error("String.prototype.repeat is undefined, see https://github.com/davidbonnet/astring#installation");if(!String.prototype.endsWith)throw new Error("String.prototype.endsWith is undefined, see https://github.com/davidbonnet/astring#installation");var Hy={"||":2,"??":3,"&&":4,"|":5,"^":6,"&":7,"==":8,"!=":8,"===":8,"!==":8,"<":9,">":9,"<=":9,">=":9,in:9,instanceof:9,"<<":10,">>":10,">>>":10,"+":11,"-":11,"*":12,"%":12,"/":12,"**":13},vi=17,Fre={ArrayExpression:20,TaggedTemplateExpression:20,ThisExpression:20,Identifier:20,PrivateIdentifier:20,Literal:18,TemplateLiteral:20,Super:20,SequenceExpression:20,MemberExpression:19,ChainExpression:19,CallExpression:19,NewExpression:19,ArrowFunctionExpression:vi,ClassExpression:vi,FunctionExpression:vi,ObjectExpression:vi,UpdateExpression:16,UnaryExpression:15,AwaitExpression:15,BinaryExpression:14,LogicalExpression:13,ConditionalExpression:4,AssignmentExpression:3,YieldExpression:2,RestElement:1};function dl(t,e){let{generator:r}=t;if(t.write("("),e!=null&&e.length>0){r[e[0].type](e[0],t);let{length:n}=e;for(let i=1;i<n;i++){let o=e[i];t.write(", "),r[o.type](o,t)}}t.write(")")}function C1(t,e,r,n){let i=t.expressionsPrecedence[e.type];if(i===vi)return!0;let o=t.expressionsPrecedence[r.type];return i!==o?!n&&i===15&&o===14&&r.operator==="**"||i<o:i!==13&&i!==14?!1:e.operator==="**"&&r.operator==="**"?!n:i===13&&o===13&&(e.operator==="??"||r.operator==="??")?!0:n?Hy[e.operator]<=Hy[r.operator]:Hy[e.operator]<Hy[r.operator]}function yy(t,e,r,n){let{generator:i}=t;C1(t,e,r,n)?(t.write("("),i[e.type](e,t),t.write(")")):i[e.type](e,t)}function Nre(t,e,r,n){let i=e.split(`
`),o=i.length-1;if(t.write(i[0].trim()),o>0){t.write(n);for(let s=1;s<o;s++)t.write(r+i[s].trim()+n);t.write(r+i[o].trim())}}function Kr(t,e,r,n){let{length:i}=e;for(let o=0;o<i;o++){let s=e[o];t.write(r),s.type[0]==="L"?t.write("// "+s.value.trim()+`
`,s):(t.write("/*"),Nre(t,s.value,r,n),t.write("*/"+n))}}function Bre(t){let e=t;for(;e!=null;){let{type:r}=e;if(r[0]==="C"&&r[1]==="a")return!0;if(r[0]==="M"&&r[1]==="e"&&r[2]==="m")e=e.object;else return!1}}function nS(t,e){let{generator:r}=t,{declarations:n}=e;t.write(e.kind+" ");let{length:i}=n;if(i>0){r.VariableDeclarator(n[0],t);for(let o=1;o<i;o++)t.write(", "),r.VariableDeclarator(n[o],t)}}var _1,A1,I1,S1,E1,D1,Ure={Program(t,e){let r=e.indent.repeat(e.indentLevel),{lineEnd:n,writeComments:i}=e;i&&t.comments!=null&&Kr(e,t.comments,r,n);let o=t.body,{length:s}=o;for(let a=0;a<s;a++){let u=o[a];i&&u.comments!=null&&Kr(e,u.comments,r,n),e.write(r),this[u.type](u,e),e.write(n)}i&&t.trailingComments!=null&&Kr(e,t.trailingComments,r,n)},BlockStatement:D1=function(t,e){let r=e.indent.repeat(e.indentLevel++),{lineEnd:n,writeComments:i}=e,o=r+e.indent;e.write("{");let s=t.body;if(s!=null&&s.length>0){e.write(n),i&&t.comments!=null&&Kr(e,t.comments,o,n);let{length:a}=s;for(let u=0;u<a;u++){let c=s[u];i&&c.comments!=null&&Kr(e,c.comments,o,n),e.write(o),this[c.type](c,e),e.write(n)}e.write(r)}else i&&t.comments!=null&&(e.write(n),Kr(e,t.comments,o,n),e.write(r));i&&t.trailingComments!=null&&Kr(e,t.trailingComments,o,n),e.write("}"),e.indentLevel--},ClassBody:D1,StaticBlock(t,e){e.write("static "),this.BlockStatement(t,e)},EmptyStatement(t,e){e.write(";")},ExpressionStatement(t,e){let r=e.expressionsPrecedence[t.expression.type];r===vi||r===3&&t.expression.left.type[0]==="O"?(e.write("("),this[t.expression.type](t.expression,e),e.write(")")):this[t.expression.type](t.expression,e),e.write(";")},IfStatement(t,e){e.write("if ("),this[t.test.type](t.test,e),e.write(") "),this[t.consequent.type](t.consequent,e),t.alternate!=null&&(e.write(" else "),this[t.alternate.type](t.alternate,e))},LabeledStatement(t,e){this[t.label.type](t.label,e),e.write(": "),this[t.body.type](t.body,e)},BreakStatement(t,e){e.write("break"),t.label!=null&&(e.write(" "),this[t.label.type](t.label,e)),e.write(";")},ContinueStatement(t,e){e.write("continue"),t.label!=null&&(e.write(" "),this[t.label.type](t.label,e)),e.write(";")},WithStatement(t,e){e.write("with ("),this[t.object.type](t.object,e),e.write(") "),this[t.body.type](t.body,e)},SwitchStatement(t,e){let r=e.indent.repeat(e.indentLevel++),{lineEnd:n,writeComments:i}=e;e.indentLevel++;let o=r+e.indent,s=o+e.indent;e.write("switch ("),this[t.discriminant.type](t.discriminant,e),e.write(") {"+n);let{cases:a}=t,{length:u}=a;for(let c=0;c<u;c++){let l=a[c];i&&l.comments!=null&&Kr(e,l.comments,o,n),l.test?(e.write(o+"case "),this[l.test.type](l.test,e),e.write(":"+n)):e.write(o+"default:"+n);let{consequent:p}=l,{length:f}=p;for(let m=0;m<f;m++){let h=p[m];i&&h.comments!=null&&Kr(e,h.comments,s,n),e.write(s),this[h.type](h,e),e.write(n)}}e.indentLevel-=2,e.write(r+"}")},ReturnStatement(t,e){e.write("return"),t.argument&&(e.write(" "),this[t.argument.type](t.argument,e)),e.write(";")},ThrowStatement(t,e){e.write("throw "),this[t.argument.type](t.argument,e),e.write(";")},TryStatement(t,e){if(e.write("try "),this[t.block.type](t.block,e),t.handler){let{handler:r}=t;r.param==null?e.write(" catch "):(e.write(" catch ("),this[r.param.type](r.param,e),e.write(") ")),this[r.body.type](r.body,e)}t.finalizer&&(e.write(" finally "),this[t.finalizer.type](t.finalizer,e))},WhileStatement(t,e){e.write("while ("),this[t.test.type](t.test,e),e.write(") "),this[t.body.type](t.body,e)},DoWhileStatement(t,e){e.write("do "),this[t.body.type](t.body,e),e.write(" while ("),this[t.test.type](t.test,e),e.write(");")},ForStatement(t,e){if(e.write("for ("),t.init!=null){let{init:r}=t;r.type[0]==="V"?nS(e,r):this[r.type](r,e)}e.write("; "),t.test&&this[t.test.type](t.test,e),e.write("; "),t.update&&this[t.update.type](t.update,e),e.write(") "),this[t.body.type](t.body,e)},ForInStatement:_1=function(t,e){e.write(`for ${t.await?"await ":""}(`);let{left:r}=t;r.type[0]==="V"?nS(e,r):this[r.type](r,e),e.write(t.type[3]==="I"?" in ":" of "),this[t.right.type](t.right,e),e.write(") "),this[t.body.type](t.body,e)},ForOfStatement:_1,DebuggerStatement(t,e){e.write("debugger;",t)},FunctionDeclaration:A1=function(t,e){e.write((t.async?"async ":"")+(t.generator?"function* ":"function ")+(t.id?t.id.name:""),t),dl(e,t.params),e.write(" "),this[t.body.type](t.body,e)},FunctionExpression:A1,VariableDeclaration(t,e){nS(e,t),e.write(";")},VariableDeclarator(t,e){this[t.id.type](t.id,e),t.init!=null&&(e.write(" = "),this[t.init.type](t.init,e))},ClassDeclaration(t,e){if(e.write("class "+(t.id?`${t.id.name} `:""),t),t.superClass){e.write("extends ");let{superClass:r}=t,{type:n}=r,i=e.expressionsPrecedence[n];(n[0]!=="C"||n[1]!=="l"||n[5]!=="E")&&(i===vi||i<e.expressionsPrecedence.ClassExpression)?(e.write("("),this[t.superClass.type](r,e),e.write(")")):this[r.type](r,e),e.write(" ")}this.ClassBody(t.body,e)},ImportDeclaration(t,e){e.write("import ");let{specifiers:r}=t,{length:n}=r,i=0;if(n>0){for(;i<n;){i>0&&e.write(", ");let o=r[i],s=o.type[6];if(s==="D")e.write(o.local.name,o),i++;else if(s==="N")e.write("* as "+o.local.name,o),i++;else break}if(i<n){for(e.write("{");;){let o=r[i],{name:s}=o.imported;if(e.write(s,o),s!==o.local.name&&e.write(" as "+o.local.name),++i<n)e.write(", ");else break}e.write("}")}e.write(" from ")}this.Literal(t.source,e),e.write(";")},ImportExpression(t,e){e.write("import("),this[t.source.type](t.source,e),e.write(")")},ExportDefaultDeclaration(t,e){e.write("export default "),this[t.declaration.type](t.declaration,e),e.expressionsPrecedence[t.declaration.type]!=null&&t.declaration.type[0]!=="F"&&e.write(";")},ExportNamedDeclaration(t,e){if(e.write("export "),t.declaration)this[t.declaration.type](t.declaration,e);else{e.write("{");let{specifiers:r}=t,{length:n}=r;if(n>0)for(let i=0;;){let o=r[i],{name:s}=o.local;if(e.write(s,o),s!==o.exported.name&&e.write(" as "+o.exported.name),++i<n)e.write(", ");else break}e.write("}"),t.source&&(e.write(" from "),this.Literal(t.source,e)),e.write(";")}},ExportAllDeclaration(t,e){t.exported!=null?e.write("export * as "+t.exported.name+" from "):e.write("export * from "),this.Literal(t.source,e),e.write(";")},MethodDefinition(t,e){t.static&&e.write("static ");let r=t.kind[0];(r==="g"||r==="s")&&e.write(t.kind+" "),t.value.async&&e.write("async "),t.value.generator&&e.write("*"),t.computed?(e.write("["),this[t.key.type](t.key,e),e.write("]")):this[t.key.type](t.key,e),dl(e,t.value.params),e.write(" "),this[t.value.body.type](t.value.body,e)},ClassExpression(t,e){this.ClassDeclaration(t,e)},ArrowFunctionExpression(t,e){e.write(t.async?"async ":"",t);let{params:r}=t;r!=null&&(r.length===1&&r[0].type[0]==="I"?e.write(r[0].name,r[0]):dl(e,t.params)),e.write(" => "),t.body.type[0]==="O"?(e.write("("),this.ObjectExpression(t.body,e),e.write(")")):this[t.body.type](t.body,e)},ThisExpression(t,e){e.write("this",t)},Super(t,e){e.write("super",t)},RestElement:I1=function(t,e){e.write("..."),this[t.argument.type](t.argument,e)},SpreadElement:I1,YieldExpression(t,e){e.write(t.delegate?"yield*":"yield"),t.argument&&(e.write(" "),this[t.argument.type](t.argument,e))},AwaitExpression(t,e){e.write("await ",t),yy(e,t.argument,t)},TemplateLiteral(t,e){let{quasis:r,expressions:n}=t;e.write("`");let{length:i}=n;for(let s=0;s<i;s++){let a=n[s],u=r[s];e.write(u.value.raw,u),e.write("${"),this[a.type](a,e),e.write("}")}let o=r[r.length-1];e.write(o.value.raw,o),e.write("`")},TemplateElement(t,e){e.write(t.value.raw,t)},TaggedTemplateExpression(t,e){yy(e,t.tag,t),this[t.quasi.type](t.quasi,e)},ArrayExpression:E1=function(t,e){if(e.write("["),t.elements.length>0){let{elements:r}=t,{length:n}=r;for(let i=0;;){let o=r[i];if(o!=null&&this[o.type](o,e),++i<n)e.write(", ");else{o==null&&e.write(", ");break}}}e.write("]")},ArrayPattern:E1,ObjectExpression(t,e){let r=e.indent.repeat(e.indentLevel++),{lineEnd:n,writeComments:i}=e,o=r+e.indent;if(e.write("{"),t.properties.length>0){e.write(n),i&&t.comments!=null&&Kr(e,t.comments,o,n);let s=","+n,{properties:a}=t,{length:u}=a;for(let c=0;;){let l=a[c];if(i&&l.comments!=null&&Kr(e,l.comments,o,n),e.write(o),this[l.type](l,e),++c<u)e.write(s);else break}e.write(n),i&&t.trailingComments!=null&&Kr(e,t.trailingComments,o,n),e.write(r+"}")}else i?t.comments!=null?(e.write(n),Kr(e,t.comments,o,n),t.trailingComments!=null&&Kr(e,t.trailingComments,o,n),e.write(r+"}")):t.trailingComments!=null?(e.write(n),Kr(e,t.trailingComments,o,n),e.write(r+"}")):e.write("}"):e.write("}");e.indentLevel--},Property(t,e){t.method||t.kind[0]!=="i"?this.MethodDefinition(t,e):(t.shorthand||(t.computed?(e.write("["),this[t.key.type](t.key,e),e.write("]")):this[t.key.type](t.key,e),e.write(": ")),this[t.value.type](t.value,e))},PropertyDefinition(t,e){if(t.static&&e.write("static "),t.computed&&e.write("["),this[t.key.type](t.key,e),t.computed&&e.write("]"),t.value==null){t.key.type[0]!=="F"&&e.write(";");return}e.write(" = "),this[t.value.type](t.value,e),e.write(";")},ObjectPattern(t,e){if(e.write("{"),t.properties.length>0){let{properties:r}=t,{length:n}=r;for(let i=0;this[r[i].type](r[i],e),++i<n;)e.write(", ")}e.write("}")},SequenceExpression(t,e){dl(e,t.expressions)},UnaryExpression(t,e){if(t.prefix){let{operator:r,argument:n,argument:{type:i}}=t;e.write(r);let o=C1(e,n,t);!o&&(r.length>1||i[0]==="U"&&(i[1]==="n"||i[1]==="p")&&n.prefix&&n.operator[0]===r&&(r==="+"||r==="-"))&&e.write(" "),o?(e.write(r.length>1?" (":"("),this[i](n,e),e.write(")")):this[i](n,e)}else this[t.argument.type](t.argument,e),e.write(t.operator)},UpdateExpression(t,e){t.prefix?(e.write(t.operator),this[t.argument.type](t.argument,e)):(this[t.argument.type](t.argument,e),e.write(t.operator))},AssignmentExpression(t,e){this[t.left.type](t.left,e),e.write(" "+t.operator+" "),this[t.right.type](t.right,e)},AssignmentPattern(t,e){this[t.left.type](t.left,e),e.write(" = "),this[t.right.type](t.right,e)},BinaryExpression:S1=function(t,e){let r=t.operator==="in";r&&e.write("("),yy(e,t.left,t,!1),e.write(" "+t.operator+" "),yy(e,t.right,t,!0),r&&e.write(")")},LogicalExpression:S1,ConditionalExpression(t,e){let{test:r}=t,n=e.expressionsPrecedence[r.type];n===vi||n<=e.expressionsPrecedence.ConditionalExpression?(e.write("("),this[r.type](r,e),e.write(")")):this[r.type](r,e),e.write(" ? "),this[t.consequent.type](t.consequent,e),e.write(" : "),this[t.alternate.type](t.alternate,e)},NewExpression(t,e){e.write("new ");let r=e.expressionsPrecedence[t.callee.type];r===vi||r<e.expressionsPrecedence.CallExpression||Bre(t.callee)?(e.write("("),this[t.callee.type](t.callee,e),e.write(")")):this[t.callee.type](t.callee,e),dl(e,t.arguments)},CallExpression(t,e){let r=e.expressionsPrecedence[t.callee.type];r===vi||r<e.expressionsPrecedence.CallExpression?(e.write("("),this[t.callee.type](t.callee,e),e.write(")")):this[t.callee.type](t.callee,e),t.optional&&e.write("?."),dl(e,t.arguments)},ChainExpression(t,e){this[t.expression.type](t.expression,e)},MemberExpression(t,e){let r=e.expressionsPrecedence[t.object.type];r===vi||r<e.expressionsPrecedence.MemberExpression?(e.write("("),this[t.object.type](t.object,e),e.write(")")):this[t.object.type](t.object,e),t.computed?(t.optional&&e.write("?."),e.write("["),this[t.property.type](t.property,e),e.write("]")):(t.optional?e.write("?."):e.write("."),this[t.property.type](t.property,e))},MetaProperty(t,e){e.write(t.meta.name+"."+t.property.name,t)},Identifier(t,e){e.write(t.name,t)},PrivateIdentifier(t,e){e.write(`#${t.name}`,t)},Literal(t,e){t.raw!=null?e.write(t.raw,t):t.regex!=null?this.RegExpLiteral(t,e):t.bigint!=null?e.write(t.bigint+"n",t):e.write(Ore(t.value),t)},RegExpLiteral(t,e){let{regex:r}=t;e.write(`/${r.pattern}/${r.flags}`,t)}},jre={};var iS=class{constructor(e){let r=e??jre;this.output="",r.output!=null?(this.output=r.output,this.write=this.writeToStream):this.output="",this.generator=r.generator!=null?r.generator:Ure,this.expressionsPrecedence=r.expressionsPrecedence!=null?r.expressionsPrecedence:Fre,this.indent=r.indent!=null?r.indent:"  ",this.lineEnd=r.lineEnd!=null?r.lineEnd:`
`,this.indentLevel=r.startingIndentLevel!=null?r.startingIndentLevel:0,this.writeComments=r.comments?r.comments:!1,r.sourceMap!=null&&(this.write=r.output==null?this.writeAndMap:this.writeToStreamAndMap,this.sourceMap=r.sourceMap,this.line=1,this.column=0,this.lineEndSize=this.lineEnd.split(`
`).length-1,this.mapping={original:null,generated:this,name:void 0,source:r.sourceMap.file||r.sourceMap._file})}write(e){this.output+=e}writeToStream(e){this.output.write(e)}writeAndMap(e,r){this.output+=e,this.map(e,r)}writeToStreamAndMap(e,r){this.output.write(e),this.map(e,r)}map(e,r){if(r!=null){let{type:o}=r;if(o[0]==="L"&&o[2]==="n"){this.column=0,this.line++;return}if(r.loc!=null){let{mapping:s}=this;s.original=r.loc.start,s.name=r.name,this.sourceMap.addMapping(s)}if(o[0]==="T"&&o[8]==="E"||o[0]==="L"&&o[1]==="i"&&typeof r.value=="string"){let{length:s}=e,{column:a,line:u}=this;for(let c=0;c<s;c++)e[c]===`
`?(a=0,u++):a++;this.column=a,this.line=u;return}}let{length:n}=e,{lineEnd:i}=this;n>0&&(this.lineEndSize>0&&(i.length===1?e[n-1]===i:e.endsWith(i))?(this.line+=this.lineEndSize,this.column=0):this.column+=n)}toString(){return this.output}};function Yo(t,e){let r=new iS(e);return r.generator[t.type](t,r),r.output}var eh=I(ly());var P1=require("./vendor/acorn.js"),wy=require("./vendor/acorn-loose.js");var vy={ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],AwaitExpression:["argument"],BinaryExpression:["left","right"],BlockStatement:["body"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExperimentalRestProperty:["argument"],ExperimentalSpreadProperty:["argument"],ExportAllDeclaration:["exported","source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],ForStatement:["init","test","update","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportExpression:["source"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],JSXAttribute:["name","value"],JSXClosingElement:["name"],JSXClosingFragment:[],JSXElement:["openingElement","children","closingElement"],JSXEmptyExpression:[],JSXExpressionContainer:["expression"],JSXFragment:["openingFragment","children","closingFragment"],JSXIdentifier:[],JSXMemberExpression:["object","property"],JSXNamespacedName:["namespace","name"],JSXOpeningElement:["name","attributes"],JSXOpeningFragment:[],JSXSpreadAttribute:["argument"],JSXSpreadChild:["expression"],JSXText:[],LabeledStatement:["label","body"],Literal:[],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],StaticBlock:["body"],Super:[],SwitchCase:["test","consequent"],SwitchStatement:["discriminant","cases"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},qre=Object.keys(vy);for(let t of qre)Object.freeze(vy[t]);Object.freeze(vy);var oS=vy;var sS={ecmaVersion:"latest",locations:!0,allowAwaitOutsideFunction:!0,allowImportExportEverywhere:!0,allowReserved:!0,allowReturnOutsideFunction:!0},zs=t=>t.start,aS=t=>t.end,x1=(t,e)=>t.slice(zs(e),aS(e)),uo=(t,e=!1)=>(e?P1.parse:wy.parse)(t,sS),_y=t=>{let e=uo(t);for(let r of e.body)r.type==="FunctionDeclaration"&&r.id&&(0,wy.isDummy)(r.id)&&(r.id=null);return e.body};function L1(t,e,r){return e.length>1||e[0].type!=="FunctionDeclaration"?R1(t,e,!0,r):T1(t,[{type:"ReturnStatement",argument:{type:"CallExpression",optional:!1,arguments:[{type:"ThisExpression"},...t.map(n=>({type:"Identifier",name:n}))],callee:{type:"MemberExpression",property:{type:"Identifier",name:"call"},computed:!1,optional:!1,object:{type:"FunctionExpression",params:e[0].params,body:e[0].body}}}}],!0,r)}var T1=(t,e,r,n)=>{let i={type:"Identifier",name:"e"},s=n?[{type:"TryStatement",block:{type:"BlockStatement",body:e},handler:{type:"CatchClause",param:i,body:{type:"BlockStatement",body:[{type:"ReturnStatement",argument:{type:"LogicalExpression",left:{type:"LogicalExpression",left:{type:"MemberExpression",object:i,property:{type:"Identifier",name:"stack"},computed:!1,optional:!1},operator:"||",right:{type:"MemberExpression",object:i,property:{type:"Identifier",name:"message"},computed:!1,optional:!1}},operator:"||",right:{type:"CallExpression",callee:{type:"Identifier",name:"String"},arguments:[i],optional:!1}}}]}}}]:e;return r?{type:"FunctionExpression",id:{type:"Identifier",name:"_generatedCode"},params:t.map(a=>({type:"Identifier",name:a})),body:{type:"BlockStatement",body:s}}:{type:"ArrowFunctionExpression",params:t.map(a=>({type:"Identifier",name:a})),expression:!1,body:{type:"BlockStatement",body:s}}},Vre=(t,e)=>({type:"CallExpression",arguments:t.map(r=>({type:"Identifier",name:r})),callee:e,optional:!1}),$1=(t,e,r)=>Vre(t,R1(t,e,r,!0));function R1(t,e,r,n){let i=e[e.length-1];if(i.type!=="ReturnStatement"){let o=Gre(i);o&&(e=[...e.slice(0,-1),{type:"ReturnStatement",argument:o}])}return T1(t,e,r,n)}function Gre(t){switch(t.type){case"ExpressionStatement":return t.expression;case"BlockStatement":return{type:"CallExpression",arguments:[],callee:{type:"ArrowFunctionExpression",params:[],expression:!1,body:t},optional:!1};case"ReturnStatement":return t.argument||void 0;default:return}}var Xs=(t,e)=>{by(t,e)},Ay=(t,e)=>{let r=by(t,e);return r&&typeof r=="object"?r.replace:t},by=(t,e,r)=>{if(!t)return;let n=e.enter(t,r);if(n===0)return 0;if(n&&typeof n=="object")return n;if(n===1)return;let i=oS[t.type];if(i)for(let o of i){let s=t[o];if(s instanceof Array)for(let[a,u]of s.entries()){let c=by(u,e,t);if(c===0)return 0;c&&typeof c=="object"&&(s[a]=c.replace)}else if(s){let a=by(s,e,t);if(a===0)return 0;a&&typeof a=="object"&&(t[o]=a.replace)}}e.leave?.(t)};var hl=class t{constructor(e,r,n,i,o){this.original=e;this.metadata=r;this.actualRoot=n;this.actualSources=i;this.hasNames=o;this.sourceActualToOriginal=new Map;this.sourceOriginalToActual=new Map;this.id=t.idCounter++;if(i.length!==e.sources.length)throw new Error("Expected actualSources.length === original.source.length");for(let s=0;s<i.length;s++)this.sourceActualToOriginal.set(i[s],e.sources[s]),this.sourceOriginalToActual.set(e.sources[s],i[s])}static{this.idCounter=0}get sources(){return this.actualSources.slice()}get sourceRoot(){return this.actualRoot}computedSourceUrl(e){return Pt(Iy(mr(this.metadata.sourceMapUrl)?this.metadata.compiledPath:this.metadata.sourceMapUrl,this.sourceRoot+e))}computeColumnSpans(){this.original.computeColumnSpans()}originalPositionFor(e){let r=this.original.originalPositionFor(e);return r.source&&(r.source=this.sourceOriginalToActual.get(r.source)??r.source),r}generatedPositionFor(e){return this.original.generatedPositionFor({...e,source:this.sourceActualToOriginal.get(e.source)??e.source})}allGeneratedPositionsFor(e){return this.original.allGeneratedPositionsFor({...e,source:this.sourceActualToOriginal.get(e.source)??e.source})}hasContentsOfAllSources(){return this.original.hasContentsOfAllSources()}sourceContentFor(e,r){return this.original.sourceContentFor(this.sourceActualToOriginal.get(e)??e,r)}eachMapping(e,r,n){return this.original.eachMapping(e,r,n)}destroy(){this.original.destroy()}};async function k1(t,e,r,n){let i=Sy.Parser.parse(e,{locations:!0,ecmaVersion:"latest"}),o=new eh.SourceMapGenerator({file:t}),s=Yo(i,{sourceMap:{setSourceContent:(a,u)=>o.setSourceContent(a,u),applySourceMap:(a,u,c)=>o.applySourceMap(a,u,c),toJSON:()=>o.toJSON(),toString:()=>o.toString(),addMapping:a=>o.addMapping({generated:a.original,original:{column:a.generated.column,line:a.generated.line},source:t,name:a.name})}});return o.setSourceContent(t,s),new hl(await eh.SourceMapConsumer.fromSourceMap(o),{sourceMapUrl:n,compiledPath:r},"",[t],!1)}function O1(t){let e;try{e=uo(t)}catch{return}let r=(u,c)=>({type:"ExpressionStatement",expression:{type:"AssignmentExpression",operator:"=",left:u,right:c}}),n=!1,i=!1,o=Ay(e,{enter(u,c){switch(u.type){case"ClassDeclaration":return{replace:r(u.id||{type:"Identifier",name:"_default"},{...u,type:"ClassExpression"})};case"FunctionDeclaration":return{replace:r(u.id||{type:"Identifier",name:"_default"},{...u,type:"FunctionExpression"})};case"FunctionExpression":case"ArrowFunctionExpression":case"MethodDefinition":return 1;case"AwaitExpression":n=!0;return;case"ForOfStatement":u.await&&(n=!0);return;case"ReturnStatement":i=!0;return;case"VariableDeclaration":if(!c||!("body"in c)||!(c.body instanceof Array))return;let l=c.body,p=u.declarations.map(f=>({type:"ExpressionStatement",expression:{type:"UnaryExpression",operator:"void",prefix:!0,argument:{type:"AssignmentExpression",operator:"=",left:f.id,right:f.init||{type:"Identifier",name:"undefined"}}}}));l.splice(l.indexOf(u),1,...p)}}});if(!n||i)return;let s=e.body[e.body.length-1];s.type==="ExpressionStatement"&&(e.body[e.body.length-1]={type:"ReturnStatement",argument:s.expression});let a={type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"ArrowFunctionExpression",params:[],generator:!1,expression:!1,async:!0,body:{type:"BlockStatement",body:o.body}},arguments:[],optional:!1}};return Yo(a)}function th(t){try{let e=(0,Sy.parseExpressionAt)(t,0,sS);return e.end<t.length||e.type!=="ObjectExpression"?t:`(${t})`}catch{return t}}function ml(t){if(!t)return;let e="sourceMappingURL",r=t.length,n=e.length,i=r,o=0;for(;;){if(i=t.lastIndexOf(e,i),i===-1||i<4)return;if(i-=4,t[i]==="/"&&t[i+1]==="/"&&!(t[i+2]!=="#"&&t[i+2]!=="@")&&!(t[i+3]!==" "&&t[i+3]!=="	")&&(o=i+4+n,!(o<r&&t[o]!=="=")))break}let s=t.substring(o+1),a=s.indexOf(`
`);return a!==-1&&(s=s.substring(0,a)),s.trim()}function Ey(t,e,r){let n=r.generatedPositionFor({source:t,line:e.lineNumber,column:e.columnNumber-1,bias:eh.SourceMapConsumer.GREATEST_LOWER_BOUND}),i=a=>{if(a.line===null||a.column===null)return 1e11;let u=r.originalPositionFor(a);return u.line!==null?Math.abs(e.lineNumber-u.line):1e11},o=i(n),s=r.allGeneratedPositionsFor({source:t,line:e.lineNumber,column:e.columnNumber-1}).filter(a=>a.line!==null&&a.column!==null).sort((a,u)=>a.line!==u.line?a.line-u.line:a.column-u.column).map(a=>[a,i(a)]);return s.push([n,o]),s.sort(([a,u],[c,l])=>u-l||a.line-c.line||a.column-c.column),s[0][0]}var uS=(t,e)=>!!e&&((e.type==="FunctionExpression"||e.type==="FunctionDeclaration"||e.type==="ArrowFunctionExpression")&&e.params.includes(t)||(e.type==="ForInStatement"||e.type==="ForOfStatement")&&e.left===t||e.type==="VariableDeclarator"&&e.id===t||e.type==="AssignmentPattern"&&e.left===t||e.type==="CatchClause"&&e.param===t||"kind"in e&&e.kind==="init"&&e.value===t||e.type==="RestElement"&&e.argument===t||e.type==="AssignmentPattern"&&e.left===t);function Js(t){try{new Function(t)}catch(e){return e}}function zre(t,e){let r=uo(t),n,i;return Xs(r,{enter:o=>{let s=o;e>=s.start&&e<s.end&&(o.type==="CallExpression"||o.type==="NewExpression"?i=o:n=o)}}),i||n}var M1=/^[^()]+/g;function F1(t,e){try{let n=zre(t,e);if(n&&"callee"in n){let i=n.callee;return{text:`${t.slice(i.start,i.end)}(...)`,start:i.start,end:i.end}}else{let i=n;return{text:t.slice(i.start,i.end),start:i.start,end:i.end}}}catch{}M1.lastIndex=e-1;let r=M1.exec(t);if(r)return{text:r[0],start:e,end:e+r[0].length}}var dt=()=>`
//# sourceURL=eval-${(0,B1.randomBytes)(4).toString("hex")}.cdp
`;function Au(t){return Xre(""+t)}function Xre(t){let e=(0,N1.parseExpressionAt)(t,0,{ecmaVersion:"latest",locations:!0});if(e.type!=="FunctionExpression")throw new Error(`Could not find function declaration for:

${t}`);let r=e.params.map(s=>{if(s.type!=="Identifier")throw new Error("Parameter must be identifier");return s.name}),{start:n,end:i}=e.body,o=s=>`
    ${s.map((a,u)=>`let ${r[u]} = ${a}`).join("; ")};
    ${t.slice(n+1,i-1)}
  `;return{expr:(...s)=>`(()=>{${o(s)}})();
${dt()}`,decl:(...s)=>`function(...runtimeArgs){${o(s)};
${dt()}}`}}var _u=class extends Error{constructor(r){super(r.text);this.details=r}},rh=class{constructor(e){this.objectId=e}};function rr(t){let e=(""+t).replace("}",dt()+"}"),r=async({cdp:n,args:i,...o})=>{let s=await n.Runtime.callFunctionOn({functionDeclaration:e,arguments:i.map(a=>a instanceof rh?{objectId:a.objectId}:{value:a}),...o});if(!s)throw new _u({exceptionId:0,text:"No response from CDP",lineNumber:0,columnNumber:0});if(s.exceptionDetails)throw new _u(s.exceptionDetails);return s.result};return r.source=e,r}var U1=()=>"globalThis.__jsDebugIsReady = true; "+dt();var nh=new Set(["page","iframe","worker","service_worker"]),pS=new Set(["page","iframe"]),lS=new Set(["page","iframe"]),Jre=lS,Cy=class t{constructor(e,r,n,i,o,s,a,u,c){this._manager=e;this._targetInfo=r;this.launchConfig=s;this.sessionId=a;this.logger=u;this._attached=!1;this._onNameChangedEmitter=new z;this.onNameChanged=this._onNameChangedEmitter.event;this.entryBreakpoint=void 0;this._children=new Map;this.sourcePathResolver=this._manager._sourcePathResolver;this._cdp=n,n.pause(),this.parentTarget=i,this._waitingForDebugger=o,this._updateFromInfo(r),this._ondispose=c}get targetInfo(){return this._targetInfo}get targetId(){return this._targetInfo.targetId}get independentLifeycle(){return lS.has(this.type())}get supplementalConfig(){let e=this.type();return{__browserTargetType:e,__usePerformanceFromParent:e!=="page"}}targetOrigin(){return this._manager._targetOrigin}id(){return this.sessionId}cdp(){return this._cdp}name(){return this._computeName()}fileName(){return this._targetInfo.url}type(){return this._targetInfo.type}afterBind(){return this._cdp.resume(),Promise.resolve()}initialize(){return Promise.resolve()}async runIfWaitingForDebugger(){await Promise.all([this._cdp.Runtime.runIfWaitingForDebugger({}),this._cdp.Runtime.evaluate({expression:U1()})])}parent(){return this.parentTarget&&!nh.has(this.parentTarget.type())?this.parentTarget.parentTarget:this.parentTarget}children(){let e=[];for(let r of this._children.values())nh.has(r.type())?e.push(r):e.push(...r.children());return e}canStop(){return Jre.has(this.type())}stop(){if(this._manager.targetList().includes(this))if(this.type()==="service_worker"){if(this._manager.serviceWorkerModel.stopWorker(this.id()),!this.parentTarget)return;this._manager.serviceWorkerModel.stopWorker(this.parentTarget.id())}else this._cdp.Target.closeTarget({targetId:this._targetInfo.targetId})}canRestart(){return lS.has(this.type())}restart(){this._cdp.Page.reload({})}waitingForDebugger(){return this._waitingForDebugger}canAttach(){return!this._attached}async attach(){return this._waitingForDebugger=!1,this._attached=!0,Promise.resolve(this._cdp)}canDetach(){return this._attached}async detach(){this._attached=!1,this._manager._detachedFromTarget(this.sessionId)}executionContextName(e){let r=e.auxData,n=e.name;if(!r)return n;let i=r.frameId,o=i?this._manager.frameModel.frameForId(i):void 0;return o&&r.isDefault&&!o.parentFrame()?"top":o&&r.isDefault?o.displayName():o?`${n}`:n}supportsCustomBreakpoints(){return pS.has(this.type())}scriptUrlToUrl(e){return Ys(this._targetInfo.url,e)||e}_updateFromInfo(e){this._targetInfo={...e,type:this._targetInfo.type},this._onNameChangedEmitter.fire()}setComputeNameFn(e){this._customNameComputeFn=e,this._onNameChangedEmitter.fire()}_computeName(){let e=this._customNameComputeFn?.(this);if(e)return e;if(this.type()==="service_worker"){let i=this._manager.serviceWorkerModel.version(this.id());if(i)return i.label()+" [Service Worker]"}let r=this._targetInfo.title;if(!(r&&this._manager.targetList().some(i=>i instanceof t&&i!==this&&i._targetInfo.title===this._targetInfo.title)))return r;try{let i=new j1.URL(this._targetInfo.url);i.protocol==="data:"?r=" <data>":i?r+=` (${this._targetInfo.url.replace(/^[a-z]+:\/\/|\/$/gi,"")})`:r+=` (${this._targetInfo.url})`}catch{r+=` (${this._targetInfo.url})`}return r}async _detached(){await this._manager.serviceWorkerModel.detached(this._cdp),this._ondispose(this)}};function ih(t){return t instanceof Array?t:[t]}function q1(t,e,r){let n=0,i=t.length-1;for(;n<=i;){let o=(n+i)/2|0,s=r(t[o],e);if(s<0)n=o+1;else if(s>0)i=o-1;else return o}return n}function W1(t,e){let r=new Map;for(let n of t){let i=e(n),o=r.get(i);o?o.push(n):r.set(i,[n])}return r}function Qs(t){return t.next().value}function co(t,e){return t.length<=e?t:t.substr(0,e-1)+"\u2026"}function gl(t,e){if(t.length<=e)return t;let r=e>>1,n=e-r-1,i=t.codePointAt(t.length-n-1);i&&i>=65536&&(--n,++r);let o=t.codePointAt(r-1);return r>0&&o&&o>=65536&&--r,t.substr(0,r)+"\u2026"+t.substr(t.length-n,n)}var V1="/\\.?*()^${}|[]+",G1=t=>V1.includes(t);function zr(t,e){let r=V1.split("").filter(i=>!e||e.indexOf(i)<0).join("").replace(/[\\\]]/g,"\\$&"),n=new RegExp(`[${r}]`,"g");return t.replace(n,"\\$&")}var Zs=class{constructor(e){this.source=e;this.lines=[];this.lines.push(0);for(let r=e.indexOf(`
`);r!==-1;r=e.indexOf(`
`,r+1))this.lines.push(r+1)}getLineOffset(e){return e>=this.lines.length?this.source.length:this.lines[e]}convert(e){let r=e.base0;if(r.lineNumber>this.lines.length)return this.source.length;let n=this.lines[r.lineNumber],i=this.lines[r.lineNumber+1]??this.source.length+1;return n+Math.min(i-n-1,r.columnNumber)}};var xy=process.platform!=="win32";function hS(){return xy}function Ly(t){return xy?t:t.toLowerCase()}function Ty(t,e){return xy?t===e:t.toLowerCase()===e.toLowerCase()}function Iu(){return hS()?new Map:new ao(Ly)}var K1=process.platform==="win32"?process.env.PATHEXT?.toLowerCase().split(";"):void 0,$y=t=>{let e=Ly(_n.basename(t));if(K1){for(let r of K1)if(e.endsWith(r))return e.slice(0,-r.length)}return e},mS=async(t,e)=>{for(;;){if(await e(t))return t;let r=_n.dirname(t);if(r===t)return;t=r}},Hl=(t,e,r)=>mS(e,n=>t.exists(_n.join(n,r))),Qre=new Set(["localhost","127.0.0.1","::1"]),Zre=new Set(["0.0.0.0","::","0000:0000:0000:0000:0000:0000:0000:0000"]),Py=t=>Qre.has(t.toLowerCase()),X1=t=>{try{return new Qo.URL(t).hostname.replace(/^\[|\]$/g,"")}catch{return t}},J1=t=>Zre.has(X1(t)),yl=Wo(async t=>{let e=X1(t);if(Py(e))return!0;try{let r=await z1.promises.lookup(e);return Py(r.address)}catch{return!1}});function Ys(t,e){try{return new Qo.URL(e,t).href}catch{}}function Iy(t,e){try{return new Qo.URL(e),e}catch{}let r;try{r=new Qo.URL(t||"")}catch{return e}let n=r.protocol+"//";return r.username&&(n+=r.username+":"+r.password+"@"),n+=r.host,n+=_n.dirname(r.pathname),n[n.length-1]!=="/"&&(n+="/"),n+=e,n}function Ry(t){try{return new Qo.URL(t),!0}catch{return!1}}function Y1(t){return t.replace(/\/$/,"").replace(/\\$/,"")}var ene=/^https:\/\/([a-z0-9\-]+)\+\.vscode-resource\.vscode-(?:webview|cdn)\.net\/(.+)/i;function vt(t){let e=ene.exec(t);if(e)t=`${e[1]}:///${e[2]}`;else if(t.startsWith("vscode-webview-resource://"))t=new Qo.URL(t).pathname.replace(/%2F/gi,"/").replace(/^\/([a-z0-9\-]+)(\/{1,2})/i,(n,i,o)=>o.length===1?`${i}:///`:`${i}://`);else if(!on(t))return;return t=t.replace("file:///",""),t=decodeURIComponent(t),t.startsWith("/")&&process.platform==="win32"&&t[1]!=="/"&&(t="/"+t),t[0]!=="/"&&!t.match(/^[A-Za-z]:/)&&(t="/"+t),Pt(t)}function Q1(t){return on(t)&&(t=t.replace("file:///","\\\\"),t=t.replace(/\//g,"\\"),t=decodeURIComponent(t)),t}function ke(t){return gS==="win32"?"file:///"+ea(t):"file://"+ea(t)}function vl(t){return t.startsWith("/")?"file://"+ea(t):"file:///"+ea(t)}function kr(t){return _n.posix.isAbsolute(t)||_n.win32.isAbsolute(t)}function mr(t){return!!t&&t.startsWith("data:")}var fS=(t,e,r)=>{if(!r||t===":"){e.add(t);return}if(t==="/"){e.add(`\\${t}`);return}G1(t)?e.add(`\\${t}`):e.add(t);let n=encodeURIComponent(t);t!=="\\"&&n!==t&&e.add(n)},tne=t=>{switch(t.size){case 0:return"";case 1:return Qs(t.values());default:let e=[...t];return e.some(r=>r.length>1)?`(?:${e.join("|")})`:`[${e.join("")}]`}},oh=new Set,dS=(t,e,r,n)=>{let i="";for(let o of t.slice(e,r))xy?fS(o,oh,n):(fS(o.toLowerCase(),oh,n),fS(o.toUpperCase(),oh,n)),i+=tne(oh),oh.clear();return i};function qn(t,[e,r]=[0,t.length]){if(r<=e)return t;let n=[],i=dS(t,0,e,!1),o=dS(t,r,t.length,!1),s=t.slice(e,r);for(let a of[decodeURIComponent(s),vt(s)]){if(!a)continue;let u=dS(a,0,a.length,!0);n.push(rne(`${i}${u}${o}`).concat("($|\\?)"))}return n.join("|")}var rne=t=>t.replace(/^(file:\\\/\\\/\\\/)?([a-z]):/i,(e,r="",n)=>`${r}[${n.toUpperCase()}${n.toLowerCase()}]:`);function on(t){return t.startsWith("file:///")}var gS=process.platform;function ea(t){return t=bi(t),gS==="win32"?(RI(t)&&(t=t.slice(1)),t.split(/[\\//]/g).map((e,r)=>r>0?encodeURIComponent(e):e).join("/")):t.split("/").map(encodeURIComponent).join("/")}function bi(t){return t&&gS==="win32"&&t[1]===":"?t[0].toUpperCase()+t.substring(1):t}var ta=(t,e=[])=>{let r=t.urlFilter||"file"in t&&t.file||t.url,n=r?ine(r,...e):void 0;return i=>!i.url.startsWith("devtools://")&&n?.(i.url)!==!1},bl=t=>e=>e.type==="page"&&t(e);function nne(t){return!!t&&!_n.isAbsolute(t)&&!!(0,Qo.parse)(t).protocol}var ine=(...t)=>{let e=i=>{i=i.toLowerCase();let o=vt(i);o?i=o:nne(i)&&i.includes("://")&&(i=i.substr(i.indexOf("://")+3)),i.endsWith("/")&&(i=i.substr(0,i.length-1));let s=i.indexOf("#");return s!==-1&&(i=i.slice(0,i[s-1]==="/"?s-1:s)),i},r=t.map(i=>zr(e(i),"/*").replace(/(\/\*$)|\*/g,".*")),n=new RegExp("^("+r.join("|")+")$","g");return i=>(n.lastIndex=0,n.test(e(i)))};var po=Symbol("ISourceMapFactory"),HS=Symbol("IRootSourceMapFactory"),Su=class{constructor(e,r){this.root=e;this.resourceProvider=r}load(e){return this.root.load(this.resourceProvider,e)}guardSourceMapFn(e,r,n){return this.root.guardSourceMapFn(e,r,n)}};Su=C([(0,lo.injectable)(),b(0,(0,lo.inject)(HS)),b(1,(0,lo.inject)(wu))],Su);var ah=class{constructor(e,r,n){this.pathResolve=e;this.dap=r;this.logger=n;this.hasWarnedAboutMaps=new WeakSet}async load(e,r){let n=await this.parseSourceMap(e,r.sourceMapUrl),i=n.sourceRoot;n.sourceRoot=void 0;let o=!1,s=[];if("sections"in n){s=[];let a=0;for(let u of n.sections)s.push(...u.map.sources),u.map.sources=u.map.sources.map(()=>`source${a++}.js`),o||=!!u.map.names?.length}else"sources"in n&&Array.isArray(n.sources)&&(s=n.sources,n.sources=n.sources.map((a,u)=>`source${u}.js`),o=!!n.names?.length);return new hl(await new Z1.SourceMapConsumer(n),r,i??"",s,o)}async parseSourceMap(e,r){let n;try{n=await this.parseSourceMapDirect(e,r)}catch(i){if(n=await this.parsePathMappedSourceMap(e,r),!n)throw i}if("sections"in n){let i=await Promise.all(n.sections.map((o,s)=>"url"in o?this.parseSourceMap(e,o.url).then(a=>({offset:o.offset,map:a})).catch(a=>{this.logger.warn("sourcemap.parsing",`Error parsing nested map ${s}: ${a}`)}):o));n.sections=i.filter(St)}return n}async parsePathMappedSourceMap(e,r){if(mr(r))return;let n=await this.pathResolve.urlToAbsolutePath({url:r});if(n)try{return this.parseSourceMapDirect(e,n)}catch(i){this.logger.info("sourcemap.parsing","Parsing path mapped source map failed.",i)}}guardSourceMapFn(e,r,n){try{return r()}catch(i){if(!/error parsing/i.test(String(i.message)))throw i;if(!this.hasWarnedAboutMaps.has(e)){let o=hy(e.metadata.compiledPath,i.message).error;this.dap.output({output:o.format+`
`,category:"stderr"}),this.hasWarnedAboutMaps.add(e)}return n()}}dispose(){}async parseSourceMapDirect(e,r){let n=vt(r);n&&(n=this.pathResolve.rebaseRemoteToLocal(n));let i=await e.fetch(n||r);if(!i.ok)throw i.error;let o=i.body;return o.slice(0,3)===")]}"&&(o=o.substring(o.indexOf(`
`))),JSON.parse(o)}};ah=C([(0,lo.injectable)(),b(0,(0,lo.inject)(Qe)),b(1,(0,lo.inject)(fl)),b(2,(0,lo.inject)(ce))],ah);var ra=class extends ah{constructor(){super(...arguments);this.knownMaps=new ao(r=>r.toLowerCase());this.overwrittenSourceMaps=[]}load(r,n){let i=this.knownMaps.get(n.sourceMapUrl);if(!i)return this.loadNewSourceMap(r,n);let o=n.cacheKey,s=i.metadata.cacheKey;return i.reloadIfNoMtime?o&&s&&o===s?(i.reloadIfNoMtime=!1,i.prom):(this.overwrittenSourceMaps.push(i.prom),this.loadNewSourceMap(r,n)):s&&o&&o!==s?(this.overwrittenSourceMaps.push(i.prom),this.loadNewSourceMap(r,n)):i.prom}loadNewSourceMap(r,n){let i=super.load(r,n);return this.knownMaps.set(n.sourceMapUrl,{metadata:n,reloadIfNoMtime:!1,prom:i}),i}dispose(){for(let r of this.knownMaps.values())r.prom.then(n=>n.destroy(),()=>{});for(let r of this.overwrittenSourceMaps)r.then(n=>n.destroy(),()=>{});this.knownMaps.clear()}invalidateCache(){for(let r of this.knownMaps.values())r.reloadIfNoMtime=!0}};ra=C([(0,lo.injectable)()],ra);var eO=require("path");var wl=Symbol("ISearchStrategy"),_Se=Symbol("ISearchStrategyFallback"),tO=async(t,e,r)=>{let n,o=`${(0,eO.basename)(t)}.map`;if(e.siblings.includes(o)&&(n=o),n||(typeof r>"u"&&(r=await JH(t)),n=ml(r)),!(!n||(mr(n)||(n=Ys(ke(t),n)),!n))&&!(!n.startsWith("data:")&&!n.startsWith("file://")))return{compiledPath:t,sourceMapUrl:n,cacheKey:e.mtime}};var My=async(t,e,r,n={})=>{let i=Date.now();try{return await r()}finally{t.verbose("perf.function","",{method:e,duration:Date.now()-i,...n})}};var yS=Symbol("InlineSourceMapUrl"),rO=10*1e3,Eu=class{constructor(e){e.__workspaceCachePath&&(this.path=ky.join(e.__workspaceCachePath,"bp-predict.json"))}async load(){if(this.value||!this.path)return this.value;try{this.value=JSON.parse(await uh.promises.readFile(this.path,"utf-8"))}catch{}return this.value}async store(e){this.value=e,this.path&&(await uh.promises.mkdir(ky.dirname(this.path),{recursive:!0}),await uh.promises.writeFile(this.path,JSON.stringify(e)))}};Eu=C([(0,nr.injectable)(),b(0,(0,nr.inject)($e))],Eu);var fo=class{constructor(e,r,n,i,o,s){this.outFiles=e;this.repo=r;this.logger=n;this.sourceMapFactory=i;this.sourcePathResolver=o;this.state=s}async createMapping(e){if(this.outFiles.empty)return new Map;let r=Iu(),n=await this.state.load();try{let{state:i}=await this.repo.streamChildrenWithSourcemaps({files:this.outFiles,processMap:async o=>{let s=[],a=await this.sourceMapFactory.load(o);for(let u of a.sources){let c=this.sourcePathResolver?await this.sourcePathResolver.urlToAbsolutePath({url:u,map:a}):vt(u);c&&s.push({...o,sourceMapUrl:mr(o.sourceMapUrl)?{[yS]:o.sourceMapUrl}:o.sourceMapUrl,resolvedPath:c,sourceUrl:u})}return{discovered:s,compiledPath:Pt(o.compiledPath)}},onProcessedMap:({discovered:o})=>{for(let s of o){let a=r.get(s.resolvedPath);a||(a=new Set,r.set(s.resolvedPath,a)),a.add(s)}},lastState:n,...e});i&&this.state.store(i).catch(o=>this.logger.warn("runtime.exception","Error saving sourcemap cache",{error:o}))}catch(i){this.logger.warn("runtime.exception","Error reading sourcemaps from disk",{error:i})}return r}};fo=C([(0,nr.injectable)(),b(0,(0,nr.inject)(io)),b(1,(0,nr.inject)(wl)),b(2,(0,nr.inject)(ce)),b(3,(0,nr.inject)(po)),b(4,(0,nr.inject)(Qe)),b(5,(0,nr.inject)(Eu))],fo);var _l=class extends fo{async getMetadataForPaths(r){this.sourcePathToCompiled||(this.sourcePathToCompiled=this.createInitialMapping());let n=await this.sourcePathToCompiled;return r.map(i=>n.get(i))}async createInitialMapping(){return My(this.logger,"BreakpointsPredictor.createInitialMapping",()=>this.createMapping())}};_l=C([(0,nr.injectable)()],_l);var Al=class extends fo{constructor(){super(...arguments);this.sourcePathToCompiled=new Map}async getMetadataForPaths(r){let n=r.map(s=>this.sourcePathToCompiled.get(s)),i=r.map((s,a)=>a).filter(s=>!n[s]);if(i.length){let s=new Set(i.map(u=>Pt(r[u]))),a=this.createMapping({filter:(u,c)=>!c||c.discovered.some(l=>s.has(l.resolvedPath))});for(let u of i)this.sourcePathToCompiled.set(r[u],a),n[u]=a}return await Promise.all(n.map(async(s,a)=>(await s).get(r[a])))}};Al=C([(0,nr.injectable)()],Al);var Cu=Symbol("IBreakpointsPredictor"),Du=class{constructor(e,r,n,i){this.bpSearch=e;this.outFiles=r;this.logger=n;this.sourceMapFactory=i;this.predictedLocations=new Map;this.longParseEmitter=new z;this.targetedMode=!1;this.onLongParse=this.longParseEmitter.event}async predictBreakpoints(e){if(!e.source.path||!e.breakpoints?.length)return;let r=await this.getMetadataForPaths([e.source.path]).then(i=>i[0]);if(!r)return;let n=async(i,o,s)=>{let a=typeof s.sourceMapUrl=="string"?s.sourceMapUrl:s.sourceMapUrl.hasOwnProperty(yS)?s.sourceMapUrl[yS]:await uh.promises.readFile(s.compiledPath,"utf8").then(ml);if(!a)return[];let u=await this.sourceMapFactory.load({...s,sourceMapUrl:a}),c=this.sourceMapFactory.guardSourceMapFn(u,()=>Ey(s.sourceUrl,{lineNumber:i,columnNumber:o||1},u),()=>null);if(!c||c.line===null)return[];let l=await this.getMetadataForPaths([s.compiledPath]).then(p=>p[0]);return l?(await Promise.all([...l].map(f=>n(c.line,c.column,f)))).flat():[{absolutePath:s.compiledPath,lineNumber:c.line||1,columnNumber:c.column?c.column+1:1}]};for(let i of e.breakpoints??[]){let o=`${e.source.path}:${i.line}:${i.column||1}`;if(this.predictedLocations.has(o))return;let s=[];this.predictedLocations.set(o,s);for(let a of r)s.push(...await n(i.line,i.column||0,a))}}async getPredictionForSource(e){return this.getMetadataForPaths([e]).then(r=>r[0])}async getMetadataForPaths(e){let r=setTimeout(()=>{this.longParseEmitter.fire(),this.logger.warn("runtime.sourcemap","Long breakpoint predictor runtime",{longPredictionWarning:rO,patterns:[...this.outFiles.explode()].join(", ")})},rO),n=await this.bpSearch.getMetadataForPaths(e);return clearTimeout(r),n}predictedResolvedLocations(e){let r=`${e.absolutePath}:${e.lineNumber}:${e.columnNumber||1}`;return this.predictedLocations.get(r)??[]}};Du=C([(0,nr.injectable)(),b(0,(0,nr.inject)(fo)),b(1,(0,nr.inject)(io)),b(2,(0,nr.inject)(ce)),b(3,(0,nr.inject)(po))],Du);var bo=I(J());var Oy=class{constructor(e=!1,r=!1){this.verified=e;this.hit=r}},Fy=class{constructor(){this._statisticsById=new Map}registerBreakpoints(e){e.forEach(r=>{r.id!==void 0&&!this._statisticsById.has(r.id)&&this._statisticsById.set(r.id,new Oy(r.verified,!1))})}registerResolvedBreakpoint(e){this.getStatistics(e).verified=!0}registerBreakpointHit(e){this.getStatistics(e).hit=!0}getStatistics(e){let r=this._statisticsById.get(e);if(r!==void 0)return r;{let n=new Oy;return this._statisticsById.set(e,n),n}}statistics(){let e=0,r=0,n=0;for(let i of this._statisticsById.values())e++,i.hit&&n++,i.verified&&r++;return{set:e,verified:r,hit:n}}};var Ll=I(J());var xO=require("crypto"),ph=I(J());var one=0,ht=Symbol("ICdpApi"),Pu=class extends Error{constructor(r){super("<<message>>");this.method=r}setCause(r,n){return this.cause={code:r,message:n},this.message=`CDP error ${r} calling method ${this.method}: ${n}`,this.stack=this.stack?.replace("<<message>>",this.message),this}},Ft=class{constructor(e,r,n){this.logger=r;this.telemetryReporter=n;this._connectionId=one++;this._lastId=1e3;this._disposedSessions=new Map;this._onDisconnectedEmitter=new z;this.waitWrapper=ane();this.onDisconnected=this._onDisconnectedEmitter.event;this._transport=e,this._transport.onMessage(([i,o])=>this._onMessage(i,o)),this._transport.onEnd(()=>this._onTransportClose()),this._sessions=new Map,this._closed=!1,this._rootSession=new Ny(this,"",this.logger),this._sessions.set("",this._rootSession)}rootSession(){return this._rootSession.cdp()}_send(e,r={},n){let i=++this._lastId,o={id:i,method:e,params:r};n&&(o.sessionId=n);let s=JSON.stringify(o);return this.logger.verbose("cdp.send",void 0,{connectionId:this._connectionId,message:o}),this._transport.send(s),i}_onMessage(e,r){let n=JSON.parse(e),i=n;n.result&&n.result.scriptSource?i={...n,result:{...n.result,scriptSource:"<script source>"}}:n.method==="Debugger.scriptParsed"&&n.params&&mr(n.params.sourceMapURL)&&(i={...n,params:{...n.params,sourceMapURL:"<data source map url>"}}),this.logger.verbose("cdp.receive",void 0,{connectionId:this._connectionId,message:i});let o=this._sessions.get(n.sessionId||"");if(!o){let u=this._disposedSessions.get(n.sessionId);if(u){let c=(Date.now()-u.getTime())/1e3;this.logger.warn("internal",`Got message for a session disposed ${c} seconds ago`,{sessionId:n.sessionId,disposeOn:u});return}else throw new Error(`Unknown session id: ${n.sessionId} while processing: ${n.method}`)}let s=n.method,a;try{o._onMessage(n)}catch(u){a=u}s&&this.telemetryReporter.reportOperation("cdpOperation",s,r.elapsed().ms,a)}_onTransportClose(){if(!this._closed){this._closed=!0,this._transport.dispose(),this.logger.info("cdp.receive","Connection closed",{connectionId:this._connectionId});for(let e of this._sessions.values())e._onClose();this._sessions.clear(),this._onDisconnectedEmitter.fire()}}close(){this._onTransportClose()}isClosed(){return this._closed}createSession(e){let r=new Ny(this,e,this.logger);return this._sessions.set(e,r),r.cdp()}disposeSession(e){let r=this._sessions.get(e);r&&(r._onClose(),this._disposedSessions.set(r.sessionId(),new Date),this._sessions.delete(r.sessionId()))}},sne=+process.version.substring(1).split(".")[0]<11,Ny=class{constructor(e,r,n){this.logger=n;this._queue=[];this._prefixListeners=new qd;this._directListeners=new qd;this.paused=!1;this._callbacks=new Map,this._connection=e,this._sessionId=r,this._cdp=this._createApi()}pause(){this.paused=!0}resume(){if(!this.paused)return;this.paused=!1;let e=this._queue;this._queue=[],this.logger.verbose("cdp.receive","Dequeue messages",{message:e});for(let r of e)this._processResponse(r)}cdp(){return this._cdp}sessionId(){return this._sessionId}_createApi(){return new Proxy({},{get:(e,r)=>r==="pause"?()=>this.pause():r==="resume"?()=>this.resume():r==="session"?this:new Proxy({},{get:(n,i)=>{if(i!=="then")return i==="on"?(o,s)=>this.on(`${r}.${o}`,s):o=>this.send(`${r}.${i}`,o)}})})}on(e,r){return this._directListeners.listen(e,r)}onPrefix(e,r){return this._prefixListeners.listen(e,r)}send(e,r={}){return this.sendOrDie(e,r).catch(()=>{})}sendOrDie(e,r={}){if(!this._connection)return Promise.reject(new Pu(e).setCause(0,"Connection is closed"));let n=this._connection._send(e,r,this._sessionId);return new Promise((i,o)=>{this._callbacks.set(n,{resolve:i,reject:o,from:new Pu(e),method:e})})}_onMessage(e){if(this.paused&&e.id){this._processResponse(e);return}if(this._queue.length>0){this._queue.push(e);return}if(!sne&&!this.paused){this._processResponse(e);return}this._queue.push(e),this.paused||this._processQueue()}_processQueue(){this._connection?.waitWrapper(()=>{if(this.paused)return;let e=this._queue.shift();e&&(this._processResponse(e),this._queue.length&&this._processQueue())})}_processResponse(e){if(e.id===void 0){let n=e;this._directListeners.emit(n.method,n.params);for(let[i,o]of this._prefixListeners.listeners)n.method.startsWith(i)&&o.fire(n);return}let r=this._callbacks.get(e.id);r&&(this._callbacks.delete(e.id),"error"in e?r.reject(r.from.setCause(e.error.code,e.error.message)):"result"in e&&r.resolve(e.result))}async detach(){if(!this._connection)throw new Error("Session already detached. Most likely the target has been closed.");this._connection._send("Target.detachFromTarget",{},this._sessionId)}isClosed(){return!this._connection}_onClose(){for(let e of this._callbacks.values())e.reject(e.from.setCause(0,"Connection is closed"));this._callbacks.clear(),this._connection=void 0}};function ane(){if(parseInt(process.versions.node,10)>=11)return setImmediate;let t=!1,e=[],r=()=>{let n=e.shift();if(!n){t=!1;return}setImmediate(r),n()};return n=>{e.push(n),t||(t=!0,setImmediate(r))}}var Dl=I(J());var bO=I(_e()),wO=require("path"),_O=require("url");var mO=require("path"),gO=require("worker_threads");var xu=I(fO()),_S=require("fs"),AS=require("worker_threads");var bne=Buffer.from("(function (exports, require, module, __filename, __dirname) { "),wne=Buffer.from(`
});`),_ne=Buffer.from("(function (exports, require, module, __filename, __dirname, process, global, Buffer) { return function (exports, require, module, __filename, __dirname) { "),Ane=Buffer.from(`
}.call(this, exports, require, module, __filename, __dirname); });`),Ine=Buffer.from("#!"),Sne=Buffer.from("\r")[0],Ene=Buffer.from(`
`)[0],Dne=(t,e)=>t.slice(0,e.length).equals(e),dO=(t,e,r)=>{let n=e.length===64?xu.shaHash:xu.hash;if(n(t)===e)return!0;if(r){if(Dne(t,Ine)){let i=t.indexOf(Ene);return t[i-1]===Sne&&i--,n(t.slice(i))===e}if(n(Buffer.concat([bne,t,wne]))===e)return!0}return n(Buffer.concat([_ne,t,Ane]))===e},hO=t=>t instanceof Buffer?t:Buffer.from(t,"utf-8");async function Cne(t){switch(t.type){case 0:try{let e=await _S.promises.readFile(t.file);return{id:t.id,hash:t.mode===0?(0,xu.hash)(e):(0,xu.shaHash)(e)}}catch{return{id:t.id}}case 1:try{return{id:t.id,hash:(0,xu.hash)(hO(t.data))}}catch{return{id:t.id}}case 2:try{let e=await _S.promises.readFile(t.file);return{id:t.id,matches:dO(e,t.expected,t.checkNode)}}catch{return{id:t.id,matches:!1}}case 3:try{return{id:t.id,matches:dO(hO(t.data),t.expected,t.checkNode)}}catch{return{id:t.id,matches:!1}}}}function Pne(t){t.on("message",e=>{Cne(e).then(r=>t.postMessage(r))})}AS.parentPort&&Pne(AS.parentPort);var Gy=class{constructor(e=3,r=(0,mO.join)(__dirname,"hash.js")){this.maxFailures=e;this.hasherScriptPath=r;this.idCounter=0;this.failureCount=0;this.deferredMap=new Map;this.deferCleanup=XT(3e4,()=>this.cleanup())}async hashBytes(e,r){return(await this.send({type:1,data:r,mode:e,id:this.idCounter++})).hash}async hashFile(e,r){return(await this.send({type:0,file:r,mode:e,id:this.idCounter++})).hash}async verifyBytes(e,r,n){return(await this.send({type:3,data:e,id:this.idCounter++,expected:r,checkNode:n})).matches}async verifyFile(e,r,n){return(await this.send({type:2,file:e,id:this.idCounter++,expected:r,checkNode:n})).matches}dispose(){this.cleanup(),this.deferCleanup.clear()}send(e){let r=this.getProcess();if(!r)throw new Error("hash.js process unexpectedly exited");this.deferCleanup();let n=Be();return this.deferredMap.set(e.id,{deferred:n,request:e}),r.postMessage(e),n.promise}cleanup(){this.instance&&(this.instance.removeAllListeners("exit"),this.instance.terminate(),this.instance=void 0,this.failureCount=0)}getProcess(){if(this.instance)return this.instance;if(this.failureCount>this.maxFailures)return;let e=this.instance=new gO.Worker(this.hasherScriptPath);return e.setMaxListeners(1/0),e.on("message",r=>{let n=r,i=this.deferredMap.get(n.id);i&&(i.deferred.resolve(n),this.deferredMap.delete(n.id))}),e.on("exit",()=>{this.instance=void 0,this.failureCount++;let r=this.getProcess();if(r){this.deferCleanup();for(let{request:n}of this.deferredMap.values())r.postMessage(n)}else{for(let{deferred:n}of this.deferredMap.values())n.reject(new Error("hash.js process unexpectedly exited"));this.deferredMap.clear(),this.deferCleanup.clear()}}),e}};var yO=require("fs"),HO=new Gy;async function vO(t,e,r){return!t||Ck(t)?void 0:e?(typeof r=="string"?await HO.verifyBytes(r,e,!0):await HO.verifyFile(t,e,!0))?t:void 0:await new vn(yO.promises).exists(t)?t:void 0}var Lu=class{constructor(e,r,n,i,o,s,a,u){this.url=r;this.inlineScriptOffset=s;this.runtimeScriptOffset=a;this.contentHash=u;this._scripts=[];this.sourceReference=e.getSourceReference(r),this._contentGetter=Ae(i),this._container=e,this.absolutePath=n||"",this._fqname=this._fullyQualifiedName(),this._name=this._humanName(),this.setSourceMapUrl(o),this._existingAbsolutePath=this.checkContentHash(u)}checkContentHash(e){return vO(this.absolutePath,this.inlineScriptOffset||this.runtimeScriptOffset?void 0:e,this._container._fileContentOverridesForTest.get(this.absolutePath))}offsetScriptToSource(e){return this.runtimeScriptOffset?{...e,lineNumber:Math.max(1,e.lineNumber-this.runtimeScriptOffset.lineOffset),columnNumber:e.columnNumber-this.runtimeScriptOffset.columnOffset}:e}offsetSourceToScript(e){return this.runtimeScriptOffset?{...e,lineNumber:e.lineNumber+this.runtimeScriptOffset.lineOffset,columnNumber:e.columnNumber+this.runtimeScriptOffset.columnOffset}:e}setSourceMapUrl(e){if(!e){this.sourceMap=void 0;return}this.sourceMap={type:0,sourceByUrl:new Map,value:Be(),metadata:e}}addScript(e){this._scripts.push(e)}filterScripts(e){this._scripts=this._scripts.filter(e)}get scripts(){return this._scripts}get getSuggestedMimeType(){if(this.url.endsWith(".wat"))return"text/wat";if(!/\.[^/]+$/.test(this.url)||this.url.includes("?"))return"text/javascript"}async content(){let e=await this._contentGetter();return this.inlineScriptOffset?.lineOffset&&(e=`
`.repeat(this.inlineScriptOffset.lineOffset)+e),e}async prettyPrint(){if(!this._container)return;if(na(this)&&this.sourceMap.metadata.sourceMapUrl.endsWith("-pretty.map")){let u=this.sourceMap.value.settledValue;return u&&{map:u,source:[...this.sourceMap.sourceByUrl.values()][0]}}let e=await this.content();if(!e)return;let r=this.url||`eval://${this.sourceReference}.js`,n=r+"-pretty.map",o=r.split(/[\/\\]/).pop()+"-pretty.js",s=await k1(o,e,r,n);if(!s)return;this.setSourceMapUrl({compiledPath:this.absolutePath,sourceMapUrl:""}),this.sourceMap.value.resolve(s);let a=this;return await this._container._addSourceMapSources(a,s),{map:s,source:[...a.sourceMap.sourceByUrl.values()][0]}}async toDap(){return this.toDapShallow()}async toDapShallow(){let e=await this._existingAbsolutePath,r={name:this._name,path:this._fqname,sourceReference:this.sourceReference,presentationHint:this.blackboxed()?"deemphasize":void 0,origin:this.blackboxed()?bO.t("Skipped by skipFiles"):void 0};return e&&(r.sourceReference=0,r.path=e),r}existingAbsolutePath(){return this._existingAbsolutePath}async prettyName(){let e=await this._existingAbsolutePath;return e||this._fqname}_humanName(){if(kr(this._fqname)){for(let e of this._container.rootPaths)if(ZH(e,this._fqname))return Ge((0,wO.relative)(e,this._fqname))}return this._fqname}_fullyQualifiedName(){if(!this.url)return"<eval>/VM"+this.sourceReference;if(this.url.endsWith(".repl"))return"repl";if(this.absolutePath.startsWith("<node_internals>"))return this.absolutePath;if(kr(this.url))return this.url;let e=vt(this.url);if(e)return e;let r=this.url;try{let n=[],i=new _O.URL(this.url);if(i.protocol==="data:")return"<eval>/VM"+this.sourceReference;i.hostname&&n.push(i.hostname),i.port&&n.push("\uA789"+i.port),i.pathname&&n.push(/^\/[a-z]:/.test(i.pathname)?i.pathname.slice(1):i.pathname);let o=i.searchParams?.toString();o&&n.push("?"+o),r=n.join("")}catch{}return r.endsWith("/")&&(r+="(index)"),this.inlineScriptOffset&&(r+=`\uA789${this.inlineScriptOffset.lineOffset+1}:${this.inlineScriptOffset.columnOffset+1}`),r}blackboxed(){return this._container.isSourceSkipped(this.url)}};var lh;(n=>{async function t(i){return i.value.promise}n.waitForValue=t;function e(i,o){return i.type===0&&i.value.settledValue?Promise.resolve(i.value.settledValue):Promise.race([t(i),Le(o)])}n.waitForValueWithTimeout=e;async function r(i){return await t(i),i.sourceByUrl}n.waitForSources=r})(lh||={});var xt=class extends Lu{constructor(){super(...arguments);this.compiledToSourceUrl=new Map}},Ky=class extends Lu{constructor(r,n,i){super(r,n.url,i,()=>Promise.resolve("Binary content not shown, see the decompiled WAT file"),void 0,void 0,void 0,void 0);this.event=n;this.sourceMap={type:1,value:Be(),sourceByUrl:new Map}}checkContentHash(){return Promise.resolve(void 0)}offsetScriptToSource(r){return r}offsetSourceToScript(r){return r}},Xr=t=>!!t&&t instanceof Lu&&!!t.sourceMap,na=t=>Xr(t)&&t.sourceMap.type===0,Tu=t=>Xr(t)&&t.sourceMap.type===1,IS=t=>!!t&&typeof t.getDisassembly=="function";function AO(t,e){if(!e)return t;let{lineNumber:r,columnNumber:n}=t;return e&&(r+=e.lineOffset,r<=1&&(n+=e.columnOffset)),{...t,lineNumber:r,columnNumber:n}}function IO(t,e){if(!e)return t;let{lineNumber:r,columnNumber:n}=t;return e&&(r=Math.max(1,r-e.lineOffset),r<=1&&(n=Math.max(1,n-e.columnOffset))),{...t,lineNumber:r,columnNumber:n}}var SO=t=>({lineNumber:t.lineNumber+1,columnNumber:t.columnNumber+1}),Zo=t=>({lineNumber:t.lineNumber-1,columnNumber:t.columnNumber-1});var bt=class{constructor(e,r){this.lineNumber=e;this.columnNumber=r}get base0(){return this}get base1(){return new Nt(this.lineNumber+1,this.columnNumber+1)}get base01(){return new _i(this.lineNumber,this.columnNumber+1)}compare(e){let r=e.base0;return this.lineNumber-r.lineNumber||this.columnNumber-r.columnNumber}},Nt=class{constructor(e,r){this.lineNumber=e;this.columnNumber=r}get base0(){return new bt(this.lineNumber-1,this.columnNumber-1)}get base1(){return this}get base01(){return new _i(this.lineNumber-1,this.columnNumber)}compare(e){let r=e.base1;return this.lineNumber-r.lineNumber||this.columnNumber-r.columnNumber||0}},_i=class{constructor(e,r){this.lineNumber=e;this.columnNumber=r}get base0(){return new bt(this.lineNumber-1,this.columnNumber)}get base1(){return new Nt(this.lineNumber,this.columnNumber+1)}get base01(){return this}compare(e){let r=e.base01;return this.lineNumber-r.lineNumber||this.columnNumber-r.columnNumber}},Ai=class t{constructor(e,r){this.begin=e;this.end=r}static{this.ZERO=new t(new bt(0,0),new bt(0,0))}static{this.INFINITE=new t(new bt(0,0),new bt(1/0,1/0))}static simplify(e){if(e.length===0)return[];let r=e.slice().sort((o,s)=>o.begin.compare(s.begin)),n=[],i=r[0];for(let o=1;o<r.length;o++){let s=r[o];i.end.compare(s.begin)>=0?i=new t(i.begin,s.end):(n.push(i),i=s)}return n.push(i),n}contains(e){return e.compare(this.begin)>=0&&e.compare(this.end)<=0}toString(){let e=this.begin.base0,r=this.end.base0;return`Range[${e.lineNumber}:${e.columnNumber} -> ${r.lineNumber}:${r.columnNumber}]`}};var EO=require("worker_threads");var Il=require("worker_threads");function SS(t,e){let r=uo(t),n=(a,{loc:u}=a,{loc:c}=a)=>{if(!u||!c)throw new Error("should include locations");let l=e(u,c);if(o.length>0){let p=o[o.length-1];p.scopeNode.children??=[],p.scopeNode.children.push(l)}o.push({node:a,scopeNode:l})},i=new Set,o=[],s;return Xs(r,{enter:a=>{switch(a.type){case"FunctionDeclaration":case"ArrowFunctionExpression":n(a,a.params[0]||a.body,a.body),i.add(a.body);break;case"Program":n(a),s=o[0].scopeNode;break;case"ForStatement":case"ForOfStatement":case"ForInStatement":n(a),i.add(a.body);break;case"BlockStatement":i.has(a)||n(a);break}},leave:a=>{a===o[o.length-1].node&&o.pop()}}),s}Il.isMainThread||Il.parentPort?.postMessage(SS(Il.workerData,(t,e)=>({start:t.start,end:e.end})));var Sl=class t{constructor(e){this.range=e}static hydrate(e){let r=new t(new Ai(new bt(e.start.line,e.start.column),new bt(e.end.line,e.end.column)));return r.children=e.children?.map(t.hydrate),r}search(e){if(this.range.contains(e)){if(!this.children)return this;for(let r of this.children){let n=r.search(e);if(n)return n}return this}}findDeepest(e,r){if(this.range.contains(e)){if(this.children)for(let n of this.children){let i=n.findDeepest(e,r);if(i!==void 0)return i}return r(this)}}filterHoist(e){if(this.children)for(let r=0;r<this.children.length;r++){let n=this.children[r];if(n.filterHoist(e),!e(n)){let i=n.children||[];this.children.splice(r,1,...i),r--}}}forEach(e){e(this),this.children?.forEach(r=>r.forEach(e))}toJSON(){return{range:this.range,children:this.children}}},xne=1024*512;function DO(t){return t.length<xne?Lne(t):new Promise((e,r)=>{let n=new EO.Worker(`${__dirname}/renameWorker.js`,{workerData:t});n.on("message",i=>e(Sl.hydrate(i))),n.on("error",r),n.on("exit",()=>r("rename worker exited"))})}function Lne(t){return SS(t,(e,r)=>new Sl(new Ai(new _i(e.start.line,e.start.column).base0,new _i(r.end.line,r.end.column).base0)))}var CO=/[$a-z_][$0-9A-Z_$]*/iy,ia=Symbol("IRenameProvider"),El=class{constructor(e,r,n){this.logger=e;this.sourceMapFactory=r;this.launchConfig=n;this.renames=new Map}provideOnStackframe(e){if(!this.launchConfig.sourceMapRenames)return Wn.None;let r=e.uiLocation();return r===void 0?Wn.None:"then"in r?r.then(n=>this.provideForSource(n?.source)):this.provideForSource(r?.source)}provideForSource(e){if(!this.launchConfig.sourceMapRenames||!(e instanceof xt))return Wn.None;let r=Qs(e.compiledToSourceUrl.keys());if(!r)throw new Error("unreachable");if(!na(r))return Wn.None;let n=this.renames.get(r.url);if(n)return n;let i=this.sourceMapFactory.load(r.sourceMap.metadata).then(async o=>{if(!o?.hasNames)return Wn.None;let s=await r.content();return s?await this.createFromSourceMap(o,s):Wn.None}).catch(()=>Wn.None);return this.renames.set(r.url,i),i}async createFromSourceMap(e,r){let n=Date.now(),i;try{i=await DO(r)}catch(a){return this.logger.info("runtime",`Error parsing content for source tree: ${a}}`,{url:e.metadata.compiledPath}),Wn.None}let o=new Zs(r);e.eachMapping(a=>{if(!a.name)return;let u=new _i(a.generatedLine,a.generatedColumn).base0,c=o.convert(u);CO.lastIndex=c;let l=CO.exec(r);if(!l)return;let p=l[0];if(p===a.name)return;let f=i.search(u)||i;f.data??=[],f.data.some(m=>m.compiled==p)||f.data.push({compiled:p,original:a.name})}),i.filterHoist(a=>!!a.data);let s=Date.now();return this.logger.info("runtime",`renames calculated in ${s-n}ms`,{url:e.metadata.compiledPath}),new Wn(i)}};El=C([(0,Dl.injectable)(),b(0,(0,Dl.inject)(ce)),b(1,(0,Dl.inject)(po)),b(2,(0,Dl.inject)($e))],El);var Wn=class t{constructor(e){this.renames=e}static{this.None=new t(new Sl(Ai.ZERO))}getOriginalName(e,r){return this.getClosestRename(r,n=>n.compiled===e)?.original}getCompiledName(e,r){return this.getClosestRename(r,n=>n.original===e)?.compiled}getClosestRename(e,r){return this.renames.findDeepest(e,n=>n.data?.find(r))}};var es="$returnValue",Tne="__js_debug_hoisted_",PO=()=>Tne+(0,xO.randomBytes)(8).toString("hex"),Vn=Symbol("IEvaluator"),Cl=class{constructor(e,r){this.cdp=e;this.renameProvider=r}get hasReturnValue(){return!!this.returnValue}setReturnedValue(e){this.returnValue=e}prepare(e,{isInternalScript:r,hoist:n,renames:i}={}){r!==!1&&(e+=dt());let o=new Map;o.set(es,PO());for(let u of n??[])o.set(u,PO());let{transformed:s,hoisted:a}=this.replaceVariableInExpression(e,o,i);return a.size?{canEvaluateDirectly:!1,invoke:(u,c={})=>Promise.all([...o].map(([l,p])=>this.hoistValue(l===es?this.returnValue:c[l],p))).then(()=>this.cdp.Debugger.evaluateOnCallFrame({...u,expression:s}))}:{canEvaluateDirectly:!0,invoke:u=>this.cdp.Debugger.evaluateOnCallFrame({...u,expression:s})}}async evaluate(e,r){if(!("callFrameId"in e))return this.cdp.Runtime.evaluate(e);let n=r;if(r?.stackFrame){let i=await this.renameProvider.provideOnStackframe(r.stackFrame);n={...n,renames:{mapping:i,position:r.stackFrame.rawPosition}}}return this.prepare(e.expression,n).invoke(e)}async hoistValue(e,r){let n=e?.objectId,i=`setTimeout(() => { delete globalThis.${r} }, 0)`;n?await this.cdp.Runtime.callFunctionOn({objectId:n,functionDeclaration:`function() { globalThis.${r} = this; ${i}; ${dt()} }`}):await this.cdp.Runtime.evaluate({expression:`globalThis.${r} = ${JSON.stringify(e?.value)};${i};`+dt()})}replaceVariableInExpression(e,r,n){let i=new Set,o=!1,s=(p,f)=>({type:"ConditionalExpression",test:{type:"BinaryExpression",left:{type:"UnaryExpression",operator:"typeof",prefix:!0,argument:{type:"Identifier",name:p}},operator:"!==",right:{type:"Literal",value:"undefined"}},consequent:{type:"Identifier",name:p},alternate:f}),a=[],u=uo(e),c=Ay(u,{enter(p,f){let m=p;if(p.type!=="Identifier"||e[m.start-1]===".")return;let h=r.get(p.name);if(h)return i.add(p.name),o=!0,{replace:uS(p,f)?{type:"Identifier",name:h}:s(h,$ne)};let H=n?.mapping.getCompiledName(p.name,n.position);if(H)return o=!0,{replace:uS(p,f)?{type:"Identifier",name:H}:s(H,p)}},leave:()=>{a.pop()}});if(!o)return{hoisted:i,transformed:e};let l=u.body[u.body.length-1].end;return{hoisted:i,transformed:Yo(c)+e.slice(l)}}};Cl=C([(0,ph.injectable)(),b(0,(0,ph.inject)(ht)),b(1,(0,ph.inject)(ia))],Cl);var $ne={type:"Identifier",name:"undefined"};var zy=class t{static parse(e,r,n,i){n&&(r=ES(r));let o=r&&Js(r);if(o)throw new Z(Ks(e,o.message));let{canEvaluateDirectly:s,invoke:a}=i.prepare(r);return new t(s?r:a)}constructor(e){typeof e=="function"?this.invoke=e:this.breakCondition=e}async shouldStayPaused(e){return this.invoke?(await this.invoke({callFrameId:e.callFrames[0].callFrameId,returnByValue:!0}))?.result.value===!0:Promise.resolve(!0)}},ES=t=>`(()=>{try{return ${t};}catch(e){console.error(e);return true}})()`;var Rne=/^(>|>=|={1,3}|<|<=|%)?\s*([0-9]+)$/,Pl=class t{constructor(e){this.predicate=e;this.hits=0;this.breakCondition=void 0}shouldStayPaused(){return Promise.resolve(this.predicate(++this.hits))}static parse(e){let r=Rne.exec(e);if(!r)throw new Z(tS(e));let[,n="=",i]=r;return new t(Mne(e,n,Number(i)))}},Mne=(t,e,r)=>{switch(e){case"=":case"==":case"===":return n=>n===r;case">":return n=>n>r;case">=":return n=>n>=r;case"<":return n=>n<r;case"<=":return n=>n<=r;case"%":return n=>n%r===0;default:throw new Z(tS(t))}};var LO=require("crypto"),Jy=I(J());var Xy=class{constructor(e){this.invoke=e;this.breakCondition=void 0}async shouldStayPaused(e){return await this.invoke({callFrameId:e.callFrames[0].callFrameId}),!1}};var $u=class{constructor(e,r){this.breakCondition=r;let n=r&&Js(r);if(n)throw new Z(Ks(e,n.message))}shouldStayPaused(){return Promise.resolve(!0)}};var oa=class{constructor(e){this.evaluator=e}compile(e,r){let n=this.logMessageToExpression(r),i=Js(n);if(i)throw new Z(Ks(e,i.message));let{canEvaluateDirectly:o,invoke:s}=this.evaluator.prepare(n);return o?new $u(e,this.logMessageToExpression(r)):new Xy(s)}serializeLogStatements(e){return $1([],e,!1)}logMessageToExpression(e){let r=c=>c.replace(/%/g,"%%"),n=[],i=[],o=0;for(;;){let c=e.indexOf("{",o);if(c===-1){n.push(r(e.slice(o)));break}n.push(r(e.slice(o,c)));let[l]=_y(e.slice(c));if(o=c+l.end,o-1===c+1||e[o-1]!=="}"){n.push(r(e.slice(c,o)));continue}if(l.type!=="BlockStatement")break;i.push(Yo(this.serializeLogStatements(l.body))),n.push("%O")}let a=`console.log(${[JSON.stringify(n.join("")),...i].join(", ")}), false`,u=(0,LO.createHash)("sha1").update(a).digest("hex").slice(0,7);return a+`
//# sourceURL=logpoint-${u}.cdp`}};oa=C([(0,Jy.injectable)(),b(0,(0,Jy.inject)(Vn))],oa);var kne=new $u({line:0},void 0),yDe=new $u({line:0},"false"),Yy=Symbol("IBreakpointConditionFactory"),xl=class{constructor(e,r,n){this.logPointCompiler=e;this.evaluator=r;this.breakOnError=n.__breakOnConditionalError}getConditionFor(e){return e.condition?zy.parse(e,e.condition,this.breakOnError,this.evaluator):e.logMessage?this.logPointCompiler.compile(e,e.logMessage):e.hitCondition?Pl.parse(e.hitCondition):kne}};xl=C([(0,Ll.injectable)(),b(0,(0,Ll.inject)(oa)),b(1,(0,Ll.inject)(Vn)),b(2,(0,Ll.inject)($e))],xl);var ev=require("path");var Qy=(t,e)=>t.lineNumber===e.lineNumber&&t.columnNumber===e.columnNumber;var Zy=t=>!("location"in t),TO=t=>"location"in t,One=(t,e)=>t.url&&e===t.url||t.urlRegex&&new RegExp(t.urlRegex).test(e),Tl=class{constructor(e,r,n){this._manager=e;this._source=r;this._originalPosition=n;this.isEnabled=!1;this.setInCdpScriptIds=new Set;this.cdpScriptIds=this.setInCdpScriptIds;this.cdpBreakpoints=[];this._cdpIds=new Set}get enabled(){return this.isEnabled}get cdpIds(){return this._cdpIds}get source(){return this._source}get originalPosition(){return this._originalPosition}async updateSourceLocation(e,r,n){this._source=r,this._originalPosition=n;let i=[];for(let o of this.cdpBreakpoints)o.state===1&&i.push(this.updateUiLocations(e,o.cdpId,o.locations));await Promise.all(i)}async refreshUiLocations(e){await Promise.all(this.cdpBreakpoints.filter(r=>r.state===1).map(r=>this.updateUiLocations(e,r.cdpId,r.locations)))}async enable(e){if(this.isEnabled)return;this.isEnabled=!0;let r=[this._setPredicted(e)],n=this._manager._sourceContainer.source(this.source);if((!n||!(n instanceof xt))&&r.push(this._setByPath(e,n?.offsetSourceToScript(this.originalPosition)||this.originalPosition)),await Promise.all(r),n&&this.isEnabled){let i=await this._manager._sourceContainer.currentSiblingUiLocations({lineNumber:this.originalPosition.lineNumber,columnNumber:this.originalPosition.columnNumber,source:n});await Promise.all(i.map(o=>this._setByUiLocation(e,n.offsetSourceToScript(o))))}}async updateUiLocations(e,r,n){this.updateExistingCdpRef(r,a=>({...a,locations:n}));let i=(await Promise.all(n.map(a=>e.rawLocationToUiLocation(e.rawLocation(a))))).find(a=>!!a);if(!i)return;let o=this._manager._sourceContainer.source(this.source);if(!o)return;let s=await this._manager._sourceContainer.currentSiblingUiLocations(i);this.updateExistingCdpRef(r,a=>{let u=s.filter(c=>c.source===o);return{...a,locations:n,uiLocations:u.length?u:s}})}compare(e){let r=this.originalPosition,n=e.originalPosition;return r.lineNumber!==n.lineNumber?r.lineNumber-n.lineNumber:r.columnNumber-n.columnNumber}async disable(){if(!this.isEnabled)return;this.isEnabled=!1;let e=this.cdpBreakpoints.map(r=>this.removeCdpBreakpoint(r));await Promise.all(e)}async updateForNewLocations(e,r){let n=this._manager._sourceContainer.source(this.source);if(!n)return[];let i=await this._manager._sourceContainer.currentSiblingUiLocations({lineNumber:this.originalPosition.lineNumber,columnNumber:this.originalPosition.columnNumber,source:n},await r.source);if(!i.length)return[];let o=[];for(let s of i)o.push(this._setForSpecific(e,r,n.offsetSourceToScript(s)));for(let s of this.cdpBreakpoints){if(!Zy(s.args)||!One(s.args,r.url))continue;let a=s.args;i.some(u=>u.columnNumber-1===a.columnNumber&&u.lineNumber-1===a.lineNumber)||(this._manager.logger.verbose("runtime.sourcemap","Adjusted breakpoint due to overlaid sourcemap",{url:n.url}),o.push(this.removeCdpBreakpoint(s)))}return await Promise.all(o),i}executionContextWasCleared(){this.updateCdpRefs(e=>e.filter(r=>Zy(r.args)))}hasResolvedAt(e,r){let{lineNumber:n,columnNumber:i}=r.base0;return this.cdpBreakpoints.some(o=>o.state===1&&o.locations.some(s=>s.scriptId===e&&s.lineNumber===n&&(s.columnNumber===void 0||s.columnNumber===i)))}getBreakCondition(){}updateExistingCdpRef(e,r){this.updateCdpRefs(n=>n.map(i=>i.state!==1||i.cdpId!==e?i:r(i)))}updateCdpRefs(e){let r=this;r.cdpBreakpoints=e(this.cdpBreakpoints);let n=new Set;this.setInCdpScriptIds.clear();for(let i of this.cdpBreakpoints)if(i.state===1){n.add(i.cdpId);for(let o of i.locations)this.setInCdpScriptIds.add(o.scriptId)}this._cdpIds=n}async _setPredicted(e){if(!this.source.path||!this._manager._breakpointsPredictor)return;let r=this._manager._breakpointsPredictor.predictedResolvedLocations({absolutePath:this.source.path,lineNumber:this.originalPosition.lineNumber,columnNumber:this.originalPosition.columnNumber}),n=[];for(let i of r){let o=this._manager._sourceContainer.sourcePathResolver.absolutePathToUrlRegexp(i.absolutePath);o!==void 0&&(typeof o=="string"?n.push(this._setByUrlRegexp(e,o,i)):n.push(o.then(s=>s?this._setByUrlRegexp(e,s,i):void 0)))}await Promise.all(n)}async _setByUiLocation(e,r){await Promise.all(r.source.scripts.map(n=>this._setForSpecific(e,n,r)))}async _setByPath(e,r){let n=this._manager._sourceContainer.source({path:this.source.path});if(!(n instanceof xt&&[...n.compiledToSourceUrl.keys()].some(o=>o.absolutePath===this.source.path)))if(this.source.path){let i=await this._manager._sourceContainer.sourcePathResolver.absolutePathToUrlRegexp(this.source.path);if(!i)return;await this._setByUrlRegexp(e,i,r)}else{let o=this._manager._sourceContainer.source(this.source)?.url;if(!o)return;await this._setByUrl(e,o,r),this.source.path!==o&&this.source.path!==void 0&&await this._setByUrl(e,ke(this.source.path),r)}}hasSetOnLocation(e,r){return this.cdpBreakpoints.find(n=>e.scriptId&&TO(n.args)&&n.args.location.scriptId===e.scriptId&&Qy(n.args.location,r)||e.url&&!e.hasSourceURL&&Zy(n.args)&&(n.args.urlRegex?new RegExp(n.args.urlRegex).test(e.url):e.url===n.args.url)&&Qy(n.args,r))}hasSetOnLocationByUrl(e,r,n){return this.cdpBreakpoints.find(i=>{if(Zy(i.args))return Qy(i.args,n)?e==="url"?i.args.urlRegex?new RegExp(i.args.urlRegex).test(r):i.args.url===r:e==="re"&&i.args.urlRegex===r:!1;let o=this._manager._sourceContainer.getScriptById(i.args.location.scriptId);if(o)return Qy(i.args.location,n)&&e==="re"?new RegExp(r).test(o.url):o.url===r})}async _setForSpecific(e,r,n){return r.url&&!r.hasSourceURL&&(!r.embedderName||r.embedderName===r.url)?this._setByUrl(e,r.url,n):this._setByScriptId(e,r,n)}async _setByUrl(e,r,n){n=Zo(n);let i=this.hasSetOnLocationByUrl("url",r,n);if(i){i.state===0&&await i.done;return}return this._setAny(e,{url:r,condition:this.getBreakCondition(),...n})}async _setByUrlRegexp(e,r,n){n=Zo(n);let i=this.hasSetOnLocationByUrl("re",r,n);if(i){i.state===0&&await i.done;return}return this._setAny(e,{urlRegex:r,condition:this.getBreakCondition(),...n})}async _setByScriptId(e,r,n){n=Zo(n);let i=this.hasSetOnLocation(r,n);if(i){i.state===0&&await i.done;return}return this._setAny(e,{condition:this.getBreakCondition(),location:{scriptId:r.scriptId,...n}})}async _setAny(e,r){if(!this.isEnabled)return;let n={state:0,args:r,deadletter:!1};n.done=(async()=>{let i=TO(r)?await e.cdp().Debugger.setBreakpoint(r):await e.cdp().Debugger.setBreakpointByUrl(r);if(!i)return;if(n.deadletter){await e.cdp().Debugger.removeBreakpoint({breakpointId:i.breakpointId});return}let o="actualLocation"in i?[i.actualLocation]:i.locations;this._manager._resolvedBreakpoints.set(i.breakpointId,this);let s={state:1,cdpId:i.breakpointId,args:r,locations:o,uiLocations:[]};return this.updateCdpRefs(a=>a.map(u=>u===n?s:u)),await this.updateUiLocations(e,i.breakpointId,o),s})(),this.updateCdpRefs(i=>[...i,n]),await n.done}async removeCdpBreakpoint(e){this.updateCdpRefs(r=>r.filter(n=>n!==e)),e.state===0?(e.deadletter=!0,await e.done):(await this._manager._thread?.cdp().Debugger.removeBreakpoint({breakpointId:e.cdpId}),this._manager._resolvedBreakpoints.delete(e.cdpId))}};var mo=class t extends Tl{constructor(r,n,i){super(r,n,{lineNumber:1,columnNumber:1});this.mode=i}static getModeKeyForSource(r,n){return r===1?(0,ev.basename)(n,(0,ev.extname)(n)||void 0):n}_setPredicted(){return Promise.resolve()}_setByPath(r,n){if(!this.source.path)return Promise.resolve();let i=t.getModeKeyForSource(this.mode,this.source.path);return this.mode===1?super._setByUrlRegexp(r,zr(i),n):super._setByPath(r,n)}};var RO=I(_e());var Gn=class extends Tl{constructor(r,n,i,o,s){super(r,i,{lineNumber:o.line,columnNumber:o.column||1});this.dapId=n;this.dapParams=o;this.condition=s;this.completedSet=Be()}equivalentTo(r){return r.dapParams.column===this.dapParams.column&&r.dapParams.line===this.dapParams.line&&r.dapParams.hitCondition===this.dapParams.hitCondition&&r.dapParams.condition===this.dapParams.condition&&r.dapParams.logMessage===this.dapParams.logMessage}untilSetCompleted(){return this.completedSet.promise}markSetCompleted(){this.completedSet.resolve()}testHitCondition(r){return this.condition.shouldStayPaused(r)}async toDap(){let r=this.enabled&&this.getResolvedUiLocation();return r?{id:this.dapId,verified:!0,source:await r.source.toDap(),line:r.lineNumber,column:r.columnNumber}:{id:this.dapId,verified:!1,message:RO.t("Unbound breakpoint")}}diagnosticDump(){return{source:this.source,params:this.dapParams,cdp:this.cdpBreakpoints}}getBreakCondition(){return this.condition.breakCondition}updateCdpRefs(r){let n=this.getResolvedUiLocation();super.updateCdpRefs(r),this.getResolvedUiLocation()!==n&&this.notifyResolved()}getResolvedUiLocation(){for(let r of this.cdpBreakpoints)if(r.state===1&&r.uiLocations.length)return r.uiLocations[0]}async notifyResolved(){await this._manager.notifyBreakpointChange(this,this.completedSet.hasSettled())}};var tv=class extends Gn{constructor(e,r,n,i){super(e,r,n,i,new Pl(()=>!1))}getResolvedUiLocation(){}};var jF=I(gh());var Hh=class extends mo{constructor(r,n){super(r,{path:n},1);this.pattern=n}async enable(r){if(this.isEnabled)return;this.isEnabled=!0;let n=(0,jF.makeRe)(Ge(this.pattern),{contains:!0,lookbehinds:!1});await this._setAny(r,{urlRegex:n.source.replace(/([a-z]):/i,(i,o)=>`[${o.toLowerCase()}${o.toUpperCase()}]:`),lineNumber:0,columnNumber:0})}};var Ol=I(J());var Ml={dispose:()=>{}},Ie=class{constructor(e){this.disposed=!1;this.items=[];e&&(this.items=e.slice())}get isDisposed(){return this.disposed}callback(...e){for(let r of e)this.push({dispose:r})}push(...e){return this.disposed?(e.forEach(r=>r.dispose()),e[0]):(this.items.push(...e),e[0])}disposeObject(e){this.items=this.items.filter(r=>r!==e),e.dispose()}dispose(){let e=Promise.all(this.items.map(r=>r.dispose()));return this.items=[],this.disposed=!0,e}};var kl=Symbol("IExperimentationService");var Kt=Symbol("ITelemetryReporter");var Zie=/\/node_modules\/|^node\:/,eoe=2,qF=5e3,toe=qF/2,gt=class{constructor(e,r,n){this.telemetry=r;this.experimentation=n;this.disposable=new Ie;this.hadBreakpoint=!1;this.didVerifyBreakpoint=!1;this.hadNonModuleSourcemap=!1;this.startedAt=Date.now();this.disposable.push(gt.didVerifyEmitter.event(()=>{this.didVerifyBreakpoint=!0})),gt.consecutiveQualifyingSessions>=eoe&&this.disposable.push(i1(async()=>{this.currentlyQualifying&&await this.experimentation.getTreatment("diagnosticPrompt",!0)&&(r.report("diagnosticPrompt",{event:"suggested"}),gt.didSuggest=!0,e.suggestDiagnosticTool({}))},qF))}get currentlyQualifying(){return this.hadBreakpoint&&!this.didVerifyBreakpoint&&this.hadNonModuleSourcemap}notifyHadBreakpoint(){this.hadBreakpoint=!0}notifyVerifiedBreakpoint(){this.didVerifyBreakpoint||(gt.didVerifyEmitter.fire(),gt.didSuggest&&(gt.didSuggest=!1,this.telemetry.report("diagnosticPrompt",{event:"resolved"})))}attach(e){if(!this.hadNonModuleSourcemap){let r=this.disposable.push(e.Debugger.on("scriptParsed",n=>{n.sourceMapURL&&!Zie.test(n.url)&&(this.hadNonModuleSourcemap=!0,this.disposable.disposeObject(r))}))}}dispose(){this.currentlyQualifying&&Date.now()-toe>this.startedAt?gt.consecutiveQualifyingSessions++:gt.consecutiveQualifyingSessions=0,this.disposable.dispose()}};gt.consecutiveQualifyingSessions=0,gt.didVerifyEmitter=new z,gt.didSuggest=!1,gt=C([(0,Ol.injectable)(),b(0,(0,Ol.inject)(fl)),b(1,(0,Ol.inject)(Kt)),b(2,(0,Ol.inject)(kl))],gt);var Xn=I(J()),oN=I(XF()),YS=I(ly());var Bl=Symbol("IContainer"),yo=Symbol("StoragePath"),an=Symbol("IInitializeParams"),zn=Symbol("VSCodeApi"),Ul=Symbol("IsVSCode"),tt=Symbol("ExtensionContext"),VS=Symbol("ProcessEnv"),yh=Symbol("execa"),we=Symbol("FS"),rs="ExtensionLocation",ku=Symbol("IBrowserFinder"),ACe=Symbol("DwarfDebugging"),jl=Symbol("SessionSubStates"),WS=new WeakMap,ot=(t,e)=>{if(!(typeof e=="object"&&e&&"dispose"in e))return e;let r=e,n=WS.get(t.container);return n?n.push(r):WS.set(t.container,[r]),e},lv=t=>{WS.get(t)?.forEach(e=>e.dispose())},un=Symbol("IExtensionContribution");var fv=I(J());var JF=I(require("fs")),pv=I(require("path")),YF=t=>{let e={};f(e);function r(h,H){return t({category:"telemetry",output:h,data:H})}let n=h=>r("js-debug/dap/operation",{...e,...h}),i=h=>r("js-debug/cdp/operation",{...e,...h}),o=h=>r("js-debug/error",{...e,...h}),s=h=>{e.browser=(h.targetProject||h.targetProject)+"/"+h.targetVersion,r("js-debug/browserVersion",{...e,...h})},a=h=>r("js-debug/breakpointStats",{...e,...h}),u=h=>r("js-debug/statistics",{...e,...h}),c=h=>{e.nodeVersion=h.version,r("js-debug/nodeRuntime",{...e,...h})},l=h=>{r("js-debug/launch",{...e,...h,parameters:JSON.stringify(h.parameters)})},p=h=>{r("js-debug/diagnosticPrompt",{...e,...h})};function f(h){try{let H=pv.resolve(pv.dirname(__filename),"..","..",".gitcommit");h.jsDebugCommitId=JF.readFileSync(H,"utf8")}catch{}}return{breakpointStats:a,statistics:u,browserVersion:s,cdpOperation:i,dapOperation:n,error:o,launch:l,nodeRuntime:c,diagnosticPrompt:p,setGlobalMetric:(h,H)=>{e[h]=H}}};var vh=class{constructor(e=!0){this.isVSCode=e;this.measurements=Object.create(null)}add(e,r,n){let i=this.measurements[e];i||(i=this.measurements[e]={times:[],errors:[]}),i.times.push(r),n&&i.errors.push(n)}flush(){let e={errors:[]};for(let r in this.measurements){let{times:n,errors:i}=this.measurements[r],o={operation:r,totalTime:0,max:0,avg:0,stddev:0,count:n.length,failed:i.length};for(let s of n)o.totalTime+=s,o.max=Math.max(o.max,s);o.avg=o.totalTime/o.count;for(let s of n)o.stddev+=(s-o.avg)**2;o.stddev=Math.sqrt(o.stddev/(n.length-1)),e[o.operation]=o,e[`!${o.operation}.errors`]=i,this.isVSCode||(e[`${o.operation}.errors`]=i)}return this.measurements=Object.create(null),e}};var cn=class{constructor(e=!0){this.isVsCode=e;this.target=[];this.flushEmitter=new z;this.loggers=YF(e=>this.pushOutput(e));this.batchFlushTimeout={};this.batchers={dapOperation:new vh(this.isVsCode),cdpOperation:new vh(this.isVsCode)};this.onFlush=this.flushEmitter.event;this.setGlobalMetric=this.loggers.setGlobalMetric}report(e,...r){let n=this.loggers[e];n(...r)}reportOperation(e,r,n,i){this.batchers[e].add(r,n,i),this.batchFlushTimeout[e]===void 0&&(this.batchFlushTimeout[e]=setTimeout(()=>{this.report(e,this.batchers[e].flush()),this.batchFlushTimeout[e]=void 0},cn.batchFlushInterval))}attachDap(e){this.target instanceof Array&&this.target.forEach(r=>e.output(r)),this.target=e}flush(){this.flushEmitter.fire();let e=Object.entries(this.batchFlushTimeout);for(let[r,n]of e){let i=this.batchers[r].flush();i.length&&this.report(r,i),this.batchFlushTimeout[r]=void 0,clearTimeout(n)}}dispose(){for(let e of Object.values(this.batchFlushTimeout))e&&clearTimeout(e)}pushOutput(e){e.data=GS(e.data),this.target instanceof Array?this.target.push(e):this.target.output(e)}};cn.batchFlushInterval=5e3,cn=C([(0,fv.injectable)(),b(0,(0,fv.inject)(Ul))],cn);var GS=t=>typeof t=="number"?Number(t.toFixed(1)):typeof t!="object"||!t?t:t instanceof Error?KS(t):t instanceof Array?t.map(GS):qo(t,GS),QF=/(?:[A-z]:)?(?:[\\/][^:]*)+[\\/]([^:]*:)/g;function KS(t){let e=String(t.message),r=String(t.name);QF.lastIndex=0;let n=typeof t.stack=="string"?t.stack.replace(QF,"$1"):void 0;return{error:{message:e,name:r,stack:n}}}var eN=require("crypto"),vo=I(J());var Ou=Symbol("IDwarfModuleProvider");var hv=Symbol("IWasmSymbolProvider"),JS=Symbol("IWasmWorkerFactory"),ql=class{constructor(e,r){this.dwarf=e;this.launchConfig=r;this.cdpCounter=0;this.cdp=new Map;this.prompt=Ae(()=>this.dwarf.prompt())}async spawn(e){if(!this.launchConfig.enableDWARF)return null;this.worker??=this.dwarf.load().then(i=>{if(!i)return null;let o=i.spawn({getWasmGlobal:(s,a)=>this.loadWasmValue(`globals[${s}]`,a),getWasmLocal:(s,a)=>this.loadWasmValue(`locals[${s}]`,a),getWasmOp:(s,a)=>this.loadWasmValue(`stack[${s}]`,a),getWasmLinearMemory:(s,a,u)=>this.loadWasmValue(`[].slice.call(new Uint8Array(memories[0].buffer, ${+s}, ${+a}))`,u).then(c=>new Uint8Array(c).buffer)});return o.rpc.sendMessage("hello",[],!1),o});let r=await this.worker;if(!r)return null;let n=this.cdpCounter++;return this.cdp.set(n,e),{rpc:r.rpc,getStopId:i=>`${n}:${i}`,dispose:()=>(this.cdp.delete(n),r.dispose())}}async dispose(){await this.worker?.then(e=>e?.dispose()),this.worker=Promise.resolve(null)}async loadWasmValue(e,r){let n=r,i=n.indexOf(":"),o=n.substring(0,i),s=n.substring(i+1),a=await this.cdp.get(+o)?.Debugger.evaluateOnCallFrame({callFrameId:s,expression:e+dt(),silent:!0,returnByValue:!0,throwOnSideEffect:!0});if(!a||a.exceptionDetails)throw new Error(`evaluate failed: ${a?.exceptionDetails?.text||"unknown"}`);return a.result.value}};ql=C([(0,vo.injectable)(),b(0,(0,vo.inject)(Ou)),b(1,(0,vo.inject)($e))],ql);var Wl=class{constructor(e,r,n,i){this.dwarf=e;this.cdp=r;this.logger=n;this.launchConfig=i;this.worker=Ae(()=>this.dwarf.spawn(this.cdp))}async loadWasmSymbols(e){if(!this.launchConfig.enableDWARF)return this.defaultSymbols(e);let r=await this.worker();if(!r){let a=this.defaultSymbols(e);return a.onDidDisassemble=this.dwarf.prompt,a}let{rpc:n}=r,i=(0,eN.randomUUID)(),o=e.debugSymbols?.externalURL,s;try{s=await n.sendMessage("addRawModule",i,o,{url:e.url,code:!o&&e.url.startsWith("wasm://")?await this.getBytecode(e.scriptId):void 0})}catch{return this.defaultSymbols(e)}return!(s instanceof Array)||s.length===0?(n.sendMessage("removeRawModule",i),this.defaultSymbols(e)):(this.logger.info("sourcemap.parsing","parsed files from wasm",{files:s}),new zS(e,this.cdp,i,r,s))}async dispose(){await this.worker.value?.then(e=>e?.dispose())}defaultSymbols(e){return new dv(e,this.cdp,[])}async getBytecode(e){let n=(await this.cdp.Debugger.getScriptSource({scriptId:e}))?.bytecode;return n?Buffer.from(n,"base64").buffer:void 0}};Wl=C([(0,vo.injectable)(),b(0,(0,vo.inject)(JS)),b(1,(0,vo.inject)(ht)),b(2,(0,vo.inject)(ce)),b(3,(0,vo.inject)($e))],Wl);var dv=class{constructor(e,r,n){this.event=e;this.cdp=r;this.doDisassemble=Ae(async()=>{let e=[],r;for await(let n of this.getDisassembledStream()){e=e.concat(n.lines);let i;if(r){let o=new Uint32Array(r.length+n.lines.length);i=r.length,o.set(r),r=o}else r=new Uint32Array(n.lines.length),i=0;for(let o=0;o<n.lines.length;o++)r[i+o]=n.bytecodeOffsets[o]}return r??=new Uint32Array(0),{lines:e,byteOffsetsOfLines:r}});n.push(this.decompiledUrl=e.url.replace(".wasm",".wat")),this.files=n}async getDisassembly(){let{lines:e}=await this.doDisassemble();return this.onDidDisassemble?.(),e.join(`
`)}originalPositionFor(e){return this.disassembledPositionFor(e)}async disassembledPositionFor(e){let{byteOffsetsOfLines:r}=await this.doDisassemble(),n=q1(r,e.base0.columnNumber,(i,o)=>i-o);if(n!==r.length)return{url:this.decompiledUrl,position:new bt(n,0)}}async compiledPositionFor(e,r){if(e!==this.decompiledUrl)return[];let{byteOffsetsOfLines:n}=await this.doDisassemble(),{lineNumber:i}=r.base0;if(i>=n.length)return[];let o=n[r.base0.lineNumber];return[new bt(0,o)]}dispose(){}async*getDisassembledStream(){let{scriptId:e}=this.event,r=await this.cdp.Debugger.disassembleWasmModule({scriptId:e});if(r)for(yield r.chunk;r.streamId;){let n=await this.cdp.Debugger.nextWasmDisassemblyChunk({streamId:r.streamId});if(!n)return;yield n.chunk}}},zS=class extends dv{constructor(r,n,i,o,s){super(r,n,s);this.moduleId=i;this.worker=o;this.mappedLines=new Map}get codeOffset(){return this.event.codeOffset||0}async originalPositionFor(r){let n=await this.worker.rpc.sendMessage("rawLocationToSourceLocation",{codeOffset:r.base0.columnNumber-this.codeOffset,inlineFrameIndex:r.base0.lineNumber,rawModuleId:this.moduleId});return n.length?{position:new bt(n[0].lineNumber,n[0].columnNumber),url:n[0].sourceFileURL}:super.originalPositionFor(r)}async compiledPositionFor(r,n){if(r===this.decompiledUrl)return super.compiledPositionFor(r,n);let{lineNumber:i,columnNumber:o}=n.base0,s=await this.worker.rpc.sendMessage("sourceLocationToRawLocation",{lineNumber:i,columnNumber:o===0?-1:o,rawModuleId:this.moduleId,sourceFileURL:r});if(o===0&&s.length===0){let a=await this.getMappedLines(r),u=a.find(c=>c>i);if(!a.includes(i)&&u)return this.compiledPositionFor(r,new bt(u,0))}return s.filter(a=>a.rawModuleId===this.moduleId).map(a=>new bt(0,this.codeOffset+a.startOffset))}dispose(){return this.worker.rpc.sendMessage("removeRawModule",this.moduleId)}async getVariablesInScope(r,n){let i={codeOffset:n.base0.columnNumber-this.codeOffset,inlineFrameIndex:n.base0.lineNumber,rawModuleId:this.moduleId};return(await this.worker.rpc.sendMessage("listVariablesInScope",i)).map(s=>({name:s.name,scope:s.scope,type:s.type,evaluate:async()=>{let a=await this.worker.rpc.sendMessage("evaluate",s.name,i,this.worker.getStopId(r));return a?new XS(a,this.worker.rpc):aoe}}))}async getFunctionStack(r){let n=await this.worker.rpc.sendMessage("getFunctionInfo",{codeOffset:r.base0.columnNumber-this.codeOffset,inlineFrameIndex:r.base0.lineNumber,rawModuleId:this.moduleId});return"frames"in n?n.frames:[]}async getStepSkipList(r,n,i,o){if(i===this.decompiledUrl)return[];let s={codeOffset:n.base0.columnNumber-this.codeOffset,inlineFrameIndex:n.base0.lineNumber,rawModuleId:this.moduleId},a=()=>o&&i?this.worker.rpc.sendMessage("sourceLocationToRawLocation",{lineNumber:o.base0.lineNumber,columnNumber:-1,rawModuleId:this.moduleId,sourceFileURL:i}):[],u;switch(r){case 2:{u=await this.worker.rpc.sendMessage("getInlinedFunctionRanges",s);break}case 1:{let c=await Promise.all([this.worker.rpc.sendMessage("getInlinedCalleesRanges",s),a()]);u=Vo(c);break}case 0:u=await a();break;default:u=[];break}return u.map(c=>new Ai(new bt(0,c.startOffset+this.codeOffset),new bt(0,c.endOffset+this.codeOffset)))}async evaluate(r,n,i){try{return await this.worker.rpc.sendMessage("evaluate",i,{codeOffset:n.base0.columnNumber-this.codeOffset,inlineFrameIndex:n.base0.lineNumber,rawModuleId:this.moduleId},this.worker.getStopId(r))??void 0}catch(o){throw new Z(Ke(o.message))}}getMappedLines(r){let n=this.mappedLines.get(r);if(n)return n;let i=(async()=>{try{let o=await this.worker.rpc.sendMessage("getMappedLines",this.moduleId,r);return new Uint32Array(o?.sort((s,a)=>s-a)||[])}catch{return new Uint32Array}})();return this.mappedLines.set(r,i),i}},aoe={type:"null",description:"no properties"},XS=class t{constructor(e,r){if(this.type=e.type,this.description=e.description,this.linearMemoryAddress=e.linearMemoryAddress,this.linearMemorySize=e.linearMemoryAddress,e.objectId&&e.hasChildren){let n=e.objectId;this.getChildren=Ae(()=>this._getChildren(r,n))}}async _getChildren(e,r){return(await e.sendMessage("getProperties",r)).map(i=>({name:i.name,value:new t(i.value,e)}))}};var aa=Symbol("IScriptSkipper");function tN(t){return typeof t.lineNumber=="number"&&typeof t.columnNumber=="number"&&!!t.source}var rN=()=>({source:null,line:null,column:null,name:null,lastColumn:null,isSourceMapLoadFailure:!0}),uoe=/\?t=[0-9]+$/,coe=t=>t.endsWith(".hot-update.js")||uoe.test(t),loe={load:0,resolveLocation:2e3,sourceMapMinPause:1e3,output:1e3,sourceMapCumulativePause:1e4},nN=(t,e)=>e instanceof xt&&e.compiledToSourceUrl.has(t);var iN=2**31-1,ir=class{constructor(e,r,n,i,o,s,a,u,c){this.sourceMapFactory=r;this.logger=n;this.launchConfig=i;this.initializeConfig=o;this.sourcePathResolver=s;this.scriptSkipper=a;this.resourceProvider=u;this.wasmSymbols=c;this.rootPaths=[];this.scriptsById=new Map;this.onSourceMappedSteppingChangeEmitter=new z;this.onScriptEmitter=new z;this._sourceByOriginalUrl=new ao(e=>e.toLowerCase());this._sourceByReference=new Map;this._sourceMapSourcesByUrl=new Map;this._sourceByAbsolutePath=Iu();this._sourceMapTimeouts=loe;this._fileContentOverridesForTest=new Map;this._temporarilyDisabledSourceMaps=new Set;this._permanentlyDisabledSourceMaps=new Set;this.onScript=this.onScriptEmitter.event;this._statistics={fallbackSourceMapCount:0};this._doSourceMappedStepping=this.launchConfig.sourceMaps;this.onSourceMappedSteppingChange=this.onSourceMappedSteppingChangeEmitter.event;this._dap=e;let l="webRoot"in i?i.webRoot:i.rootPath;l&&(this.rootPaths=[l,wn(l,"..","ClientApp")]),a.setSourceContainer(this),this.setSourceMapTimeouts({...this.sourceMapTimeouts(),...i.timeouts})}get sources(){return this._sourceByReference.values()}statistics(){return this._statistics}get doSourceMappedStepping(){return this._doSourceMappedStepping}set doSourceMappedStepping(e){e!==this._doSourceMappedStepping&&(this._doSourceMappedStepping=e,this.onSourceMappedSteppingChangeEmitter.fire(e))}setSourceMapTimeouts(e){this._sourceMapTimeouts=e}sourceMapTimeouts(){return this._sourceMapTimeouts}setFileContentOverrideForTest(e,r){r===void 0?this._fileContentOverridesForTest.delete(e):this._fileContentOverridesForTest.set(e,r)}async loadedSources(){let e=[];for(let r of this._sourceByReference.values())e.push(r.toDap());return await Promise.all(e)}source(e){if(e.sourceReference)return this._sourceByReference.get(e.sourceReference);if(e.path)return this._sourceByAbsolutePath.get(e.path)}isSourceSkipped(e){return this.scriptSkipper.isScriptSkipped(e)}addScriptById(e){this.scriptsById.set(e.scriptId,e),this.onScriptEmitter.fire(e)}getScriptById(e){return this.scriptsById.get(e)}getSourceByOriginalUrl(e){return this._sourceByOriginalUrl.get(e)}getSourceReference(e){let r=(0,oN.xxHash32)(e)&iN;for(let n=0;n<65535;n++){if(!this._sourceByReference.has(r))return r;r===iN&&(r=0),r++}return this.logger.assert(!1,"Max iterations exceeding for source reference assignment"),r}async preferredUiLocation(e){let r=!1,n=4;for(;;){let i=await this._originalPositionFor(e);if(!tN(i)){n=r?void 0:i;break}e=i,r=!0,n=void 0}return{...e,isMapped:r,unmappedReason:n}}async currentSiblingUiLocations(e,r){let n=await this._uiLocations(e);return r?n.filter(i=>i.source===r):n}clear(e){this.scriptsById.clear();for(let r of this._sourceByReference.values())this.removeSource(r,e);this._sourceByReference.clear(),this.sourceMapFactory instanceof ra&&this.sourceMapFactory.invalidateCache()}async _uiLocations(e){let[r,n]=await Promise.all([this.getSourceMapUiLocations(e),this.getCompiledLocations(e)]);return[...r,e,...n]}async getSourceMapUiLocations(e){let r=await this._originalPositionFor(e);if(!tN(r))return[];let n=await this.getSourceMapUiLocations(r);return n.push(r),n}async _originalPositionFor(e){if(!Xr(e.source))return 1;let r=await lh.waitForValueWithTimeout(e.source.sourceMap,this._sourceMapTimeouts.resolveLocation);if(!r)return 2;if(this._doSourceMappedStepping)return this._originalPositionForMap(e,r);if(IS(r)){let n=await r.disassembledPositionFor(new Nt(e.lineNumber,e.columnNumber)),i=n&&e.source.sourceMap.sourceByUrl.get(n.url);if(i)return i?{columnNumber:n.position.base1.lineNumber,lineNumber:n.position.base1.lineNumber,source:i}:3}return 0}async _originalPositionForMap(e,r){let n=e.source;if(!Xr(n))return 1;if(this._temporarilyDisabledSourceMaps.has(n)||this._permanentlyDisabledSourceMaps.has(n))return 0;let i=await this.getOptiminalOriginalPosition(r,IO(e,n.inlineScriptOffset));if(!i)return 3;let o=n.sourceMap.sourceByUrl.get(i.url);if(!o)return 3;let s=i.position.base1;return{lineNumber:s.lineNumber,columnNumber:s.columnNumber,source:o}}async getCompiledLocations(e){if(!(e.source instanceof xt))return[];let r=[];for(let[n,i]of e.source.compiledToSourceUrl){let o=await lh.waitForValueWithTimeout(n.sourceMap,this._sourceMapTimeouts.resolveLocation);if(!o)continue;let s;if("decompiledUrl"in o){let a=await o.compiledPositionFor(i,new Nt(e.lineNumber,e.columnNumber));if(!a)continue;s=a.map(u=>({lineNumber:u.base1.lineNumber,columnNumber:u.base1.columnNumber,source:n}))}else{let a=this.sourceMapFactory.guardSourceMapFn(o,()=>Ey(i,e,o),rN);if(!a)continue;let{lineNumber:u,columnNumber:c}=AO({lineNumber:a.line||1,columnNumber:(a.column||0)+1},n.inlineScriptOffset),l={lineNumber:u,columnNumber:c,source:n};s=[l,...await this.getCompiledLocations(l)]}r=r.concat(s)}return r}async getOptiminalOriginalPosition(e,r){if(IS(e))return await e.originalPositionFor(new Nt(r.lineNumber,r.columnNumber));let n=this.sourceMapFactory.guardSourceMapFn(e,()=>{let i=e.originalPositionFor({line:r.lineNumber,column:r.columnNumber-1,bias:YS.SourceMapConsumer.GREATEST_LOWER_BOUND});return i.line!==null?i:e.originalPositionFor({line:r.lineNumber,column:r.columnNumber-1,bias:YS.SourceMapConsumer.LEAST_UPPER_BOUND})},rN);if(!(n.column===null||n.line===null||n.source===null))return{position:new _i(n.line,n.column),url:n.source}}async addSource(e,r,n,i,o,s){let a=await this.sourcePathResolver.urlToAbsolutePath({url:e.url});this.logger.verbose("runtime.sourcecreate","Creating source from url",{inputUrl:e.url,absolutePath:a});let u;return e.scriptLanguage==="WebAssembly"?u=new Ky(this,e,a):u=new Lu(this,e.url,a,r,n&&this.sourcePathResolver.shouldResolveSourceMap({sourceMapUrl:n,compiledPath:a||e.url})?{sourceMapUrl:n,compiledPath:a||e.url,cacheKey:e.hash}:void 0,i,o,s),this._addSource(u),u}async _addSource(e){let r=e.url&&this._sourceByOriginalUrl.get(e.url);r&&!nN(r,e)&&this.removeSource(r,!0),this._sourceByOriginalUrl.set(e.url,e),this._sourceByReference.set(e.sourceReference,e),e instanceof xt&&this._sourceMapSourcesByUrl.set(e.url,e);let n=this._sourceByAbsolutePath.get(e.absolutePath);(n===void 0||n.url.length>=e.url.length||nN(n,e))&&this._sourceByAbsolutePath.set(e.absolutePath,e),this.scriptSkipper.initializeSkippingValueForSource(e),e.toDap().then(i=>this._dap.loadedSource({reason:"new",source:i})),na(e)?this._finishAddSourceWithSourceMap(e):Tu(e)&&this._finishAddSourceWithWasm(e)}async _finishAddSourceWithWasm(e){let r=await this.wasmSymbols.loadWasmSymbols(e.event),n=[];for(let i of r.files){let o=await this.sourcePathResolver.urlToAbsolutePath({url:i}),s=o?ke(o):i;this.logger.verbose("runtime.sourcecreate","Creating wasm source from source map",{inputUrl:i,absolutePath:o,resolvedUrl:s});let a=o&&ke(o),u=i===r.decompiledUrl?()=>r.getDisassembly():()=>a?this.resourceProvider.fetch(a).then(l=>l.body):Promise.resolve(`Could not read ${i}`),c=new xt(this,s,o,u);c.compiledToSourceUrl.set(e,i),e.sourceMap.sourceByUrl.set(i,c),n.push(this._addSource(c))}await Promise.all(n),e.sourceMap.value.resolve(r)}async _finishAddSourceWithSourceMap(e){let r=e.sourceMap.value,n;try{n=await this.sourceMapFactory.load(e.sourceMap.metadata)}catch(i){if(this.initializeConfig.clientID==="visualstudio"){let o=e.sourceMap.metadata.sourceMapUrl;try{let s=await this.sourcePathResolver.urlToAbsolutePath({url:o});s&&(e.sourceMap.metadata.sourceMapUrl=ke(s)),n=await this.sourceMapFactory.load(e.sourceMap.metadata),this._statistics.fallbackSourceMapCount++,this.logger.info("sourcemap.parsing","Failed to process original source-map; falling back to storage source-map",{fallbackSourceMapUrl:e.sourceMap.metadata.sourceMapUrl,originalSourceMapUrl:o,originalSourceMapError:KS(i)})}catch{}}if(n===void 0)return this._dap.output({output:hy(e.url,i.message).error.format+`
`,category:"stderr"}),r.resolve(void 0)}if(this._sourceByReference.get(e.sourceReference)!==e)return r.resolve(void 0);this.logger.verbose("sourcemap.parsing","Creating sources from source map",{sourceMapId:n.id,metadata:n.metadata});try{await this._addSourceMapSources(e,n)}finally{r.resolve(n)}this.scriptSkipper.initializeSkippingValueForSource(e)}removeSource(e,r=!1){let n=this._sourceByReference.get(e.sourceReference);if(n!==void 0){if(this.logger.assert(e===n,"Expected source to be the same as the existing reference"),this._sourceByReference.delete(e.sourceReference),this._sourceByOriginalUrl.get(e.url)===e&&this._sourceByOriginalUrl.delete(e.url),e instanceof xt){this._sourceMapSourcesByUrl.delete(e.url);for(let[i,o]of e.compiledToSourceUrl)i.sourceMap.sourceByUrl.delete(o)}this._sourceByAbsolutePath.delete(e.absolutePath),Xr(e)&&(this._permanentlyDisabledSourceMaps.delete(e),this._temporarilyDisabledSourceMaps.delete(e)),r||e.toDap().then(i=>this._dap.loadedSource({reason:"removed",source:i})),na(e)?e.sourceMap.value.settledValue?.destroy():Tu(e)&&e.sourceMap.value.promise.then(i=>i?.dispose()),Xr(e)&&this._removeSourceMapSources(e,r)}}async _addSourceMapSources(e,r){let n=[];for(let i of r.sources){let o=await this.sourcePathResolver.urlToAbsolutePath({url:i,map:r}),s=o?ke(o):r.computedSourceUrl(i),a=this._sourceMapSourcesByUrl.get(s);if(e===a)continue;if(a)if(coe(e.url))this.removeSource(a);else{a.compiledToSourceUrl.set(e,i),e.sourceMap.sourceByUrl.set(i,a);continue}this.logger.verbose("runtime.sourcecreate","Creating source from source map",{inputUrl:i,sourceMapId:r.id,absolutePath:o,resolvedUrl:s});let u=o&&ke(o),c=this.sourceMapFactory.guardSourceMapFn(r,()=>r.sourceContentFor(i,!0),()=>null),l;if(c){let f=ml(c);if(f&&(!mr(f)&&o?l=Ys(o?ke(o):i,f):l=f),o&&l){let m={sourceMapUrl:l,compiledPath:o};this.sourcePathResolver.shouldResolveSourceMap(m)||(l=void 0)}}let p=new xt(this,s,o,c!==null?()=>Promise.resolve(c):u?()=>this.resourceProvider.fetch(u).then(f=>f.body):()=>e.content(),l?{compiledPath:o||s,sourceMapUrl:l,cacheKey:r.metadata.cacheKey}:void 0,void 0,e.runtimeScriptOffset);p.compiledToSourceUrl.set(e,i),e.sourceMap.sourceByUrl.set(i,p),n.push(this._addSource(p))}await Promise.all(n)}_removeSourceMapSources(e,r){for(let n of e.sourceMap.sourceByUrl.keys()){let i=e.sourceMap.sourceByUrl.get(n);i&&(e.sourceMap.sourceByUrl.delete(n),i.compiledToSourceUrl.delete(e),!i.compiledToSourceUrl.size&&this.removeSource(i,r))}}async waitForSourceMapSources(e){return Xr(e)?[...(await lh.waitForSources(e.sourceMap)).values()]:[]}async revealUiLocation(e){this._dap.revealLocationRequested({source:await e.source.toDap(),line:e.lineNumber,column:e.columnNumber})}disableSourceMapForSource(e,r=!1){r?this._permanentlyDisabledSourceMaps.add(e):this._temporarilyDisabledSourceMaps.add(e)}clearDisabledSourceMaps(e){e?this._temporarilyDisabledSourceMaps.delete(e):this._temporarilyDisabledSourceMaps.clear()}};ir=C([(0,Xn.injectable)(),b(0,(0,Xn.inject)(rn)),b(1,(0,Xn.inject)(po)),b(2,(0,Xn.inject)(ce)),b(3,(0,Xn.inject)($e)),b(4,(0,Xn.inject)(an)),b(5,(0,Xn.inject)(Qe)),b(6,(0,Xn.inject)(aa)),b(7,(0,Xn.inject)(wu)),b(8,(0,Xn.inject)(hv))],ir);var sN=t=>t.originalPosition.columnNumber===1&&t.originalPosition.lineNumber===1,aN=500,uN=Symbol("DontCompare");var Jn=class{constructor(e,r,n,i,o,s,a){this.logger=n;this.launchConfig=i;this.conditionFactory=o;this.suggester=s;this._breakpointsPredictor=a;this._resolvedBreakpoints=new Map;this._totalBreakpointsCount=0;this._launchBlocker=new Set;this._predictorDisabledForTest=!1;this._breakpointsStatisticsCalculator=new Fy;this.entryBreakpointMode=0;this._enabledFilter=()=>!0;this._byDapId=new Map;this._byPath=Iu();this._byRef=new Map;this.moduleEntryBreakpoints=Iu();this._dap=e,this._sourceContainer=r,a?.onLongParse(()=>e.longPrediction({})),r.onScript(u=>{u.source.then(c=>{let l=this._thread;l&&this._byRef.get(c.sourceReference)?.forEach(p=>p.updateForNewLocations(l,u))})}),r.onSourceMappedSteppingChange(()=>{if(this._thread)for(let u of this._byDapId.values())u.refreshUiLocations(this._thread)}),this._scriptSourceMapHandler=async(u,c)=>{if(!n.assert(this._thread,"Expected thread to be set for the breakpoint source map handler"))return[];let l=[],p=[c];for(let f=0;f<p.length;f++)for(let m of p[f]){let h=m.absolutePath,H=h?this._byPath.get(h):void 0;for(let _ of H||[])l.push(_.updateForNewLocations(this._thread,u));let v=this._byRef.get(m.sourceReference);for(let _ of v||[])l.push(_.updateForNewLocations(this._thread,u));m.sourceMap&&p.push(m.sourceMap.sourceByUrl.values())}return Vo(await Promise.all(l))}}get appliedByPath(){return this._byPath}get appliedByRef(){return this._byRef}hasAtLocation(e){let r=this._byPath.get(e.source.absolutePath)||[],n=this._byRef.get(e.source.sourceReference)||[];return r.concat(n).some(i=>i.originalPosition.columnNumber===e.columnNumber&&i.originalPosition.lineNumber===e.lineNumber)}async moveBreakpoints(e,r,n,i){let o=l=>YT(l,async p=>{let f=await this._sourceContainer.getOptiminalOriginalPosition(n,p.originalPosition);if(!f)return!1;let m=f.position.base1;return p.updateSourceLocation(e,{path:i.absolutePath,sourceReference:i.sourceReference},{lineNumber:m.lineNumber,columnNumber:m.columnNumber,source:i}),!1}),s=r.absolutePath,a=i.absolutePath,u=s?this._byPath.get(s):void 0;if(u&&a){let[l,p]=await o(u);this._byPath.set(s,l),this._byPath.set(a,p)}let c=this._byRef.get(r.sourceReference);if(c){let[l,p]=await o(c);this._byRef.set(r.sourceReference,l),this._byRef.set(i.sourceReference,p)}}async updateEntryBreakpointMode(e,r){if(r===this.entryBreakpointMode)return;let n=[...this.moduleEntryBreakpoints.values()];this.moduleEntryBreakpoints.clear(),this.entryBreakpointMode=r,await Promise.all(n.map(i=>this.ensureModuleEntryBreakpoint(e,i.source)))}async applyEnabledFilter(e,r=uN){if(r!==uN&&this._enabledFilter!==r)return;this._enabledFilter=e||(()=>!0);let n=this._thread;n&&await Promise.all([...this._byDapId.values()].map(i=>this._enabledFilter(i)?i.enable(n):i.disable()))}async getBreakpointLocations(e,r,n,i){let o=n.base1,s=i.base1,[a,u]=await Promise.all([this._sourceContainer.currentSiblingUiLocations({source:r,lineNumber:o.lineNumber,columnNumber:o.columnNumber}),this._sourceContainer.currentSiblingUiLocations({source:r,lineNumber:s.lineNumber,columnNumber:s.columnNumber})]);if(a.length!==u.length)return this.logger.warn("internal","Expected to have the same number of start and end locations"),[];let c=[],l=[];for(let p=0;p<a.length;p++){let f=a[p],m=u[p];if(f.source!==m.source){this.logger.warn("internal","Expected to have the same number of start and end scripts");continue}let h=f.source;if(!h.scripts.length)continue;let{scriptId:H}=h.scripts[h.scripts.length-1];c.push(e.cdp().Debugger.getPossibleBreakpoints({restrictToFunction:!1,start:{scriptId:H,...h.offsetSourceToScript(Zo(f))},end:{scriptId:H,...h.offsetSourceToScript(Zo(m))}}).then(v=>{if(v?.locations)return Promise.all(v.locations.map(async _=>{let{lineNumber:x,columnNumber:k=0}=_,T=await this._sourceContainer.currentSiblingUiLocations({source:h,...h.offsetScriptToSource(SO({lineNumber:x,columnNumber:k}))});l.push({breakLocation:_,uiLocations:T})}))}))}return await Promise.all(c),l}setThread(e){this._thread=e,this._thread.cdp().Debugger.on("breakpointResolved",r=>{let n=this._resolvedBreakpoints.get(r.breakpointId);n&&n.updateUiLocations(e,r.breakpointId,[r.location])}),this._thread.setSourceMapDisabler(r=>{let n=[];for(let i of r){let o=this._resolvedBreakpoints.get(i);if(o){let s=this._sourceContainer.source(o.source);Xr(s)&&n.push(s)}}return n});for(let r of this._byPath.values())r.forEach(n=>this._setBreakpoint(n,e)),this.ensureModuleEntryBreakpoint(e,r[0]?.source);for(let r of this._byRef.values())r.forEach(n=>this._setBreakpoint(n,e));"runtimeSourcemapPausePatterns"in this.launchConfig&&this.launchConfig.runtimeSourcemapPausePatterns.length&&this.setRuntimeSourcemapPausePatterns(e,this.launchConfig.runtimeSourcemapPausePatterns),this._byDapId.size>0&&this._installSourceMapHandler(this._thread)}async launchBlocker(){My(this.logger,"BreakpointManager.launchBlocker",async()=>{this._predictorDisabledForTest||await Promise.all([...this._launchBlocker])})}setRuntimeSourcemapPausePatterns(e,r){return Promise.all(r.map(n=>this._setBreakpoint(new Hh(this,n),e)))}addLaunchBlocker(...e){for(let r of e)this._launchBlocker.add(r),r.finally(()=>this._launchBlocker.delete(r))}setPredictorDisabledForTest(e){this._predictorDisabledForTest=e}_installSourceMapHandler(e){let r=this.launchConfig.perScriptSourcemaps==="yes",n;r?n=Promise.all([this.updateEntryBreakpointMode(e,1),e.setScriptSourceMapHandler(!1,this._scriptSourceMapHandler)]).then(()=>!0):this._breakpointsPredictor&&!this.launchConfig.pauseForSourceMap?n=e.setScriptSourceMapHandler(!1,this._scriptSourceMapHandler):n=e.setScriptSourceMapHandler(!0,this._scriptSourceMapHandler),this._sourceMapHandlerInstalled={entryBpSet:n}}async _uninstallSourceMapHandler(e){e.setScriptSourceMapHandler(!1),this._sourceMapHandlerInstalled=void 0}_setBreakpoint(e,r){this._enabledFilter(e)&&this.addLaunchBlocker(Promise.race([Le(aN),e.enable(r)]))}async setBreakpoints(e,r){!this._sourceMapHandlerInstalled&&this._thread&&e.breakpoints?.length&&this._installSourceMapHandler(this._thread);let n=await this._sourceMapHandlerInstalled?.entryBpSet;e.source.path=bi(e.source.path);let i=this._sourceContainer.source(e.source);if(!n&&this._breakpointsPredictor&&!i){let l=this._breakpointsPredictor.predictBreakpoints(e);this.addLaunchBlocker(l),await l}let o=this._thread;if(o?.debuggerReady.hasSettled()===!1){let l=o.debuggerReady.promise;this.addLaunchBlocker(l),await l}let s=l=>{let p={unbound:l.slice(),new:[],list:[]};if(!e.breakpoints)return p;for(let f=0;f<e.breakpoints.length;f++){let m=e.breakpoints[f],h;try{h=new Gn(this,r[f],e.source,m,this.conditionFactory.getConditionFor(m))}catch(_){if(!(_ instanceof Z))throw _;this._dap.output({category:"stderr",output:_.message}),h=new tv(this,r[f],e.source,m)}let H=p.unbound.findIndex(_=>_.equivalentTo(h)),v=p.unbound[H];v?.equivalentTo?.(h)?(p.list.push(v),p.unbound.splice(H,1)):(p.new.push(h),p.list.push(h),this._byDapId.set(h.dapId,h))}return p},a=()=>e.source.sourceReference?this._byRef.get(e.source.sourceReference):e.source.path?this._byPath.get(e.source.path):void 0,u=s(a()??[]);if(e.source.sourceReference)this._byRef.set(e.source.sourceReference,u.list);else if(e.source.path)this._byPath.set(e.source.path,u.list);else return{breakpoints:[]};if(u.unbound.length===0&&u.new.length===0)return{breakpoints:[]};if(this._totalBreakpointsCount-=u.unbound.length,await Promise.all(u.unbound.map(l=>(this._byDapId.delete(l.dapId),l.disable()))),this._totalBreakpointsCount+=u.new.length,this._thread&&(this._totalBreakpointsCount===0&&this._sourceMapHandlerInstalled?this._uninstallSourceMapHandler(this._thread):this._totalBreakpointsCount>0&&!this._sourceMapHandlerInstalled&&this._installSourceMapHandler(this._thread)),o&&u.new.length){this.ensureModuleEntryBreakpoint(o,e.source);let l=a(),p=Promise.all(u.new.filter(this._enabledFilter).filter(f=>l?.includes(f)).map(f=>f.enable(o)));this.addLaunchBlocker(Promise.race([Le(aN),p])),await p}let c=await Promise.all(u.list.map(l=>l.toDap()));return this._breakpointsStatisticsCalculator.registerBreakpoints(c),Le(0).then(()=>u.new.forEach(l=>l.markSetCompleted())),{breakpoints:c}}async notifyBreakpointChange(e,r){if(!this._byDapId.has(e.dapId))return;let n=await e.toDap();n.verified&&(this._breakpointsStatisticsCalculator.registerResolvedBreakpoint(e.dapId),this.suggester.notifyVerifiedBreakpoint()),r&&this._dap.breakpoint({reason:"changed",breakpoint:n})}isEntrypointBreak(e,r){return[...this.moduleEntryBreakpoints.values()].some(i=>i.enabled&&i.cdpScriptIds.has(r))?!0:e.some(i=>{let o=this._resolvedBreakpoints.get(i);return o&&(o instanceof mo||sN(o))})}isEntrypointCdpBreak(e){return this._resolvedBreakpoints.get(e)instanceof mo}async shouldPauseAt(e,r,n,i=!1){if(!r.length)return e.reason!=="instrumentation";let o=0,s=i?1:0;return await Promise.all(r.map(async a=>{if(n?.cdpId===a){o++;return}let u=this._resolvedBreakpoints.get(a);if(u instanceof mo){this.entryBreakpointMode===0&&!(u instanceof Hh)&&u.disable(),s++;return}u instanceof Gn&&(await u.testHitCondition(e)?o++:s++)})),o>0||s===0}registerBreakpointsHit(e){for(let r of e){let n=this._resolvedBreakpoints.get(r);n instanceof Gn&&this._breakpointsStatisticsCalculator.registerBreakpointHit(n.dapId)}}statisticsForTelemetry(){return this._breakpointsStatisticsCalculator.statistics()}ensureModuleEntryBreakpoint(e,r){if(!r.path||(this._byPath.get(r.path)??[]).some(sN))return;let i=mo.getModeKeyForSource(this.entryBreakpointMode,r.path);if(!r.path||this.moduleEntryBreakpoints.has(i))return;let o=new mo(this,r,this.entryBreakpointMode);this.moduleEntryBreakpoints.set(r.path,o),this._setBreakpoint(o,e)}executionContextWasCleared(){for(let e of this._byDapId.values())e.executionContextWasCleared()}async reapply(){let e=[...this._byDapId.values()];if(await Promise.all(e.map(r=>r.disable())),this._thread){let r=this._thread;await Promise.all(e.map(n=>n.enable(r)))}}};Jn=C([(0,bo.injectable)(),b(0,(0,bo.inject)(rn)),b(1,(0,bo.inject)(ir)),b(2,(0,bo.inject)(ce)),b(3,(0,bo.inject)($e)),b(4,(0,bo.inject)(Yy)),b(5,(0,bo.inject)(gt)),b(6,(0,bo.inject)(Cu))],Jn);var IB=require("crypto"),Ql=I(J());var rt=class t{static{this.Undefined=new t(void 0)}constructor(e){this.element=e,this.next=t.Undefined,this.prev=t.Undefined}},bh=class{constructor(){this._first=rt.Undefined;this._last=rt.Undefined;this._size=0}get size(){return this._size}isEmpty(){return this._first===rt.Undefined}clear(){let e=this._first;for(;e!==rt.Undefined;){let r=e.next;e.prev=rt.Undefined,e.next=rt.Undefined,e=r}this._first=rt.Undefined,this._last=rt.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,r){let n=new rt(e);if(this._first===rt.Undefined)this._first=n,this._last=n;else if(r){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==rt.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==rt.Undefined){let e=this._last.element;return this._remove(this._last),e}}applyFilter(e){let r=this._first;for(;r!==rt.Undefined;){let n=r.next;e(r.element)||this._remove(r),r=n}}_remove(e){if(e.prev!==rt.Undefined&&e.next!==rt.Undefined){let r=e.prev;r.next=e.next,e.next.prev=r}else e.prev===rt.Undefined&&e.next===rt.Undefined?(this._first=rt.Undefined,this._last=rt.Undefined):e.next===rt.Undefined?(this._last=this._last.prev,this._last.next=rt.Undefined):e.prev===rt.Undefined&&(this._first=this._first.next,this._first.prev=rt.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==rt.Undefined;)yield e.element,e=e.next}};var Dv=I(J()),bB=I(require("net"));var wo=class extends Z{constructor(e){super({id:9243,format:e,showUser:!0}),this._cause={id:9243,format:e,showUser:!0}}};function _o(t,e,r){if(e.isCancellationRequested)return Promise.reject(new wo(r||"Task cancelled"));let n=Be(),i=e.onCancellationRequested(n.resolve);return Promise.race([n.promise.then(()=>{throw new wo(r||"Task cancelled")}),t.then(o=>(i.dispose(),o)).catch(o=>{throw i.dispose(),o})])}function cN(t,e){let r=new Or(e),n=t.map(async i=>{try{return await i(r.token)}finally{r.cancel()}});return Promise.race(n)}var lN=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),or=Object.freeze({isCancellationRequested:!1,onCancellationRequested:()=>({dispose:()=>{}})}),poe=Object.freeze({isCancellationRequested:!0,onCancellationRequested:lN}),Or=class t{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}static withTimeout(e,r){let n=new t(r),i=n._token=new Vl,o=setTimeout(()=>i.cancel(),e);return i.onCancellationRequested(()=>clearTimeout(o)),n}get token(){return this._token||(this._token=new Vl),this._token}cancel(){this._token?this._token instanceof Vl&&this._token.cancel():this._token=poe}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof Vl&&this._token.dispose():this._token=or}},Vl=class{constructor(){this._isCancelled=!1;this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?lN:(this._emitter||(this._emitter=new z),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}};var wE=I(require("net"));var Ese=I(hN(),1),Dse=I(cE(),1),Cse=I(pE(),1),dB=I(yE(),1),bE=I(fB(),1);var hB=dB.default;var mB=(t,e)=>t+Math.floor(Math.random()*(e-t));async function pa({min:t=53e3,max:e=54e3,attempts:r=1e3,tester:n=HB}={},i=or){let o=mB(t,e);for(let s=Math.min(r,e-t);;s--)try{return await n(o,i)}catch(a){if(s===0||a instanceof wo)throw a;o=o===e-1?t:o+1}}async function gB(t,e){try{return await HB(t,e),!0}catch{return!1}}function HB(t,e=or){let r;return new Promise((n,i)=>{let o=wE.createServer();o.listen(t,"127.0.0.1",()=>{let s=o.address();o.close(()=>n(s.port))}),o.on("error",i),r=e.onCancellationRequested(()=>{o.close(),i(new wo("Port open lookup cancelled"))})}).finally(()=>r?.dispose())}var yB=(t,e)=>(r,n)=>{let i=wE.createServer(t);return i.listen(r,e),Ev(i,n)},vB=t=>(e,r)=>Ev(new bE.default({host:"127.0.0.1",...t,port:e}),r),Ev=(t,e)=>{let r;return new Promise((n,i)=>{t.on("error",i),t.on("listening",()=>n(t)),r=e.onCancellationRequested(()=>{t.close(),i(new wo("Port open lookup cancelled"))})}).finally(()=>r?.dispose())};var wB=async(t,e,r,n,i=or)=>{let o=r?await Ev(bB.createServer(e).listen(r,n),i):await pa({tester:yB(e,n)},i),s=t.register(o.address().port);return o.on("close",()=>s.dispose()),o.on("error",()=>s.dispose()),o},Cv=async(t,e,r)=>{let n=await pa({tester:vB(e)},r),i=t.register(n.address().port);return n.on("close",()=>i.dispose()),n.on("error",()=>i.dispose()),n},st=Symbol("IPortLeaseTracker"),Jl=class{constructor(e){this.usedPorts=new Set;this.onRegistered=new z;this.isMandated=e==="remote"}register(e){return this.usedPorts.add(e),this.onRegistered.fire(e),{dispose:()=>this.usedPorts.delete(e)}}isRegistered(e,r=2e3){return this.usedPorts.has(e)?Promise.resolve(!0):e<53e3||e>=54e3?Promise.resolve(!1):cN([()=>Le(r).then(()=>!1),n=>new Promise(i=>{let o=this.onRegistered.event(s=>{s===e&&i(!0)});n.onCancellationRequested(()=>o.dispose())})])}};Jl=C([(0,Dv.injectable)(),b(0,(0,Dv.inject)(rs))],Jl);var _B="JsDebug",AB="*";var _E=class{constructor(){this.replays=new Map}addReplay(e,r,n){let i=this.replays.get(e);return i||(i=new bh,this.replays.set(e,i)),i.push({event:`${e}.${r}`,params:n})}capture(e,r,n,i){let o=e[r];if(i===0)o.on(n,s=>this.addReplay(r,n,s));else if(i===2){let s;o.on(n,a=>{s?.(),s=this.addReplay(r,n,a)})}else{let s=new bh;o.on(n,a=>{s.size===i.cap&&s.shift()?.(),s.push(this.addReplay(r,n,a))})}}filter(e,r){let n=this.replays.get(e);n&&n.applyFilter(r)}clearEvent(e,r){let n=`${e}.${r}`;this.filter(e,i=>i.event!==n)}clearDomain(e){this.replays.delete(e)}read(e){return this.replays.get(e)??[]}},Pv=Symbol("ICdpProxyProvider"),Yl=class{constructor(e,r,n){this.cdp=e;this.portTracker=r;this.logger=n;this.disposables=new Ie;this.replay=new _E;this.jsDebugApi={subscribe:(e,{events:r})=>{for(let n of r)n.endsWith(AB)?e.pushDisposable(this.cdp.session.onPrefix(n.slice(0,-AB.length),i=>e.send({method:i.method,params:i.params}))):e.pushDisposable(this.cdp.session.on(n,i=>e.send({method:n,params:i})));return{}}};this.replay.capture(e,"CSS","styleSheetAdded",0),this.replay.capture(e,"Debugger","paused",2),this.replay.capture(e,"Runtime","executionContextCreated",{cap:50,type:1}),this.replay.capture(e,"Runtime","consoleAPICalled",{cap:50,type:1}),e.Debugger.on("resumed",()=>{this.replay.clearEvent("Debugger","paused")}),e.CSS.on("fontsUpdated",i=>{i.font&&this.replay.addReplay("CSS","fontsUpdated",i)}),e.CSS.on("styleSheetRemoved",i=>this.replay.filter("CSS",o=>o.params.styleSheetId!==i.styleSheetId))}async proxy(){this.server||(this.server=this.createServer());let{server:e,path:r}=await this.server,n=e.address();return{host:n.address,port:n.port,path:r}}async createServer(){let e=`/${(0,IB.randomBytes)(20).toString("hex")}`,r=await Cv(this.portTracker,{perMessageDeflate:!0,path:e});return this.logger.info("proxyActivity","activated cdp proxy"),r.on("connection",n=>{let i=new AE(n,this.logger);this.logger.info("proxyActivity","accepted proxy connection",{id:i.id}),n.on("close",()=>{this.logger.verbose("proxyActivity","closed proxy connection",{id:i.id}),this.disposables.disposeObject(i)}),n.on("message",async o=>{let s;try{s=JSON.parse(o.toString())}catch(f){return i.send({id:0,error:{code:-32700,message:f.message}})}this.logger.verbose("proxyActivity","received proxy message",s);let{method:a,params:u,id:c=0}=s,[l,p]=a.split(".");try{let f=l===_B?await this.invokeJsDebugDomainMethod(i,p,u):await this.invokeCdpMethod(i,l,p,u);i.send({id:c,result:f})}catch(f){let m=f instanceof Pu&&f.cause?f.cause:{code:0,message:f.message};i.send({id:c,error:m})}})}),{server:r,path:e}}dispose(){this.disposables.dispose(),this.server?.then(e=>e.server.close()),this.server=void 0}invokeCdpMethod(e,r,n,i){let o=this.cdp.session.sendOrDie(`${r}.${n}`,i);switch(n){case"enable":for(let s of this.replay.read(r))e.send({method:s.event,params:s.params});break;case"disable":this.replay.clearDomain(r);break;default:}return o}invokeJsDebugDomainMethod(e,r,n){if(!this.jsDebugApi.hasOwnProperty(r))throw new Pu(r).setCause(-32601,`${_B}.${r} not found`);return this.jsDebugApi[r](e,n)}};Yl=C([(0,Ql.injectable)(),b(0,(0,Ql.inject)(ht)),b(1,(0,Ql.inject)(st)),b(2,(0,Ql.inject)(ce))],Yl);var Lse=0,AE=class{constructor(e,r){this.webSocket=e;this.logger=r;this.disposables=new Ie;this.id=Lse++}pushDisposable(e){this.disposables.push(e)}dispose(){this.disposables.dispose(),this.webSocket.close()}send(e){this.logger.verbose("proxyActivity","send proxy message",e),this.webSocket.send(JSON.stringify(e))}};var EB=require("./vendor/acorn-loose.js"),Lh=I(J());var IE=rr(function(t,e,r){let n=r?"variable":"property",i=(l,p,f)=>{if(p!=="function")return n;if(l==="constructor")return"class";let m=String(f);return m.startsWith("class ")||m.includes("[native code]")&&/^[A-Z]/.test(l)?"class":r?"function":"method"},o=l=>{switch(typeof l){case"number":case"boolean":return`${l}`;case"object":return l===null?"null":l.constructor.name||"object";case"function":return`fn(${new Array(l.length).fill("?").join(", ")})`;default:return typeof l}},s=[],a=new Set,u="~",c=t===void 0?this:t;for(;c!=null;c=c.__proto__){u+="~";let l=Object.getOwnPropertyNames(c).filter(p=>p.startsWith(e)&&!p.match(/^\d+$/));for(let p of l){if(a.has(p))continue;a.add(p);let f=Object.getOwnPropertyDescriptor(c,p),m=n,h;try{let H=c[p];m=i(p,typeof f?.value,H),h=o(H)}catch{}s.push({label:p,sortText:u+p.replace(/^_+/,H=>"{".repeat(H.length)),type:m,detail:h})}r=!1}return{result:s,isArray:this instanceof Array}}),SB=Au(IE.source);var Tse=t=>{switch(t.type){case"ClassDeclaration":case"ClassExpression":return{type:"class",id:t.id};case"MethodDefinition":return{type:t.key?.type==="Identifier"&&t.key.name==="constructor"?"constructor":"method",id:t.key};case"VariableDeclarator":return{type:t.init?.type==="FunctionExpression"||t.init?.type==="ArrowFunctionExpression"?"function":"variable",id:t.id}}};function $se(t){let e=!1;return Xs(t,{enter(r){if(r.type==="CallExpression"||r.type==="NewExpression"||r.type==="UnaryExpression"&&r.operator==="delete"||r.type==="ClassBody")return e=!0,0}}),e}var xv=Symbol("ICompletions"),Zl=class{constructor(e,r){this.evaluator=e;this.cdp=r}async completions(e){let r=uo(e.expression),n=new Zs(e.expression).convert(e.position),i=()=>Promise.resolve([]);return Xs(r,{enter:(o,s)=>{let a=o;if(a.start<n&&n<=a.end){if(o.type==="MemberExpression"||o.type==="Identifier"&&s?.type==="MemberExpression"&&!s.computed&&s.object!==o){let u=o.type==="MemberExpression"?o:s;i=u.computed?()=>this.elementAccessCompleter(e,u,n):()=>this.propertyAccessCompleter(e,u,n)}else o.type==="Identifier"&&(i=()=>this.identifierCompleter(e,r,o,n));s=o}}}),i().then(o=>o.sort((s,a)=>s.sortText>a.sortText?1:-1))}async elementAccessCompleter(e,r,n){if(r.property.type!=="Literal"||typeof r.property.value!="string")return[];let i=e.expression.slice(zs(r.property)+1,n);return(await this.defaultCompletions(e,i)).filter(s=>s.sortText!=="~~[").map(s=>({...s,text:JSON.stringify(s.text??s.label)+"]",start:zs(r.property),length:aS(r.property)-zs(r.property)}))}async identifierCompleter(e,r,n,i){let o=[];Xs(r,{enter(u){let c=Tse(u);c?.id?.type==="Identifier"&&o.push({label:c.id.name,type:c.type,sortText:c.id.name})}});let s=e.expression.slice(zs(n),i),a=[...o,...await this.defaultCompletions(e,s)];return this.evaluator.hasReturnValue&&e.executionContextId!==void 0&&es.startsWith(s)&&a.push({sortText:`~${es}`,label:es,type:"variable"}),a}async propertyAccessCompleter(e,r,n){let{result:i,isArray:o}=await this.completePropertyAccess({executionContextId:e.executionContextId,stackFrame:e.stackFrame,expression:x1(e.expression,r.object),prefix:(0,EB.isDummy)(r.property)?"":e.expression.slice(zs(r.property),n),throwOnSideEffect:$se(r)}),s=zs(r.property)-1,a=/^[$a-z_][0-9a-z_$]*$/i;for(let u of i)a.test(u.label)||(u.text=`[${JSON.stringify(u.label)}]`,u.start=s,u.length=1);if(o){let u="index";i.unshift({label:`[${u}]`,text:`[${u}]`,type:"property",sortText:"~~[",start:s,selectionStart:1,selectionLength:u.length,length:1})}return i}async completePropertyAccess({executionContextId:e,stackFrame:r,expression:n,prefix:i,isInGlobalScope:o=!1,throwOnSideEffect:s=!1}){let a={expression:`(${n})`,objectGroup:"console",silent:!0,throwOnSideEffect:s},u=r&&r.callFrameId(),c=await this.evaluator.evaluate(u?{...a,callFrameId:u}:{...a,contextId:e},{stackFrame:r});if(!c||c.exceptionDetails)return{result:[],isArray:!1};if(!c.result.objectId){let l={...a,returnByValue:!0,throwOnSideEffect:!1,expression:SB.expr(`(${n})`,JSON.stringify(i),JSON.stringify(o))},p=await this.evaluator.evaluate(u?{...l,callFrameId:u}:{...l,contextId:e});return!p||p.exceptionDetails?{result:[],isArray:!1}:p.result.value}try{return(await IE({cdp:this.cdp,args:[void 0,i,o],objectId:c.result.objectId,returnByValue:!0})).value}catch{return{result:[],isArray:!1}}finally{this.cdp.Runtime.releaseObject({objectId:c.result.objectId})}}async defaultCompletions(e,r=""){for(let n of["self","global","this"]){let{result:i}=await this.completePropertyAccess({executionContextId:e.executionContextId,stackFrame:e.stackFrame,expression:n,prefix:r,isInGlobalScope:!0});if(e.stackFrame){let o=r.toLowerCase(),s=new Set(i.map(a=>a.label));for(let a of await e.stackFrame.completions())s.has(a.label)||!a.label.toLowerCase().includes(o)||(s.add(a.label),i.push(a))}return i.push(...this.syntheticCompletions(e,r)),i}return this.syntheticCompletions(e,r)}syntheticCompletions(e,r){return this.evaluator.hasReturnValue&&es.startsWith(r)?[{sortText:`~${es}`,label:es,type:"variable"}]:[]}};Zl=C([(0,Lh.injectable)(),b(0,(0,Lh.inject)(Vn)),b(1,(0,Lh.inject)(ht))],Zl);var Fv=I(_e());var Io=class{constructor(e,r){this._tokens=[];this._separator=r||"",this._budget=e-1-this._separator.length}append(e){if(e.length>this.budget()){this.appendEllipsis();return}this._append(e)}_append(e){this._tokens.length&&(this._budget-=this._separator.length),this._tokens.push(e),this._budget-=e.length}appendEllipsis(){this._tokens[this._tokens.length-1]!=="\u2026"&&this._append("\u2026")}checkBudget(){return this._budget<=0&&this.appendEllipsis(),this._budget>0}budget(){return this._budget-(this._tokens.length?this._separator.length:0)}build(){return this._tokens.join(this._separator)}isEmpty(){return!this._tokens.length}};var JB=I(zB());var Xse=1e4;function Jse(t,e){if(!t.includes("%"))return[{type:"string",value:t}];let r=[];function n(u){if(!u)return;let c=r[r.length-1];c?.type==="string"?c.value+=u:r.push({type:"string",value:u})}function i(u,c,l){r.push({type:"specifier",specifier:u,precision:c,substitutionIndex:l})}let o=0,s=0,a=new RegExp(`%%|%(?:(\\d+)\\$)?(?:\\.(\\d*))?([${e.join("")}])`,"g");for(let u=a.exec(t);u;u=a.exec(t)){let c=u.index;if(c>o&&n(t.substring(o,c)),u[0]==="%%")n("%");else{let[,l,p,f]=u;l&&Number(l)>0&&(s=Number(l)-1);let m=p?Number(p):void 0;i(f,m,s),++s}o=c+u[0].length}return n(t.substring(o)),r}function PE(t,e,r){let n=Jse(t,Array.from(r.keys())),i=new Set,o=r.get("");if(!o)throw new Error("Expected to hav a default formatter");let s=new Io(Xse),a=!1;for(let u=0;s.checkBudget()&&u<n.length;++u){let c=n[u];if(c.type==="string"){s.append(c.value);continue}let l=c.substitutionIndex;if(l>=e.length){s.append("%"+(c.precision||"")+c.specifier);continue}i.add(l),c.specifier==="c"&&(a=!0);let p=r.get(c.specifier)||o;s.append(p(e[l],{budget:s.budget(),quoted:!1}))}a&&s.append("\x1B[0m");for(let u=0;s.checkBudget()&&u<e.length;++u)i.has(u)||(i.add(u),(t||u)&&s.append(" "),s.append(o(e[u],{budget:s.budget(),quoted:!1})));return{result:s.build(),usedAllSubs:i.size===e.length}}function XB(t){try{return new JB.default(t).ansi256().object().ansi256}catch{}}function YB(t){let e=/\s*(.*?)\s*:\s*(.*?)\s*(?:;|$)/g,r="\x1B[0m",n=e.exec(t);for(;n!==null;){if(n.length===3)switch(n[1]){case"color":let i=XB(n[2]);i&&(r+=`\x1B[38;5;${i}m`);break;case"background":case"background-color":let o=XB(n[2]);o&&(r+=`\x1B[48;5;${o}m`);break;case"font-weight":n[2]==="bold"&&(r+="\x1B[1m");break;case"font-style":n[2]==="italic"&&(r+="\x1B[3m");break;case"text-decoration":n[2]==="underline"&&(r+="\x1B[4m");break;default:}n=e.exec(t)}return r}var ZB=t=>t.replace(/\\/gm,"\\\\").replace(/\n/gm,"\\n").replace(/\r/gm,"\\r").replace(/\t/gm,"\\t"),Qse={budget:1e5,quoted:!0},QB={budget:1e3,quoted:!0,postProcess:ZB},Zse={budget:1/0,quoted:!1},eae={budget:1e3,quoted:!0,postProcess:ZB},tae={budget:1e5,quoted:!0},Mv=t=>{switch(t){case"repl":return Qse;case"hover":return QB;case"propertyValue":return QB;case"watch":return eae;case"copy":case"clipboard":return Zse;default:return tae}};var rae=30,nae=100,xE=20,iae=1e4,oae=3,eU=120,LE=new Set(["null","regexp","date"]);function Uu(t){return t.type==="function"||t.type==="object"&&!LE.has(t.subtype)}function TE(t){return t.subtype==="array"||t.subtype==="typedarray"}function ju(t,e,r){let n=Mv(e),i=kv(t,n,r);return t.preview?.subtype==="regexp"?i:n.postProcess?.(i)??i}function kv(t,e,r){return t.type==="function"?t.description?iU(t.description,e.budget):"<function>":t.type==="object"&&t.subtype==="node"?t.description:"preview"in t&&t.preview?Ov(t.preview,e.budget,r):nU(t,e.budget,e.quoted,r)}function Ov(t,e,r){return TE(t)?sae(t,e):t.subtype==="internal#entry"?co(t.description||"",e):t.type==="function"?iU(t.description,e):Uu(t)?aae(t,e,r):cae(t,e,r)}function sae(t,e){let r=new Io(e),n=t.description,i=n.match(/[^(]*\(([\d]+)\)/);if(!i)return n;let o=parseInt(i[1],10);n.startsWith("Array(")&&(n=n.substring(5)),r.append(co(n,r.budget())),r.append(" ");let s=new Io(r.budget()-2,", "),a=-1;for(let u of t.properties){if(!s.checkBudget())break;if(isNaN(u.name))continue;let c=parseInt(u.name,10);c>a+1&&s.appendEllipsis(),a=c,s.append(Mh(u,s.budget()))}o>a+1&&s.appendEllipsis();for(let u of t.properties){if(!s.checkBudget())break;isNaN(u.name)&&s.append(Mh(u,s.budget(),u.name))}return t.overflow&&s.appendEllipsis(),r.append("["+s.build()+"]"),r.build()}function aae(t,e,r){let n=new Io(e," ");t.description!=="Object"&&n.append(co(t.description,n.budget()));let i=new Map,o=t.properties||[];for(let f of o)i.set(f.name,f);let s=i.get("[[PrimitiveValue]]");if(s)return n.append(`(${Mh(s,n.budget()-2)})`),n.build();let a=i.get("[[PromiseStatus]]"),u=i.get("[[PromiseValue]]");if(a&&u)return a.value==="pending"?n.append(`{<${a.value}>}`):n.append(`{${Mh(u,n.budget()-2,`<${a.value}>`)}}`),n.build();let c=i.get("[[GeneratorStatus]]");if(c)return n.append(`{<${c.value}>}`),n.build();let l=new Io(n.budget()-2,", ");for(let f of o){if(!l.checkBudget())break;l.append(Mh(f,l.budget(),f.name))}for(let f of t.entries||[]){if(!l.checkBudget())break;if(f.key){let m=Ov(f.key,Math.min(xE,l.budget()),r),h=Ov(f.value,Math.min(xE,l.budget()-m.length-4),r);l.append(rp(m," => ",h,l.budget()))}else l.append(Ov(f.value,Math.min(xE,l.budget()),r))}t.overflow&&l.appendEllipsis();let p=l.build();return p?n.append("{"+p+"}"):n.isEmpty()&&n.append("{}"),n.build()}function tU(t,e){return t.length<=e?t:"\u2026"}function uae(t,e){return t.length>=e?t.slice(0,e-1)+"\u2026":t}function cae(t,e,r){if(t.type==="object"&&t.subtype==="null")return tU("null",e);if(t.type==="undefined")return tU("undefined",e);if(t.type==="string"){let n=t.description??t.value;return r?.hex&&(n=Buffer.from(n,"utf8").toString("hex")),gl(n,e)}return t.type==="number"||t.type==="bigint"?kh(t,!1,e,r):uae(t.description||"",e)}function rp(t,e,r,n){return t===void 0?gl(r,n):t.length+e.length>n?co(t,n):`${t}${e}${gl(r,n-t.length-e.length)}`}function Mh(t,e,r){return e=Math.min(e,nae),t.type==="function"?rp(r,": ","\u0192",e):t.type==="object"&&t.value==="Object"?rp(r,": ","{\u2026}",e):typeof t.value>"u"?rp(r,": ",`<${t.type}>`,e):t.type==="string"?rp(r,": ",`'${t.value}'`,e):rp(r,": ",t.value??"unknown",e)}function nU(t,e,r,n){if(t.type==="string"){let i=t.value||(t.description?t.description:"");n?.hex&&(i=Buffer.from(i,"utf8").toString("hex"),r=!1);let o=gl(i,r?e-2:e);return r?`'${o}'`:o}return t.type==="undefined"?"undefined":t.subtype==="null"?"null":t.type==="bigint"||t.type==="number"?kh(t,!1,e,n):t.description?co(t.description,Math.max(e,1e5)):co(String("value"in t?t.value:t.description),e)}function iU(t,e){let r=new Io(e),n=t.replace(/^function [gs]et /,"function ").replace(/^function [gs]et\(/,"function(").replace(/^[gs]et /,""),i=n.match(/^(async\s+function)/),o=n.startsWith("function*"),s=n.startsWith("*"),a=!o&&n.startsWith("function"),u=n.startsWith("class ")||n.startsWith("class{"),c=n.indexOf("=>"),l=!i&&!o&&!a&&!u&&c>0,p;if(u){p=n.substring(5);let h=/^[^{\s]+/.exec(p.trim()),H="";h&&(H=h[0].trim()||""),m("class",p,H)}else if(i)p=n.substring(i[1].length),m("async \u0192",p,f(p));else if(o)p=n.substring(9),m("\u0192*",p,f(p));else if(s)p=n.substring(1),m("\u0192*",p,f(p));else if(a)p=n.substring(8),m("\u0192",p,f(p));else if(l){let h=n;n.length>rae&&(h=n.substring(0,c+2)+" {\u2026}"),m("",n,h)}else m("\u0192",n,f(n));return r.build();function f(h){let H=h.indexOf("("),v=h.match(/\)\s*{/),_=v&&v.index||0;if(H!==-1&&v&&_>H){let x=h.substring(0,H).trim()||"",k=h.substring(H,_+1);return x+k}return"()"}function m(h,H,v){r.checkBudget()&&(h.length&&r.append(h+" "),H=H.trim(),H.endsWith(" { [native code] }")&&(H=H.substring(0,H.length-18)),r.budget()>=H.length?r.append(H):r.append(v.replace(/\n/g," ")))}}function qu(t){let e=t;if(e.type!=="object"||e.subtype==="null")return{title:nU(e,iae,!1,void 0)};let r=e.description??e.className??"Error",n=/^\s+at\s/m.exec(r);if(!n){let i=r.lastIndexOf(`
`);return i===-1?{title:r}:{title:r.substring(0,i)}}return{title:r.substring(0,n.index-1),stackTrace:r.substring(n.index+2)}}function kh(t,e,r,n){if(t.type==="number"){if("unserializableValue"in t)return t.unserializableValue;let s=t.value||+t.description;return n?.hex?s.toString(16):String(s)}if(t.type==="bigint"){let s=t.unserializableValue||t.description;return n?.hex?BigInt(s.slice(0,-1)).toString(16):s}let i=t,o=typeof i.value=="number"?i.value:+String(i.description);return co(String(e?Math.floor(o):o),r)}function lae(t,e){return gl(String(typeof t.value<"u"?t.value:t.description),e)}function oU(t){let e=[],r=new Set([void 0]),n=new Map;for(let l of t.properties.filter(p=>p.valuePreview)){let p=new Map;p.set(void 0,l.name),n.set(void 0,Math.max(n.get(void 0)||0,l.name.length)),e.push(p),l.valuePreview?.properties.map(f=>{f.value&&(r.add(f.name),p.set(f.name,f.value),n.set(f.name,Math.max(n.get(f.name)||0,f.value.length)))})}for(let l of r.values())l&&n.set(l,Math.max(n.get(l)||0,l.length));let i=Array.from(n.values()).reduce((l,p)=>l+p,0),o=eU-4-(r.size-1)*3;if(i>o){let l=o/i;for(let p of n.keys()){let f=Math.max(oae,n.get(p)*l|0);n.set(p,f)}}let s=[];for(let l of r.values())s.push("-".repeat(n.get(l)));let a="[-"+s.join("-|-")+"-]",u=[];u.push(a.replace("[","\u256D").replace(/\|/g,"\u252C").replace("]","\u256E").replace(/-/g,"\u2504"));let c=[];for(let l of r.values())c.push(rU(l||"",n.get(l)));u.push("\u250A "+c.join(" \u250A ")+" \u250A"),u.push(a.replace("[","\u251C").replace(/\|/g,"\u253C").replace("]","\u2524").replace(/-/g,"\u2504"));for(let l of e){let p=[];for(let f of r.values())p.push(rU(l.get(f)||"",n.get(f)));u.push("\u250A "+p.join(" \u250A ")+" \u250A")}return u.push(a.replace("[","\u2570").replace(/\|/g,"\u2534").replace("]","\u256F").replace(/-/g,"\u2504")),u.map(l=>co(l,eU)).join(`
`)}var $E=new Map([["",(t,e)=>kv(t,e)],["s",(t,e)=>lae(t,e.budget)],["i",(t,e)=>kh(t,!0,e.budget,void 0)],["d",(t,e)=>kh(t,!0,e.budget,void 0)],["f",(t,e)=>kh(t,!1,e.budget,void 0)],["c",t=>YB(t.value)],["o",(t,e)=>kv(t,e)],["O",(t,e)=>kv(t,e)]]);function rU(t,e){return t.length===e?t:t.length<e?t+" ".repeat(e-t.length):co(t,e)}var aU=rr(function(){return this});var Nv=class{constructor(e,r){this.protoObj=e;this.cdp=r}async toDap(e){if(!this.protoObj.objectId)return{category:"stderr",output:Fv.t("Only objects can be queried")};let r=await this.cdp.Runtime.queryObjects({prototypeObjectId:this.protoObj.objectId,objectGroup:"console"});if(await this.cdp.Runtime.releaseObject({objectId:this.protoObj.objectId}),!r)return{category:"stderr",output:Fv.t("Could not query the provided object")};let n;try{n=await aU({cdp:this.cdp,args:[],objectId:r.objects.objectId,objectGroup:"console",generatePreview:!0})}catch(s){return{category:"stderr",output:Fv.t(s.message)}}let i="\x1B[32mobjects: "+ju(n,"repl")+"\x1B[0m";return{category:"stdout",output:"",variablesReference:e.replVariables.createVariableForOutput(i,[n]).id}}};var uU=/^(\W*at .*\()(.*):(\d+):(\d+)(\))$/,cU=/^(\W*at )(.*):(\d+):(\d+)$/,da=class{constructor(e){this.stack=e}static isStackLike(e){return uU.test(e)||cU.test(e)}*[Symbol.iterator](){for(let e of this.stack.split(`
`)){let r=uU.exec(e)||cU.exec(e);if(!r){yield e+`
`;continue}let[,n,i,o,s,a]=r;n&&(yield n),yield new RE(i,new Nt(Number(o),Number(s))),a&&(yield a),yield`
`}}},RE=class{constructor(e,r){this.path=e;this.position=r}toString(){return`${this.path}:${this.position.lineNumber}:${this.position.columnNumber}`}};var ln=I(_e());var Oh=I(J());async function ME(t){let e=await t.uiLocation();return e?e.source.blackboxed()?2:Xr(e.source)&&!e.isMapped&&e.unmappedReason===3?1:0:0}var pae=new Set(["breakpoint","exception","entry"]),fae=256,ha=class{constructor(e,r){this.launchConfig=e;this.logger=r;this._smartStepCount=0}resetSmartStepCount(){this._smartStepCount>0&&(this.logger.verbose("internal",`smartStep: skipped ${this._smartStepCount} steps`),this._smartStepCount=0)}async getSmartStepDirection(e,r){if(!this.launchConfig.smartStep||pae.has(e.reason))return;let n=(await e.stackTrace.loadFrames(1)).find(du(Nr));if((n&&await ME(n))===0){this.resetSmartStepCount();return}return this._smartStepCount++>fae?2:r?.reason==="step"?r.direction:0}};ha=C([(0,Oh.injectable)(),b(0,(0,Oh.inject)($e)),b(1,(0,Oh.inject)(ce))],ha);var lU=rr(function(){return[Symbol.for("debug.description"),Symbol.for("nodejs.util.inspect.custom")]}),pU=Au(function(t,e){let r={},n="<<default preview>>";if(typeof this!="object"||!this)return r;for(let[i,o]of Object.entries(this)){if(e)try{let s=e.call(o,n);if(s!==n){r[i]=String(s);continue}}catch(s){r[i]=`<<indescribable>>${JSON.stringify([String(s),i])}`;continue}if(typeof o=="object"&&o){let s;for(let a of runtimeArgs[0])try{s=o[a]();break}catch{}!s&&!String(o.toString).includes("[native code]")&&(s=String(o)),s&&!s.startsWith("[object ")&&(r[i]=s.length>=t?s.slice(0,t)+"\u2026":s)}}return r}),Bv=Au(function(t,e){if(e)try{let r="<<default preview>>",n=e.call(this,r);if(n!==r)return String(n)}catch(r){return`<<indescribable>>${JSON.stringify([String(r),"object"])}`}if(typeof this=="object"&&this){let r;for(let n of[Symbol.for("debug.description"),Symbol.for("nodejs.util.inspect.custom")])try{r=this[n]();break}catch{}if(!r&&!String(this.toString).includes("[native code]")&&(r=String(this)),r&&!r.startsWith("[object "))return r.length>=t?r.slice(0,t)+"\u2026":r}});var Oe=I(_e()),SU=require("crypto");var Yn=class t{constructor(e=process.hrtime()){this.value=e}get ms(){return this.s*1e3}get s(){return this.value[0]+this.value[1]/1e9}elapsed(){return new t().subtract(this)}subtract(e){let r=this.value[1]-e.value[1],n=this.value[0]-e.value[0];return r<0&&(r+=1e9,n--),new t([n,r])}};var np=class{constructor(e,r,n,i,o,s){this.launchConfig=e;this.targetInfo=r;this.parentTarget=n;this.targetOriginValue=i;this.cdp=o;this.logger=s;this.onNameChanged=new z().event;this.attached=!1;this.isWaitingForDebugger=!0;o.pause()}id(){return this.targetInfo.targetId}name(){return this.targetInfo.title}fileName(){return this.targetInfo.url}type(){return"node"}parent(){return this.parentTarget}children(){return[]}canStop(){return!1}stop(){}canRestart(){return!1}restart(){}canAttach(){return!this.attached}async attach(){return await this.cdp.Runtime.enable({}),await this.cdp.Debugger.enable({}),this.attached=!0,this.cdp}canDetach(){return this.attached}async detach(){await this.cdp.Debugger.resume({}),await this.cdp.NodeWorker.detach({sessionId:this.targetInfo.targetId}),this.attached=!1}targetOrigin(){return this.targetOriginValue}afterBind(){return this.cdp.resume(),Promise.resolve()}async runIfWaitingForDebugger(){this.isWaitingForDebugger=!1,await this.cdp.Runtime.runIfWaitingForDebugger({})}initialize(){return Promise.resolve()}waitingForDebugger(){return this.isWaitingForDebugger}supportsCustomBreakpoints(){return!1}scriptUrlToUrl(e){return e[0]==="/"||process.platform==="win32"&&e[1]===":"&&e[2]==="\\"?ke(e):e}executionContextName(){return this.targetInfo.title}};var at=I(_e()),Uv=new Map;function ip(){if(Uv.size)return Uv;function t(o,s){for(let a of s)a.group=o,Uv.set(a.id,a)}function e(o,s){let a=s||o;return{id:"instrumentation:"+o,title:a,group:"",details:u=>{if(o==="webglErrorFired"){let c=u.webglErrorName;return c=c.replace(/^.*(0x[0-9a-f]+).*$/i,"$1"),{short:c,long:at.t('Paused on WebGL Error instrumentation breakpoint, error "{0}"',c)}}return o==="scriptBlockedByCSP"&&u.directiveText?{short:at.t('CSP violation "{0}"',u.directiveText),long:at.t('Paused on Content Security Policy violation instrumentation breakpoint, directive "{0}"',u.directiveText)}:{short:a,long:at.t('Paused on instrumentation breakpoint "{0}"',a)}},apply:async(u,c)=>(c?await u.EventBreakpoints.setInstrumentationBreakpoint({eventName:o}):await u.EventBreakpoints.removeInstrumentationBreakpoint({eventName:o}))?!0:!!(c?await u.DOMDebugger.setInstrumentationBreakpoint({eventName:o}):await u.DOMDebugger.removeInstrumentationBreakpoint({eventName:o}))}}function r(o,s,a){let u=s===void 0?"*":typeof s=="string"?[s]:s;return{id:"listener:"+o,title:a||o,group:"",details:c=>{let l=(c.targetName||"*").toLowerCase();return{short:l+"."+o,long:at.t('Paused on event listener breakpoint "{0}", triggered on "{1}"',o,l)}},apply:async(c,l)=>{let p=!0;for(let f of u)l?p=p&&!!await c.DOMDebugger.setEventListenerBreakpoint({eventName:o,targetName:f}):p=p&&!!await c.DOMDebugger.removeEventListenerBreakpoint({eventName:o,targetName:f});return p}}}t("Ad Auction Worklet",[e("beforeBidderWorkletBiddingStart",at.t("Bidder Bidding Phase Start")),e("beforeBidderWorkletReportingStart",at.t("Bidder Reporting Phase Start")),e("beforeSellerWorkletScoringStart",at.t("Seller Scoring Phase Start")),e("beforeSellerWorkletReportingStart",at.t("Seller Reporting Phase Start"))]),t("Animation",[e("requestAnimationFrame",at.t("Request Animation Frame")),e("cancelAnimationFrame",at.t("Cancel Animation Frame")),e("requestAnimationFrame.callback",at.t("Animation Frame Fired"))]),t("Canvas",[e("canvasContextCreated",at.t("Create canvas context")),e("webglErrorFired",at.t("WebGL Error Fired")),e("webglWarningFired",at.t("WebGL Warning Fired"))]),t("Clipboard",[r("copy"),r("cut"),r("paste"),r("beforecopy"),r("beforecut"),r("beforepaste")]),t("Control",[r("resize"),r("scroll"),r("scrollend"),r("zoom"),r("focus"),r("blur"),r("select"),r("change"),r("submit"),r("reset")]),t("Device",[r("deviceorientation"),r("devicemotion")]),t("DOM Mutation",[r("DOMActivate"),r("DOMFocusIn"),r("DOMFocusOut"),r("DOMAttrModified"),r("DOMCharacterDataModified"),r("DOMNodeInserted"),r("DOMNodeInsertedIntoDocument"),r("DOMNodeRemoved"),r("DOMNodeRemovedFromDocument"),r("DOMSubtreeModified"),r("DOMContentLoaded")]),t("Drag / Drop",[r("drag"),r("dragstart"),r("dragend"),r("dragenter"),r("dragover"),r("dragleave"),r("drop")]),t("Geolocation",[e("Geolocation.getCurrentPosition","getCurrentPosition"),e("Geolocation.watchPosition","watchPosition")]),t("Keyboard",[r("keydown"),r("keyup"),r("keypress"),r("input")]),t("Load",[r("load"),r("beforeunload"),r("unload"),r("abort"),r("error"),r("hashchange"),r("popstate"),r("navigate"),r("navigatesuccess"),r("navigateerror"),r("currentchange"),r("nagivateto"),r("navigatefrom"),r("finish"),r("dispose")]);let n=["audio","video"];t("Media",[r("play",n),r("pause",n),r("playing",n),r("canplay",n),r("canplaythrough",n),r("seeking",n),r("seeked",n),r("timeupdate",n),r("ended",n),r("ratechange",n),r("durationchange",n),r("volumechange",n),r("loadstart",n),r("progress",n),r("suspend",n),r("abort",n),r("error",n),r("emptied",n),r("stalled",n),r("loadedmetadata",n),r("loadeddata",n),r("waiting",n)]),t("Mouse",[r("auxclick"),r("click"),r("dblclick"),r("mousedown"),r("mouseup"),r("mouseover"),r("mousemove"),r("mouseout"),r("mouseenter"),r("mouseleave"),r("mousewheel"),r("wheel"),r("contextmenu")]),t("Notification",[e("Notification.requestPermission","requestPermission")]),t("Parse",[e("Element.setInnerHTML",at.t("Set innerHTML")),e("Document.write","document.write")]),t("Picture-in-Picture",[r("enterpictureinpicture","video"),r("leavepictureinpicture","video"),r("resize","PictureInPictureWindow"),r("enter","documentPictureInPicture")]),t("Pointer",[r("pointerover"),r("pointerout"),r("pointerenter"),r("pointerleave"),r("pointerdown"),r("pointerup"),r("pointermove"),r("pointercancel"),r("gotpointercapture"),r("lostpointercapture"),r("pointerrawupdate")]),t("Script",[e("scriptFirstStatement",at.t("Script First Statement")),e("scriptBlockedByCSP",at.t("Script Blocked by Content Security Policy"))]),t("Timer",[e("setTimeout"),e("clearTimeout"),e("setInterval"),e("clearInterval"),e("setTimeout.callback",at.t("setTimeout fired")),e("setInterval.callback",at.t("setInterval fired"))]),t("Touch",[r("touchstart"),r("touchmove"),r("touchend"),r("touchcancel")]),t("WebAudio",[e("audioContextCreated",at.t("Create AudioContext")),e("audioContextClosed",at.t("Close AudioContext")),e("audioContextResumed",at.t("Resume AudioContext")),e("audioContextSuspended",at.t("Suspend AudioContext"))]),t("Window",[e("DOMWindow.close","window.close")]),t("Worker",[r("message"),r("messageerror")]);let i=["xmlhttprequest","xmlhttprequestupload"];return t("XHR",[r("readystatechange",i),r("load",i),r("loadstart",i),r("loadend",i),r("abort",i),r("error",i),r("progress",i),r("timeout",i)]),Uv}var kE=Au(function(t,e){let r=" ".repeat(e),n=`
`;function i(s){if(s instanceof Uint8Array)return Uint8Array;if(s instanceof Uint8ClampedArray)return Uint8ClampedArray;if(s instanceof Uint16Array)return Uint16Array;if(s instanceof Uint32Array)return Uint32Array;if(s instanceof BigUint64Array)return BigUint64Array;if(s instanceof Int8Array)return Int8Array;if(s instanceof Int32Array)return Int32Array;if(s instanceof BigInt64Array)return BigInt64Array;if(s instanceof Float32Array)return Float32Array;if(s instanceof Float64Array)return Float64Array}function o(s,a=0,u=[]){switch(typeof s){case"bigint":return`${s}n`;case"boolean":return s.toString();case"function":{let p=s.toString().replace(/^[^\s]+\(/,"function(").split(/\r?\n/g),f=/^$/;for(let m of p){let h=/^[ \t]+/.exec(m);if(h){f=new RegExp(`^[ \\t]{0,${h[0].length}}`);break}}return p.map((m,h)=>h===0?m:(m=m.replace(f,""),h===p.length-1?r.repeat(a)+m:r.repeat(a+1)+m)).join(n)}case"number":return`${s}`;case"object":if(s===null)return"null";if(u.includes(s))return"[Circular]";if(s instanceof Date)return`"${s.toISOString()}"`;if(typeof Node<"u"&&t instanceof Node)return t.outerHTML;let c=i(s);if(c)return`new ${c.name}([${s.join(", ")}])`;if(s instanceof ArrayBuffer)return`new Uint8Array([${new Uint8Array(s).join(", ")}]).buffer`;if(s instanceof Array)return["[",...s.map(p=>r.repeat(a+1)+o(p,a+1,[...u,s])+","),r.repeat(a)+"]"].join(n);let l=s;return["{",...Object.keys(l).map(p=>r.repeat(a+1)+(/^[$a-z_][0-9a-z_$]*$/i.test(p)?p:JSON.stringify(p))+": "+o(l[p],a+1,[...u,s])+","),r.repeat(a)+"}"].join(n);case"string":return JSON.stringify(s);case"symbol":return s.toString();case"undefined":return"undefined";default:return String(s)}}try{return o(t)}catch{return""+t}}),fU=rr(`
  function(spaces2) {
    const result = ${kE.expr("this","spaces2")};
    return result;
  }
`);var Si=I(_e());var Wu=I(J());var dU=rr(function(){let t={__proto__:this.__proto__},e=Object.getOwnPropertyNames(this);for(let r=0;r<e.length;++r){let n=e[r],i=n>>>0;if(String(i>>>0)===n&&i>>>0!==4294967295)continue;let o=Object.getOwnPropertyDescriptor(this,n);o&&Object.defineProperty(t,n,o)}return t});var hU=rr(function(t,e){let r={},n=t===-1?0:t,i=e===-1?this.length:t+e;for(let o=n;o<i&&o<this.length;++o){let s=Object.getOwnPropertyDescriptor(this,o);s&&Object.defineProperty(r,o,s)}return r});var mU=rr(function(t){return t.call(this)});var OE=rr(function(t,e){let{buffer:r,byteLength:n,byteOffset:i}=this instanceof ArrayBuffer?new DataView(this):this instanceof WebAssembly.Memory?new DataView(this.buffer):this,o=i+Math.min(t,n),s=Math.max(0,Math.min(e,n-t));return a(new Uint8Array(r,o,s));function a(u){let c="0123456789abcdef",l="";for(let p=0;p<u.length;p++){let f=u[p];l+=c[f>>>4]+c[f&15]}return l}});var FE=rr(function(t,e){let r=u(e),{buffer:n,byteLength:i,byteOffset:o}=this instanceof ArrayBuffer?new DataView(this):this instanceof WebAssembly.Memory?new DataView(this.buffer):this,s=o+Math.min(t,i),a=Math.max(0,Math.min(r.length,i-t));return new Uint8Array(n,s,a).set(r.subarray(0,a)),a;function u(c){let l=new Uint8Array(c.length>>>1);for(let p=0;p<c.length;p+=2)l[p>>>1]=parseInt(c.slice(p,p+2),16);return l}});var Uh=(()=>{let t=0,e=2147483647-1;return()=>t++%e+1})(),JE=t=>{if(typeof t=="string")return{value:t};let e=t;return e.objectId?{objectId:e.objectId}:e.unserializableValue?{unserializableValue:e.unserializableValue}:{value:e.value}},hae=new Set(["typedarray","dataview","arraybuffer","webassemblymemory"]);var wU=1024,mae=/^[$a-z_][0-9a-z_$]*$/i,gae=/^#[0-9a-z_$]+$/i,Hae=t=>t.hasOwnProperty("configurable"),gU=(t,e,r)=>{let n=L1(t,_y(e),r);return Yo(n)},HU="<<indescribable>>",_U=t=>{if(!t.startsWith(HU))return t;let e,r;try{[e,r]=JSON.parse(t.slice(HU.length))}catch{return t}return Si.t("{0} (couldn't describe: {1})",e,r)},NE=t=>!!t&&typeof t=="object"&&"readMemory"in t&&"writeMemory"in t,yU={PARAMETER:{name:Si.t("Parameters"),sortOrder:-10},LOCAL:{name:Si.t("Locals"),sortOrder:-9},GLOBAL:{name:Si.t("Globals"),sortOrder:-8}},Fh=class t{constructor(e,r,n,i,o,s,a){this.cdp=e;this.parent=r;this.vars=i;this.locationProvider=o;this.currentRef=s;this.settings=a;this.name=n.name,this.presentationHint=n.presentationHint,this.sortOrder=n.sortOrder||0}get customDescriptionGenerator(){return this.settings.customDescriptionGenerator}createVariable(e,r,...n){let i=new e(new t(this.cdp,this.currentRef?.(),r,this.vars,this.locationProvider,()=>i,this.settings),...n);return i.id>0&&this.vars.add(i),i}createVariableByType(e,r,n){if(TE(r))return this.createVariable(Wv,e,r);if(r.objectId){if(r.subtype==="map"||r.subtype==="set")return this.createVariable(WE,e,r,n);if(!LE.has(r.subtype))return this.createVariable(Nh,e,r,n)}return this.createVariable(Qn,e,r)}async getDescriptionSymbols(e){return this.settings.descriptionSymbols??=lU({cdp:this.cdp,args:[],objectId:e}).then(r=>({objectId:r.objectId}),()=>({value:[]})),await this.settings.descriptionSymbols}async createObjectPropertyVars(e,r){let n=[];if(this.settings.customPropertiesGenerator){let{result:c,errorDescription:l}=await this.evaluateCodeForObject(e,this.settings.customPropertiesGenerator,[]);c&&c.type!=="undefined"?e=c:n.push([this.createVariable(qE,{name:"",sortOrder:-1},c,c?.description||l||Si.t("Unknown error"))])}if(!e.objectId)return[];r&&this.cdp.DotnetDebugger.setEvaluationOptions({options:r,type:"variable"});let[i,o,s]=await Promise.all([this.cdp.Runtime.getProperties({objectId:e.objectId,accessorPropertiesOnly:!0,ownProperties:!1,generatePreview:!0}),this.cdp.Runtime.getProperties({objectId:e.objectId,ownProperties:!0,generatePreview:!0}),this.cdp.Runtime.callFunctionOn({functionDeclaration:pU.decl(`${wU}`,this.settings.customDescriptionGenerator||"null"),arguments:[await this.getDescriptionSymbols(e.objectId)],objectId:e.objectId,throwOnSideEffect:!0,returnByValue:!0}).then(c=>c?.result.value||{}).catch(()=>({}))]);if(!i||!o)return[];let a=new Map,u=[];for(let c of i.result){if(c.symbol){u.push(c);continue}c.name==="__proto__"&&o.internalProperties?.some(l=>l.name==="[[Prototype]]")||a.set(c.name,c)}for(let c of o.result)c.get||c.set||(c.symbol?u.push(c):a.set(c.name,c));for(let c of[a.values(),u.values()])for(let l of c)n.push(this.createPropertyVar(l,e,s?.hasOwnProperty(l.name)?_U(s[l.name]):void 0));for(let c of o.privateProperties??[])n.push(this.createPropertyVar(c,e,void 0,{presentationHint:{visibility:"private"},sortOrder:1}));for(let c of o.internalProperties||[]){if(c.name==="[[StableObjectId]]")continue;let l;c.name==="[[FunctionLocation]]"&&c.value&&c.value.subtype==="internal#location"?l=this.createVariable(jE,{name:c.name,presentationHint:{visibility:"internal",attributes:["readOnly"]},sortOrder:2},c.value):c.value!==void 0&&(l=this.createVariableByType({name:c.name,presentationHint:{visibility:"internal"},sortOrder:2},c.value)),l&&n.push([l])}return Vo(await Promise.all(n))}async createPropertyVar(e,r,n,i){let o=[],s=e.get&&e.get.type!=="undefined",a=e.set&&e.set.type!=="undefined",u={name:e.name,presentationHint:{},sortOrder:0,...i};return i||(Hae(e)?(e.enumerable===!1&&!s&&(u.presentationHint.visibility="internal",u.sortOrder=1),(e.writable===!1||s&&!a)&&(u.presentationHint.attributes=["readOnly"])):(u.presentationHint.visibility="private",u.sortOrder=1)),"value"in e&&e.value&&o.push(this.createVariableByType(u,e.value,n)),s?o.push(this.createVariable(KE,u,e.get,r)):a&&o.push(this.createVariable(GE,u,e.set)),o}async evaluateCodeForObject(e,r,n){try{let i=await this.cdp.Runtime.callFunctionOn({objectId:e.objectId,functionDeclaration:r,arguments:n.map(JE)});if(i){if(i.exceptionDetails===void 0)return{result:i.result};if(i&&i.result.description)return{errorDescription:i.result.description}}return{errorDescription:Si.t("Unknown error")}}catch(i){return{errorDescription:i.stack||i.message||String(i)}}}},yae=t=>typeof t=="number"||/^[0-9]+$/.test(t),Qn=class t{constructor(e,r){this.context=e;this.remoteObject=r;this.id=Uh()}get name(){return this.context.name}get sortOrder(){return this.context.sortOrder}get accessor(){let{parent:e,name:r}=this.context;if(e instanceof Bh)return e.accessor;if(!(e instanceof t))return this.context.name;let n=e.context.parent;if(n instanceof t){if(this.remoteObject.subtype==="internal#entry")return`[...${n.accessor}.entries()][${+r}]`;if(e.remoteObject.subtype==="internal#entry")return`${e.accessor}[${this.name==="key"?0:1}]`}return yae(r)?`${e.accessor}[${r}]`:mae.test(r)?`${e.accessor}.${r}`:e.accessor==="this"&&gae.test(r)?`${e.accessor}.${r}`:`${e.accessor}[${JSON.stringify(r)}]`}async toDap(e,r){let n=this.context.name;return this.context.parent instanceof op&&(n=await this.context.parent.getRename(n)),Promise.resolve({name:n,value:ju(this.remoteObject,e,r),evaluateName:this.accessor,type:this.remoteObject.type,variablesReference:0,presentationHint:this.context.presentationHint})}async setProperty(e,r){let n=await this.context.cdp.Runtime.callFunctionOn({objectId:this.remoteObject.objectId,functionDeclaration:`function(a) { return this[a] = ${r}; ${dt()} }`,arguments:[JE(e)],silent:!0});if(!n)throw new Z(Ke(Si.t("Unable to set variable value")));if(n.exceptionDetails)throw new Z(AU(n.exceptionDetails));return this.context.createVariableByType({name:e},n.result)}async getChildren(e){return Promise.resolve([])}},jv=class{constructor(e){this.child=e;this.id=Uh()}getChildren(){return Promise.resolve([this.child])}},BE=class extends Qn{constructor(r,n,i,o){super(r,{type:i[0]?.type??"string"});this.value=n;this.args=i;this.stackTrace=o}toDap(){return Promise.resolve({name:this.context.name,value:this.value,variablesReference:this.stackTrace||this.args.some(Uu)?this.id:0})}getChildren(r){let n=[],{args:i,stackTrace:o}=this;for(let s=0;s<i.length;++s)Uu(i[s])&&n.push(this.context.createVariableByType({name:`arg${s}`,sortOrder:s},i[s]));return o&&n.push(this.context.createVariable(UE,{name:"",sortOrder:Number.MAX_SAFE_INTEGER},this.remoteObject,o)),Promise.resolve(n)}},UE=class extends Qn{constructor(r,n,i){super(r,n);this.stacktrace=i}async toDap(){return{name:"",value:await this.stacktrace.format(),variablesReference:0}}},jE=class extends Qn{constructor(r,n){super(r,n);this.location=n.value}async toDap(){return{name:this.context.name,value:await this.context.locationProvider.renderDebuggerLocation(this.location),variablesReference:0,presentationHint:{visibility:"internal"}}}},qE=class extends Qn{constructor(r,n,i){super(r,n);this.message=i}get accessor(){if(!(this.context.parent instanceof Qn))throw new Error("ErrorVariable must have a parent Variable");return this.context.parent.accessor}toDap(){return Promise.resolve({name:this.context.name,value:this.message,variablesReference:0})}},qv=Symbol("NoStringRepr"),Nh=class extends Qn{constructor(r,n,i){super(r,n);this.customStringRepr=i}async toDap(r,n){let[i,o]=await Promise.all([await super.toDap(r,n),await this.getValueRepresentation(r)]);return{...i,type:this.remoteObject.className||this.remoteObject.subtype||this.remoteObject.type,variablesReference:this.id,memoryReference:hae.has(this.remoteObject.subtype)?String(this.id):void 0,value:o}}async getValueRepresentation(r){if(typeof this.customStringRepr=="string")return this.customStringRepr;if(!this.context.parent&&this.remoteObject.objectId&&this.customStringRepr!==qv)try{let n=await this.context.cdp.Runtime.callFunctionOn({functionDeclaration:Bv.decl(`${wU}`,this.context.customDescriptionGenerator||"null"),objectId:this.remoteObject.objectId,returnByValue:!0});if(n?.result.value)return this.customStringRepr=_U(n.result.value)}catch{this.customStringRepr=qv}return this.context.name==="__proto__"&&this.remoteObject.description||ju(this.remoteObject,r)}async readMemory(r,n){let i=await OE({cdp:this.context.cdp,args:[r,n],objectId:this.remoteObject.objectId,returnByValue:!0});return Buffer.from(i.value,"hex")}async writeMemory(r,n){return(await FE({cdp:this.context.cdp,args:[r,n.toString("hex")],objectId:this.remoteObject.objectId,returnByValue:!0})).value}getChildren(r){return this.context.createObjectPropertyVars(this.remoteObject,r.evaluationOptions)}},vU="[[Entries]]",WE=class extends Nh{constructor(r,n){super(r,n,qv);this.baseChildren=Ae(()=>super.getChildren({variablesReference:this.id}));this.isMap=n.subtype==="map";let i=n.preview;this.size=Number(i?.properties.find(o=>o.name==="size")?.value)??void 0}async toDap(r){let n=await super.toDap(r);return this.size&&this.size>100&&(n.indexedVariables=this.size),n}async getChildren(r){let n=await this.baseChildren();return[...(await n.find(o=>o.name===vU)?.getChildren(r)||[]).filter(o=>o.sortOrder===0),...n.filter(o=>o.name!==vU)]}},Wv=class extends Nh{constructor(r,n){super(r,n,qv);this.length=0;let i=String(n.description).match(/\(([0-9]+)\)/);this.length=i?+i[1]:0}async toDap(r){return{...await super.toDap(r),indexedVariables:this.length>100?this.length:void 0,namedVariables:this.length>100?1:void 0}}async getChildren(r){switch(r?.filter){case"indexed":return this.getArraySlots(r);case"named":return this.getArrayProperties();default:return Promise.all([this.getArrayProperties(),this.getArraySlots()]).then(Vo)}}async getArrayProperties(){try{let r=await dU({cdp:this.context.cdp,args:[],objectId:this.remoteObject.objectId,generatePreview:!0});return this.context.createObjectPropertyVars(r)}catch{return[]}}async getArraySlots(r){let n=r&&typeof r.start<"u"?r.start:-1,i=r&&typeof r.count<"u"?r.count:-1,o;try{o=await hU({cdp:this.context.cdp,generatePreview:!1,args:[n,i],objectId:this.remoteObject.objectId})}catch{return[]}let s=await this.context.createObjectPropertyVars(o);return o.objectId&&await this.context.cdp.Runtime.releaseObject({objectId:o.objectId}),s}},VE=class extends Wv{async toDap(e){return this.remoteObject.preview?{...await super.toDap(e),name:oU(this.remoteObject.preview)}:super.toDap(e)}},Bh=class extends Qn{constructor(e,r){super(e,r)}getChildren(e){return this.context.createObjectPropertyVars(this.remoteObject)}},GE=class extends Bh{async toDap(e,r){return{...await super.toDap(e,r),value:"write-only",variablesReference:this.id}}},KE=class extends Bh{constructor(r,n,i){super(r,n);this.parentObject=i}async toDap(r,n){let i=await super.toDap(r,n);return i.variablesReference=this.id,i.presentationHint={...i.presentationHint,lazy:!0},i}async getChildren(r){try{let n=await mU({cdp:this.context.cdp,objectId:this.parentObject.objectId,args:[new rh(this.remoteObject.objectId)]});return[this.context.createVariableByType({name:this.name,presentationHint:this.context.presentationHint},n)]}catch(n){if(!(n instanceof _u))throw n}return super.getChildren(r)}},Vv=class t{constructor(e,r,n){this.context=e;this.variable=r;this.scopeRef=n;this.id=Uh();this.sortOrder=0}static{this.presentationHint={attributes:["readOnly"]}}toDap(){return Promise.resolve({name:this.context.name,value:this.variable.description||"",variablesReference:this.variable.getChildren?this.id:0,memoryReference:this.variable.linearMemoryAddress?String(this.id):void 0,presentationHint:this.context.presentationHint})}async getChildren(){return(await this.variable.getChildren?.()||[]).map(r=>this.context.createVariable(t,{name:r.name,presentationHint:t.presentationHint},r.value,this.scopeRef))}async readMemory(e,r){let n=this.variable.linearMemoryAddress;if(n===void 0)return;let i=await this.context.cdp.Debugger.evaluateOnCallFrame({callFrameId:this.scopeRef.callFrameId,expression:`(${OE.source}).call(memories[0].buffer, ${+n+e}, ${+r}) ${dt()}`,returnByValue:!0});if(!i)throw new _u({exceptionId:0,text:"No response from CDP",lineNumber:0,columnNumber:0});return Buffer.from(i.result.value,"hex")}async writeMemory(e,r){let n=this.variable.linearMemoryAddress;return n===void 0?0:(await this.context.cdp.Debugger.evaluateOnCallFrame({callFrameId:this.scopeRef.callFrameId,expression:`(${FE.source}).call(memories[0].buffer, ${+n+e}, ${JSON.stringify(r.toString("hex"))}) ${dt()}`,returnByValue:!0}))?.result.value||0}},zE=class{constructor(e,r,n,i){this.context=e;this.kind=r;this.variables=n;this.scopeRef=i;this.id=Uh();this.sortOrder=yU[this.kind]?.sortOrder||0}toDap(){return Promise.resolve({name:yU[this.kind]?.name||this.kind,value:"",variablesReference:this.id})}getChildren(){return Promise.all(this.variables.map(async e=>{let r=await e.evaluate();return this.context.createVariable(Vv,{name:e.name,presentationHint:Vv.presentationHint},r,this.scopeRef)}))}},op=class{constructor(e,r,n,i,o){this.remoteObject=e;this.context=r;this.ref=n;this.extraProperties=i;this.renameProvider=o;this.id=Uh()}async getChildren(e){let r=await this.context.createObjectPropertyVars(this.remoteObject),n=new Set(r.map(i=>i.name));for(let i of this.extraProperties)n.has(i.name)||r.push(this.context.createVariableByType({name:i.name},i.value));return r}async getRename(e){return(await this.renameProvider.provideOnStackframe(this.ref.stackFrame)).getOriginalName(e,this.ref.stackFrame.rawPosition)||e}async setProperty(e,r){let n=await this.context.cdp.Debugger.evaluateOnCallFrame({expression:`${r} ${dt()}`,callFrameId:this.ref.callFrameId});if(!n)throw new Z(Xe(Si.t("Invalid expression")));if(n.exceptionDetails)throw new Z(AU(n.exceptionDetails));return await this.context.cdp.Debugger.setVariableValue({callFrameId:this.ref.callFrameId,scopeNumber:this.ref.scopeNumber,variableName:e,newValue:JE(n.result)}),this.context.createVariableByType({name:e},n.result)}},XE=class{constructor(){this.value=new Map}get(e){return this.value.get(e)}add(e){this.value.set(e.id,e)}clear(){this.value.clear()}},ma=class{constructor(e,r,n,i,o){this.renameProvider=e;this.cdp=r;this.dap=n;this.launchConfig=i;this.locationProvider=o;this.vars=new XE;this.contextSettings={customDescriptionGenerator:i.customDescriptionGenerator&&gU(["defaultValue"],i.customDescriptionGenerator,!1),customPropertiesGenerator:i.customPropertiesGenerator&&gU([],i.customPropertiesGenerator,!1)}}createDetached(){return new ma(this.renameProvider,this.cdp,this.dap,this.launchConfig,this.locationProvider)}clear(){this.vars.clear()}createFloatingVariable(e,r){return this.createFloatingContext().createVariableByType({name:e},r)}createVariableForOutput(e,r,n,i){let o=this.createFloatingContext(),s=r.length===1&&i==="table"?o.createVariable(VE,{name:""},r[0]):r.length===1&&Uu(r[0])&&!n?o.createVariableByType({name:""},r[0]):o.createVariable(BE,{name:""},e,r,n),a=new jv(s);return this.vars.add(a),a}createScope(e,r,n){let i=new op(e,new Fh(this.cdp,void 0,{name:""},this.vars,this.locationProvider,()=>i,this.contextSettings),r,n,this.renameProvider);return this.vars.add(i),i}createWasmScope(e,r,n){let i=new zE(new Fh(this.cdp,void 0,{name:""},this.vars,this.locationProvider,()=>i,this.contextSettings),e,r,n);return this.vars.add(i),i}hasVariable(e){return!!this.vars.get(e)}hasMemory(e){return NE(this.vars.get(Number(e)))}async readMemory(e,r,n){let i=this.vars.get(Number(e));return NE(i)?i.readMemory(r,n):void 0}async writeMemory(e,r,n){let i=this.vars.get(Number(e)),o=NE(i)?await i.writeMemory(r,n):0;return o>0&&this.dap.invalidated({areas:["variables"]}),o}async getVariableNames(e){let r=this.vars.get(e.variablesReference);return r?(await r.getChildren(e)).filter(du(Qn)).map(i=>i.name):[]}async getVariables(e){let r=this.vars.get(e.variablesReference);if(!r)return[];let n=await r.getChildren(e);return(await Promise.all(n.map(o=>o.toDap(r instanceof op||r instanceof jv?"repl":"propertyValue",e.format).then(s=>({v:o,dap:s}))))).sort((o,s)=>o.v.sortOrder-s.v.sortOrder||+o.dap.name-+s.dap.name||o.dap.name.localeCompare(s.dap.name)).map(o=>o.dap)}async setVariable(e){let r=this.vars.get(e.variablesReference);if(!e.value)throw new Z(Xe(Si.t("Cannot set an empty value")));if(r instanceof op||r instanceof Qn)return await(await r.setProperty(e.name,e.value)).toDap("propertyValue",e.format);throw new Z(Ke(Si.t("Variable not found")))}createFloatingContext(){return new Fh(this.cdp,void 0,{name:"<unnamed>"},this.vars,this.locationProvider,void 0,this.contextSettings)}};ma=C([(0,Wu.injectable)(),b(0,(0,Wu.inject)(ia)),b(1,(0,Wu.inject)(ht)),b(2,(0,Wu.inject)(rn)),b(3,(0,Wu.inject)($e))],ma);function AU(t){let e=t.exception&&qu(t.exception).title||t.text;return Xe(e)}var Gv=class{constructor(e){this.description=e;this.sourceMapLoads=new Map;this.scripts=[]}get isDefault(){return this.description.auxData&&this.description.auxData.isDefault}async remove(e){await Promise.all(this.scripts.map(async r=>{let n=await r.source;n.filterScripts(i=>i.executionContextId!==this.description.id),n.scripts.length||e.removeSource(n)}))}},YE=class{constructor(e){this._obj=e;this._dapDeferred=Be()}resolve(){this._dapDeferred.resolve(this._obj)}with(e){return this._dapDeferred.hasSettled()?e(this._obj):this._dapDeferred.promise.then(r=>e(r))}},bae=50,IU=(t,e)=>t.sourceReference===e.sourceReference&&Ty(t.path||"",e.path||""),wae=()=>`
//# sourceURL=eval-${(0,SU.randomBytes)(4).toString("hex")}.repl
`,QE=class{enqueue(e,r){if(!this.queue||this.queue.operation!==e){let n=this.queue?.result.then(r,r)??r(),i=this.queue={operation:e,result:n.finally(()=>{this.queue===i&&(this.queue=void 0)})}}return this.queue.result}},sp=class t{constructor(e,r,n,i,o,s,a,u,c,l,p,f,m,h){this.target=i;this.logger=s;this.evaluator=a;this.completer=u;this.launchConfig=c;this._breakpointManager=l;this.console=p;this.exceptionPause=f;this._smartStepper=m;this.shutdown=h;this._executionContexts=new Map;this._excludedCallers=[];this.stateQueue=new QE;this._onPausedEmitter=new z;this.disposed=!1;this.debuggerReady=Be();this.onPaused=this._onPausedEmitter.event;this._dap=new YE(n),this._sourceContainer=e,this._cdp=r,this.id=t._lastThreadId++,this.replVariables=new ma(o,this._cdp,n,c,this),e.onSourceMappedSteppingChange(()=>this.refreshStackTrace()),this._initialize()}static{this._lastThreadId=0}static{this._allThreadsByDebuggerId=new Map}setExcludedCallers(e){this._excludedCallers=e}cdp(){return this._cdp}name(){return this.target.name()}pausedDetails(){return this._pausedDetails}pausedVariables(){return this._pausedVariables}defaultExecutionContext(){for(let e of this._executionContexts.values())if(e.isDefault)return e}resume(){return this.stateQueue.enqueue("resume",async()=>(this._sourceContainer.clearDisabledSourceMaps(),!await this._cdp.Debugger.resume({})&&this._pausedDetails!==void 0?Ke(Oe.t("Unable to resume")):{allThreadsContinued:!1}))}pause(){return this.stateQueue.enqueue("pause",async()=>(this._expectedPauseReason={reason:"pause"},await this._cdp.Debugger.pause({})?{}:Ke(Oe.t("Unable to pause"))))}stepOver(){return this.stateQueue.enqueue("stepOver",async()=>{this._expectedPauseReason={reason:"step",direction:1};let e=await this.getCurrentSkipList(1);return await this._cdp.Debugger.stepOver({skipList:e})?{}:Ke(Oe.t("Unable to step next"))})}stepInto(e){return this.stateQueue.enqueue("stepInto",async()=>{this._waitingForStepIn={lastDetails:this._pausedDetails},this._expectedPauseReason={reason:"step",direction:0};let r=this._pausedDetails?.stepInTargets?.[e];if(r){let n=await this._cdp.Debugger.setBreakpoint({location:r.breakLocation});if(this._waitingForStepIn.intoTargetBreakpoint=n?.breakpointId,await this._cdp.Debugger.resume({}))return{}}else{let n=await this.getCurrentSkipList(0);if(await this._cdp.Debugger.stepInto({breakOnAsyncCall:!0,skipList:n}))return{}}return Ke(Oe.t("Unable to step in"))})}stepOut(){return this.stateQueue.enqueue("stepOut",async()=>(this._expectedPauseReason={reason:"step",direction:2},await this._cdp.Debugger.stepOut({})?{}:Ke(Oe.t("Unable to step out"))))}async getCurrentSkipList(e){if(!this._pausedDetails)return;let[r]=await this._pausedDetails.stackTrace.loadFrames(1);if(!r||!EU(r))return;let n=await r.getStepSkipList(e);if(n)return Ai.simplify(n).map(i=>({start:i.begin.base0,end:i.end.base0,scriptId:r.root.scriptId}))}_stackFrameNotFoundError(){return Ke(Oe.t("Stack frame not found"))}_evaluateOnAsyncFrameError(){return Ke(Oe.t("Unable to evaluate on async stack frame"))}async restartFrame(e){let r=this._pausedDetails?.stackTrace.frame(e.frameId)?.root;if(!r)return this._stackFrameNotFoundError();let n=r.callFrameId();return n?await this._cdp.Debugger.restartFrame({callFrameId:n,mode:"StepInto"})?(this._expectedPauseReason={reason:"frame_entry",description:Oe.t("Paused on frame entry")},r.canExplicitlyBeRestarted||await this._cdp.Debugger.stepInto({}),{}):Xe(Oe.t("Frame could not be restarted")):Xe(Oe.t("Cannot restart asynchronous frame"))}async stackTrace(e){return this._pausedDetails?this._pausedDetails.stackTrace.toDap(e):Ke(Oe.t("Thread is not paused"))}async scopes(e){let r=this._pausedDetails?this._pausedDetails.stackTrace.frame(e.frameId):void 0;return r?r.scopes():this._stackFrameNotFoundError()}async exceptionInfo(){let e=this._pausedDetails&&this._pausedDetails.exception;if(!e)return Ke(Oe.t("Thread is not paused on exception"));let r=qu(e);return{exceptionId:r.title,breakMode:"all",details:{stackTrace:r.stackTrace,evaluateName:void 0}}}async revealPage(){return this._cdp.Page.bringToFront({}),{}}async completions(e){let r;if(e.frameId!==void 0){if(r=this._pausedDetails?this._pausedDetails.stackTrace.frame(e.frameId)?.root:void 0,!r)return this._stackFrameNotFoundError();if(!r.callFrameId())return this._evaluateOnAsyncFrameError()}if(e.line===1&&e.text.startsWith("cd "))return{targets:this.getExecutionContextCompletions(e)};let n=await this.completer.completions({executionContextId:this._selectedContext?this._selectedContext.description.id:void 0,stackFrame:r,expression:e.text,position:new Nt(e.line||1,e.column)});return{targets:[...this.getExecutionContextCompletions(e),...n]}}getExecutionContextCompletions(e){if(e.line&&e.line>1)return[];let r=e.text.slice(0,e.column).trim();return[...this._executionContexts.values()].map(n=>`cd ${this.target.executionContextName(n.description)}`).filter(n=>n.startsWith(r)).map(n=>({label:n,start:0,length:e.text.length}))}async _evaluteWasm(e,r,n){if(!e)return;let i=e.root,o=i.callFrameId(),s=await i.scriptSource?.source;if(!Tu(s)||!o)return;let a=await s.sourceMap.value.promise;if(!a.evaluate)return;let u=new bt(e instanceof qh?e.inlineFrameIndex:0,i.rawPosition.base0.columnNumber),c=await a.evaluate(o,u,r.expression);if(c)return await n.createFloatingVariable(r.expression,c).toDap(r.context,r.format)}async _evaluteJs(e,r,n){let i=e?.root.callFrameId(),o=r.context==="clipboard"?{expression:kE.expr(r.expression,"2"),includeCommandLineAPI:!0,returnByValue:!0,objectGroup:"console"}:{expression:r.expression,includeCommandLineAPI:!0,objectGroup:"console",generatePreview:!0,timeout:r.context==="hover"?this.getHoverEvalTimeout():void 0};if(r.context==="repl"){if(o.expression=th(o.expression),o.expression.indexOf("await")!==-1){let u=O1(o.expression);u&&(o.expression=u,o.awaitPromise=!0)}o.expression+=wae()}r.evaluationOptions&&this.cdp().DotnetDebugger.setEvaluationOptions({options:r.evaluationOptions,type:"evaluation"});let s=this.evaluator.evaluate(i?{...o,callFrameId:i}:{...o,contextId:this._selectedContext?this._selectedContext.description.id:void 0},{isInternalScript:!1,stackFrame:e?.root});if(r.context==="repl")return await this._evaluateRepl(r,s,r.format);let a=await s;if(!a)throw new Z(Ke(Oe.t("Unable to evaluate")));if(a.exceptionDetails){let u=a.exceptionDetails.exception?qu(a.exceptionDetails.exception).title:a.exceptionDetails.text;throw u.startsWith("Uncaught")||(u="Uncaught "+u),new Z(Ke(u))}return n.createFloatingVariable(o.expression,a.result).toDap(r.context,r.format)}async evaluate(e){let r,n;if(e.frameId!==void 0){if(n=this._pausedDetails?this._pausedDetails.stackTrace.frame(e.frameId):void 0,!n)throw new Z(this._stackFrameNotFoundError());if(r=n.root.callFrameId(),!r)throw new Z(this._evaluateOnAsyncFrameError())}if(e.context==="repl"&&e.expression.startsWith("cd ")){let s=e.expression.substring(3).trim();for(let a of this._executionContexts.values())if(this.target.executionContextName(a.description)===s)return this._selectedContext=a,{result:`[${s}]`,variablesReference:0}}let i=r?this._pausedVariables:this.replVariables;if(!i)throw new Z(Ke(Oe.t("Unable to evaluate")));let o=await this._evaluteWasm(n,e,i)??await this._evaluteJs(n,e,i);return{type:o.type,result:o.value,variablesReference:o.variablesReference,namedVariables:o.namedVariables,indexedVariables:o.indexedVariables,memoryReference:o.memoryReference}}getHoverEvalTimeout(){let e=this.launchConfig.timeouts?.hoverEvaluation;if(e===void 0)return 500;if(!(e<=0))return e}async _evaluateRepl(e,r,n){let i=await r;if(!i)return{name:e.expression,value:"",variablesReference:0};if(i.exceptionDetails){let u=await new jh(i.exceptionDetails).toDap(this);throw new Z(d1(u.output))}let o=this._selectedContext&&this.defaultExecutionContext()!==this._selectedContext?`\x1B[33m[${this.target.executionContextName(this._selectedContext.description)}] `:"",s=await this.replVariables.createFloatingVariable(e.expression,i.result).toDap("repl",n),a=Mv("repl").budget;return s.variablesReference===0&&s.value.length===a&&setImmediate(()=>this.console.enqueue(this,{toDap:()=>({output:Oe.t("Output has been truncated to the first {0} characters. Run `{1}` to copy the full output.",a,`copy(${e.expression.trim()})`),category:"stdout"})})),{...s,value:`${o}${s.value}`}}_initialize(){this._cdp.Runtime.on("executionContextCreated",e=>{this._executionContextCreated(e.context)}),this._cdp.Runtime.on("executionContextDestroyed",e=>{this._executionContextDestroyed(e.executionContextId)}),this._cdp.Runtime.on("executionContextsCleared",()=>{this.launchConfig.noDebug||this._ensureDebuggerEnabledAndRefreshDebuggerId(),this.replVariables.clear(),this._executionContextsCleared()}),this._cdp.Inspector.on("targetReloadedAfterCrash",()=>{this._breakpointManager.reapply()}),this.launchConfig.outputCapture==="console"&&(this._cdp.Runtime.on("consoleAPICalled",e=>{this.console.dispatch(this,e)}),this._cdp.Runtime.on("exceptionThrown",e=>{this.console.enqueue(this,new jh(e.exceptionDetails))})),this._cdp.Runtime.on("inspectRequested",e=>{e.hints.copyToClipboard?this._copyObjectToClipboard(e.object):e.hints.queryObjects?this.console.enqueue(this,new Nv(e.object,this.cdp())):this._revealObject(e.object)}),this._cdp.Debugger.on("paused",async e=>this._onPaused(e)),this._cdp.Debugger.on("resumed",()=>this.onResumed()),this._cdp.Debugger.on("scriptParsed",e=>this._onScriptParsed(e)),this._cdp.Debugger.on("scriptFailedToParse",e=>this._onScriptParsed(e)),this._cdp.Runtime.enable({}),this._cdp.Profiler.enable({}),this.launchConfig.noDebug?this.logger.info("runtime.launch","Running with noDebug, so debug domains are disabled"):this._ensureDebuggerEnabledAndRefreshDebuggerId(),this.target.initialize(),this._dap.with(e=>e.thread({reason:"started",threadId:this.id}))}dapInitialized(){this._dap.resolve()}async getStepInTargets(e){let r=this._pausedDetails;if(!r)return[];let n=r.stackTrace.frames.find(l=>l.frameId===e);if(!(n instanceof Nr))return[];let i=await n.uiLocation();if(!i)return[];let o=r.event.callFrames[0].location,[s,a]=await Promise.all([this._breakpointManager.getBreakpointLocations(this,i.source,new Nt(i.lineNumber,1),new Nt(i.lineNumber+1,1)).then(l=>l.filter(p=>p.breakLocation.lineNumber!==o.lineNumber||p.breakLocation.columnNumber!==o.columnNumber)),i.source.content()]),u=r.stepInTargets?.length||0;r.stepInTargets=r.stepInTargets?.concat(s)||s;let c=a&&new Zs(a);return s.map((l,p)=>{let f=l.uiLocations.find(h=>h.source===i.source);if(!f)return;if(!c)return{id:u+p,label:`Column ${f}`,line:f.lineNumber,column:f.columnNumber};let m=F1(a.slice(c.getLineOffset(f.lineNumber-1),c.getLineOffset(f.lineNumber)),f.columnNumber-1);if(m)return{id:u+p,label:m.text,line:f.lineNumber,column:m.start+1,endLine:f.lineNumber,endColumn:m.end+1}}).filter(St)}async refreshStackTrace(){this._pausedDetails&&(this._pausedDetails=await this._createPausedDetails(this._pausedDetails.event),this._onThreadResumed(),await this._onThreadPaused(this._pausedDetails))}_executionContextCreated(e){let r=new Gv(e);this._executionContexts.set(e.id,r)}_executionContextDestroyed(e){let r=this._executionContexts.get(e);r&&(this._executionContexts.delete(e),r.remove(this._sourceContainer))}_executionContextsCleared(){this._removeAllScripts(),this._breakpointManager.executionContextWasCleared(),this._pausedDetails&&this.onResumed(),this._executionContexts.clear()}_ensureDebuggerEnabledAndRefreshDebuggerId(){this._cdp.Debugger.enable({}).then(e=>{this.debuggerReady.resolve(),e&&t._allThreadsByDebuggerId.set(e.debuggerId,this)}),this.exceptionPause.apply(this._cdp)}async _onPaused(e){let r=e.hitBreakpoints??[],n=e.reason==="Break on start"||e.reason==="debugCommand",i=e.callFrames[0]?.location,o=e.data?.scriptId||i?.scriptId,s=o&&(e.reason==="instrumentation"||this._breakpointManager.isEntrypointBreak(r,o)||r.some(l=>this._pauseOnSourceMapBreakpointIds?.includes(l)));if(this.evaluator.setReturnedValue(e.callFrames[0]?.returnValue),s){this.launchConfig.perScriptSourcemaps==="auto"&&this._shouldEnablePerScriptSms(e)&&await this._enablePerScriptSourcemaps(),e.data&&!n&&(e.data.__rewriteAs="breakpoint");let l=this._expectedPauseReason;if(!(o&&await this._handleSourceMapPause(o,i))){if(!n){if(await this.isCrossThreadStep(e))e.data={...e.data,__rewriteAs:"step"};else if(!await this._breakpointManager.shouldPauseAt(e,r,this.target.entryBreakpoint,!0))if(l?.reason==="step"){if(l.direction!==0)return this._cdp.Debugger.stepOut({})}else return this.resume()}}}else if(!(e.reason==="exception"||e.reason==="promiseRejection"?await this.exceptionPause.shouldPauseAt(e):await this._breakpointManager.shouldPauseAt(e,r,this.target.entryBreakpoint,!1)))return this.resume();let a=this._waitingForStepIn?.intoTargetBreakpoint;if(a){e.hitBreakpoints?.includes(a)?(this._waitingForStepIn.intoTargetBreakpoint=void 0,await this._cdp.Debugger.removeBreakpoint({breakpointId:a}),await this._cdp.Debugger.stepInto({breakOnAsyncCall:!1})):this.resume();return}if(n&&("continueOnAttach"in this.launchConfig&&this.launchConfig.continueOnAttach||this.launchConfig.type==="pwa-extensionHost"||this.target instanceof np)){this.resume();return}let u=this._pausedDetails=await this._createPausedDetails(e);if(this._excludedCallers.length&&await this._matchesExcludedCaller(this._pausedDetails.stackTrace)){this.logger.info("runtime","Skipping pause due to excluded caller"),this.resume();return}let c=await this._smartStepper.getSmartStepDirection(u,this._expectedPauseReason);if(this._pausedDetails===u){switch(c){case 0:return this.stepInto();case 2:return this.stepOut();case 1:return this.stepOver();default:}this._waitingForStepIn=void 0,this._pausedVariables=this.replVariables.createDetached(),await this._onThreadPaused(u)}}async _matchesExcludedCaller(e){if(!this._excludedCallers.length)return!1;let r=e.frames[0],n=r instanceof Nr&&await r.uiLocation();if(!n)return!1;let i,o,s=[];for(let{caller:a,target:u}of this._excludedCallers)if(!(u.line!==n.lineNumber||u.column!==n.columnNumber)&&(i??=await n.source.toDapShallow(),!!IU(i,u.source))){o||(o=await e.loadFrames(bae).then(l=>Promise.all(l.slice(1).filter(du(Nr)).map(p=>p.uiLocation()))));for(let c=0;c<o.length;c++){let l=o[c];if(!l||l.lineNumber!==a.line||l.columnNumber!==a.column)continue;let p=s[c]??=await l.source.toDapShallow();if(IU(p,a.source))return!0}}return!1}onResumed(){this._pausedDetails=void 0,this._pausedVariables=void 0,this.evaluator.setReturnedValue(void 0),this._onThreadResumed()}async dispose(){this.disposed=!0,await this.shutdown.shutdown();for(let[e,r]of t._allThreadsByDebuggerId)r===this&&t._allThreadsByDebuggerId.delete(e);this._removeAllScripts(!0),this._executionContextsCleared(),await this._dap.with(e=>e.thread({reason:"exited",threadId:this.id}))}rawLocation(e){if("location"in e){let r=e;return{lineNumber:Math.max(0,r.location.lineNumber)+1,columnNumber:Math.max(0,r.location.columnNumber||0)+1,scriptId:r.location.scriptId}}return{lineNumber:Math.max(0,e.lineNumber)+1,columnNumber:Math.max(0,e.columnNumber||0)+1,scriptId:e.scriptId}}rawLocationToUiLocation(e){if(!e.scriptId||this.disposed||this.launchConfig.noDebug)return;let r=this._sourceContainer.getScriptById(e.scriptId);return r?r.resolvedSource?this._sourceContainer.preferredUiLocation({...r.resolvedSource.offsetScriptToSource(e),source:r.resolvedSource}):r.source.then(n=>this._sourceContainer.preferredUiLocation({...n.offsetSourceToScript(e),source:n})):this.rawLocationToUiLocationWithWaiting(e)}async rawLocationToUiLocationWithWaiting(e){let r=e.scriptId?await this.getScriptByIdOrWait(e.scriptId):void 0;if(!r)return;let n=await r.source;return this._sourceContainer.preferredUiLocation({...n.offsetScriptToSource(e),source:n})}getScriptById(e){return this._sourceContainer.getScriptById(e)}getScriptByIdOrWait(e,r=500){return this._sourceContainer.getScriptById(e)||this.waitForScriptId(e,r)}waitForScriptId(e,r){return new Promise(n=>{let i=this._sourceContainer.onScript(s=>{s.scriptId===e&&(n(s),i.dispose(),clearTimeout(o))}),o=setTimeout(()=>{n(void 0),i.dispose()},r)})}async renderDebuggerLocation(e){let r=this.rawLocation(e),n=await this.rawLocationToUiLocation(r);return n?`@ ${await n.source.prettyName()}:${n.lineNumber}`:`@ VM${r.scriptId||"XX"}:${r.lineNumber}`}async updateCustomBreakpoints(e){if(!this.target.supportsCustomBreakpoints())return;this._enabledCustomBreakpoints??=new Set;let r=new Set(e),n=[];for(let i of r)this._enabledCustomBreakpoints.has(i)||n.push(ip().get(i)?.apply(this._cdp,!0));for(let i of this._enabledCustomBreakpoints)r.has(i)||n.push(ip().get(i)?.apply(this._cdp,!1));this._enabledCustomBreakpoints=r,await Promise.all(n)}async _createPausedDetails(e){let r=e.reason==="assert"||e.reason==="exception"||e.reason==="promiseRejection"||e.reason==="other"||e.reason==="ambiguous",n=e.hitBreakpoints?.filter(o=>!this._breakpointManager.isEntrypointCdpBreak(o))||[];if((n.length||!r)&&this._sourceContainer.clearDisabledSourceMaps(),e.hitBreakpoints&&this._sourceMapDisabler)for(let o of this._sourceMapDisabler(e.hitBreakpoints))this._sourceContainer.disableSourceMapForSource(o);let i=ss.fromDebugger(this,e.callFrames,e.asyncStackTrace,e.asyncStackTraceId);if(e.data?.__rewriteAs==="breakpoint")return{thread:this,event:e,stackTrace:i,reason:"breakpoint",description:Oe.t("Paused on breakpoint")};if(e.data?.__rewriteAs==="step")return{thread:this,event:e,stackTrace:i,reason:"step",description:Oe.t("Paused")};switch(e.reason){case"assert":return{thread:this,event:e,stackTrace:i,reason:"exception",description:Oe.t("Paused on assert")};case"debugCommand":return{thread:this,event:e,stackTrace:i,reason:"pause",description:Oe.t("Paused on debug() call")};case"DOM":return{thread:this,event:e,stackTrace:i,reason:"data breakpoint",description:Oe.t("Paused on DOM breakpoint")};case"EventListener":return this._resolveEventListenerBreakpointDetails(i,e);case"exception":return{thread:this,event:e,stackTrace:i,reason:"exception",description:Oe.t("Paused on exception"),exception:e.data};case"promiseRejection":return{thread:this,event:e,stackTrace:i,reason:"exception",description:Oe.t("Paused on {0}","promise rejection"),exception:e.data};case"instrumentation":return e.data&&e.data.scriptId?{thread:this,event:e,stackTrace:i,reason:"step",description:Oe.t("Paused")}:{thread:this,event:e,stackTrace:i,reason:"function breakpoint",description:Oe.t("Paused on instrumentation breakpoint")};case"XHR":return{thread:this,event:e,stackTrace:i,reason:"data breakpoint",description:Oe.t("Paused on XMLHttpRequest or fetch")};case"OOM":return{thread:this,event:e,stackTrace:i,reason:"exception",description:Oe.t("Paused before Out Of Memory exception")};default:if(n.length){let o=!1,s=this.target.entryBreakpoint;if(s&&n.includes(s.cdpId)){o=!0;let a=this._sourceContainer.source({path:vt(s.path)});a!==void 0&&(o=!(await this._sourceContainer.currentSiblingUiLocations({lineNumber:e.callFrames[0].location.lineNumber+1,columnNumber:(e.callFrames[0].location.columnNumber||0)+1,source:a}))?.some(c=>this._breakpointManager.hasAtLocation(c)))}return o||this._breakpointManager.registerBreakpointsHit(n),{thread:this,event:e,stackTrace:i,hitBreakpoints:e.hitBreakpoints,reason:o?"entry":"breakpoint",description:Oe.t("Paused on breakpoint")}}return this._expectedPauseReason?{thread:this,event:e,stackTrace:i,description:Oe.t("Paused"),...this._expectedPauseReason}:{thread:this,event:e,stackTrace:i,reason:"pause",description:Oe.t("Paused on debugger statement")}}}_resolveEventListenerBreakpointDetails(e,r){let n=r.data,i=n&&n.eventName||"",o=ip().get(i);if(o){let s=o.details(n);return{thread:this,event:r,stackTrace:e,reason:"function breakpoint",description:s.short,text:s.long}}return{thread:this,event:r,stackTrace:e,reason:"function breakpoint",description:Oe.t("Paused on event listener")}}_clearDebuggerConsole(){return{category:"console",output:"\x1B[2J"}}_removeAllScripts(e=!1){this._sourceContainer.clear(e)}_onScriptParsed(e){if(e.url.endsWith(".cdp")||(kr(e.url)&&(e.url=ke(e.url)),this._sourceContainer.getScriptById(e.scriptId)))return;e.url&&(e.url=this.target.scriptUrlToUrl(e.url));let r=this._executionContexts.get(e.executionContextId);r||(this.logger.info("internal","Creating missing execution context id",e),r=new Gv({id:e.executionContextId,name:"<autofilled>",origin:"",uniqueId:String(e.executionContextId)}),this._executionContexts.set(e.executionContextId,r));let n=async()=>{let o=this._sourceContainer.getSourceByOriginalUrl(e.url);if(e.hash&&o?.contentHash===e.hash)return o.addScript({scriptId:e.scriptId,url:e.url,embedderName:e.embedderName,hasSourceURL:!!e.hasSourceURL,executionContextId:e.executionContextId}),o;let s=async()=>{let p=await this._cdp.Debugger.getScriptSource({scriptId:e.scriptId});return p?p.scriptSource:void 0},a=e.startLine||e.startColumn?{lineOffset:e.startLine,columnOffset:e.startColumn}:void 0,u=e.url.endsWith("#vscode-extension")?{lineOffset:2,columnOffset:0}:void 0,c;e.sourceMapURL&&(c=mr(e.sourceMapURL)?e.sourceMapURL:e.url&&Ys(e.url,e.sourceMapURL)||e.url,c||this._dap.with(p=>o1(p,`Could not load source map from ${e.sourceMapURL}`)));let l=await this._sourceContainer.addSource(e,s,c,a,u,!e.hasSourceURL&&this.launchConfig.enableContentValidation?e.hash:void 0);return l.addScript({scriptId:e.scriptId,url:e.url,embedderName:e.embedderName,hasSourceURL:!!e.hasSourceURL,executionContextId:e.executionContextId}),l},i={url:e.url,hasSourceURL:!!e.hasSourceURL,embedderName:e.embedderName,scriptId:e.scriptId,executionContextId:e.executionContextId,source:n()};i.source.then(o=>i.resolvedSource=o),r.scripts.push(i),this._sourceContainer.addScriptById(i),(e.sourceMapURL||e.scriptLanguage==="WebAssembly")&&this._getOrStartLoadingSourceMaps(i)}async _handleSourceMapPause(e,r){this._pausedForSourceMapScriptId=e;let n=this._sourceContainer.sourceMapTimeouts().sourceMapMinPause,i=n+this._sourceContainer.sourceMapTimeouts().sourceMapCumulativePause,o=this._sourceContainer.getScriptById(e);if(!o)return this._pausedForSourceMapScriptId=void 0,!1;let s=new Yn,a=await Promise.race([this._getOrStartLoadingSourceMaps(o),Le(i)]),u=s.elapsed().ms,c=this._sourceContainer.sourceMapTimeouts().sourceMapCumulativePause-Math.max(u-n,0);this._sourceContainer.setSourceMapTimeouts({...this._sourceContainer.sourceMapTimeouts(),sourceMapCumulativePause:c}),this.logger.verbose("internal","Blocked execution waiting for source-map",{timeSpentWallClockInMs:u,sourceMapCumulativePause:c}),a||this._dap.with(f=>f.output({category:"stderr",output:Oe.t("WARNING: Processing source-maps of {0} took longer than {1} ms so we continued execution without waiting for all the breakpoints for the script to be set.",o.url||o.scriptId,i)})),console.assert(this._pausedForSourceMapScriptId===e),this._pausedForSourceMapScriptId=void 0;let l=r?.lineNumber||0,p=r?.columnNumber;return!!a?.map(Zo).some(f=>f.lineNumber===l&&(p===void 0||p===f.columnNumber))}_getOrStartLoadingSourceMaps(e){let r=this._executionContexts.get(e.executionContextId);if(!r)return Promise.resolve([]);let n=r.sourceMapLoads.get(e.scriptId);if(n)return n;let i=e.source.then(o=>this._sourceContainer.waitForSourceMapSources(o)).then(o=>o.length&&this._scriptWithSourceMapHandler?this._scriptWithSourceMapHandler(e,o):[]);return r.sourceMapLoads.set(e.scriptId,i),i}async _revealObject(e){if(e.type!=="function"||e.objectId===void 0)return;let r=await this._cdp.Runtime.getProperties({objectId:e.objectId,ownProperties:!0});if(r)for(let n of r.internalProperties||[]){if(n.name!=="[[FunctionLocation]]"||!n.value||n.value.subtype!=="internal#location")continue;let i=await this.rawLocationToUiLocation(this.rawLocation(n.value.value));i&&this._sourceContainer.revealUiLocation(i);break}}async _copyObjectToClipboard(e){if(!e.objectId){this._dap.with(r=>r.copyRequested({text:ju(e,"copy")}));return}try{let r=await fU({cdp:this.cdp(),objectId:e.objectId,args:[2],silent:!0,returnByValue:!0});this._dap.with(n=>n.copyRequested({text:r.value}))}catch{}finally{this.cdp().Runtime.releaseObject({objectId:e.objectId}).catch(()=>{})}}async _onThreadPaused(e){this._expectedPauseReason=void 0,this._onPausedEmitter.fire(e);let r;e.hitBreakpoints&&(r=await Promise.race([Le(1e3).then(()=>{}),Promise.all(e.hitBreakpoints.map(n=>this._breakpointManager._resolvedBreakpoints.get(n)).filter(du(Gn)).map(n=>n.untilSetCompleted().then(()=>n.dapId)))])),await Le(0),this._dap.with(n=>n.stopped({reason:e.reason,description:e.description,threadId:this.id,text:e.text,hitBreakpointIds:r,allThreadsStopped:!1}))}_onThreadResumed(){this._dap.with(e=>e.continued({threadId:this.id,allThreadsContinued:!1}))}isCrossThreadStep(e){if(!e.asyncStackTraceId||!e.asyncStackTraceId.debuggerId)return!1;let r=t.threadForDebuggerId(e.asyncStackTraceId.debuggerId);if(!r||!r._waitingForStepIn?.lastDetails)return!1;let n=r._waitingForStepIn.lastDetails.stackTrace;return r._cdp.Debugger.getStackTrace({stackTraceId:e.asyncStackTraceId}).then(i=>!i||!i.stackTrace.callFrames.length||!Nr.fromRuntime(r,i.stackTrace.callFrames[0],!1).equivalentTo(n.frames[0])?!1:(r._waitingForStepIn=void 0,!0))}async setScriptSourceMapHandler(e,r){this._scriptWithSourceMapHandler=r;let n=e&&this._sourceContainer.sourceMapTimeouts().sourceMapMinPause&&r;if(n&&!this._pauseOnSourceMapBreakpointIds?.length){await this.debuggerReady.promise;let i=await Promise.all([this._cdp.Debugger.setInstrumentationBreakpoint({instrumentation:"beforeScriptWithSourceMapExecution"}),this._cdp.Debugger.setBreakpointByUrl({lineNumber:0,columnNumber:0,urlRegex:"\\.[wW][aA][sS][mM]"})]);this._pauseOnSourceMapBreakpointIds=i.map(o=>o?.breakpointId).filter(St)}else if(!n&&this._pauseOnSourceMapBreakpointIds?.length){let i=this._pauseOnSourceMapBreakpointIds;this._pauseOnSourceMapBreakpointIds=void 0,await Promise.all(i.map(o=>this._cdp.Debugger.removeBreakpoint({breakpointId:o})))}return!!this._pauseOnSourceMapBreakpointIds?.length}async _enablePerScriptSourcemaps(){await this._breakpointManager.updateEntryBreakpointMode(this,1),await this.setScriptSourceMapHandler(!1,this._scriptWithSourceMapHandler)}_shouldEnablePerScriptSms(e){return e.data?.url.includes("@vite/client")?!0:e.reason!=="instrumentation"||!mr(e.data?.sourceMapURL)?!1:e.data.url?.startsWith("webpack")||e.data.url?.startsWith("ng:")}setSourceMapDisabler(e){this._sourceMapDisabler=e}static threadForDebuggerId(e){return t._allThreadsByDebuggerId.get(e)}async replacePathsInStackTrace(e){let r=[];for(let i of new da(e)){if(typeof i=="string"){r.push(i);continue}let o=this._sourceContainer.getSourceByOriginalUrl(ke(i.path))||this._sourceContainer.getSourceByOriginalUrl(i.path);if(!o){r.push(i.toString());continue}r.push(this._sourceContainer.preferredUiLocation({columnNumber:i.position.base1.columnNumber,lineNumber:i.position.base1.lineNumber,source:o}).then(({source:s,lineNumber:a,columnNumber:u})=>`${s.absolutePath}:${a}:${u}`))}return(await Promise.all(r)).join("")}};var EU=t=>typeof t.uiLocation=="function",ss=class t{constructor(e){this.thread=e;this.frames=[];this._frameById=new Map;this._lastInlineWasmExpanded=Promise.resolve(0);this._lastFrameThread=e}static fromRuntime(e,r){let n=new t(e);for(let i of r.callFrames)i.url.endsWith(".cdp")||n.frames.push(Nr.fromRuntime(e,i,!1));return r.parentId?(n._asyncStackTraceId=r.parentId,console.assert(!r.parent)):n._appendStackTrace(e,r.parent),n}static fromDebugger(e,r,n,i){let o=new t(e);for(let s of r)o._appendFrame(Nr.fromDebugger(e,s));return i?(o._asyncStackTraceId=i,console.assert(!n)):o._appendStackTrace(e,n),o}async loadFrames(e,r){return await this.expandAsyncStack(e,r),await this.expandWasmFrames(),this.frames}async expandAsyncStack(e,r){for(;this.frames.length<e&&this._asyncStackTraceId;){if(this._asyncStackTraceId.debuggerId&&(this._lastFrameThread=sp.threadForDebuggerId(this._asyncStackTraceId.debuggerId)),!this._lastFrameThread){this._asyncStackTraceId=void 0;break}r&&this._lastFrameThread.cdp().DotnetDebugger.setEvaluationOptions({options:{noFuncEval:r},type:"stackFrame"});let n=await this._lastFrameThread.cdp().Debugger.getStackTrace({stackTraceId:this._asyncStackTraceId});this._asyncStackTraceId=void 0,n&&this._appendStackTrace(this._lastFrameThread,n.stackTrace)}}expandWasmFrames(){return this._lastInlineWasmExpanded=this._lastInlineWasmExpanded.then(async e=>{for(;e<this.frames.length;e++){let r=this.frames[e];if(!(r instanceof Nr))continue;let n=r.scriptSource?.resolvedSource;if(!Tu(n))continue;let i=await n.sourceMap.value.promise;if(!i.getFunctionStack)continue;let o=await i.getFunctionStack(r.rawPosition);if(o.length===0)continue;let s=[];for(let a=0;a<o.length;a++){let u=new qh({source:n,thread:this.thread,inlineFrameIndex:a,name:o[a].name,root:r});this._frameById.set(u.frameId,u),s.push(u)}this._spliceFrames(e,1,...s),e+=o.length-1}return e})}frame(e){return this._frameById.get(e)}_appendStackTrace(e,r){for(console.assert(!r||!this._asyncStackTraceId);r;){if(r.description==="async function"&&r.callFrames.length&&r.callFrames.shift(),r.callFrames.length){this._appendFrame(new Kv(r.description||"async"));for(let n of r.callFrames)this._appendFrame(Nr.fromRuntime(e,n,!0))}r.parentId&&(this._asyncStackTraceId=r.parentId,console.assert(!r.parent)),r=r.parent}}_spliceFrames(e,r,...n){this.frames.splice(e,r,...n);for(let i of n)i instanceof Kv||this._frameById.set(i.frameId,i)}_appendFrame(e){this._spliceFrames(this.frames.length,0,e)}async formatAsNative(){return await this.formatWithMapper(e=>e.formatAsNative())}async format(){return await this.formatWithMapper(e=>e.format())}async formatWithMapper(e){let r=await this.loadFrames(50);for(let i=r.length-1;i>=0;i--){let o=r[i];if(o instanceof Nr&&o.isReplEval){r=r.slice(0,i+1);break}}let n=r.map(e);return(await Promise.all(n)).join(`
`)+`
`}async toDap(e){let r=e.startFrame||0,n=(e.levels||50)+r,i=await this.loadFrames(n,e.noFuncEval);n=Math.min(i.length,e.levels?n:i.length);let o=[];for(let s=r;s<n;s++)o.push(i[s].toDap(e.format));return{stackFrames:await Promise.all(o),totalFrames:this._asyncStackTraceId?1e6:i.length}}},eD=Ug(),Kv=class{constructor(e="async"){this.label=e;this.frameId=eD()}async toDap(){return{name:this.label,id:0,line:0,column:0,presentationHint:"label"}}async formatAsNative(){return`    --- ${this.label} ---`}async format(){return`\u25C0 ${this.label} \u25B6`}},DU="<anonymous>",_ae=/^class\s+(.+) {($|\n)/;async function Aae(t,e,r){if(!e.functionName)return DU;if(e.functionName.includes("."))return e.functionName;let n;if(e.this.objectId&&r&&(n=(await t.cdp().Runtime.callFunctionOn({functionDeclaration:Bv.decl("64","null"),objectId:e.this.objectId,returnByValue:!0}))?.result.value),!n&&e.this.description){n=e.this.description;let s=_ae.exec(n);s&&(n=s[1])}if(!n)return e.functionName;let i=n.indexOf(`
`);i!==-1&&(n=n.slice(0,i).trim());let o=e.functionName;return n===o?`${n}.constructor`:n?`${n}.${o}`:o}function Iae(t){return t.functionName||DU}var Nr=class t{constructor(e,r,n,i=!1){this.callFrame=r;this.isAsync=i;this.frameId=eD();this.root=this;this.getLocationInfo=Ae(async()=>{let e=this.uiLocation(),r=await ME(this),n=this.overrideName||("this"in this.callFrame?await Aae(this._thread,this.callFrame,r===0):Iae(this.callFrame));return{isSmartStepped:r,name:n,uiLocation:await e}});this.completions=Ae(async()=>{if(!this._scope)return[];let e=this._thread.pausedVariables();if(!e)return[];let r=[];for(let i=0;i<this._scope.chain.length;i++){let o=this._scopeVariable(i,this._scope);o&&r.push(e.getVariableNames({variablesReference:o.id}).then(s=>s.map(a=>({label:a,type:"property"}))))}let n=await Promise.all(r);return[].concat(...n)});this._rawLocation=n,this.uiLocation=Ae(()=>e.rawLocationToUiLocation(n)),this._thread=e;let o=n.scriptId?e.getScriptById(n.scriptId):void 0;this.isReplEval=o?o.url.endsWith(".repl"):!1}get rawPosition(){return new Nt(this._rawLocation.lineNumber,this._rawLocation.columnNumber)}static fromRuntime(e,r,n){return new t(e,r,e.rawLocation(r),n)}static fromDebugger(e,r){let n=new t(e,r,e.rawLocation(r));return n._scope={chain:r.scopeChain,thisObject:r.this,returnValue:r.returnValue,variables:new Array(r.scopeChain.length).fill(void 0),callFrameId:r.callFrameId},n}get scriptId(){return"scriptId"in this.callFrame?this.callFrame.scriptId:this.callFrame.location.scriptId}get scriptSource(){return this._thread._sourceContainer.getScriptById(this.scriptId)}get canExplicitlyBeRestarted(){return!!this.callFrame.canBeRestarted}equivalentTo(e){return e instanceof t&&e._rawLocation.columnNumber===this._rawLocation.columnNumber&&e._rawLocation.lineNumber===this._rawLocation.lineNumber&&e._rawLocation.scriptId===this._rawLocation.scriptId}callFrameId(){return this._scope?this._scope.callFrameId:void 0}async scopes(){let e=this._scope;if(!e)throw new Z(m1());return{scopes:(await Promise.all(e.chain.map(async(n,i)=>{let o="",s;switch(n.type){case"global":o=ln.t("Global");break;case"local":o=ln.t("Local"),s="locals";break;case"with":o=ln.t("With Block"),s="locals";break;case"closure":o=ln.t("Closure"),s="arguments";break;case"catch":o=ln.t("Catch Block"),s="locals";break;case"block":o=ln.t("Block"),s="locals";break;case"script":o=ln.t("Script");break;case"eval":o=ln.t("Eval");break;case"module":o=ln.t("Module");break;default:o=n.type.substr(0,1).toUpperCase()+n.type.substr(1);break}n.name&&n.type==="closure"?o=ln.t("Closure ({0})",n.name):n.name&&(o=`${o}: ${n.name}`);let a=this._scopeVariable(i,e);if(!a)return;let u={name:o,presentationHint:s,expensive:n.type==="global",variablesReference:a.id};if(n.startLocation){let c=this._thread.rawLocation(n.startLocation),l=await this._thread.rawLocationToUiLocation(c);if(u.line=(l||c).lineNumber,u.column=(l||c).columnNumber,l&&(u.source=await l.source.toDap()),n.endLocation){let p=this._thread.rawLocation(n.endLocation),f=await this._thread.rawLocationToUiLocation(p);u.endLine=(f||p).lineNumber,u.endColumn=(f||p).columnNumber}}return u}))).filter(St)}}getStepSkipList(e){return Promise.resolve(void 0)}async toDap(e){let{isSmartStepped:r,name:n,uiLocation:i}=await this.getLocationInfo(),o=i?await i.source.toDap():void 0,s=r?"deemphasize":"normal";r&&o&&(o.origin=r===1?ln.t("Skipped by smartStep"):ln.t("Skipped by skipFiles"));let a=(i||this._rawLocation).lineNumber,u=(i||this._rawLocation).columnNumber,c=n;return o&&e&&(e.module&&(c+=` [${o.name}]`),e.line&&(c+=` Line ${a}`)),{id:this.frameId,name:c,line:a,column:u,source:o,presentationHint:s,canRestart:this.callFrame.canBeRestarted??!this.isAsync}}async formatAsNative(){let{name:e,uiLocation:r}=await this.getLocationInfo(),n=await r?.source.existingAbsolutePath()||await r?.source.prettyName()||this.callFrame.url,{lineNumber:i,columnNumber:o}=r||this._rawLocation;return`    at ${e} (${n}:${i}:${o})`}async format(){let{name:e,uiLocation:r}=await this.getLocationInfo(),n=await r?.source.prettyName()||"<unknown>",i=r||this._rawLocation,o=`${e} @ ${n}:${i.lineNumber}`;return i.columnNumber>1&&(o+=`:${i.columnNumber}`),o}_scopeVariable(e,r){let n=r.variables[e];if(n)return n;let i={stackFrame:this,callFrameId:r.callFrameId,scopeNumber:e},o=[];e===0&&(r.thisObject&&o.push({name:"this",value:r.thisObject}),r.returnValue&&o.push({name:ln.t("Return value"),value:r.returnValue}));let s=this._thread.pausedVariables();if(!s)return;let a=s.createScope(r.chain[e].object,i,o);return r.variables[e]=a}},ZE={scopes:[]},qh=class{constructor(e){this.frameId=eD();this.name=e.name,this.root=e.root,this.thread=e.thread,this.source=e.source,this.inlineFrameIndex=e.inlineFrameIndex,this.wasmPosition=new bt(this.inlineFrameIndex,this.root.rawPosition.base0.columnNumber),this.uiLocation=Ae(()=>e.thread._sourceContainer.preferredUiLocation({columnNumber:e.root.rawPosition.base1.columnNumber,lineNumber:e.inlineFrameIndex+1,source:e.source}))}async formatAsNative(){let{columnNumber:e,lineNumber:r,source:n}=await this.uiLocation();return`    at ${this.name} (${n.url}:${r}:${e})`}async format(){let{columnNumber:e,lineNumber:r,source:n}=await this.uiLocation(),i=await n.prettyName()||"<unknown>";return`${this.name} @ ${i}:${r}:${e}`}async toDap(){let{columnNumber:e,lineNumber:r,source:n}=await this.uiLocation();return Promise.resolve({id:this.frameId,name:this.name,column:e,line:r,source:await n.toDapShallow()})}async getStepSkipList(e){let r=this.source.sourceMap.value.settledValue;if(!r?.getStepSkipList)return;let n=await this.uiLocation();return n?r.getStepSkipList(e,this.wasmPosition,n.source.compiledToSourceUrl.get(this.source),new Nt(n.lineNumber,n.columnNumber)):r.getStepSkipList(e,this.root.rawPosition)}async scopes(){let e=this.source.sourceMap.value.settledValue,r=this.root.callFrameId();if(!e||!r)return ZE;let n=await e.getVariablesInScope?.(r,this.wasmPosition);if(!n)return ZE;let i=this.thread.pausedVariables();if(!i)return ZE;let o={stackFrame:this.root,callFrameId:r,scopeNumber:0};return{scopes:await Promise.all([...W1(n,s=>s.scope)].map(([s,a])=>i.createWasmScope(s,a,o).toDap("propertyValue").then(u=>({name:u.name,variablesReference:u.variablesReference,expensive:s!=="LOCAL"}))))}}};var CU=I(_e());var Vu=class{constructor(e){this.event=e;this.stackTrace=Ae(e=>this.event.stackTrace?ss.fromRuntime(e,this.event.stackTrace):void 0);this.getUiLocation=Ae(async e=>{let r=this.stackTrace(e);if(!r)return;let n;for(let i of r.frames){if(!(i instanceof Nr))continue;let o=await i.uiLocation();if(o&&(n||(n=o),!o.source.blackboxed()))return{source:await o.source.toDap(),line:o.lineNumber,column:o.columnNumber}}if(n)return{source:await n.source.toDap(),line:n.lineNumber,column:n.columnNumber}})}formatDefaultString(e,r,n=!1){let o=r.length>1&&r[0].type==="string"?PE(r[0].value,r.slice(1),$E):PE("",r,$E),s=o.result+`
`;return o.usedAllSubs&&!r.some(Uu)?{output:s}:this.formatComplexStringOutput(e,s,r,n)}async formatComplexStringOutput(e,r,n,i){(n.some(s=>s.subtype==="error")||da.isStackLike(r))&&(await this.getUiLocation(e),r=await e.replacePathsInStackTrace(r),i=!0);let o=e.replVariables.createVariableForOutput(r,n,i?this.stackTrace(e):void 0);return{output:r,variablesReference:o.id}}},zv=class extends Vu{async toDap(e){return this.event.args[0]?.value==="console.assert"&&(this.event.args[0].value=CU.t("Assertion failed")),{category:"stderr",...await this.formatDefaultString(e,this.event.args,!0),...await this.getUiLocation(e)}}},Gu=class extends Vu{constructor(r,n,i){super(r);this.includeStack=n;this.category=i}async toDap(r){return{category:this.category,...await this.formatDefaultString(r,this.event.args,this.includeStack),...await this.getUiLocation(r)}}},ga=class extends Gu{constructor(e){super(e,!1,"stdout")}},Xv=class extends Gu{constructor(e){super(e,!0,"stdout")}},Jv=class extends Gu{constructor(e){super(e,!0,"stderr")}},Yv=class extends Gu{constructor(e){super(e,!0,"stderr")}},Qv=class extends Vu{async toDap(e){return{category:"stdout",group:this.event.type==="startGroupCollapsed"?"startCollapsed":"start",...await this.formatDefaultString(e,this.event.args),...await this.getUiLocation(e)}}},Zv=class extends Gu{constructor(e){super(e,!1,"stdout")}async toDap(e){return this.event.args[0]?.preview?{category:"stdout",output:"",variablesReference:e.replVariables.createVariableForOutput("",this.event.args,void 0,this.event.type).id,...await this.getUiLocation(e)}:super.toDap(e)}};var jh=class extends Vu{constructor(){super(...arguments);this.stackTrace=Ae(r=>{if(this.event.stackTrace)return ss.fromRuntime(r,this.event.stackTrace);if(this.event.scriptId)return ss.fromRuntime(r,{callFrames:[{functionName:"(program)",lineNumber:this.event.lineNumber,columnNumber:this.event.columnNumber,scriptId:this.event.scriptId,url:this.event.url||""}]})})}async toDap(r){let n=this.event.exception?qu(this.event.exception):{title:""},i=n.title;i.startsWith("Uncaught")||(i=`Uncaught ${this.event.exception?.className??"Error"} `+i);let o=this.stackTrace(r),s=this.event.exception&&!n.stackTrace?[this.event.exception]:[];return da.isStackLike(i)?i=await r.replacePathsInStackTrace(i):o&&(i+=`
`+await o.formatAsNative()),{category:"stderr",output:i,variablesReference:o||s.length?r.replVariables.createVariableForOutput(i,s,o).id:void 0,...await this.getUiLocation(r)}}};var eb=Symbol("IConsole");var Vh=I(J());var PU=I(J());var Ha=Symbol("IShutdownParticipants"),ap=class{constructor(){this.participants=[]}register(e,r){if(this.shutdownStage!==void 0&&this.shutdownStage>=e)return r(),Ml;for(;this.participants.length<=e;)this.participants.push(new Set);return this.participants[e].add(r),{dispose:()=>this.participants[e].delete(r)}}async shutdown(){for(this.shutdownStage=0;this.shutdownStage<this.participants.length;this.shutdownStage++)await Promise.all([...this.participants[this.shutdownStage]].map(e=>e()))}};ap=C([(0,PU.injectable)()],ap);var Wh=class{toDap(){return{category:"console",output:"\x1B[2J"}}},tb=class{toDap(){return{category:"stdout",output:"",group:"end"}}};var rb=class{constructor(e){this.sink=e;this.q=[];this.disposed=!1;this.onDrainedEmitter=new z;this.onDrained=this.onDrainedEmitter.event}get length(){return this.q.length}enqueue(e){this.disposed||(this.q.push(new tD(e)),this.q.length===1&&this.process())}dispose(){this.disposed=!0,this.q=[]}async process(){let e=this.q.findIndex(r=>r.value===LU);e===0?await this.q[0].wait:e===-1?(this.sink(xU(this.q)),this.q=[]):(this.sink(xU(this.q.slice(0,e))),this.q=this.q.slice(e)),this.q.length?this.process():this.onDrainedEmitter.fire()}},xU=t=>t.map(e=>e.value).filter(e=>e!==TU),LU=Symbol("unsettled"),TU=Symbol("unsettled"),tD=class{constructor(e){this.value=LU;e instanceof Promise?this.wait=e.then(r=>{this.value=r},()=>{this.value=TU}):(this.value=e,this.wait=Promise.resolve())}};var Eae=new Set(["group","assert","count"]),up=class{constructor(e,r){this.dap=e;this.isDirty=!1;this.queue=new rb(e=>{for(let r of e)this.dap.output(r)});this.onDrained=this.queue.onDrained;r.register(0,async()=>{this.length&&await new Promise(n=>this.onDrained(n)),this.dispose()})}get length(){return this.queue.length}dispose(){this.queue.dispose()}dispatch(e,r){let n=this.parse(r);n&&this.enqueue(e,n)}enqueue(e,r){if(!(r instanceof Wh))this.isDirty=!0;else if(this.isDirty)this.isDirty=!1;else return;this.queue.enqueue(r.toDap(e))}parse(e){if(e.type==="log"){let r=e.stackTrace?.callFrames[0];if(r&&r.url==="internal/console/constructor.js"&&Eae.has(r.functionName))return}switch(e.type){case"clear":return new Wh;case"endGroup":return new tb;case"assert":return new zv(e);case"table":return new Zv(e);case"startGroup":case"startGroupCollapsed":return new Qv(e);case"debug":case"log":case"info":return new ga(e);case"trace":return new Xv(e);case"error":return new Yv(e);case"warning":return new Jv(e);case"dir":case"dirxml":return new ga(e);case"count":return new ga(e);case"profile":case"profileEnd":return new ga(e);case"timeEnd":return new ga(e);default:try{Ng(e.type,"unknown console message type")}catch{}}}};up=C([(0,Vh.injectable)(),b(0,(0,Vh.inject)(rn)),b(1,(0,Vh.inject)(Ha))],up);var Ku=I(J()),MU=require("os"),kU=require("path");var rD=require("path"),$U=(0,rD.join)(__dirname,"diagnosticTool.js"),RU=(0,rD.join)(__dirname,"diagnosticTool.css");var So=Symbol("ITarget"),gr=Symbol("ILauncher");var ya=class{constructor(e,r,n,i){this.fs=e;this.sources=r;this.breakpoints=n;this.target=i}async generateObject(){let[e]=await Promise.all([this.dumpSources()]);return{breakpoints:this.dumpBreakpoints(),sources:e,config:this.target.launchConfig}}async generateHtml(e=(0,kU.join)((0,MU.tmpdir)(),"js-debug-diagnostics.html")){return await this.fs.writeFile(e,`<!DOCTYPE html>
      <html lang="en">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <style>${await this.fs.readFile(RU,"utf-8")}<</style>
      </head>
      <body>
        <script>window.DUMP=${JSON.stringify(await this.generateObject())}</script>
        <script>${await this.fs.readFile($U,"utf-8")}</script>
      </body>
      </html>`),e}dumpBreakpoints(){let e=[];for(let r of[this.breakpoints.appliedByPath,this.breakpoints.appliedByRef])for(let n of r.values())for(let i of n){let o=i.diagnosticDump();e.push({source:o.source,params:o.params,cdp:o.cdp.map(s=>s.state===1?{...s,uiLocations:s.uiLocations.map(a=>this.dumpUiLocation(a))}:{...s,done:void 0})})}return e}dumpSources(){let e=[],r=0;for(let n of this.sources.sources)e.push((async()=>({uniqueId:r++,url:n.url,sourceReference:n.sourceReference,absolutePath:n.absolutePath,actualAbsolutePath:await n.existingAbsolutePath(),scriptIds:n.scripts.map(i=>i.scriptId),prettyName:await n.prettyName(),compiledSourceRefToUrl:n instanceof xt?[...n.compiledToSourceUrl.entries()].map(([i,o])=>[i.sourceReference,o]):void 0,sourceMap:na(n)?{url:n.sourceMap.metadata.sourceMapUrl,metadata:n.sourceMap.metadata,sources:qo(Object.fromEntries(n.sourceMap.sourceByUrl),i=>i.sourceReference)}:void 0}))());return Promise.all(e)}dumpUiLocation(e){return{lineNumber:e.lineNumber,columnNumber:e.columnNumber,sourceReference:e.source.sourceReference}}};ya=C([(0,Ku.injectable)(),b(0,(0,Ku.inject)(we)),b(1,(0,Ku.inject)(ir)),b(2,(0,Ku.inject)(Jn)),b(3,(0,Ku.inject)(So))],ya);var FU=I(_e()),nb=I(J());var OU="@vscode/dwarf-debugging",cp=class{constructor(e){this.dap=e;this.didPrompt=!1}async load(){try{return await import(OU)}catch{return}}prompt(){this.didPrompt||(this.didPrompt=!0,this.dap.output({output:FU.t("You may install the `{}` module via npm for enhanced WebAssembly debugging",OU),category:"console"}))}};cp=C([(0,nb.injectable)(),b(0,(0,nb.inject)(rn))],cp);var va=I(J());var pp=Symbol("IExceptionPauseService");var lp=class{constructor(e,r,n,i,o){this.evaluator=e;this.scriptSkipper=r;this.dap=n;this.sourceContainer=o;this.state={cdp:"none"};this.blocker=Be();this.noDebug=!!i.noDebug,this.breakOnError=i.__breakOnConditionalError,this.blocker.resolve()}get launchBlocker(){return this.blocker.promise}async setBreakpoints(e){if(!this.noDebug){try{this.state=this.parseBreakpointRequest(e)}catch(r){if(!(r instanceof Z))throw r;this.dap.output({category:"stderr",output:r.message});return}this.cdp?await this.sendToCdp(this.cdp):this.state.cdp!=="none"&&this.blocker.hasSettled()&&(this.blocker=Be())}}async shouldPauseAt(e){if(e.reason!=="exception"&&e.reason!=="promiseRejection"||this.state.cdp==="none"||this.shouldScriptSkip(e))return!1;let r=this.state.condition;if(e.data?.uncaught){if(r.uncaught&&!await this.evalCondition(e,r.uncaught))return!1}else if(r.caught&&!await this.evalCondition(e,r.caught))return!1;return!0}async apply(e){this.cdp=e,this.state.cdp!=="none"&&await this.sendToCdp(e)}async sendToCdp(e){await e.Debugger.setPauseOnExceptions({state:this.state.cdp}),this.blocker.resolve()}async evalCondition(e,r){return!!(await r({callFrameId:e.callFrames[0].callFrameId},{error:e.data}))?.result.value}shouldScriptSkip(e){if(e.data?.uncaught||!e.callFrames.length)return!1;let r=this.sourceContainer.getScriptById(e.callFrames[0].location.scriptId);return!!r&&this.scriptSkipper.isScriptSkipped(r.url)}parseBreakpointRequest(e){let r=(e.filterOptions??[]).concat(e.filters.map(a=>({filterId:a}))),n="none",i=[],o=[];for(let{filterId:a,condition:u}of r)a==="all"?(n="all",u&&i.push(a)):a==="uncaught"&&(n==="none"&&(n="uncaught"),u&&o.push(a));let s=a=>{if(a.length===0)return;let u="!!("+r.map(p=>p.condition).filter(St).join(") || !!(")+")",c=Js(u);if(c)throw new Z(Ks({line:0,condition:u},c.message));let l=this.breakOnError?ES(u):u;return this.evaluator.prepare(l,{hoist:["error"]}).invoke};return n==="none"?{cdp:n}:{cdp:n,condition:{caught:s(i),uncaught:s(o)}}}};lp=C([(0,va.injectable)(),b(0,(0,va.inject)(Vn)),b(1,(0,va.inject)(aa)),b(2,(0,va.inject)(rn)),b(3,(0,va.inject)($e)),b(4,(0,va.inject)(ir))],lp);var sb=I(J());var ib=class{constructor(){this.didEnable=new WeakSet}async retrieve(e){this.didEnable.has(e)||(this.didEnable.add(e),await e.Performance.enable({}));let r=await e.Performance.getMetrics({});if(!r)return{error:"Error in CDP"};let n={};for(let i of r.metrics)n[i.name]=i.value;return{metrics:n}}};var ob=class{async retrieve(e){let r=await e.Runtime.evaluate({expression:`({
        memory: process.memoryUsage(),
        cpu: process.cpuUsage(),
        timestamp: Date.now(),
        resourceUsage: process.resourceUsage && process.resourceUsage(),
      })${dt()}`,returnByValue:!0});return r?r.exceptionDetails?{error:r.exceptionDetails.text}:{metrics:r.result.value}:{error:"No response from CDP"}}};var ab=Symbol("IPerformanceProvider"),zu=class{constructor(e){this.target=e}create(){return this.target.type()==="node"?new ob:new ib}};zu=C([(0,sb.injectable)(),b(0,(0,sb.inject)(So))],zu);var uD=I(_e()),UU=require("crypto"),ba=I(J()),jU=require("os"),qU=require("path");var lb=I(J());var nD=I(_e()),Xu=I(J()),ub=require("path");var fp=class{constructor(e){this.sources=e;this.locationIdCounter=0;this.locationsByRef=new Map}getLocationIdFor(e){let r=[e.functionName,e.url,e.scriptId,e.lineNumber,e.columnNumber].join(":"),n=this.locationsByRef.get(r);if(n)return n.id;let i=this.locationIdCounter++;return this.locationsByRef.set(r,{id:i,callFrame:e,locations:(async()=>{let o=await this.sources.getScriptById(e.scriptId)?.source;if(!o)return[];let s=await this.sources.currentSiblingUiLocations({lineNumber:e.lineNumber+1,columnNumber:e.columnNumber+1,source:o});return Promise.all(s.map(async a=>({...a,source:await a.source.toDapShallow()})))})()}),i}getLocations(){return Promise.all([...this.locationsByRef.values()].sort((e,r)=>e.id-r.id).map(async e=>({callFrame:e.callFrame,locations:await e.locations})))}};var ur=class{constructor(e,r,n,i){this.cdp=e;this.fs=r;this.sources=n;this.launchConfig=i}static canApplyTo(){return!0}async start(e,r){if(!await this.cdp.Profiler.start({}))throw new Z(ll());return new iD(this.cdp,this.fs,this.sources,this.launchConfig.__workspaceFolder,r)}async save(e,r){let n=await NU(e,this.sources,this.launchConfig.__workspaceFolder);(0,ub.isAbsolute)(r)||(r=(0,ub.join)(this.launchConfig.__workspaceFolder,r)),await this.fs.writeFile(r,JSON.stringify(n))}};ur.type="cpu",ur.extension=".cpuprofile",ur.label=nD.t("CPU Profile"),ur.description=nD.t("Generates a .cpuprofile file you can open in the Chrome devtools"),ur.editable=!0,ur=C([(0,Xu.injectable)(),b(0,(0,Xu.inject)(ht)),b(1,(0,Xu.inject)(we)),b(2,(0,Xu.inject)(ir)),b(3,(0,Xu.inject)($e))],ur);var iD=class{constructor(e,r,n,i,o){this.cdp=e;this.fs=r;this.sources=n;this.workspaceFolder=i;this.file=o;this.stopEmitter=new z;this.disposed=!1;this.onUpdate=new z().event;this.onStop=this.stopEmitter.event}async dispose(){this.disposed||(this.disposed=!0,this.stopEmitter.fire())}async stop(){let e=await this.cdp.Profiler.stop({});if(!e)throw new Z(ll());await this.dispose();let r=await NU(e.profile,this.sources,this.workspaceFolder);await this.fs.writeFile(this.file,JSON.stringify(r))}};async function NU(t,e,r){let n=new fp(e),i=t.nodes.map(o=>({...o,locationId:n.getLocationIdFor(o.callFrame),positionTicks:o.positionTicks?.map(s=>({...s,startLocationId:n.getLocationIdFor({...o.callFrame,lineNumber:s.line-1,columnNumber:0}),endLocationId:n.getLocationIdFor({...o.callFrame,lineNumber:s.line,columnNumber:0})}))}));return{...t,nodes:i,$vscode:{rootPath:r,locations:await n.getLocations()}}}var oD=I(_e()),Ju=I(J());var Cn=class{constructor(e,r,n,i){this.cdp=e;this.fs=r;this.sources=n;this.launchConfig=i}static canApplyTo(){return!0}async start(e,r){if(await this.cdp.HeapProfiler.enable({}),!await this.cdp.HeapProfiler.startSampling({}))throw new Z(ll());return new sD(this.cdp,this.fs,this.sources,this.launchConfig.__workspaceFolder,r)}};Cn.type="heap",Cn.extension=".heapprofile",Cn.label=oD.t("Heap Profile"),Cn.description=oD.t("Generates a .heapprofile file you can open in the Chrome devtools"),Cn.editable=!0,Cn=C([(0,Ju.injectable)(),b(0,(0,Ju.inject)(ht)),b(1,(0,Ju.inject)(we)),b(2,(0,Ju.inject)(ir)),b(3,(0,Ju.inject)($e))],Cn);var sD=class{constructor(e,r,n,i,o){this.cdp=e;this.fs=r;this.sources=n;this.workspaceFolder=i;this.file=o;this.stopEmitter=new z;this.disposed=!1;this.onUpdate=new z().event;this.onStop=this.stopEmitter.event}async dispose(){this.disposed||(this.disposed=!0,await this.cdp.HeapProfiler.disable({}),this.stopEmitter.fire())}async stop(){let e=await this.cdp.HeapProfiler.stopSampling({});if(!e)throw new Z(ll());await this.dispose();let r=await this.annotateSources(e.profile);await this.fs.writeFile(this.file,JSON.stringify(r))}async annotateSources(e){let r=new fp(this.sources),n=(o,s)=>{s.locationId=r.getLocationIdFor(o.callFrame);for(let a of o.children){let u={...a,children:[]};s.children.push(u),n(a,u)}},i={...e.head,children:[]};return n(e.head,i),{...e,head:i,$vscode:{rootPath:this.workspaceFolder,locations:await r.getLocations()}}}};var aD=I(_e()),BU=require("fs"),cb=I(J());var Pn=class{constructor(e){this.cdp=e;this.cdp.HeapProfiler.on("addHeapSnapshotChunk",({chunk:r})=>this.currentWriter?.stream.write(r))}static canApplyTo(){return!0}async start(e,r){return{onStop:new z().event,onUpdate:new z().event,dispose:()=>{},stop:async()=>{await this.cdp.HeapProfiler.enable({}),await this.dumpToFile(r),await this.cdp.HeapProfiler.disable({})}}}async dumpToFile(e){let{stream:r,promise:n}=this.currentWriter={stream:(0,BU.createWriteStream)(e),promise:this.cdp.HeapProfiler.takeHeapSnapshot({})};await n,r.end(),this.currentWriter=void 0}};Pn.type="memory",Pn.extension=".heapsnapshot",Pn.label=aD.t("Heap Snapshot"),Pn.description=aD.t("Generates a .heapsnapshot file you can open in the Chrome devtools"),Pn.instant=!0,Pn=C([(0,cb.injectable)(),b(0,(0,cb.inject)(ht))],Pn);var pb=Symbol("IProfilerFactory"),fb=()=>{let t=new Date;return["vscode-profile",t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()].map(e=>String(e).padStart(2,"0")).join("-")},pn=class{constructor(e){this.container=e}get(e){let r=pn.ctors.find(n=>n.type===e);if(!r)throw new Error(`Invalid profilter type ${e}`);return this.container.get(r)}};pn.ctors=[ur,Cn,Pn],pn=C([(0,lb.injectable)(),b(0,(0,lb.inject)(Bl))],pn);var db=Symbol("IProfileController"),dp=class{constructor(e,r,n,i,o){this.cdp=e;this.factory=r;this.basicCpuProfiler=n;this.breakpoints=i;this.shutdown=o;this.seenConsoleProfileNames=Object.create(null)}connect(e,r){e.on("startProfile",async n=>(await this.start(e,r,n),{})),e.on("stopProfile",()=>this.stopProfiling(e)),this.cdp.Profiler.on("consoleProfileStarted",()=>{e.output({output:uD.t("Console profile started")+`
`,category:"console"})}),this.cdp.Profiler.on("consoleProfileFinished",async n=>{let i=this.saveConsoleProfile(e,n),o=this.shutdown.register(0,()=>i);await i,o.dispose()}),r.onPaused(()=>this.stopProfiling(e))}async start(e,r,n){if(this.profile)throw new Z(f1());this.profile=this.startProfileInner(e,r,n).catch(i=>{throw this.profile=void 0,i}),await this.profile}async saveConsoleProfile(e,r){let n;if(r.title){n=r.title.replace(/[\/\\]/g,"-");let i=this.seenConsoleProfileNames[r.title]||0;this.seenConsoleProfileNames[r.title]=i+1,i>0&&(n+=`-${i}`)}else n=fb();n+=ur.extension,await this.basicCpuProfiler.save(r.profile,n),e.output({output:uD.t('CPU profile saved as "{0}" in your workspace folder',n)+`
`,category:"console"})}async startProfileInner(e,r,n){let i=!1,o;if(n.stopAtBreakpoint?.length){let l=new Set(n.stopAtBreakpoint);i=!0,o=p=>!(p instanceof Gn)||l.has(p.dapId)}else o=()=>!1;await this.breakpoints.applyEnabledFilter(o);let s=(0,qU.join)((0,jU.tmpdir)(),`vscode-js-profile-${(0,UU.randomBytes)(4).toString("hex")}`),a=await this.factory.get(n.type).start(n,s),u={file:s,profile:a,enableFilter:o,keptDebuggerOn:i};a.onUpdate(l=>e.profilerStateUpdate({label:l,running:!0})),a.onStop(()=>this.disposeProfile(u));let c=!!r.pausedDetails();return i?await r.resume():c&&(await this.cdp.Debugger.disable({}),c&&r.onResumed()),e.profileStarted({file:u.file,type:n.type}),u}async stopProfiling(e){let r=await this.profile?.catch(()=>{});return!r||!this.profile?{}:(this.profile=void 0,await r?.profile.stop(),e.profilerStateUpdate({label:"",running:!1}),{})}async disposeProfile({profile:e,enableFilter:r,keptDebuggerOn:n}){n||await this.cdp.Debugger.enable({}),await this.breakpoints.applyEnabledFilter(void 0,r),e.dispose()}};dp=C([(0,ba.injectable)(),b(0,(0,ba.inject)(ht)),b(1,(0,ba.inject)(pb)),b(2,(0,ba.inject)(ur)),b(3,(0,ba.inject)(Jn)),b(4,(0,ba.inject)(Ha))],dp);var ri=I(J());var dj=I(WU()),hj=require("dns"),Wb=I(fj()),ec=I(J());var Sp=Symbol("IRequestOptionsProvider");var Sa=class{constructor(e,r){this.fs=e;this.options=r;this.autoLocalhostPortFallbacks={}}async fetch(e,r=or,n){try{let o=(0,dj.dataUriToBuffer)(e);return{ok:!0,url:e,body:new TextDecoder().decode(o.buffer),statusCode:200}}catch{}let i=kr(e)?e:vt(e);if(i)try{return{ok:!0,url:e,body:await this.fs.readFile(i,"utf-8"),statusCode:200}}catch(o){return{ok:!1,url:e,error:o,statusCode:200}}return this.fetchHttp(e,r,n)}async fetchJson(e,r,n){let i=await this.fetch(e,r,{Accept:"application/json",...n});if(!i.ok)return i;try{return{...i,body:JSON.parse(i.body)}}catch(o){return{...i,ok:!1,url:e,error:o}}}async fetchHttp(e,r,n){let i=new URL(e),o=i.protocol!=="http:",s=Number(i.port)??(o?443:80),a={headers:n,followRedirect:!0};o&&await yl(e)&&(a.rejectUnauthorized=!1),this.options?.provideOptions(a,e);let u=i.hostname==="localhost";if(u&&this.autoLocalhostPortFallbacks[s]){let p=await this.requestHttp(i.toString(),a,r);return p.statusCode!==503?p:(delete this.autoLocalhostPortFallbacks[s],this.requestHttp(e,a,r))}let l=await this.requestHttp(e,a,r);if(l.statusCode===503&&u){let p;try{p=await hj.promises.lookup(i.hostname)}catch{return l}i.hostname=p.family===6?"127.0.0.1":"[::1]",l=await this.requestHttp(i.toString(),a,r),l.statusCode!==503&&(this.autoLocalhostPortFallbacks[s]=i.hostname)}return l}async requestHttp(e,r,n){this.options?.provideOptions(r,e);let i=new Ie;try{let o=(0,Wb.default)(e,r);i.push(n.onCancellationRequested(()=>o.cancel()));let s=await o;return{ok:!0,url:e,body:s.body,statusCode:s.statusCode}}catch(o){if(!(o instanceof Wb.RequestError))throw o;let s=o.response?String(o.response?.body):o.message,a=o.response?.statusCode??503;return{ok:!1,body:s,statusCode:a,url:e,error:new py(a,e,s)}}finally{i.dispose()}}};Sa=C([(0,ec.injectable)(),b(0,(0,ec.inject)(we)),b(1,(0,ec.optional)()),b(1,(0,ec.inject)(Sp))],Sa);var tc=class extends Sa{constructor(r,n,i,o,s){super(r,s);this.logger=n;this.target=i;this.cdp=o;this.disposables=new Ie}dispose(){this.disposables.dispose()}async fetchHttp(r,n,i={}){let o=await super.fetchHttp(r,n,i);return o.ok?o:(this.logger.info("runtime","Network load failed, falling back to CDP",{url:r,res:o}),this.fetchOverBrowserNetwork(r,o))}async fetchOverBrowserNetwork(r,n){if(!this.cdp)return n;let i=await this.cdp.Network.loadNetworkResource({frameId:this.target?.targetInfo.targetId,url:r,options:{includeCredentials:!0,disableCache:!0}});if(!i||!i.resource.success||!i.resource.httpStatusCode||i.resource.httpStatusCode>=400||!i.resource.stream)return n;let o=Number(i.resource.headers?.["Content-Length"]);isNaN(o)&&(o=1/0);let s=[],a=0;for(;;){let u=await this.cdp.IO.read({handle:i.resource.stream,offset:a});if(!u)return this.logger.info("runtime","Stream error encountered in middle, falling back",{url:r}),n;let c=u.base64Encoded?Buffer.from(u.data,"base64").toString():u.data;if(a+=Buffer.byteLength(c,"utf-8"),s.push(c),a>=o){this.cdp.IO.close({handle:i.resource.stream});break}if(u.eof)break}return{ok:!0,body:s.join(""),statusCode:i.resource.httpStatusCode,url:r}}};tc=C([(0,ri.injectable)(),b(0,(0,ri.inject)(we)),b(1,(0,ri.inject)(ce)),b(2,(0,ri.optional)()),b(2,(0,ri.inject)(So)),b(3,(0,ri.optional)()),b(3,(0,ri.inject)(ht)),b(4,(0,ri.optional)()),b(4,(0,ri.inject)(Sp))],tc);var Da=I(J()),Hj=I(gh());var Ea="node:";function gj(t){let e=[];for(let r=0;r<t.length;r++){let n=t[r];if(n.startsWith("!")){let i=mj(n.slice(1));for(let o=0;o<e.length;o++)e[o]=`^(?!${i.slice(1)})${e[o].slice(1)}`}else e.push(mj(n))}return e.map(r=>new RegExp(r,"i"))}function mj(t){let e=t.split("/"),r=[];for(let n=0;n<e.length;n++){let i=e[n];if(i==="**")n===0?r.push("(.+/)?"):n===e.length-1||r.push(".*/");else{if(i.includes("*")){let o=i.split("*");r.push(o.map(s=>zr(s)).join("[^\\/]*"))}else r.push(zr(i));r.push(n<e.length-1?"\\/":"$")}}return`^${r.join("")}`}function Tle(t){let e=/^<node_internals>[\/\\](.*)$/,r=t.map(n=>{n=n.trim();let i=e.exec(n);return i?i[1]:null}).filter(St);return r.length>0?r:void 0}function $le(t,e){return e.filter(n=>!n.includes("<node_internals>")).map(n=>kr(n)?vl(t.rebaseLocalToRemote(n)):Ge(n)).map(Ly)}var Eo=class{constructor({skipFiles:e},r,n,i,o){this.logger=n;this.cdp=i;this._regexForAuthored=zT(gj);this._scriptsWithSkipping=new Set;this._targetId=o.id(),this._rootTargetId=yj(o).id(),this._isUrlFromSourceMapSkipped=new ao(s=>this._normalizeUrl(s)),this._authoredGlobs=$le(r,e),this._nodeInternalsGlobs=Tle(e),this._initNodeInternals(o),this._updateSkippedDebounce=JT(500,()=>this._updateGeneratedSkippedSources()),e.length&&this._updateGeneratedSkippedSources(),Eo.sharedSkipsEmitter.event(s=>{s.rootTargetId===this._rootTargetId&&s.targetId!==this._targetId&&this._toggleSkippingFile(s.params)})}setSourceContainer(e){this._sourceContainer=e}_testSkipNodeInternal(e){return this._nodeInternalsGlobs?(e.startsWith(Ea)&&(e=e.slice(Ea.length)),(0,Hj.default)([e],this._nodeInternalsGlobs).length>0):!1}_testSkipAuthored(e){return this._regexForAuthored(this._authoredGlobs).some(r=>r.test(e))}_isNodeInternal(e,r){return e.startsWith(Ea)?!0:r?.has(e)||/^internal\/.+\.js$/.test(e)}async _updateGeneratedSkippedSources(){let e=this._regexForAuthored(this._authoredGlobs).map(n=>n.source),r=this._allNodeInternals?.settledValue;if(r){e.push(`^(${Ea})?internal\\/`);for(let n of r)this._testSkipNodeInternal(n)&&e.push(`^(${Ea})?${zr(n)}$`)}await this.cdp.Debugger.setBlackboxPatterns({patterns:e})}_normalizeUrl(e){return Ge(e.toLowerCase())}isScriptSkipped(e){return this._isNodeInternal(e,this._allNodeInternals?.settledValue)?this._testSkipNodeInternal(e):(e=this._normalizeUrl(e),this._isUrlFromSourceMapSkipped.get(e)===!0?!0:this._testSkipAuthored(e))}async _updateSourceWithSkippedSourceMappedSources(e,r){let n=this.isScriptSkipped(e.url),i=[],o=n;for(let a of e.sourceMap.sourceByUrl.values()){let u=this.isScriptSkipped(a.url);if(typeof u>"u"&&(u=n),u!==o){let c=await this._sourceContainer.currentSiblingUiLocations({source:a,lineNumber:1,columnNumber:1},e);c[0]?(i.push({lineNumber:c[0].lineNumber-1,columnNumber:c[0].columnNumber-1}),o=!o):this.logger.error("internal","Could not map script beginning for "+a.sourceReference)}}let s=r;i.length||(s=s.filter(a=>this._scriptsWithSkipping.has(a.scriptId)),s.forEach(a=>this._scriptsWithSkipping.delete(a.scriptId))),await Promise.all(s.map(({scriptId:a})=>this.cdp.Debugger.setBlackboxedRanges({scriptId:a,positions:i})))}initializeSkippingValueForSource(e){this._initializeSkippingValueForSource(e)}_initializeSkippingValueForSource(e,r=e.scripts){let n=e.url,i=this.isScriptSkipped(n);if(!i&&e.absolutePath&&this._testSkipAuthored(ke(e.absolutePath))&&(this.setIsUrlBlackboxSkipped(n,!0),i=!0,this._updateSkippedDebounce()),Xr(e)){if(i)for(let o of e.sourceMap.sourceByUrl.values())this._isUrlFromSourceMapSkipped.set(o.url,!0);for(let o of e.sourceMap.sourceByUrl.values())this._initializeSkippingValueForSource(o,r);this._updateSourceWithSkippedSourceMappedSources(e,r)}}async _initNodeInternals(e){if(e.type()!=="node"||!this._nodeInternalsGlobs||this._allNodeInternals)return;let r=this._allNodeInternals=Be(),n=await this.cdp.Runtime.evaluate({expression:"require('module').builtinModules"+dt(),returnByValue:!0,includeCommandLineAPI:!0});n&&!n.exceptionDetails?r.resolve(new Set(n.result.value.map(i=>i+".js"))):r.resolve(new Set),await this._updateGeneratedSkippedSources()}async _toggleSkippingFile(e){let r;e.resource&&kr(e.resource)&&(r=e.resource);let n={path:r,sourceReference:e.sourceReference},i=this._sourceContainer.source(n);if(!i)return{};let o=!this.isScriptSkipped(i.url);if(i instanceof xt){this._isUrlFromSourceMapSkipped.set(i.url,o);let s=Array.from(i.compiledToSourceUrl.keys());await Promise.all(s.map(a=>this._updateSourceWithSkippedSourceMappedSources(a,a.scripts)))}else{if(Xr(i))for(let s of i.sourceMap.sourceByUrl.values())this._isUrlFromSourceMapSkipped.set(s.url,o);this.setIsUrlBlackboxSkipped(i.url,o),await this._updateGeneratedSkippedSources()}return{}}setIsUrlBlackboxSkipped(e,r){let n=e,i=`!${n}`,o=this._authoredGlobs.filter(s=>s!==n&&s!==i);this._regexForAuthored(o).some(s=>s.test(e))!==r&&(o.push(r?n:i),this._regexForAuthored.clear()),this._authoredGlobs=o}async toggleSkippingFile(e){let r=await this._toggleSkippingFile(e);return Eo.sharedSkipsEmitter.fire({params:e,rootTargetId:this._rootTargetId,targetId:this._targetId}),r}};Eo.sharedSkipsEmitter=new z,Eo=C([(0,Da.injectable)(),b(0,(0,Da.inject)($e)),b(1,(0,Da.inject)(Qe)),b(2,(0,Da.inject)(ce)),b(3,(0,Da.inject)(ht)),b(4,(0,Da.inject)(So))],Eo);function yj(t){let e=t.parent();return e?yj(e):t}var nm=I(J());var bj=require("path");var vj=/^webpack:\/{3}([^/]+?\.vue)(\?[0-9a-z]*)?$/i,Rle=/^webpack:\/{3}\.\/.+\.vue\?[0-9a-z]+$/i,Dp=Symbol("IVueFileMapper");var Ep=class{constructor(e,r){this.files=e;this.search=r;this.getMapping=Ae(async()=>{let e=new Map;return await this.search.streamAllChildren(this.files,r=>e.set((0,bj.basename)(r),r)),e})}async lookup(e){let r=vj.exec(e);return r?(await this.getMapping()).get(r[1]):void 0}getVueHandling(e){return this.files.empty?0:vj.test(e)?1:Rle.test(e)?2:0}};Ep=C([(0,nm.injectable)(),b(0,(0,nm.inject)(Jo)),b(1,(0,nm.inject)(wl))],Ep);var Do=class{constructor(){this.changeEmitter=new z;this.addEmitter=new z;this.removeEmitter=new z;this.targetMap=new Map;this.onChanged=this.changeEmitter.event;this.onAdd=this.addEmitter.event;this.onRemove=this.removeEmitter.event}get size(){return this.targetMap.size}add(e,r){this.targetMap.set(e,r),this.addEmitter.fire([e,r]),this.changeEmitter.fire()}get(e){return this.targetMap.get(e)}remove(e){let r=this.targetMap.get(e);return r===void 0?!1:(this.targetMap.delete(e),this.removeEmitter.fire([e,r]),this.changeEmitter.fire(),!0)}value(){return this.targetMap.values()}};var Gq=I(qq()),Qb=I(J());var Wq=require("child_process"),nc=class t extends Error{constructor(r,n,i,o,s){super(`${r} exited with code ${o||-1}: ${n}`);this.command=r;this.stderr=n;this.stdout=i;this.code=o;this.innerError=s}static fromExeca(r){return new t(r.command,r.stderr.toString(),r.stdout.toString(),r.exitCode)}};function Yb(t,e,r){return new Promise((n,i)=>{let o=(0,Wq.spawn)(t,e,{...r,stdio:"pipe"}),s=[],a=[];o.stderr.on("data",c=>s.push(c)),o.stdout.on("data",c=>a.push(c));let u=(c,l)=>i(new nc(t,Buffer.concat(s).toString(),Buffer.concat(a).toString(),c,l));o.on("error",c=>u(void 0,c)),o.on("close",c=>c?u(c):n({stdout:Buffer.concat(a).toString(),stderr:Buffer.concat(s).toString()}))})}var Fpe=new Map([["chrome",0],["safari",1],["firefox",2],["msedge",3],["microsoft edge",3],["appxq0fevzme2pys62n3e0fbqa7peapykr8v",4],["ie.http",5]]),Vq=t=>{t=t.toLowerCase();for(let[e,r]of Fpe.entries())if(t.includes(e))return r},Lp=Symbol("IDefaultBrowserProvider"),xp=class{constructor(e,r=process.platform){this.execa=e;this.platform=r;this.lookup=Ae(()=>this.platform==="win32"?this.lookupWindows():this.lookupUnix())}async lookupUnix(){let{name:e}=await(0,Gq.default)();return Vq(e)}async lookupWindows(){let e=await this.execa("reg",["QUERY"," HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice","/v","ProgId"]);if(e.failed)throw nc.fromExeca(e);let r=/ProgId\s*REG_SZ\s*(\S+)/.exec(e.stdout);if(r)return Vq(r[1])}};xp=C([(0,Qb.injectable)(),b(0,(0,Qb.inject)(yh))],xp);var zq=I(J()),ew=I(require("os"));var Zb=class{async setup(){}dispose(){}write(e){if(e.level>2)throw new Error(e.message);console.log(JSON.stringify(e))}};var TC=class{constructor(e=512){this.size=e;this.items=[];this.i=0}write(e){this.items[this.i]=e,this.i=(this.i+1)%this.size}read(){return this.items.slice(this.i).concat(this.items.slice(0,this.i))}},ni=class{constructor(){this.logTarget={queue:[]};this.logBuffer=new TC}static async test(){let e=new ni;return e.setup({sinks:[new Zb],showWelcome:!1}),e}info(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:1})}verbose(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:0})}warn(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:2})}error(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:3})}fatal(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:4})}assert(e,r){if(e===!1||e===void 0||e===null){if(this.error("runtime.assertion",r,{error:new Error("Assertion failed")}),process.env.JS_DEBUG_THROW_ASSERTIONS)throw new Error(r);debugger;return!1}return!0}log(e){if(this.logBuffer.write(e),"queue"in this.logTarget){this.logTarget.queue.push(e);return}for(let r of this.logTarget.sinks)r.write(e)}getRecentLogs(){return this.logBuffer.read()}dispose(){if("sinks"in this.logTarget){for(let e of this.logTarget.sinks)e.dispose();this.logTarget={queue:[]}}}forTarget(){return this}async setup(e){if(await Promise.all(e.sinks.map(n=>n.setup())),e.showWelcome!==!1){let n=Npe();for(let i of e.sinks)i.write(n)}let r=this.logTarget;this.logTarget={sinks:e.sinks.slice()},"sinks"in r?r.sinks.forEach(n=>n.dispose()):r.queue.forEach(n=>this.log(n))}};ni.null=(()=>{let e=new ni;return e.setup({sinks:[]}),e})(),ni=C([(0,zq.injectable)()],ni);var Npe=()=>({timestamp:Date.now(),tag:"runtime.welcome",level:1,message:`${Kg} v${hu} started`,metadata:{os:`${ew.platform()} ${ew.arch()}`,nodeVersion:process.version,adapterVersion:hu}});var hm=Symbol("MutableLaunchConfig"),Xq=t=>{let e=new z;return new Proxy({},{ownKeys(){return Object.keys(t)},get(r,n){switch(n){case"update":return i=>{t=i,e.fire()};case"onChange":return e.event;default:return t[n]}}})};var _5=I(b5()),Gw=I(J());var Hc=Symbol("touched"),Ba;(u=>{function t(){return{children:{},[Hc]:1}}u.root=t;function e(c,l){return c[Hc]=1,a(c,s(l),0)}u.getPath=e;function r(c){c[Hc]=1}u.touch=r;function n(c){c[Hc]=2}u.touchAll=n;function i(c,l){let p=c.children[l]??={children:{}};return p[Hc]=1,p}u.getOrMakeChild=i;function o(c){if(c[Hc]){for(let[l,p]of Object.entries(c.children))switch(p[Hc]){case 1:o(p);break;case 2:break;default:delete c.children[l]}return c}}u.prune=o;function s(c){let l=c.split(/\/|\\/);return l[0]===""&&l.unshift(),l}function a(c,l,p){let f=i(c,l[p]);return p===l.length-1?f:a(f,l,p+1)}})(Ba||={});var Px=require("fs"),xx=I(gh()),yc=require("path"),w5=I(Dx());var Cye=/\//g,Vw=class{constructor(e){this.stat=Wo(e=>Px.promises.lstat(e));this.readdir=Wo(e=>Px.promises.readdir(e,{withFileTypes:!0}));this.alreadyProcessedFiles=new Set;this.fileEmitter=new z;this.onFile=this.fileEmitter.event;this.errorEmitter=new z;this.onError=this.errorEmitter.event;this.processor=e.fileProcessor,this.filter=e.filter,this.ignore=e.ignore.map(i=>xx.default.matcher((0,w5.default)(Ge(i),{cwd:e.cwd})));let r=(0,yc.isAbsolute)(e.pattern)?(0,yc.relative)(e.cwd,e.pattern):e.pattern,n=xx.default.parse(Ge(r),{ignore:e.ignore,cwd:e.cwd,expand:!0});this.done=Promise.all(n.map(i=>{let o=[];for(let c=1;c<i.tokens.length;){let l=c+1;for(;l<i.tokens.length&&i.tokens[l].type!=="slash";)l++;let p=i.tokens[c];p.type==="globstar"?o.push("**"):l===c+1&&p.type==="text"?o.push(p.value):o.push(new RegExp("^"+i.tokens.slice(c,l).map(f=>f.output||f.value).join("")+"$")),c=l+1}let s=o[0]==="**"?[0,1]:[0],a=Ba.getPath(e.cache,e.cwd),u={elements:o,seen:new Set};return Promise.all(s.map(c=>this.readSomething(u,c,e.cwd,[],a)))})).then(()=>{})}async readSomething(e,r,n,i,o){if(this.alreadyProcessedFiles.has(o))return;let s=`${r}:${n}`;if(e.seen.has(s))return;e.seen.add(s);let a;try{a=await this.stat(n)}catch(c){this.errorEmitter.fire({path:n,error:c});return}if(this.alreadyProcessedFiles.has(o))return;let u=o.data;if(u&&a.mtimeMs===u.mtime){if(u.type===0){let c=[],p=Object.entries(o.children).filter(([,f])=>f.data?.type!==0).map(([f])=>f);for(let[f,m]of Object.entries(o.children))c.push(m.data!==void 0?this.handleDirectoryEntry(e,r,n,{name:f,type:m.data.type},p,o):this.stat(n).then(h=>this.handleDirectoryEntry(e,r,n,{name:f,type:h.isFile()?1:0},p,o),()=>{}));await Promise.all(c)}else u.type===1&&(this.alreadyProcessedFiles.add(o),this.fileEmitter.fire(u.extracted));return}a.isDirectory()?await this.handleDir(e,r,a.mtimeMs,n,o):(this.alreadyProcessedFiles.add(o),await this.handleFile(a.mtimeMs,n,i,o))}applyFilterToFile(e,r,n){let i=n.children[e];if(this.alreadyProcessedFiles.has(i))return!1;if(!this.filter)return!0;let o=i.data?.type===1?i.data.extracted:void 0;return Ba.touch(i),this.filter(r,o)}handleDirectoryEntry(e,r,n,i,o,s){let a=n+"/"+i.name,u=this.getDirectoryReadDescends(e,r,n,i);if(u===void 0)return;let c=Ba.getOrMakeChild(s,i.name);if(!(i.type===1&&!this.applyFilterToFile(i.name,a,s)))return typeof u=="number"?this.readSomething(e,r+u,a,o,c):Promise.all(u.map(l=>this.readSomething(e,r+l,a,o,c)))}getDirectoryReadDescends(e,r,n,i){let o=n+"/"+i.name;if(this.ignore.some(u=>u(o)))return;let s=r===e.elements.length-1,a=e.elements[r];if(a==="**")return i.type===1?s?0:this.getDirectoryReadDescends(e,r+1,n,i):s?0:[0,1];if((a instanceof RegExp&&a.test(i.name)||a===i.name)&&(i.type===0?!s:s))return 1}async handleFile(e,r,n,i){let o=yc.sep==="/"?r:r.replace(Cye,yc.sep),s;try{s=await this.processor(o,{siblings:n,mtime:e})}catch(a){this.errorEmitter.fire({path:o,error:a});return}i.data={type:1,mtime:e,extracted:s},this.fileEmitter.fire(s)}async handleDir(e,r,n,i,o){let s;try{s=await this.readdir(i)}catch(c){this.errorEmitter.fire({path:i,error:c});return}let a=[],u=s.filter(c=>c.isFile()).map(c=>c.name);for(let c of s){if(c.name.startsWith("."))continue;let l;if(c.isDirectory())l=0;else if(c.isFile())l=1;else continue;a.push(this.handleDirectoryEntry(e,r,i,{name:c.name,type:l},u,o))}await Promise.all(a),o.data={type:0,mtime:n}}};var zp=class{constructor(e){this.logger=e}async streamAllChildren(e,r){let n=[];return await this.globForFiles(e,o=>n.push(r(Pt(o.path)))),(await Promise.all(n)).filter(o=>o!==void 0)}async streamChildrenWithSourcemaps(e){let r=[],n=e.lastState||{},i={};return await Promise.all([...e.files.explode()].map(async s=>{let a=JSON.stringify(s),u=n[a]||Ba.root();await this._streamChildrenWithSourcemaps(u,e,r,s);let c=Ba.prune(u);c&&(i[a]=c)})),this.logger.info("sourcemap.parsing",`turboGlobStream search found ${r.length} files`),{values:(await Promise.all(r)).filter(St),state:i}}async _streamChildrenWithSourcemaps(e,r,n,i){let o=new Vw({pattern:i.pattern,ignore:i.negations,cwd:i.cwd,cache:e,filter:r.filter,fileProcessor:(s,a)=>tO(s,a).then(u=>u&&r.processMap(u))});o.onError(({path:s,error:a})=>{this.logger.warn("sourcemap.parsing","Error parsing source map",{error:a,path:s})}),o.onFile(s=>s&&n.push(r.onProcessedMap(s))),await o.done}async globForFiles(e,r){await Promise.all([...e.explode()].map(n=>new Promise((i,o)=>(0,_5.default)([n.pattern,"!**/*.asar/**"],{ignore:n.negations,matchBase:!0,cwd:n.cwd}).on("data",r).on("finish",i).on("error",o))))}};zp=C([(0,Gw.injectable)(),b(0,(0,Gw.inject)(ce))],zp);var i_=I(_e()),Wa=I(J());var A5=require("url"),I5=I(require("path"));var Kw=class{constructor(){this._onFrameAddedEmitter=new z;this._onFrameRemovedEmitter=new z;this._onFrameNavigatedEmitter=new z;this.onFrameAdded=this._onFrameAddedEmitter.event;this.onFrameRemoved=this._onFrameRemovedEmitter.event;this.onFrameNavigated=this._onFrameNavigatedEmitter.event;this._frames=new Map}attached(e,r){e.Page.enable({}),e.Page.getResourceTree({}).then(n=>{this._processCachedResources(e,n?n.frameTree:void 0,r)})}mainFrame(){return this._mainFrame}_processCachedResources(e,r,n){r&&this._addFramesRecursively(e,r,r.frame.parentId,n),e.Page.on("frameAttached",i=>{this._frameAttached(e,n,i.frameId,i.parentFrameId)}),e.Page.on("frameNavigated",i=>{this._frameNavigated(e,n,i.frame)}),e.Page.on("frameDetached",i=>{this._frameDetached(e,n,i.frameId)})}_addFrame(e,r,n){let i=new Tx(this,e,r,n);return this._frames.set(i.id,i),i.isMainFrame()&&(this._mainFrame=i),this._onFrameAddedEmitter.fire(i),i}_frameAttached(e,r,n,i){let o=this._frames.get(n);return o||(o=this._addFrame(e,n,i)),o._ref(r),o}_frameNavigated(e,r,n){let i=this._frames.get(n.id);i||(i=this._frameAttached(e,r,n.id,n.parentId)),i._navigate(n,r),this._onFrameNavigatedEmitter.fire(i)}_frameDetached(e,r,n){let i=this._frames.get(n);i&&i._unref(r)}frameForId(e){return this._frames.get(e)}frames(){return Array.from(this._frames.values())}_addFramesRecursively(e,r,n,i){let o=r.frame,s=this._frames.get(o.id);s?(s._navigate(o,i),this._onFrameNavigatedEmitter.fire(s)):(s=this._addFrame(e,o.id,n),s._navigate(o,i));for(let a=0;r.childFrames&&a<r.childFrames.length;++a)this._addFramesRecursively(e,r.childFrames[a],s.id,i)}},Tx=class{constructor(e,r,n,i){this._targets=new Set;this.cdp=r,this.model=e,this._parentFrameId=i,this.id=n,this._url=""}_ref(e){this._targets.add(e)}_navigate(e,r){this._name=e.name,this._url=e.url,this._securityOrigin=e.securityOrigin,this._unreachableUrl=e.unreachableUrl||"",this._ref(r),this._unrefChildFrames(r)}name(){return this._name||""}url(){return this._url}securityOrigin(){return this._securityOrigin}unreachableUrl(){return this._unreachableUrl}isMainFrame(){return!this._parentFrameId}parentFrame(){return this._parentFrameId?this.model.frameForId(this._parentFrameId):void 0}childFrames(){return this.model.frames().filter(e=>e._parentFrameId===this.id)}_unrefChildFrames(e){for(let r of this.childFrames())r._unref(e)}_unref(e){this._targets.delete(e),!this._targets.size&&(this._unrefChildFrames(e),this.model._frames.delete(this.id),this.model._onFrameRemovedEmitter.fire(this))}displayName(){return this._name?this._name:Pye(this._url)||`<iframe ${this.id}>`}};function Lx(t,e){return t.length<=e?t:t.substr(0,e-1)+"\u2026"}function Pye(t){let e;try{e=new A5.URL(t)}catch{return Lx(t,20)}if(e.protocol==="data")return Lx(t,20);if(e.protocol==="blob"||t==="about:blank")return t;let r=I5.basename(e.pathname);return r||(r=(e.host||"")+"/"),r==="/"&&(r=Lx(t,20)),r}var S5=require("url"),$x=class{constructor(e){this.versions=new Map;this.id=e.registrationId,this.scopeURL=e.scopeURL}},Rx=class{constructor(e,r){this.revisions=[];this.registration=e,this.id=r.versionId,this.scriptURL=r.scriptURL,this._targetId=r.targetId,this._status=r.status,this._runningStatus=r.runningStatus}addRevision(e){this._targetId&&e.targetId&&this._targetId!==e.targetId&&console.error(`${this._targetId} !== ${e.targetId}`),e.targetId&&(this._targetId=e.targetId),this._status=e.status,this._runningStatus=e.runningStatus,this.revisions.unshift(e)}status(){return this._status}runningStatus(){return this._runningStatus}targetId(){return this._targetId}label(){let e=new S5.URL(this.registration.scopeURL),r=e.pathname.substr(1);r.endsWith("/")&&(r=r.substring(0,r.length-1));let n=r||`${e.host}`,i=this._status==="activated"?"":` ${this._status}`,o=this._runningStatus==="running"?"":` ${this._runningStatus}`;return`${n} #${this.id}${i}${o}`}},zw=class t{constructor(e){this._registrations=new Map;this._versions=new Map;this._onDidChangeUpdater=new z;this.onDidChange=this._onDidChangeUpdater.event;this._targets=new Set;this._frameModel=e,t._instances.add(this)}static{this._instances=new Set}dispose(){t._instances.delete(this)}attached(e){this._targets.add(e),!this._cdp&&(this._cdp=e,e.ServiceWorker.enable({}),e.ServiceWorker.on("workerRegistrationUpdated",r=>this._workerRegistrationsUpdated(r.registrations)),e.ServiceWorker.on("workerVersionUpdated",r=>this._workerVersionsUpdated(r.versions)),t._mode!=="normal"&&this.setMode(t._mode))}async detached(e){this._targets.delete(e)}version(e){return this._versions.get(e)}registrations(){let e=[],r=this._frameModel.frames().map(n=>n.url());for(let n of this._registrations.values())for(let i of r)if(i.startsWith(n.scopeURL)){e.push(n);break}return e}registration(e){return this._registrations.get(e)}_workerVersionsUpdated(e){for(let r of e){let n=this._registrations.get(r.registrationId);if(!n)continue;let i=n.versions.get(r.versionId);i||(i=new Rx(n,r),n.versions.set(r.versionId,i)),r.targetId&&this._versions.set(r.targetId,i),i.addRevision(r),i.status()==="redundant"&&i.runningStatus()==="stopped"&&(r.targetId&&this._versions.delete(r.targetId),n.versions.delete(i.id))}this._onDidChangeUpdater.fire()}_workerRegistrationsUpdated(e){for(let r of e)if(r.isDeleted){if(!this._registrations.has(r.registrationId))debugger;this._registrations.delete(r.registrationId)}else{if(this._registrations.has(r.registrationId))return;this._registrations.set(r.registrationId,new $x(r))}this._onDidChangeUpdater.fire()}static setModeForAll(e){t._mode=e;for(let r of t._instances)r.setMode(e)}setMode(e){if(this._cdp){this._cdp.ServiceWorker.setForceUpdateOnPageLoad({forceUpdateOnPageLoad:e==="force"});for(let r of this._targets.values())e==="bypass"?(r.Network.enable({}),r.Network.setBypassServiceWorker({bypass:!0})):r.Network.disable({})}}async stopWorker(e){if(!this._cdp)return;let r=this.version(e);r&&await this._cdp.ServiceWorker.stopWorker({versionId:r.id})}};var Ua=class{constructor(e,r,n,i,o,s,a,u){this.process=r;this.logger=o;this.telemetry=s;this.launchParams=a;this._targets=new Map;this._detachedTargets=new Set;this.frameModel=new Kw;this.serviceWorkerModel=new zw(this.frameModel);this._lifecycleQueue=Promise.resolve();this._onTargetAddedEmitter=new z;this._onTargetRemovedEmitter=new z;this.onTargetAdded=this._onTargetAddedEmitter.event;this.onTargetRemoved=this._onTargetRemovedEmitter.event;this._connection=e,this._sourcePathResolver=i,this._browser=n,this._targetOrigin=u,this.serviceWorkerModel.onDidChange(()=>{for(let c of this._targets.values())c.type()==="service_worker"&&c._onNameChangedEmitter.fire()})}static async connect(e,r,n,i,o,s,a){let c=await e.rootSession().Target.attachToBrowserTarget({});if(!c)return;let l=e.createSession(c.sessionId);return new this(e,r,l,n,o,s,i,a)}dispose(){this.serviceWorkerModel.dispose()}targetList(){return Array.from(this._targets.values()).filter(e=>nh.has(e.type()))}async getCandiateInfo(e){let r=await this._browser.Target.getTargets({});return r?e?r.targetInfos.filter(e):r.targetInfos:[]}async closeBrowser(){if(this.launchParams.request==="launch"){if(this.launchParams.cleanUp==="wholeBrowser")await this._browser.Browser.close({}),this.process?.kill();else for(let e of this._targets.values())await this._browser.Target.closeTarget({targetId:e.targetId}),this._connection.close();this.process=void 0}}waitForMainTarget(e){let r,n=new Promise(o=>r=o),i=async o=>{if([...this._targets.values()].some(u=>u.targetId===o.targetId)||this._detachedTargets.has(o.targetId)||e&&!e(o))return;let s=this._browser.Target.on("targetInfoChanged",u=>{u.targetInfo.targetId===o.targetId&&(o=u.targetInfo)}),a;try{a=await this._browser.Target.attachToTarget({targetId:o.targetId,flatten:!0})}finally{s.dispose()}if(!a){r(void 0);return}r(this.attachedToTarget(o,a.sessionId,!0))};return this._browser.Target.setDiscoverTargets({discover:!0}),this._browser.Target.on("targetCreated",this.enqueueLifecycleFn(o=>i(o.targetInfo))),this._browser.Target.on("targetInfoChanged",o=>this._targetInfoChanged(o.targetInfo,this.enqueueLifecycleFn(i))),this._browser.Target.on("detachedFromTarget",this.enqueueLifecycleFn(async o=>{o.targetId&&await this._detachedFromTarget(o.sessionId,!1)})),n}enqueueLifecycleFn(e){return r=>this._lifecycleQueue=this._lifecycleQueue.then(()=>e(r))}attachedToTarget(e,r,n,i,o=!0){let s=this._targets.get(r);if(s)return s;let a=this._connection.createSession(r),u=new Cy(this,e,a,i,n,this.launchParams,r,this.logger,()=>{this._connection.disposeSession(r),this._detachedFromTarget(r)});this._targets.set(r,u),i&&i._children.set(e.targetId,u),a.Target.on("attachedToTarget",async l=>{this.attachedToTarget(l.targetInfo,l.sessionId,l.waitingForDebugger,u)}),a.Target.on("detachedFromTarget",async l=>{l.targetId&&this._detachedFromTarget(l.sessionId,!1)}),a.Target.setAutoAttach({autoAttach:!0,waitForDebuggerOnStart:o,flatten:!0}),a.Network.setCacheDisabled({cacheDisabled:this.launchParams.disableNetworkCache}).catch(l=>this.logger.info("runtime.target","Error setting network cache state",l)),i||this.retrieveBrowserTelemetry(a);let c=e.type;return pS.has(c)&&this.frameModel.attached(a,e.targetId),this.serviceWorkerModel.attached(a),this._onTargetAddedEmitter.fire(u),!nh.has(c)||c==="service_worker"?u.runIfWaitingForDebugger():c==="page"&&o&&a.Page.waitForDebugger({}),u}async retrieveBrowserTelemetry(e){try{let r=await e.Browser.getVersion({});if(!r)throw new Error("Undefined return from getVersion()");let n={targetCRDPVersion:r.protocolVersion,targetRevision:r.revision,targetUserAgent:r.userAgent,targetV8:r.jsVersion,targetVersion:"",targetProject:"",targetProduct:""};this.logger.verbose("runtime.target","Retrieved browser information",r);let i=(r.product||"").split("/");i.length===2?(n.targetProject=i[0],n.targetVersion=i[1]):n.targetProduct=r.product,this.telemetry.report("browserVersion",n)}catch(r){this.logger.warn("runtime.target","Error getting browser telemetry",r)}}async _detachedFromTarget(e,r=!0){let n=this._targets.get(e);if(n){this._targets.delete(e),n.parentTarget?._children.delete(e);try{await n._detached()}catch{}if(this._onTargetRemovedEmitter.fire(n),r&&(this._detachedTargets.add(n.targetId),await this._browser.Target.detachFromTarget({sessionId:e})),!this._targets.size&&this.launchParams.request==="launch")try{this.launchParams.cleanUp==="wholeBrowser"?await this._browser.Browser.close({}):(await this._browser.Target.closeTarget({targetId:n.id()}),this._connection.close())}catch{}}}async _targetInfoChanged(e,r){let n=[...this._targets.values()].filter(i=>i.targetId===e.targetId);if(!e.attached||!n.length)return n.length&&await Promise.all(n.map(i=>this._detachedFromTarget(i.sessionId,!1))),r(e);for(let i of n)i._updateFromInfo(e);for(let i of this._targets.values())i.targetId!==e.targetId&&i._onNameChangedEmitter.fire()}};var U5=I(require("child_process")),j5=require("fs");var xye=50,$n=class t{constructor(e){this.messageEmitter=new z;this.endEmitter=new z;this.onMessage=this.messageEmitter.event;this.onEnd=this.endEmitter.event;this._ws=e,this._ws.addEventListener("message",r=>{this.messageEmitter.fire([r.data.toString("utf-8"),new Yn])}),this._ws.addEventListener("close",()=>{this.endEmitter.fire(),this._ws=void 0}),this._ws.addEventListener("error",()=>{})}static async create(e,r,n){let i=!e.startsWith("ws://"),o=await yl(e);for(;;){let s=Date.now()+xye;try{let a={headers:{host:n??"localhost"},perMessageDeflate:!1,maxPayload:268435456,rejectUnauthorized:!(i&&o),followRedirects:!0},u=new hB(e,[],a);return await _o(new Promise((c,l)=>{u.addEventListener("open",()=>c(new t(u))),u.addEventListener("error",p=>{let f=e===u.url?e:u.url.replace(/^http(s?):/,"ws$1:");if(f===e){l(p.error);return}this.create(f,r,n).then(c,l)})}),Or.withTimeout(2e3,r).token,`Could not open ${e}`).catch(c=>{throw u.close(),c})}catch(a){if(r.isCancellationRequested)throw a;let u=s-Date.now();u>0&&await Le(u)}}}send(e){this._ws?.send(e)}dispose(){return new Promise(e=>{if(!this._ws)return e();this._ws.addEventListener("close",()=>e()),this._ws.close()})}};var Xw=I(require("path"));function Lye(t){let e=[/^APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL$/i,/^ELECTRON_.+$/i,/^GOOGLE_API_KEY$/i,/^VSCODE_.+$/i,/^SNAP(|_.*)$/i,/^GDK_PIXBUF_.+$/i];return new jt(t).map((r,n)=>e.some(i=>i.test(r))?void 0:n)}var jt=class t{constructor(e){this.defined=Ae(()=>Vc(this.value));this.value=e?WT(e):{}}static{this.platform=process.platform}static{this.empty=new t({})}static{this.processEnv=Ae(()=>Lye(process.env))}lookup(e){return t.platform==="win32"?KT(this.value,e):this.value[e]}addToPath(e,r="append",n=!1){let i=t.platform==="win32"?"Path":"PATH",o=t.platform==="win32"?Xw.win32.delimiter:Xw.posix.delimiter,s=this.lookup(i);return n&&!s&&(s=`\${env:${i}}`),s?r==="append"?s=s+o+e:s=e+o+s:s=e,this.update(i,s)}addNodeOption(e){let r=this.lookup("NODE_OPTIONS");return this.update("NODE_OPTIONS",r?`${r} ${e}`:e)}update(e,r){return t.merge(this,{[e]:r})}merge(...e){return t.merge(this,...e)}map(e){return new t(qo(this.value,(r,n)=>e(n,r)))}static merge(...e){let r=e.map(i=>i instanceof t?i.value:i),n=t.platform==="win32"?GT(...r):Object.assign({},...r);return new t(n)}};var E5="--remote-debugging-port",D5="--remote-debugging-pipe",C5=t=>{let e={};for(let r of t){let n=r.indexOf("=");n===-1?e[r]=null:e[r.slice(0,n)]=r.slice(n+1)}return e},Jw=t=>{let e=[];for(let r of Object.keys(t)){let n=t[r];n!==void 0&&e.push(n===null?r:`${r}=${n}`)}return e},ja=class t{constructor(e=[]){this.args=e;this.argMap=Ae(()=>C5(this.args))}static{this.default=new t(["--disable-background-networking","--disable-background-timer-throttling","--disable-backgrounding-occluded-windows","--disable-breakpad","--disable-client-side-phishing-detection","--disable-default-apps","--disable-dev-shm-usage","--disable-renderer-backgrounding","--disable-sync","--metrics-recording-only","--no-first-run","--no-default-browser-check"])}add(e,r=null){return new t(Jw({...this.argMap(),[e]:r}))}remove(e){return new t(Jw({...this.argMap(),[e]:void 0}))}merge(e){return new t(Jw({...this.argMap(),...e instanceof t?e.argMap():C5(e)}))}setConnection(e){return new t(Jw({...this.argMap(),[D5]:e==="pipe"?null:void 0,[E5]:e!=="pipe"?String(e):void 0}))}getSuggestedConnection(){let e=this.argMap();if(e.hasOwnProperty(D5))return"pipe";let r=e[E5];if(r!==void 0)return r&&Number(r)||0}filter(e){let r=this.argMap(),n=[];for(let i of Object.keys(r)){let o=r[i];e(i,o)&&n.push(o===null?i:`${i}=${o}`)}return new t(n)}toArray(){return this.args.slice()}};var Mx=require("url");function Yw(t,e,r){let n=Wo(s=>{if(s)return new Mx.URL(s);throw new Error(`A valid url wasn't supplied: <${s}>`)}),i={"url.hostname":()=>n(e).hostname,"url.port":()=>n(e).port,browserInspectUri:()=>encodeURIComponent(r),browserInspectUriPath:()=>new Mx.URL(r).pathname,wsProtocol:()=>n(e).protocol==="https:"?"wss":"ws"};return t.replace(/{([^\}]+)}/g,(s,a)=>i.hasOwnProperty(a)?i[a]():s)}var O5=I(require("readline"));var T5=I(Zw());var si=class{constructor(e,r,n){this.logger=e;this.pipeWrite=r;this.pipeRead=n;this.messageEmitter=new z;this.endEmitter=new z;this.onMessage=this.messageEmitter.event;this.onEnd=this.endEmitter.event;this.onceEnded=Ae(()=>{this.streams&&(this.beforeClose(),this.streams.read.removeAllListeners(),this.pipeRead?.destroy(),this.streams.write.removeListener("end",this.onceEnded),this.streams.write.removeListener("error",this.onWriteError),this.streams.write.on("error",()=>{}),this.streams.write.end(),this.streams=void 0,this.endEmitter.fire())});this.onWriteError=e=>{this.logger.error("internal","pipeWrite error",{error:e})};let i=n||r;this.streams={read:i.on("error",o=>this.logger.error("internal","pipeRead error",{error:o})).pipe((0,T5.default)("\0")).on("data",o=>this.messageEmitter.fire([o,new Yn])).on("end",this.onceEnded),write:r.on("end",this.onceEnded).on("error",this.onWriteError)}}send(e){this.streams?.write.write(e+"\0")}dispose(){this.onceEnded()}beforeClose(){}};var e_=require("child_process"),kx=require("path");function xi(t,e,r="forceful"){if(r==="none")return!0;if(process.platform==="win32"){let n=process.env.WINDIR||"C:\\Windows",i=(0,kx.join)(n,"System32","taskkill.exe");try{return(0,e_.execSync)(`${i} ${r==="forceful"?"/F":""} /T /PID ${t}`,{stdio:"pipe"}),!0}catch(o){return e.error("runtime.exception","Error running taskkill.exe",o),!1}}else try{let n=(0,kx.join)(__dirname,"./targets/node/terminateProcess.sh"),i=(0,e_.spawnSync)("sh",[n,t.toString(),r==="forceful"?"9":"15"]);return i.stderr&&i.status?(e.error("runtime.exception","Error running terminateProcess",i),!1):!0}catch(n){return e.error("runtime.exception","Error running terminateProcess",n),!1}}var M5=require("fs");async function Ox(t,e,r,n){let i=new Sa(M5.promises),[o,s]=await Promise.all([$5(i,new URL("/json/version",t),e),n?$5(i,new URL("/json/list",t),e):Promise.resolve(void 0)]);if(!o.ok)r.verbose("runtime.launch","Error looking up /json/version",o);else if(o.body.webSocketDebuggerUrl){let a=R5(o.url,o.body.webSocketDebuggerUrl);return r.verbose("runtime.launch","Discovered target URL from /json/version",{url:o.body.webSocketDebuggerUrl,fixed:a}),a}if(s)if(!s.ok)r.verbose("runtime.launch","Error looking up /json/list",s);else{let a=R5(s.url,s.body[0].webSocketDebuggerUrl);return r.verbose("runtime.launch","Discovered target URL from /json/list",{url:s.body[0].webSocketDebuggerUrl,fixed:a}),a}throw new Error("Could not find any debuggable target")}async function $5(t,e,r){if(e.hostname!=="localhost")return t.fetchJson(e.toString(),r,{host:"localhost"});let n=e.toString();e.hostname="127.0.0.1";let i=e.toString(),o=new Or(r);try{let s;return await so([n,i].map(async u=>(s=await t.fetchJson(u,o.token),s.ok&&s)))||s}finally{o.cancel()}}var k5=t=>async(e,r,n)=>{for(;;)try{return await Ox(e,r,n,t)}catch(i){if(r.isCancellationRequested)throw new Error(`Could not connect to debug target at ${e}: ${i.message}`);await Le(200)}},Xp=k5(!0),t_=k5(!1);function R5(t,e){let r=new URL(t),n=new URL(e);return n.host=r.host,n.toString()}var F5=async(t,e,r,n)=>{let i=r.connection===0?await Fye(e,n):await t_(`http://localhost:${r.connection}`,n,t),o=r.inspectUri?Yw(r.inspectUri,r.url,i):i;for(;;)try{return await $n.create(o,n)}catch(s){if(n.isCancellationRequested)throw s;await Le(200)}},r_=class{constructor(e){this.logger=e;this.pid=void 0;this.onExit=new z().event;this.onError=new z().event}async transport(e,r){return F5(this.logger,this,e,r)}kill(){}},n_=class{constructor(e,r){this.cp=e;this.logger=r;this.pid=void 0;this.exitEmitter=new z;this.onExit=this.exitEmitter.event;this.errorEmitter=new z;this.onError=this.errorEmitter.event;e.on("exit",n=>this.exitEmitter.fire(n||0)),e.on("error",n=>this.errorEmitter.fire(n))}get stderr(){return this.cp.stderr}get stdio(){return this.cp.stdio}async transport(e,r){return e.connection==="pipe"?new si(this.logger,this.cp.stdio[3],this.cp.stdio[4]):F5(this.logger,this,e,r)}kill(){xi(this.cp.pid,this.logger)}};function Fye(t,e){if(!t.stderr)throw new Error("Cannot wait for a websocket for a target that lacks stderr");return new Promise((r,n)=>{let i=O5.createInterface({input:t.stderr}),o="",s=()=>c();i.on("line",l),i.on("close",s);let a=new Ie([t.onExit(()=>c()),t.onError(c)]),u=e.onCancellationRequested(()=>{p(),n(new wo(`Timed out after ${u} ms while trying to connect to the browser!`))});function c(f){p(),n(new Error(["Failed to launch browser!"+(f?" "+f.message:""),o,"","TROUBLESHOOTING: https://github.com/GoogleChrome/puppeteer/blob/master/docs/troubleshooting.md",""].join(`
`)))}function l(f){o+=f+`
`;let m=f.match(/^DevTools listening on (ws:\/\/.*)$/);m&&(p(),r(m[1]))}function p(){u.dispose(),i.removeListener("line",l),i.removeListener("close",s),a.dispose()}})}async function N5(t,e,r,n){let i=t.launchUnelevatedRequest({process:e,args:r});await _o(i,n,"Could not launch browser unelevated")}var B5=()=>{};async function q5(t,e,r,n,i,o,s={}){let{onStderr:a=B5,onStdout:u=B5,args:c=[],dumpio:l=!1,cwd:p=process.cwd(),env:f=jt.empty,connection:m="pipe",cleanUp:h="wholeBrowser",url:H,inspectUri:v}=s,_=new ja(c),x=_.getSuggestedConnection();s.includeLaunchArgs!==!1?(_=Fx(_,s),x===void 0&&(_=_.setConnection(m),x=m)):x===void 0&&(x="pipe");let k=["pipe","pipe","pipe"];x==="pipe"&&(l?k=["ignore","pipe","pipe","pipe","pipe"]:k=["ignore","ignore","ignore","pipe","pipe"]);let T;if(!!(i.supportsLaunchUnelevatedProcessRequest&&s.launchUnelevated)&&typeof x=="number"&&x!==0)await N5(t,e,_.toArray(),o),T=new r_(r);else{r.info("runtime.launch",`Launching Chrome from ${e}`);let G=U5.spawn(e,_.toArray(),{detached:!0,env:f.defined(),cwd:await yu(j5.promises,p)?p:process.cwd(),stdio:k});if(G.pid===void 0)throw await Promise.race([Le(1e3).then(()=>new Error("Unable to launch the executable (undefined pid)")),new Promise(F=>G.once("error",F))]);T=new n_(G,r)}l?(T.stderr?.on("data",G=>a(G.toString())),T.stdout?.on("data",G=>u(G.toString()))):(T.stderr?.resume(),T.stdout?.resume());let K=()=>{h==="wholeBrowser"&&T.kill()};process.on("exit",K),T.onExit(()=>process.removeListener("exit",K));try{if(s.promisedPort){let R;x=await Promise.race([s.promisedPort,new Promise((M,D)=>{R=T.onExit(W=>{D(new Z(b1(W)))})})]).finally(()=>R.dispose())}let G=await T.transport({connection:x,inspectUri:v||void 0,url:H||void 0},o),F=new Ft(G,r,n);return K=async()=>{h==="wholeBrowser"?(await F.rootSession().Browser.close({}),T.kill()):F.close()},{cdp:F,process:T}}catch(G){throw K(),G}}function Fx(t,e={}){let{userDataDir:r=null,ignoreDefaultArgs:n=!1}=e,i=n===!0?new ja:ja.default;return n instanceof Array&&(i=i.filter(o=>!n.includes(o))),r&&(i=i.add("--user-data-dir",r)),i=i.merge(t),t.toArray().every(o=>o.startsWith("-"))&&e.hasUserNavigation&&(i=i.add("about:blank")),i}async function W5(t,e,r,n){let{browserWSEndpoint:i,browserURL:o}=t;if(i){let s=await $n.create(i,e);return new Ft(s,r,n)}else if(o){let s=await t_(o,e,r),a=t.inspectUri?Yw(t.inspectUri,t.pageURL,s):s,u=await $n.create(a,e);return new Ft(u,r,n)}throw new Error("Either browserURL or browserWSEndpoint needs to be specified")}var ai=class{constructor(e,r,n){this.logger=e;this.pathResolver=r;this.vscode=n;this._disposables=[];this._onTerminatedEmitter=new z;this.onTerminated=this._onTerminatedEmitter.event;this._onTargetListChangedEmitter=new z;this.onTargetListChanged=this._onTargetListChangedEmitter.event}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[],this._attemptTimer&&clearTimeout(this._attemptTimer),this._targetManager&&this._targetManager.dispose()}resolveParams(e){return e.request==="attach"&&(e.type==="pwa-chrome"||e.type==="pwa-msedge"&&typeof e.useWebView!="object")&&e.browserAttachLocation==="workspace"}async launch(e,r){return this.resolveParams(e)?(this._lastLaunchParams={...e,timeout:1/0},await this.attemptToAttach(this._lastLaunchParams,r),{blockSessionTermination:!0}):{blockSessionTermination:!1}}_scheduleAttach(e,r){this._attemptTimer=setTimeout(()=>{this._attemptTimer=void 0,this.attemptToAttach(e,{...r,cancellationToken:or})},1e3)}createTargetManager(e,r,n){return Ua.connect(e,void 0,this.pathResolver,r,this.logger,n.telemetryReporter,n.targetOrigin)}async attemptToAttach(e,r){let n=await this.acquireConnectionForBrowser(r,e);this._connection=n,n.onDisconnected(()=>{this._connection=void 0,this._targetManager&&(this._targetManager.dispose(),this._targetManager=void 0,this._onTargetListChangedEmitter.fire()),this._lastLaunchParams===e&&e.restart?this._scheduleAttach(e,r):this._onTerminatedEmitter.fire({killed:!0,code:0})},void 0,this._disposables);let i=this._targetManager=await this.createTargetManager(n,e,r);if(!i)return;i.serviceWorkerModel.onDidChange(()=>this._onTargetListChangedEmitter.fire()),i.frameModel.onFrameNavigated(()=>this._onTargetListChangedEmitter.fire()),i.onTargetAdded(()=>{this._onTargetListChangedEmitter.fire()}),i.onTargetRemoved(()=>{this._onTargetListChangedEmitter.fire(),i.targetList().length||this._onTerminatedEmitter.fire({killed:!0,code:0})});let o=await Promise.race([i.waitForMainTarget(await this.getTargetFilter(i,e)),Le(e.timeout).then(()=>{throw new Z(dy())})]);return typeof o=="string"?o:void 0}async getTargetFilter(e,r){let n=ta(r),i=bl(n);if(r.targetSelection!=="pick")return i;let o=await e.getCandiateInfo(i);if(o.length===0)return i;if(o.length===1||!this.vscode)return u=>u.targetId===o[0].targetId;let s=i_.t("Select a tab"),a=await this.vscode.window.showQuickPick(o.map(u=>({label:u.title,detail:u.url,targetId:u.targetId})),{matchOnDescription:!0,matchOnDetail:!0,placeHolder:s});return a?u=>u.targetId===a.targetId:i}async acquireConnectionForBrowser({telemetryReporter:e,cancellationToken:r},n){for(;this._lastLaunchParams===n;)try{return await this.acquireConnectionInner(e,n,r)}catch(i){if(r.isCancellationRequested)throw new Z(Zd(i_.t("Cannot connect to the target at {0}: {1}",`${n.address}:${n.port}`,i.message)));await Le(1e3)}throw new Z(Zd(i_.t("Cannot connect to the target at {0}: {1}",`${n.address}:${n.port}`,"Cancelled")))}async acquireConnectionInner(e,r,n){let i=`http://${r.address}:${r.port}`;return await W5({browserURL:i,inspectUri:r.inspectUri,pageURL:r.url},n,this.logger,e)}async terminate(){this._lastLaunchParams=void 0,this._connection?.close()}async restart(){if(this._targetManager)for(let e of this._targetManager.targetList())e.type()==="page"&&!e.name().startsWith("devtools://")&&e.restart()}targetList(){let e=this._targetManager;return e?e.targetList():[]}};ai=C([(0,Wa.injectable)(),b(0,(0,Wa.inject)(ce)),b(1,(0,Wa.inject)(Qe)),b(2,(0,Wa.optional)()),b(2,(0,Wa.inject)(zn))],ai);var Li=I(J());var G5=I(xA()),Km=I(require("fs")),Va=I(J()),Jp=I(require("path"));var $o=class{constructor(e,r,n,i,o){this.storagePath=e;this.logger=r;this.pathResolver=n;this.initializeParams=i;this.fs=o;this._disposables=new Ie;this._terminated=!1;this._onTerminatedEmitter=new z;this.onTerminated=this._onTerminatedEmitter.event;this._onTargetListChangedEmitter=new z;this.onTargetListChanged=this._onTargetListChangedEmitter.event}dispose(){this._disposables.dispose()}async launchBrowser({runtimeExecutable:e,trace:r,includeDefaultArgs:n,includeLaunchArgs:i,runtimeArgs:o,userDataDir:s,env:a,cwd:u,port:c,url:l,file:p,inspectUri:f,webRoot:m,cleanUp:h,launchUnelevated:H},v,_,x,k){let T=await this.findBrowserPath(e||"stable"),j;return typeof s=="string"?j=Jp.resolve(s):s&&(j=Jp.resolve(Jp.join(this.storagePath,o?.includes("--headless")?".headless-profile":".profile"))),Km.mkdirSync(this.storagePath,{recursive:!0}),j&&(Km.mkdirSync(j,{recursive:!0}),j=Km.realpathSync(j)),await q5(v,T,this.logger,x,this.initializeParams,_,{onStdout:K=>v.output({category:"stdout",output:K}),onStderr:K=>v.output({category:"stderr",output:K}),dumpio:typeof r=="boolean"?r:r.stdio,cleanUp:h,hasUserNavigation:!!(l||p),cwd:u||m||void 0,env:jt.merge(jt.processEnv(),a),args:o||[],userDataDir:j,connection:c||(f?0:"pipe"),launchUnelevated:H,ignoreDefaultArgs:!n,includeLaunchArgs:i,url:l,inspectUri:f,promisedPort:k})}getFilterForTarget(e){return bl(ta(e,["about:blank"]))}async prepareLaunch(e,{dap:r,targetOrigin:n,cancellationToken:i,telemetryReporter:o}){let s;try{s=await this.launchBrowser(e,r,i,o)}catch(c){throw new Z(h1(c))}if(this._disposables.push(s.cdp.onDisconnected(()=>this.fireTerminatedEvent())),this._connectionForTest=s.cdp,this._launchParams=e,this._targetManager=await Ua.connect(s.cdp,s.process,this.pathResolver,this._launchParams,this.logger,o,n),!this._targetManager)throw s.process.kill(),new Z(Zd());this._targetManager.serviceWorkerModel.onDidChange(()=>this._onTargetListChangedEmitter.fire()),this._targetManager.frameModel.onFrameNavigated(()=>this._onTargetListChangedEmitter.fire()),this._disposables.push(this._targetManager),this._targetManager.onTargetAdded(()=>{this._onTargetListChangedEmitter.fire()}),this._targetManager.onTargetRemoved(()=>{this._onTargetListChangedEmitter.fire()});let a=this.getFilterForTarget(e),u=await _o(this._targetManager.waitForMainTarget(a),i,"Could not attach to main target");if(!u)throw s.process.kill(),new Z(dy());return u}async finishLaunch(e,r){if("skipNavigateForTest"in r)return;let n;if(r.file){let i=Jp.resolve(r.webRoot||r.rootPath||"",r.file),o=Math.min(i.includes("#")?i.indexOf("#"):1/0,i.includes("?")?i.indexOf("?"):1/0);isFinite(o)&&!await bn(this.fs,i)?n=ke(i.slice(0,o))+i.slice(o):n=ke(i)}else n=r.url;n&&await e.cdp().Page.navigate({url:n})}async launch(e,r){let n=this.resolveParams(e);if(!n)return{blockSessionTermination:!1};let i=await this.prepareLaunch(n,r);return await this.finishLaunch(i,n),{blockSessionTermination:!0}}async terminate(){await this._targetManager?.closeBrowser()}async restart(){for(let e of this.targetList())e.type()==="page"&&e.restart()}async findBrowserByExe(e,r){return r==="*"?(await e.findWhere(i=>i.quality==="stable")||(await e.findAll())[0])?.path:(0,G5.isQuality)(r)?(await e.findWhere(n=>n.quality===r))?.path:r}targetList(){let e=this._targetManager;return e?e.targetList():[]}connectionForTest(){return this._connectionForTest}fireTerminatedEvent(){this._terminated||(this._terminated=!0,this._onTerminatedEmitter.fire({code:0,killed:!0}))}};$o=C([(0,Va.injectable)(),b(0,(0,Va.inject)(yo)),b(1,(0,Va.inject)(ce)),b(2,(0,Va.inject)(Qe)),b(3,(0,Va.inject)(an)),b(4,(0,Va.inject)(we))],$o);var vc=class extends $o{constructor(r,n,i,o,s,a){super(r,n,s,a,o);this.browserFinder=i}resolveParams(r){return r.type==="pwa-chrome"&&r.request==="launch"&&r.browserLaunchLocation==="workspace"?r:void 0}async findBrowserPath(r){let n=await this.findBrowserByExe(this.browserFinder,r);if(!n||!await yu(this.fs,n))throw new Z(fy("Chrome",r,(await this.browserFinder.findAll()).map(i=>i.quality)));return n}};vc=C([(0,Li.injectable)(),b(0,(0,Li.inject)(yo)),b(1,(0,Li.inject)(ce)),b(2,(0,Li.inject)(ku)),b(2,(0,Li.tagged)("browser","chrome")),b(3,(0,Li.inject)(we)),b(4,(0,Li.inject)(Qe)),b(5,(0,Li.inject)(an))],vc);var K5=require("crypto"),Ti=I(J()),z5=require("net"),X5=require("os"),J5=require("path");var Nye=["--do-not-de-elevate"],Yp=class extends $o{constructor(r,n,i,o,s,a){super(r,n,s,a,o);this.browserFinder=i}resolveParams(r){return r.type==="pwa-msedge"&&r.request==="launch"&&r.browserLaunchLocation==="workspace"?r:void 0}launchBrowser(r,n,i,o){return super.launchBrowser({...r,runtimeArgs:r.runtimeArgs??Nye},n,i,o,r.useWebView?this.getWebviewPort(r,o):void 0)}getFilterForTarget(r){return r.useWebView&&r.urlFilter?bl(ta(r)):super.getFilterForTarget(r)}async getWebviewPort(r,n){let i=Be();if(!r.runtimeExecutable)return i.resolve(r.port),i.promise;let o=r.runtimeExecutable.split(/\\|\//).pop(),s=`VSCode_${(0,K5.randomBytes)(12).toString("base64")}`,a=`\\\\.\\pipe\\WebView2\\Debugger\\${o}\\${s}`,u=(0,z5.createServer)(c=>{c.on("data",async l=>{let p=JSON.parse(l.toString()),f=p.devtoolsActivePort||"",m=parseInt(f.split(`
`).shift()||""),h=r.port||m;i.resolve(h);let H=`ws://${r.address}:${h}/devtools/${p.type}/${p.id}`,v=await $n.create(H,or),_=new Ft(v,this.logger,n);await _.rootSession().Runtime.runIfWaitingForDebugger({}),_.close()})});return u.on("error",i.reject),u.on("close",()=>i.resolve(r.port)),u.listen(a),r.userDataDir=r.userDataDir||(0,J5.join)((0,X5.tmpdir)(),`vscode-js-debug-userdatadir_${r.port}`),r.env=r.env||{},r.env.WEBVIEW2_USER_DATA_FOLDER=r.userDataDir.toString(),r.env.WEBVIEW2_ADDITIONAL_BROWSER_ARGUMENTS=`--remote-debugging-port=${r.port}`,r.env.WEBVIEW2_WAIT_FOR_SCRIPT_DEBUGGER="true",r.env.WEBVIEW2_PIPE_FOR_SCRIPT_DEBUGGER=s,i.promise}async findBrowserPath(r){let n=await this.findBrowserByExe(this.browserFinder,r);if(!n||!await yu(this.fs,n))throw new Z(fy("Edge",r,(await this.browserFinder.findAll()).map(i=>i.quality)));return n}};Yp=C([(0,Ti.injectable)(),b(0,(0,Ti.inject)(yo)),b(1,(0,Ti.inject)(ce)),b(2,(0,Ti.inject)(ku)),b(2,(0,Ti.tagged)("browser","edge")),b(3,(0,Ti.inject)(we)),b(4,(0,Ti.inject)(Qe)),b(5,(0,Ti.inject)(an))],Yp);var ws=I(J());var Y5=require("crypto"),o_=I(J());var Bye=0,Ro=class{constructor(e){this.portLeaseTracker=e;this.teardown=new WeakMap}async launch(e,r,n){this.server&&this.server.close();let i=`/${(0,Y5.randomBytes)(20).toString("hex")}`,o=this.server=await Cv(this.portLeaseTracker,{perMessageDeflate:!0,host:"127.0.0.1",path:i}),s=++Bye;e.launchBrowserInCompanion({...n,serverPort:o.address().port,path:i,launchId:s});let a=await _o(new Promise((c,l)=>{o.once("connection",c),o.once("error",l)}),r,"Timed out waiting for browser connection"),u=new $n(a);return this.teardown.set(u,()=>e.killCompanionBrowser({launchId:s})),u}close(e){this.teardown.get(e)?.()}dispose(){this.server?.close(),this.server=void 0}};Ro=C([(0,o_.injectable)(),b(0,(0,o_.inject)(st))],Ro);var Qp=class extends ai{constructor(r,n,i,o){super(n,i,o);this.helper=r}resolveParams(r){return r.request==="attach"&&(r.type==="pwa-chrome"||r.type==="pwa-msedge")&&r.browserAttachLocation==="ui"}async acquireConnectionForBrowser(r,n){let i=await this.helper.launch(r.dap,r.cancellationToken,{type:n.type==="pwa-chrome"?"chrome":"edge",params:n,attach:{host:n.address,port:n.port}});return new Ft(i,this.logger,r.telemetryReporter)}};Qp=C([(0,ws.injectable)(),b(0,(0,ws.inject)(Ro)),b(1,(0,ws.inject)(ce)),b(2,(0,ws.inject)(Qe)),b(3,(0,ws.optional)()),b(3,(0,ws.inject)(zn))],Qp);var _s=I(J());var Zp=class extends $o{constructor(r,n,i,o,s,a){super(r,n,i,o,s);this.helper=a}resolveParams(r){return(r.type==="pwa-chrome"||r.type==="pwa-msedge")&&r.request==="launch"&&r.browserLaunchLocation==="ui"?r:void 0}async launchBrowser(r,n,i,o){let s=await this.helper.launch(n,i,{type:r.type==="pwa-chrome"?"chrome":"edge",browserArgs:Fx(new ja(r.runtimeArgs||[]),{hasUserNavigation:!!r.url,ignoreDefaultArgs:!r.includeDefaultArgs}).setConnection(r.port||"pipe").toArray(),params:r});return{cdp:new Ft(s,this.logger,o),process:{onExit:new z().event,onError:new z().event,transport:()=>Promise.resolve(s),kill:()=>this.helper.close(s)}}}async findBrowserPath(){throw new Error("not implemented")}};Zp=C([(0,_s.injectable)(),b(0,(0,_s.inject)(yo)),b(1,(0,_s.inject)(ce)),b(2,(0,_s.inject)(Qe)),b(3,(0,_s.inject)(an)),b(4,(0,_s.inject)(we)),b(5,(0,_s.inject)(Ro))],Zp);var Ga=I(J()),iG=require("net");var ef=class extends ai{constructor(e,r,n){super(e,r,n)}resolveParams(e){return e.request==="attach"&&e.type==="pwa-msedge"&&typeof e.useWebView=="object"}async acquireConnectionForBrowser(e,r){let{getAppContainerProcessTokens:n}=await Promise.resolve().then(()=>I(nG())),i=n(r.useWebView.pipeName);if(!i)throw new Z(g1());let o=i.map(u=>(0,iG.connect)(u)),s;try{s=await _o(so(o.map(u=>new Promise(c=>u.on("error",()=>c(void 0)).on("connect",()=>c(u))))),e.cancellationToken)}finally{for(let u of o)u!==s&&u.destroy()}if(!s)throw new Z(H1());let a=new si(this.logger,s);return new Ft(a,this.logger,e.telemetryReporter)}};ef=C([(0,Ga.injectable)(),b(0,(0,Ga.inject)(ce)),b(1,(0,Ga.inject)(Qe)),b(2,(0,Ga.optional)()),b(2,(0,Ga.inject)(zn))],ef);var of=I(J()),HG=require("net");var Rn=I(J());var zm=Symbol("ILinkedBreakpointLocation");var pG=I(require("path"));var Jm=I(J()),za=I(require("path")),lG=require("url");var oG=require("fs"),As=I(require("path")),Nx=require("url");function a_(t,e){return t?(t.endsWith("/")||(t+="/"),t+e):e}async function u_(t,e,r,n,i){e=vt(e)||e;let o;if(t){if(on(t))o=vt(t);else if(kr(t))o=await n(t,r,i)||t;else if(As.isAbsolute(e))o=Kye(e,t);else{let s=new Nx.URL(e).pathname,a=await n(s,r,i),u=As.dirname(a);o=Ws(u,t)}i.verbose("sourcemap.parsing","resolved sourceRoot",{sourceRoot:t,absSourceRoot:o})}else if(As.isAbsolute(e))o=As.dirname(e),i.verbose("sourcemap.parsing","no sourceRoot specified, using script dirname",{absSourceRoot:o});else{let s=new Nx.URL(e).pathname||"/placeholder.js",a=await n(s,r,i);o=a?As.dirname(a):"",i.verbose("sourcemap.parsing","no sourceRoot specified, using webRoot + script path dirname",{absSourceRoot:o})}return o=Y1(o),o=Pt(o),o}var Xm=async(t,e,r)=>{if(!t||!t.startsWith("/"))return"";let n=Object.keys(e).sort((i,o)=>o.length-i.length);for(let i of n){if(!i)continue;let o=e[i];if(i[0]!=="/"&&(r.verbose("sourcemap.parsing",`Keys should be absolute: ${i}`),i="/"+i),Vye(i,t))return Gye(i,o,t)}return""},sG=(t,e)=>async(r,n,i)=>{if(process.platform==="win32"&&/^[a-z]:/i.test(r))return r;let o=await Hl(t,As.dirname(e),"package.json");if(!o)return Xm(r,n,i);let s=await Xm(r,VT(n,a=>a.length>=o.length),i);return process.platform!=="win32"&&r!=="/"&&!s&&(await oG.promises.stat(r).catch(()=>{}))?.isDirectory()?r:s||o};function Vye(t,e){return t===e?!0:(t.endsWith("/")||(t+="/"),e.startsWith(t))}function Gye(t,e,r){let n=decodeURIComponent(r.substring(t.length));return n?Ws(e,n):e}function Kye(t,e){return wn(As.dirname(t),e)}var cG=I(gh()),rf=I(require("path"));var p_="*",aG=new RegExp(zr(p_),"g"),c_="?:"+p_,zye=new RegExp(zr(c_),"g"),Bx=(t,e)=>{let r=e.match(t);return t.lastIndex=0,r?r.length:0},uG=new RegExp(`${zr(c_)}|${zr(p_)}`,"g"),l_=class{constructor(e,r){this.logger=r;this.replacers=[];let n=Object.keys(e).sort((i,o)=>o.replace(c_,"*").length-i.replace(c_,"*").length);for(let i of n){let o=e[i];if(!o.includes("*")&&/\$[0-9'`&]/.test(o)){this.replacers.push([new RegExp(`^${i}$`,"i"),o]);continue}let s=Ge(i),a=`"${s}": "${o}"`,u=Bx(aG,s)-Bx(zye,s);if(u>1){r.warn("runtime.sourcemap",`Warning: only one asterisk allowed in a sourceMapPathOverrides entry - ${a}`);continue}if(Bx(aG,o)>u){r.warn("runtime.sourcemap",`The right side of a sourceMapPathOverrides entry must have 0 or 1 asterisks - ${a}}`);continue}let c="^",l=0;for(uG.lastIndex=0;;){let p=uG.exec(s);if(c+=zr(s.slice(l,p?.index),"/"),!p)break;p[0]===p_?c+="(.*?)":c+=".*?",l=p.index+p[0].length}u===0&&(c+="([\\/\\\\].*)?",o+="*"),this.replacers.push([new RegExp(c+"$","i"),o.replace(/\$/g,"$$$$").replace(/\*/,"$1")])}}apply(e){let r=Ge(e);for(let[n,i]of this.replacers){let o=r.replace(n,i);if(o!==r)return this.logger.verbose("runtime.sourcemap",`SourceMap: mapping ${e} => ${o}, via sourceMapPathOverrides entry - ${n.toString()}`),Ws(o)}return e}};var Xye=/\x00/,tf=class{constructor(e,r){this.options=e;this.logger=r;this.sourceMapOverrides=new l_(this.options.sourceMapOverrides,this.logger);this.resolvePatterns=this.options.resolveSourceMapLocations?.map(e=>{let r=e.startsWith("!")?"!":"",n=e.slice(r.length).replace(/\.[a-z0-9]+$/,".*");if(!kr(n))return Ge(e);n=Ge(wn(n));let i=TI(this.options.workspaceFolder),o=TI(n),s=0;for(let a=0;a<i.length&&a<o.length&&o[a].toLowerCase()===i[a].toLowerCase();a++)s+=i[a].length+1;return n=n.slice(0,s).replace(/[\[\]\(\)\{\}\!\*]/g,"\\$&")+n.slice(s),r+n})}shouldResolveSourceMap({sourceMapUrl:e,compiledPath:r}){if(r.startsWith(Ea)||r==="")return!1;if(!this.resolvePatterns||this.resolvePatterns.length===0)return!0;let n=vt(e)||mr(e)&&r||e;if(n.startsWith("webpack-internal:///"))return!0;let i=ty(e)?!1:hS(),o=this.rebaseRemoteToLocal(n);return(0,cG.default)((o!==n?[n,o]:[n]).map(Ge),this.resolvePatterns,{dot:!0,nocase:!i}).length>0}rebaseRemoteToLocal(e){if(!this.options.remoteRoot||!this.options.localRoot||!this.canMapPath(e))return rf.resolve(e);let r=Vd(this.options.remoteRoot,e);if(r.startsWith(".."))return"";let n=Ws(this.options.localRoot,r);return n=$I(n),this.logger.verbose("runtime.sourcemap",`Mapped remoteToLocal: ${e} -> ${n}`),wn(n)}rebaseLocalToRemote(e){if(!this.options.remoteRoot||!this.options.localRoot||!this.canMapPath(e))return e;let r=Vd(this.options.localRoot,e),n=Ws(this.options.remoteRoot,r);return n=Pt(n,!0),this.logger.verbose("runtime.sourcemap",`Mapped localToRemote: ${e} -> ${n}`),n}normalizeSourceMapUrl(e){e=e.replace(Xye,"");let r=e.lastIndexOf("?");return r!==-1&&e.slice(r-4,r)!==".vue"&&(e=e.slice(0,r)),e}canMapPath(e){return rf.posix.isAbsolute(e)||rf.win32.isAbsolute(e)||on(e)}};var Ux="https?:\\/\\/[^\\/]+\\/",Ka=class extends tf{constructor(r,n,i,o){super(i,o);this.vueMapper=r;this.fsUtils=n}absolutePathToUrlPath(r){r=za.normalize(r);let{baseUrl:n,pathMapping:i}=this.options,o=["/",i["/"]],s=Object.entries(i).sort(([c,l],[p,f])=>f.length-l.length||p.length-c.length).find(([,c])=>ey(c,r))||o;if(!s)return{url:ke(r),needsWildcard:!1};if(n&&on(n))return{url:vl(r),needsWildcard:!1};let a=ea(za.relative(s[1],r)),u=s[0].replace(/\/$|^\//g,"");return u&&(a=u+"/"+a),!n&&!Ry(a)?{url:a,needsWildcard:!0}:{url:Iy(n,a),needsWildcard:!1}}async urlToAbsolutePath({url:r,map:n}){let i=r.indexOf("?");return i!==-1&&r.slice(i-4,i)!==".vue"&&(r=r.slice(0,i)),n?this.sourceMapSourceToAbsolute(r,n):this.simpleUrlToAbsolute(r)}async simpleUrlToAbsolute(r){if(!r)return;if(on(r)){let s=vt(r);if(await this.fsUtils.exists(s))return s;let a=Q1(r);if(await this.fsUtils.exists(a))return a}let n;try{let s=new lG.URL(r);if(!s.pathname||s.pathname==="/"?n="index.html":n=s.pathname,s.protocol==="webpack-internal:")return}catch{n=r}let i=za.extname(n),o=n.replace(/^\//,"").split(/[\/\\]/);for(;o.length>0;){let s="/"+o.join("/"),a=await Xm(s,this.options.pathMapping,this.logger);if(a){if(!i&&await this.fsUtils.exists(a+".html"))return a+".html";if(await this.fsUtils.exists(a))return a}o.shift()}}async sourceMapSourceToAbsolute(r,n){if(!this.shouldResolveSourceMap(n.metadata))return;switch(this.vueMapper.getVueHandling(r)){case 2:return;case 1:let a=await this.vueMapper.lookup(r);if(a)return Pt(a);break;default:}r=this.normalizeSourceMapUrl(r);let{pathMapping:i}=this.options,o=a_(n.sourceRoot,r),s=this.sourceMapOverrides.apply(o);if(s!==o){s=Pt(s);let a=wn(i["/"],"..","ClientApp",Vd(i["/"],s));return this.options.clientID==="visualstudio"&&o.startsWith("webpack:///")&&!await this.fsUtils.exists(s)&&await this.fsUtils.exists(a)?a:s}return on(r)?vt(r):za.isAbsolute(r)?Pt(r):wn(await u_(n.sourceRoot,n.metadata.compiledPath,i,Xm,this.logger),r)}absolutePathToUrlRegexp(r){let n=this.absolutePathToUrlPath(r),i=n.url,o=i.length;i.endsWith("index.html")?(o=i.length-10-1,i=i.slice(0,o)+"\\/?($|index(\\.html)?)"):i.endsWith(".html")&&(o=i.length-5,i=i.slice(0,o)+"(\\.html)?");let s=0;n.needsWildcard&&(i=Ux+i,s=Ux.length,o+=Ux.length);let a=qn(i,[s,o]);return n.needsWildcard?`${qn(ke(r))}|${a}`:a}};Ka=C([(0,Jm.injectable)(),b(0,(0,Jm.inject)(Dp)),b(1,(0,Jm.inject)(Mr))],Ka);var f_=class extends Ka{constructor(r,n,i,o){super(r,n,i,o);this.blazorInCodespacesRegexpSubstitution="$1:\\$2";if(this.options.remoteFilePrefix){let s=`\\${pG.default.sep}`,a=this.options.remoteFilePrefix.replace(new RegExp(s,"g"),s);this.blazorInCodespacesRegexp=new RegExp(`^${a}${s}([A-z])\\$${s}(.*)$`)}else this.blazorInCodespacesRegexp=new RegExp("")}absolutePathToUrlRegexp(r){if(this.options.remoteFilePrefix){let n=r.replace(this.blazorInCodespacesRegexp,this.blazorInCodespacesRegexpSubstitution),o=ea(n).replace(/^(\w):(.*)$/,"$1$2"),s=qn(o);if(s){let a=`dotnet://.*\\.dll/${s}`;return this.logger.verbose("runtime.breakpoints","absolutePathToUrlRegexp.blazor.remoteFs",{absolutePath:r,dotnetUrlRegexp:a}),a}}else{let n=ke(r),i=qn(n),o=super.absolutePathToUrlRegexp(r);return i.includes(o)?i:`${i}|${o}`}return super.absolutePathToUrlRegexp(r)}};var fG=require("url");function dG(t){if("file"in t&&t.file)return vl(t.file);if(t.url)try{let e=new fG.URL(t.url);return e.pathname="/",e.search="",e.hash="",e.protocol==="data:"?void 0:e.href}catch{}}var bc=I(require("path")),mG=require("url");var hG="node:",Is=class t extends tf{constructor(r,n,i,o){super(i,o);this.fsUtils=r;this.linkedBp=n;this.options=i;this.logger=o}static shouldWarnAboutSymlinks(r){return"runtimeArgs"in r&&!r.runtimeArgs?.includes("--preserve-symlinks")}static getOptions(r){return{workspaceFolder:r.__workspaceFolder,resolveSourceMapLocations:r.resolveSourceMapLocations,basePath:r.cwd,sourceMapOverrides:r.sourceMapPathOverrides,remoteRoot:r.remoteRoot,localRoot:r.localRoot}}derive(r){return new t(this.fsUtils,this.linkedBp,{...this.options,...r},this.logger)}get resolutionOptions(){return this.options}async urlToAbsolutePath({url:r,map:n}){if(r=this.normalizeSourceMapUrl(r),r.startsWith(hG)&&this.options.basePath)return r=bc.join(this.options.basePath,"lib",r.slice(hG.length)),r.endsWith(".js")||(r+=".js"),r;if(n)return this.sourceMapSourceToAbsolute(r,n);let i=vt(r);if(i)return this.rebaseRemoteToLocal(i);if(Ry(r)){let s=this.sourceMapOverrides.apply(r);r=s===r?new mG.URL(r).pathname.slice(1):s}else if(bc.isAbsolute(r))r=this.sourceMapOverrides.apply(r);else return`<node_internals>/${r}`;let o=wn(this.options.basePath??"",r);return this.rebaseRemoteToLocal(o)}absolutePathToUrl(r){return ke(this.rebaseLocalToRemote(bc.normalize(r)))}async absolutePathToUrlRegexp(r){let n=r;try{n=await this.fsUtils.realPath(r)}catch{}return Ty(n,r)?qn(this.absolutePathToUrl(r)):(this.linkedBp?.warn(),qn(this.absolutePathToUrl(r))+"|"+qn(this.absolutePathToUrl(n)))}async sourceMapSourceToAbsolute(r,n){if(!this.shouldResolveSourceMap(n.metadata))return;let i=a_(n.sourceRoot,r),o=this.sourceMapOverrides.apply(i);return o!==i?Pt(o):on(r)?vt(r):!bc.isAbsolute(r)&&this.options.basePath?wn(await u_(this.options.remoteRoot&&kr(n.sourceRoot)&&this.rebaseRemoteToLocal(n.sourceRoot)||n.sourceRoot,n.metadata.compiledPath,{"/":this.options.basePath},sG(this.fsUtils,n.metadata.compiledPath),this.logger),r):this.rebaseRemoteToLocal(r)||r}};var Yr=Symbol("ISourcePathResolverFactory"),$i=class{constructor(e,r){this.fsUtils=e;this.linkedBp=r}create(e,r){if(e.type==="pwa-node"||e.type==="node-terminal"||e.type==="pwa-extensionHost")return new Is(this.fsUtils,Is.shouldWarnAboutSymlinks(e)?this.linkedBp:void 0,Is.getOptions(e),r);throw new Error(`Not usable for type ${e.type}`)}};$i=C([(0,Rn.injectable)(),b(0,(0,Rn.inject)(Mr)),b(1,(0,Rn.optional)()),b(1,(0,Rn.inject)(zm))],$i);var nf=class{constructor(e,r,n,i){this.initializeParams=e;this.vueMapper=r;this.fsUtils=n;this.linkedBp=i}create(e,r){if(e.type==="pwa-node"||e.type==="node-terminal"||e.type==="pwa-extensionHost")return new Is(this.fsUtils,Is.shouldWarnAboutSymlinks(e)?this.linkedBp:void 0,Is.getOptions(e),r);{let n=!!e.inspectUri;return new(n?f_:Ka)(this.vueMapper,this.fsUtils,{workspaceFolder:e.__workspaceFolder,resolveSourceMapLocations:e.resolveSourceMapLocations,baseUrl:dG(e),localRoot:null,remoteRoot:null,pathMapping:{"/":e.webRoot,...e.pathMapping},sourceMapOverrides:e.sourceMapPathOverrides,clientID:this.initializeParams.clientID,remoteFilePrefix:e.__remoteFilePrefix},r)}}};nf=C([(0,Rn.injectable)(),b(0,(0,Rn.inject)(an)),b(1,(0,Rn.inject)(Dp)),b(2,(0,Rn.inject)(Mr)),b(3,(0,Rn.optional)()),b(3,(0,Rn.inject)(zm))],nf);var gG=require("url");var d_=class extends Ua{constructor(){super(...arguments);this.baseFilter=ta(this.launchParams);this.filter=r=>{let{debugWebWorkerExtHost:n,debugWebviews:i}=this.launchParams;return!!(n&&(r.type==="worker"&&r.title==="DebugWorkerExtensionHost"||r.type==="page"&&r.title.includes("[Extension Development Host]"))||i&&r.type==="iframe"&&this.baseFilter(r))}}static async connectRenderer(r,n,i,o,s,a){let c=await r.rootSession().Target.attachToBrowserTarget({});if(!c)return;let l=r.createSession(c.sessionId);return new this(r,void 0,l,n,o,s,i,a)}waitForMainTarget(r){let n=this.launchParams;return n.debugWebWorkerExtHost&&this._browser.Target.on("targetCreated",this.enqueueLifecycleFn(async({targetInfo:i})=>{if(!i.url.includes(n.__sessionId))return;let o=await this._browser.Target.attachToTarget({targetId:i.targetId,flatten:!0});o&&this.attachedToTarget(i,o.sessionId,!1)})),super.waitForMainTarget(r)}attachedToTarget(r,n,i,o){let s=super.attachedToTarget(r,n,i||this.filter(r),o,!1);return r.type==="iframe"&&s.setComputeNameFn(Jye),s}},Jye=t=>{let e;try{e=new gG.URL(t.targetInfo.url)}catch{return}switch(e.searchParams.get("purpose")){case"customEditor":return`${e.searchParams.get("extensionId")} editor: ${e.host}`;case"notebookRenderer":return`Notebook Renderer: ${e.host}`;default:let r=e.searchParams.get("extensionId");return`Webview: ${r?r+" ":""} ${e.host}`}};var Ri=class extends ai{constructor(r,n,i){super(r,n);this.pathResolverFactory=i}async launch(r,n){if(r.type!=="pwa-extensionHost"||r.request!=="attach")return{blockSessionTermination:!1};let i=Ri.debugIdToRendererDebugPort.get(r.__sessionId);if(!i)return{blockSessionTermination:!1};let o=Us({name:"Webview",type:"pwa-chrome",request:"attach",port:i,__workspaceFolder:r.__workspaceFolder,urlFilter:"",resolveSourceMapLocations:r.resolveSourceMapLocations,...r.rendererDebugOptions});return o.__sessionId=r.__sessionId,o.debugWebWorkerExtHost=r.debugWebWorkerHost,o.debugWebviews=r.debugWebviews,super.launch(o,n).catch(s=>this.logger.error("runtime.exception","Error in webview attach",{err:s})),{blockSessionTermination:!1}}async acquireConnectionInner(r,n,i){let o=new Ie,s=await new Promise((a,u)=>{let c=(0,HG.createConnection)({port:n.port},()=>a(c));c.on("error",u),o.push(i.onCancellationRequested(()=>{c.destroy(),u(new Error("connection timed out"))}))}).finally(()=>o.dispose());return new Ft(new si(this.logger,s),this.logger,r)}async getTargetFilter(r){return r.filter}async createTargetManager(r,n,i){return new d_(r,void 0,r.rootSession(),this.pathResolverFactory.create(n,this.logger),this.logger,i.telemetryReporter,n,i.targetOrigin)}};Ri.debugIdToRendererDebugPort=new Map,Ri=C([(0,of.injectable)(),b(0,(0,of.inject)(ce)),b(1,(0,of.inject)(Qe)),b(2,(0,of.inject)(Yr))],Ri);var Xa=class t{constructor(){this.target={queue:[]}}connectTo(e){this.target={logger:e}}info(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:1})}verbose(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:0})}warn(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:2})}error(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:3})}fatal(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:4})}log(e){this.target&&("queue"in this.target?this.target.queue.push(e):this.target.logger.log(e))}getRecentLogs(){return this.target?"queue"in this.target?this.target.queue:this.target.logger.getRecentLogs():[]}assert(e,r){if(e===!1||e===void 0||e===null){if(this.error("runtime.assertion",r,{error:new Error("Assertion failed")}),process.env.JS_DEBUG_THROW_ASSERTIONS)throw new Error(r);debugger;return!1}return!0}setup(){throw new Error("A ProxyLogger cannot be setup()")}dispose(){this.target=void 0}forTarget(){return new t}};var yG=Symbol("ITargetOrigin"),h_=class{constructor(e){this.id=e}},sf=class{constructor(e){this.id=e}};var m_=class{constructor(e,r){this.parentList=e;this.logger=r;this.targets=new Do;this.onTerminatedEmitter=new z;this.onTerminated=this.onTerminatedEmitter.event;this.onTargetListChanged=this.targets.onChanged;e.onAdd(([,n])=>{n.parent&&this.targets.get(n.parent.id)&&this.targets.add(n.id,n.target)}),e.onRemove(([n])=>{this.targets.remove(n)&&!this.targets.size&&this.onTerminatedEmitter.fire({killed:!0,code:0})})}async launch(e,r){if(e.type!=="node-terminal"||e.request!=="attach")return{blockSessionTermination:!1};let n=this.parentList.get(e.delegateId);if(n===void 0)return setTimeout(()=>this.onTerminatedEmitter.fire({killed:!0,code:0}),1),{blockSessionTermination:!0};let i=n.target.targetOrigin();if(!(i instanceof sf))throw new Error("Expected delegate session to have a mutable target origin");let o=n.target.logger;if(!(o instanceof Xa))throw new Error("Expected delegate session to have a proxy logger");return i.id=r.targetOrigin.id,o.connectTo(this.logger),setTimeout(()=>{this.targets.add(e.delegateId,n.target),n.dap.connect(r.dap)},0),{blockSessionTermination:!0}}terminate(){for(let e of this.targets.value())e.stop();return Promise.resolve()}restart(){for(let e of this.targets.value())e.restart();return Promise.resolve()}targetList(){return[...this.targets.value()]}dispose(){this.terminate()}};var vG=I(J());var Yye=0,Mo=class{constructor(){this.delegateSessions=new Do;this.refsByTarget=new WeakMap}createLauncher(e){return new m_(this.delegateSessions,e)}addDelegate(e,r,n){let i={id:Yye++,target:e,dap:r,parent:n&&this.refsByTarget.get(n)};return this.refsByTarget.set(e,i),this.delegateSessions.add(i.id,i),i.id}removeDelegate(e){let r=this.refsByTarget.get(e);r&&this.delegateSessions.remove(r.id)}};Mo=C([(0,vG.injectable)()],Mo);var kG=I(J());var Je=class t{constructor(e,r,n){this.major=e;this.minor=r;this.patch=n}static parse(e){let r=e.split(".").map(Number);if(r.length!==3||r.some(isNaN))throw new SyntaxError(`Input string '${e}' is not a semver`);return new t(r[0],r[1],r[2])}static min(e,r){return e.lt(r)?e:r}compare(e){return this.major-e.major||this.minor-e.minor||this.patch-e.patch}gt(e){return this.compare(e)>0}gte(e){return this.compare(e)>=0}lt(e){return this.compare(e)<0}lte(e){return this.compare(e)<=0}toString(){return`${this.major}.${this.minor}.${this.patch}`}};var TG=I(J());var xG=I(IG()),Oo=I(require("fs")),_c=I(J()),LG=I(require("net")),zx=I(require("os")),Xx=I(require("path"));var g_=class{constructor(e,r){this.sessionId=e;this.sink=r;this.onMessageEmitter=new z;this.onEndEmitter=new z;this.disposables=new Ie;this.onMessage=this.onMessageEmitter.event;this.onEnd=this.onEndEmitter.event;this.disposables.push(r.NodeWorker.on("detachedFromWorker",n=>{n.sessionId===e&&(this.onEndEmitter.fire(),this.dispose())}),r.NodeWorker.on("receivedMessageFromWorker",n=>{n.sessionId===e&&this.onMessageEmitter.fire([n.message,new Yn])}))}send(e){this.sink.NodeWorker.sendMessageToWorker({message:e,sessionId:this.sessionId})}dispose(){this.disposables.isDisposed||(this.disposables.dispose(),this.onEndEmitter.fire())}};var Vx=":::",H_=class{constructor(e){this.processEnv=e}get nodeOptions(){return this.processEnv.NODE_OPTIONS}set nodeOptions(e){e===void 0?delete this.processEnv.NODE_OPTIONS:this.processEnv.NODE_OPTIONS=e}get inspectorOptions(){let e=this.processEnv.VSCODE_INSPECTOR_OPTIONS;if(!e)return;let r=e.split(Vx).find(n=>!!n);if(r)try{return JSON.parse(r)}catch{return}}set inspectorOptions(e){e===void 0?delete this.processEnv.VSCODE_INSPECTOR_OPTIONS:this.processEnv.VSCODE_INSPECTOR_OPTIONS=JSON.stringify(e)}unsetForTree(){delete this.processEnv.VSCODE_INSPECTOR_OPTIONS}updateInspectorOption(e,r){let n=this.inspectorOptions;n&&(this.inspectorOptions={...n,[e]:r})}};var Gx=require("path"),SG=(0,Gx.join)(__dirname,"watchdog.js"),y_=(0,Gx.join)(__dirname,"bootloader.js");var Zm=I(_e()),ui=I(J()),ko=require("path");var Ym=I(J()),EG=require("path");var wc=Symbol("IPackageJsonProvider"),v_={getPath:()=>Promise.resolve(void 0),getContents:()=>Promise.resolve(void 0)},af=class{constructor(e,r){this.fs=e;this.config=r;this.getPath=Ae(async()=>{if(this.config.type!=="pwa-node"||this.config.request!=="launch")return;let e=await Hl(this.fs,this.config.cwd,"package.json");return e?(0,EG.join)(e,"package.json"):void 0});this.getContents=Ae(async()=>{let e=await this.getPath();if(e)try{let r=await this.fs.readFile(e);return JSON.parse(r.toString())}catch{return}})}};af=C([(0,Ym.injectable)(),b(0,(0,Ym.inject)(Mr)),b(1,(0,Ym.inject)($e))],af);var ci=Symbol("INodeBinaryProvider");function b_(t,e){return t.has(1)?e.addNodeOption("--inspect-publish-uid=http"):e}var hve=new Set(["npm","yarn","pnpm","tnpm","cnpm"]),DG=t=>hve.has((0,ko.basename)(t,(0,ko.extname)(t))),CG=(t,e)=>{if(!(!t||!DG(t)))return e.find(r=>!r.startsWith("-")&&r!=="run"&&r!=="run-script")},Kx=new Je(12,0,0),mve=new Je(8,0,0),gve=[{inclusiveMin:new Je(16,0,0),inclusiveMax:new Je(16,3,99),message:Zm.t("Some breakpoints might not work in your version of Node.js. We recommend upgrading for the latest bug, performance, and security fixes. Details: https://aka.ms/AAcsvqm")},{inclusiveMin:new Je(7,0,0),inclusiveMax:new Je(8,99,99),message:Zm.t("You're running an outdated version of Node.js. We recommend upgrading for the latest bug, performance, and security fixes.")}],_r=class{constructor(e,r){this.path=e;this.version=r;this.capabilities=new Set;r===void 0&&(r=Kx),r.gte(new Je(12,0,0))&&this.capabilities.add(0),r.gte(new Je(12,6,0))&&this.capabilities.add(1)}get isPreciselyKnown(){return this.version!==void 0}get warning(){if(this.version){for(let e of gve)if(e.inclusiveMax.gte(this.version)&&e.inclusiveMin.lte(this.version))return e}}has(e,r){return!this.isPreciselyKnown&&r!==void 0?r:this.capabilities.has(e)}},Qm=class extends Z{constructor(r,n){super(p1(r.toString(),n));this.version=r;this.location=n}},Hve=["node","node64","electron"],yve=new Map([[11,new Je(12,0,0)],[10,new Je(12,0,0)],[9,new Je(12,0,0)],[8,new Je(12,0,0)],[7,new Je(12,0,0)],[6,new Je(12,0,0)],[5,new Je(10,0,0)],[4,new Je(10,0,0)],[3,new Je(10,0,0)],[2,new Je(8,0,0)],[1,new Je(8,0,0)]]),Es=class{constructor(e,r,n){this.logger=e;this.fs=r;this.packageJson=n;this.knownGoodMappings=new Map}async resolveAndValidate(e,r="node",n,i){try{return await this.resolveAndValidateInner(e,r,n,i)}catch(o){if(!(o instanceof Qm))throw o;if(await this.shouldTryDebuggingAnyway(o))return new _r(o.location,o.version instanceof Je?o.version:void 0);throw o}}shouldTryDebuggingAnyway(e){return Promise.resolve(!1)}async resolveAndValidateInner(e,r,n,i){let o=await this.resolveBinaryLocation(r,e);if(this.logger.info("runtime.launch","Using binary at",{location:o,executable:r}),!o)throw new Z(eS(r,Zm.t("path does not exist")));if(n)return new _r(o,new Je(n,0,0));let s=$y(o);if(!Hve.includes(s)){if(DG(o)){let H=await this.packageJson.getPath();H&&(e=e.addToPath((0,ko.resolve)((0,ko.dirname)(H),"node_modules/.bin"),"prepend"))}try{let H=await this.resolveAndValidateInner(e,"node",void 0,i);return new _r(o,H.version)}catch(H){if(v1(H,9230))throw H;return new _r(o,void 0)}}if(o.startsWith("/snap/"))return new _r(o,void 0);let a=this.knownGoodMappings.get(o);if(a)return a;let u=await this.getVersionText(o,i);if(!u)return new _r(o,void 0);this.logger.info("runtime.launch","Discovered version",{version:u});let c=/v([0-9]+)\.([0-9]+)\.([0-9]+)/.exec(u);if(!c)throw new Qm(u,o);let[,l,p,f]=c.map(Number),m=new Je(l,p,f);if(s==="electron"){let H=await this.resolveAndValidate(e);m=Je.min(yve.get(m.major)??Kx,H.version??Kx)}if(m.lt(mve))throw new Qm(m,o);let h=new _r(o,m);return this.knownGoodMappings.set(o,h),h}async resolveBinaryLocation(e,r){return e&&(0,ko.isAbsolute)(e)?await Dk(this.fs,e,r):await QH(this.fs,e,r.value)}async getVersionText(e,r){try{let{stdout:n}=await Yb(e,["--version"],{env:jt.processEnv().defined(),cwd:r});return n.trim()}catch(n){throw r&&!(await bn(this.fs,r))?.isDirectory()?new Z(l1(r)):new Z(eS(e,n.message))}}};Es=C([(0,ui.injectable)(),b(0,(0,ui.inject)(ce)),b(1,(0,ui.inject)(we)),b(2,(0,ui.inject)(wc))],Es);var uf=class extends Es{constructor(r,n,i,o){super(r,n,i);this.vscode=o}async shouldTryDebuggingAnyway({message:r}){if(!this.vscode)return!1;let n=Zm.t("Yes");return await this.vscode.window.showErrorMessage(r,n)===n}};uf=C([b(0,(0,ui.inject)(ce)),b(1,(0,ui.inject)(we)),b(2,(0,ui.inject)(wc)),b(3,(0,ui.optional)()),b(3,(0,ui.inject)(zn))],uf);var PG=require("path");var cf=class{constructor(e,r,n,i,o,s,a={},u){this.launchConfig=e;this.targetOriginValue=r;this.connection=n;this.targetInfo=o;this.logger=s;this.lifecycle=a;this._parent=u;this._serialize=Promise.resolve(void 0);this._attached=!1;this._onNameChangedEmitter=new z;this._onDisconnectEmitter=new z;this.entryBreakpoint=void 0;this.onDisconnect=this._onDisconnectEmitter.event;this.onNameChanged=this._onNameChangedEmitter.event;this.connection=n,this._cdp=i,i.pause(),this._waitingForDebugger=o.type==="waitingForDebugger",o.title?this._targetName=`${(0,PG.basename)(o.title)} [${o.processId}]`:this._targetName=`[${o.processId}]`,i.Target.on("targetDestroyed",()=>this.connection.close()),n.onDisconnected(()=>this._disconnected())}id(){return this.targetInfo.targetId}processId(){return this.targetInfo.processId}name(){return this._targetName}fileName(){return this.targetInfo.title}type(){return"node"}targetOrigin(){return this.targetOriginValue}parent(){return this._parent}async initialize(){this.lifecycle.initialized&&(this.entryBreakpoint=await this.lifecycle.initialized(this)||void 0)}waitingForDebugger(){return this._waitingForDebugger}scriptUrlToUrl(e){return e[0]==="/"||process.platform==="win32"&&e[1]===":"&&e[2]==="\\"?ke(e):e}supportsCustomBreakpoints(){return!1}executionContextName(){return this._targetName}hasParent(){return!!this._parent}async runIfWaitingForDebugger(){await this._cdp.Runtime.runIfWaitingForDebugger({})}async _disconnected(){this._onDisconnectEmitter.fire()}canAttach(){return!this._attached}async attach(){return this._serialize=this._serialize.then(async()=>{if(!this._attached)return this._doAttach()}),this._serialize}async _doAttach(){this._waitingForDebugger=!1,this._attached=!0;let e=await this._cdp.Target.attachToTarget({targetId:this.targetInfo.targetId});if(!e){this.logger.info("runtime.launch","Failed to attach to target",{targetId:this.targetInfo.targetId});return}this._cdp.NodeWorker.enable({waitForDebuggerOnStart:!0}),e&&"__dynamicAttach"in e&&(await this._cdp.Runtime.enable({}),await this._cdp.Debugger.enable({}));let r;return this._cdp.Runtime.on("executionContextCreated",n=>{n.context.auxData&&n.context.auxData.isDefault&&(r=n.context.id)}),this._cdp.Runtime.on("executionContextDestroyed",n=>{n.executionContextId===r&&this.connection.close()}),this._cdp}async afterBind(){this._cdp.resume()}canDetach(){return this._attached}async detach(){this._serialize=this._serialize.then(async()=>{this._waitingForDebugger&&await(await this._doAttach())?.Runtime.runIfWaitingForDebugger({}),this._attached&&this._doDetach()})}async _doDetach(){await Promise.all([this._cdp.Target.detachFromTarget({targetId:this.targetInfo.targetId}),this._cdp.NodeWorker.disable({})]),this.connection.close(),this._attached=!1}canRestart(){return!1}restart(){}canStop(){return!0}stop(){try{this.lifecycle.close&&this.lifecycle.close(this)}finally{this.connection.close()}}};var dn=class{constructor(e,r,n,i){this.pathProvider=e;this.logger=r;this.portLeaseTracker=n;this.pathResolverFactory=i;this.serverConnections=new Set;this.targets=new Do;this.onTerminatedEmitter=new z;this.onTerminated=this.onTerminatedEmitter.event;this.onTargetListChanged=this.targets.onChanged;this.bootloaderFile=Ae(this.getBootloaderFile.bind(this))}async launch(e,r){let n=this.resolveParams(e);if(!n)return{blockSessionTermination:!1};this._stopServer();let{server:i,pipe:o}=await this._startServer(r.telemetryReporter),s=this.logger.forTarget(),a=this.run={server:i,serverAddress:o,params:n,context:r,logger:s,pathResolver:this.pathResolverFactory.create(n,this.logger)};return await this.launchProgram(a),{blockSessionTermination:!0}}async terminate(){this.program?await this.program.stop():this.onProgramTerminated({code:0,killed:!0})}async restart(e){if(!this.run)return;let r=this.program;r&&(this.program=void 0,await r.stop(),await Promise.race([Le(2e3).then(()=>!1),Promise.all([...this.serverConnections].map(i=>new Promise(o=>i.onDisconnected(o))))])||(this.logger.warn("runtime.launch","Timeout waiting for server connections to close"),this.closeAllConnections())),await this.launchProgram({...this.run,params:e?this.resolveParams(e)??this.run.params:this.run.params,context:{...this.run.context,cancellationToken:this.run.params.timeout>0?Or.withTimeout(this.run.params.timeout).token:or}})}targetList(){return[...this.targets.value()]}dispose(){this._stopServer()}onProgramTerminated(e){this.onTerminatedEmitter.fire(e),this._stopServer(),this.program=void 0}resolveNodePath(e,r="node"){return this.pathProvider.resolveAndValidate(jt.merge(jt.processEnv(),this.getConfiguredEnvironment(e)),r,e.nodeVersionHint,e.cwd)}getConfiguredEnvironment(e){let r=jt.empty;if(e.envFile)try{r=r.merge(wve(e.envFile))}catch(n){throw new Z(c1(n.message))}return r.merge(e.env)}async resolveEnvironment({params:e,serverAddress:r},n,i){let o=this.getConfiguredEnvironment(e),s=await this.bootloaderFile(e.cwd,n),a={inspectorIpc:r,deferredMode:!1,waitForDebugger:"",execPath:await QH(Oo.promises,"node",process.env),onlyEntrypoint:!e.autoAttachChildProcesses,verbose:e.trace===!0||typeof e.trace=="object"&&e.trace.stdio?!0:void 0,autoAttachMode:"always",mandatePortTracking:this.portLeaseTracker.isMandated?!0:void 0,...i},u={NODE_OPTIONS:` --require ${s.interpolatedPath} `,VSCODE_INSPECTOR_OPTIONS:Vx+JSON.stringify(a),ELECTRON_RUN_AS_NODE:null},c=o.lookup("NODE_OPTIONS");c&&(u.NODE_OPTIONS+=` ${c}`);let l=jt.processEnv().lookup("NODE_OPTIONS");return l&&(u.NODE_OPTIONS+=` ${l}`),o.merge({...u})}createLifecycle(e,r,n){return{}}async _startServer(e){let r=YH(),n=await new Promise((i,o)=>{let s=LG.createServer(a=>this._startSession(a,e)).on("error",o).listen(r,()=>i(s))});return{pipe:r,server:n}}_stopServer(){this.run?.server.close(),this.run=void 0,this.bootloaderFile.value?.then(e=>e.dispose()),this.bootloaderFile.forget(),this.closeAllConnections()}closeAllConnections(){this.serverConnections.forEach(e=>e.close()),this.serverConnections.clear()}async _startSession(e,r){if(!this.run)return;let{connection:n,cdp:i,targetInfo:o}=await this.acquireTarget(e,r,this.run.logger);if(!this.run){e.destroy();return}o.processId===void 0&&(o.processId=Number(o.targetId));let s=new cf(this.run.params,this.run.context.targetOrigin,n,i,o,this.run.logger,this.createLifecycle(i,this.run,o),o.openerId?this.targets.get(o.openerId):void 0);this.listenToWorkerDomain(i,r,s),this.targets.add(o.targetId,s),s.onDisconnect(()=>this.targets.remove(o.targetId))}async listenToWorkerDomain(e,r,n){e.NodeWorker.on("attachedToWorker",i=>{let o=new g_(i.sessionId,e),s=new np(n.launchConfig,{attached:!0,canAccessOpener:!1,type:"node-worker",targetId:`${n.id()}-${i.sessionId}`,title:i.workerInfo.title,url:i.workerInfo.url,openerId:n.id()},n,n.targetOrigin(),new Ft(o,n.logger,r).rootSession(),n.logger),a=new Ie;a.push(o),a.push(n.onDisconnect(()=>a.dispose())),a.push(o.onEnd(()=>a.dispose())),a.callback(()=>this.targets.remove(s.id())),this.targets.add(s.id(),s)})}async acquireTarget(e,r,n){let i=new Ft(new si(n,e),n,r);this.serverConnections.add(i),i.onDisconnected(()=>this.serverConnections.delete(i));let o=i.rootSession(),{targetInfo:s}=await new Promise(c=>o.Target.on("targetCreated",c)),a=s,u=this.portLeaseTracker.register(a.processInspectorPort);return i.onDisconnected(()=>u.dispose()),{targetInfo:a,cdp:o,connection:i,logger:n}}async getBootloaderFile(e,r){let n=Ge(y_);if(!n.includes(" "))return{interpolatedPath:n,dispose:()=>{}};if(r.has(0))return{interpolatedPath:`"${n}"`,dispose:()=>{}};let i=`require(${JSON.stringify(n)})`;if(!zx.tmpdir().includes(" ")||!e){let a=Xx.join(zx.tmpdir(),"vscode-js-debug-bootloader.js");return await Oo.promises.writeFile(a,i),{interpolatedPath:a,dispose:()=>{}}}let o=".vscode-js-debug-bootloader.js",s=Xx.join(e,o);return await Oo.promises.writeFile(s,i),{interpolatedPath:`./${o}`,dispose:()=>Oo.unlinkSync(s)}}async gatherTelemetryFromCdp(e,r){for(let n=0;n<8;n++){let i=await e.Runtime.evaluate({contextId:1,returnByValue:!0,expression:"typeof process === 'undefined' || process.pid === undefined ? 'process not defined' : ({ processId: process.pid, nodeVersion: process.version, architecture: process.arch })"+dt()});if(!this.program)return;if(!i||!i.result.value){this.logger.error("runtime.target","Undefined result getting telemetry");return}if(typeof i.result.value!="object"){this.logger.info("runtime.target","Process not yet defined, will retry"),await Le(50*2**n);continue}let o=i.result.value;return r.context.telemetryReporter.report("nodeRuntime",{version:o.nodeVersion,arch:o.architecture}),this.program.gotTelemetery(o),o}}};dn=C([(0,_c.injectable)(),b(0,(0,_c.inject)(ci)),b(1,(0,_c.inject)(ce)),b(2,(0,_c.inject)(st)),b(3,(0,_c.inject)(Yr))],dn);function wve(t){if(!Oo.existsSync(t))return{};let e=_ve(Oo.readFileSync(t,"utf8"));return xG.parse(Buffer.from(e))}function _ve(t){return t&&t[0]==="\uFEFF"&&(t=t.substr(1)),t}var Ave=["NODE_OPTIONS","VSCODE_INSPECTOR_OPTIONS"],Ja=class extends dn{async appendEnvironmentVariables(e,r){let n="typeof process==='undefined'||process.pid===undefined?'process not defined':(()=>{"+Object.entries(r.defined()).map(([i,o])=>{let s=JSON.stringify(i);return Ave.includes(i)?`process.env[${s}]=(process.env[${s}]||'')+${JSON.stringify(o)}`:`process.env[${s}]=${JSON.stringify(o)}`}).join(";")+"})()"+dt();for(let i=0;i<5;i++){let o=await e.Runtime.evaluate({contextId:1,returnByValue:!0,expression:n});if(!o){this.logger.error("runtime.target","Undefined result setting child environment vars");return}if(!o.exceptionDetails&&o.result.value!=="process not defined")return;this.logger.error("runtime.target","Error setting child environment vars",o),await Le(50)}}};Ja=C([(0,TG.injectable)()],Ja);var w_=class{constructor(e,r){this.a=e;this.b=r;this.stopped=Promise.race([this.a.stopped.then(async e=>await this.b.stop()&&e),this.b.stopped.then(async e=>await this.a.stop()&&e)])}gotTelemetery(e){this.a.gotTelemetery(e),this.b.gotTelemetery(e)}async stop(){return(await Promise.all([this.a.stop(),this.b.stop()]))[0]}},__=class{constructor(e,r,n){this.child=e;this.logger=r;this.killBehavior=n;this.killed=!1;this.stopped=new Promise((i,o)=>{e.once("exit",s=>i({killed:this.killed,code:s||0})),e.once("error",s=>o({killed:this.killed,code:1,error:s}))})}gotTelemetery(){}stop(){return this.killed=!0,xi(this.child.pid,this.logger,this.killBehavior),this.stopped}},Ds=class{constructor(){this.stopped=new Promise(e=>this.stopDefer=e)}gotTelemetery(e){this.telemetry=e}stop(){return this.stopDefer({code:0,killed:!0}),this.stopped}},Ya=class extends Ds{constructor(r){super();this.wd=r;r.onEnd(n=>{this.stopDefer(n),this.wd.dispose()})}stop(){return this.wd.dispose(),this.stopped}},lf=class t{constructor(e,r,n){this.terminalResult=e;this.logger=r;this.killBehavior=n;this.didStop=!1;this.stopped=new Promise(e=>this.onStopped=r=>{this.didStop=!0,e({code:0,killed:r})});e.processId&&this.startPollLoop(e.processId)}static{this.terminationPollInterval=1e3}static{this.killConfirmInterval=200}gotTelemetery({processId:e}){if(this.didStop){xi(e,this.logger,this.killBehavior);return}this.loop||this.startPollLoop(e)}stop(){return this.didStop?this.stopped:(this.didStop=!0,this.loop?(xi(this.loop.processId,this.logger,this.killBehavior),this.startPollLoop(this.loop.processId,t.killConfirmInterval)):this.terminalResult.shellProcessId?(xi(this.terminalResult.shellProcessId,this.logger,this.killBehavior),this.startPollLoop(this.terminalResult.shellProcessId,t.killConfirmInterval)):this.onStopped(!0),this.stopped)}startPollLoop(e,r=t.terminationPollInterval){this.loop&&clearInterval(this.loop.timer);let n={processId:e,timer:setInterval(()=>{Ive(e)||(clearInterval(n.timer),this.onStopped(!0))},r)};this.loop=n}};function Ive(t){try{return process.kill(t,0),!0}catch{return!1}}var MG=I(require("net"));var $G=require("crypto"),RG=()=>(0,$G.randomBytes)(12).toString("hex");var li=class t{constructor(e,r){this.info=e;this.server=r;this.onEndEmitter=new z;this.cts=new Or;this.gracefulExit=!1;this.targetAlive=!1;this.targetInfo={targetId:this.info.ownId??RG(),processId:Number(this.info.pid)||0,type:this.info.waitForDebugger?"waitingForDebugger":"",title:this.info.scriptName,url:"file://"+this.info.scriptName,openerId:this.info.openerId,attached:!0,canAccessOpener:!1,processInspectorPort:Number(new URL(this.info.inspectorURL).port)};this.onEnd=this.onEndEmitter.event;this.listenToServer()}get isTargetAlive(){return this.targetAlive}static async attach(e){let r=await new Promise((i,o)=>{let s=MG.createConnection(e.ipcAddress,()=>i(s));s.on("error",o)}),n=new si(ni.null,r);return new t(e,n)}listenToServer(){let{server:e,targetInfo:r}=this;e.send(JSON.stringify({method:"Target.targetCreated",params:{targetInfo:r}})),e.onMessage(async([n])=>{if(this.target&&!n.includes("Target.attachToTarget")&&!n.includes("Target.detachFromTarget")){this.target.send(n);return}let i=await this.execute(n);i&&e.send(JSON.stringify(i))}),e.onEnd(()=>{this.disposeTarget(),this.onEndEmitter.fire({killed:this.gracefulExit,code:this.gracefulExit?0:1})})}dispose(){this.gracefulExit=!0,this.cts.dispose(!0),this.disposeTarget(),this.server.dispose()}async execute(e){let r=JSON.parse(e);switch(r.method){case"Target.attachToTarget":return this.target&&this.disposeTarget(),this.target=await this.createTarget(),{id:r.id,result:{sessionId:this.targetInfo.targetId,__dynamicAttach:this.info.dynamicAttach?!0:void 0}};case"Target.detachFromTarget":return this.gracefulExit=!0,this.disposeTarget(),{id:r.id,result:{}};default:this.target?.send(r);return}}async createTarget(){this.gracefulExit=!1;let e=await $n.create(this.info.inspectorURL,this.cts.token,this.info.remoteHostHeader);return e.onMessage(([r])=>this.server.send(r)),e.onEnd(()=>{e&&this.server.send(JSON.stringify({method:"Target.targetDestroyed",params:{targetId:this.targetInfo.targetId,sessionId:this.targetInfo.targetId}})),this.targetAlive=!1,this.server.dispose()}),e}disposeTarget(){this.target&&(this.target.dispose(),this.target=void 0)}};var Jx=class extends Ya{constructor(r,n){super(r);this.logger=n;this.stopped.then(()=>{this.telemetry&&xi(this.telemetry.processId,this.logger,"polite")})}},pf=class extends Ja{constructor(){super(...arguments);this.restarting=!1}async restart(){this.restarting=!0,this.onProgramTerminated({code:0,killed:!0,restart:!0}),this.program?.stop()}resolveParams(r){return r.type==="pwa-extensionHost"&&r.request==="attach"?r:void 0}async launchProgram(r){let n=await Xp(`http://localhost:${r.params.port}`,r.context.cancellationToken,this.logger),i=await li.attach({ipcAddress:r.serverAddress,scriptName:"Extension Host",inspectorURL:n,waitForDebugger:!0,dynamicAttach:!0}),o=this.program=new Jx(i,this.logger);this.program.stopped.then(s=>{o===this.program&&this.onProgramTerminated(s)})}createLifecycle(r,n,i){return i.openerId?{}:{initialized:()=>this.onFirstInitialize(r,n,i)}}async onFirstInitialize(r,n,i){this.setEnvironmentVariables(r,n,i.targetId);let o=await this.gatherTelemetryFromCdp(r,n),s=this.program;if(o&&s){let a=new lf({processId:o.processId},this.logger,"forceful");a.stopped.then(()=>s.stop()),s.stopped.then(()=>{this.restarting||a.stop()})}}async setEnvironmentVariables(r,n,i){if(!n.params.autoAttachChildProcesses)return;let o=await this.resolveEnvironment(n,new _r("node",Je.parse(process.versions.node)),{openerId:i});return this.appendEnvironmentVariables(r,o.update("ELECTRON_RUN_AS_NODE",null))}};pf=C([(0,kG.injectable)()],pf);var eg=require("fs"),OG=I(J());var ff=class extends dn{resolveParams(e){return e.type==="pwa-extensionHost"&&e.request==="launch"?e:void 0}async launchProgram(e){let r=e.params.port||await pa(),n=await e.context.dap.launchVSCodeRequest({args:Sve(e.params,r),env:this.getConfiguredEnvironment(e.params).defined(),debugRenderer:e.params.debugWebviews||e.params.debugWebWorkerHost});n.rendererDebugPort&&Ri.debugIdToRendererDebugPort.set(e.params.__sessionId,n.rendererDebugPort),this.program=new Ds,this.program.stop()}};ff=C([(0,OG.injectable)()],ff);var Sve=(t,e)=>{let r=t.args.map(n=>{if(n.startsWith("-")){let i=n.split("=",2);return i.length===2&&((0,eg.existsSync)(i[1])||(0,eg.existsSync)(i[1]+".js"))?{prefix:i[0]+"=",path:i[1]}:{prefix:n}}else{try{let i=(0,eg.lstatSync)(n);if(i.isDirectory())return{prefix:"--folder-uri=",path:n};if(i.isFile())return{prefix:"--file-uri=",path:n}}catch{}return{path:n}}});return t.noDebug||r.unshift({prefix:`--inspect-brk-extensions=${e}`}),r.unshift({prefix:`--debugId=${t.__sessionId}`}),r};var XG=I(_e()),Ac=I(J());var FG=require("crypto"),tg=require("fs"),NG=require("os"),BG=I(require("path")),A_=class t{constructor(){this.disposed=!1;this.path=BG.join((0,NG.tmpdir)(),`node-debug-callback-${(0,FG.randomBytes)(8).toString("hex")}`);this.file=tg.promises.open(this.path,"w")}static{this.updateInterval=1e3}static{this.recencyDeadline=2e3}static isValid(e){try{let r=(0,tg.readFileSync)(e);return r.length?r.readDoubleBE()>Date.now()-t.recencyDeadline:!1}catch{return!1}}async startTouchLoop(){await this.touch(),this.disposed||(this.updateInterval=setInterval(()=>this.touch(),t.updateInterval))}async touch(e=()=>Date.now()){let r=await this.file,n=Buffer.alloc(8);n.writeDoubleBE(e()),await r.write(n,0,n.length,0)}async dispose(){if(!this.disposed){this.disposed=!0,this.updateInterval&&clearInterval(this.updateInterval);try{await(await this.file).close(),await tg.promises.unlink(this.path)}catch{}}}};var GG=require("fs");var qG=require("path");var UG=require("child_process"),jG=I(Zw()),df=class{constructor(e=UG.spawn){this.spawn=e}lookup(e,r){return new Promise((n,i)=>{let o=this.createProcess(),s=this.createParser();o.on("error",i),o.stderr.on("error",a=>i(`Error finding processes: ${a.toString()}`)),o.stdout.pipe((0,jG.default)(/\r?\n/)).on("data",a=>{let u=s(a);u&&(r=e(u,r))}),o.on("close",(a,u)=>{a===0?n(r):u?i(new Error(`process terminated with signal: ${u}`)):a&&i(new Error(`process terminated with exit code: ${a}`))})})}};var hf=class extends df{constructor(r){super();this.fsUtils=r}async getWorkingDirectory(r){try{let{stdout:n}=await Yb("lsof",["-a","-dcwd","-Fn",`-p${r}`]),i=n.trim().split(`
`).pop().slice(1);return i&&(0,qG.isAbsolute)(i)&&await this.fsUtils.exists(i)?i:void 0}catch(n){if(n instanceof nc)return;throw n}}createProcess(){return this.spawn("ps",["-xo",`pid=PID,ppid=PPID,comm=${"a".repeat(256)},command=COMMAND`])}createParser(){let r;return n=>{if(!r){r=n.indexOf("COMMAND");return}let i=/^\W*([0-9]+)\W*([0-9]+)\W*/.exec(n);if(i)return{pid:Number(i[1]),ppid:Number(i[2]),command:n.slice(i[0].length,r).trim(),args:n.slice(r).trim()}}}};var I_=class extends hf{createProcess(){return this.spawn("ps",["-axo","pid=PID,ppid=PPID,comm:30,command=COMMAND"])}createParser(){let e=super.createParser();return r=>{let n=e(r);if(!n)return;let i=n.args.indexOf(n.command);if(i===-1)return n;for(i=i+n.command.length;i<n.args.length&&n.args[i]!==" ";)i++;return n.command=n.args.substr(0,i),n.args=n.args.substr(i+1),n}}};var WG=require("path");var S_=class extends df{async getWorkingDirectory(){}createProcess(){let e=(0,WG.join)(process.env.WINDIR||"C:\\Windows","System32","wbem","WMIC.exe");return this.spawn(e,["process","get","CommandLine,CreationDate,ParentProcessId,ProcessId"])}createParser(){let e=/^(.*)\s+([0-9]+)\.[0-9]+[+-][0-9]+\s+([0-9]+)\s+([0-9]+)$/;return r=>{let n=e.exec(r.trim());if(!n||n.length!==5)return;let i=Number(n[4]),o=Number(n[3]),s=Number(n[2]),a=n[1].trim();if(!isNaN(i)&&!isNaN(o)&&a){let u=a;if(a[0]==='"'){let c=a.indexOf('"',1);c>0&&(u=a.substr(1,c-1),a=a.substr(c+2))}else{let c=a.indexOf(" ");c>0?(u=a.substr(0,c),a=a.substr(c+1)):a=""}return{pid:i,ppid:o,command:u,args:a,date:s}}}}};var VG=new vn(GG.promises),rg=process.platform==="win32"?new S_:process.platform==="darwin"?new hf(VG):new I_(VG);function E_(t){let e=/--inspect(-brk)?(=((\[[0-9a-fA-F:]*\]|[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+|[a-zA-Z0-9\.]*):)?(\d+))?/,r=/--inspect-port=(\d+)/,n,i,o=e.exec(t);return o&&o.length>=1&&(o.length>=5&&o[4]&&(n=o[4]),o.length>=6&&o[5]&&(i=parseInt(o[5]))),o=r.exec(t),o&&o.length===2&&(i=parseInt(o[1])),{address:n,port:i}}async function KG(t,e,r,n=or){let i=await Eve(t.pid,r);if(!i)return[];let o=[],s=i.children.slice();for(;s.length;){let a=s.pop();s=s.concat(a.children);let{port:u}=E_(a.args);u&&o.push(Ox(`http://${t.hostname}:${u}`,n,r,!0).then(c=>li.attach({ipcAddress:t.ipcAddress,scriptName:"Child Process",inspectorURL:c,waitForDebugger:!0,dynamicAttach:!0,pid:String(a.pid),openerId:e})).catch(c=>r.info("internal","Could not spawn WD for child process",{err:c,port:u,child:a})))}return(await Promise.all(o)).filter(a=>!!a)}async function Eve(t,e){let r=new Map;r.set(0,{children:[],pid:0,ppid:0,command:"",args:""});try{await rg.lookup(({pid:i,ppid:o,command:s,args:a})=>(i!==o&&r.set(i,{pid:i,ppid:o,command:s,args:a,children:[]}),r),null)}catch(i){e.warn("internal","Error getting child process tree",i);return}let n=r.values();for(let i of n){let o=r.get(i.ppid);o&&o!==i&&o.children.push(i)}return!isNaN(t)&&t>0?r.get(t):r.get(0)}var zG=I(J());var Fo=class{create(e){return e===!1?new Yx:e===!0?new D_({maxAttempts:1/0,delay:1e3}):new D_({maxAttempts:e.maxAttempts??1/0,delay:e.delay??1e3})}};Fo=C([(0,zG.injectable)()],Fo);var D_=class t{constructor(e,r=0){this.options=e;this.attempt=r}get delay(){return this.options.delay}next(){return this.attempt===this.options.maxAttempts?void 0:new t(this.options,this.attempt+1)}reset(){return this.attempt?new t(this.options):this}},Yx=class{constructor(){this.delay=-1}next(){}reset(){return this}};var mf=class extends Ja{constructor(r,n,i,o,s=new Fo){super(r,n,o,i);this.restarters=s}resolveParams(r){return r.type==="pwa-node"&&r.request==="attach"?r:void 0}async launchProgram(r){let n=async(o,s)=>{let a=this.program,u;try{r.params.websocketAddress?u=r.params.websocketAddress:u=await Xp(`http://${r.params.address}:${r.params.port}`,s&&r.params.timeout>0?Or.withTimeout(r.params.timeout).token:r.context.cancellationToken,this.logger)}catch(p){if(a&&a===s)return i(o,a,{killed:!1,code:1});throw p}let c=await li.attach({ipcAddress:r.serverAddress,scriptName:"Remote Process",inspectorURL:u,remoteHostHeader:r.params.remoteHostHeader,waitForDebugger:!0,dynamicAttach:!0}),l=this.program=new Ya(c);l.stopped.then(p=>i(o.reset(),l,p))},i=async(o,s,a)=>{if(this.program!==s)return;if(a.killed){this.onProgramTerminated(a);return}let u=o.next();if(!u){this.onProgramTerminated(a);return}r.context.dap.output({output:XG.t(`Lost connection to debugee, reconnecting in {0}ms\r
`,u.delay)});let c=new Ds;this.program=c;let l=await Promise.race([Le(u.delay),c.stopped]);this.program===c&&(l?this.onProgramTerminated(a):n(u,c))};return n(this.restarters.create(r.params.restart))}async terminate(r){await super.terminate(),r&&this.telemetry&&xi(this.telemetry.processId,this.logger)}createLifecycle(r,n,i){if(i.openerId)return{};let o;return{initialized:async()=>{o=this.onFirstInitialize(r,n,i),await o},close:()=>{this.targetList().length&&this.program?.stop(),o?.then(s=>s.dispose())}}}async onFirstInitialize(r,n,i){let o=new A_;await o.startTouchLoop();let s=new _r("node",void 0);try{s=await this.resolveNodePath(n.params)}catch{}let[a]=await Promise.all([this.gatherTelemetryFromCdp(r,n),this.setEnvironmentVariables(r,n,o.path,i.targetId,s)]);return this.telemetry=a,a&&n.params.attachExistingChildren&&KG({pid:a.processId,nodePath:s.path,hostname:n.params.address,ipcAddress:n.serverAddress},i.targetId,this.logger).catch(u=>this.logger.warn("internal","Error watching child processes",{err:u})),o}async setEnvironmentVariables(r,n,i,o,s){if(!n.params.autoAttachChildProcesses)return;if(!await yl(n.params.address)){this.logger.warn("runtime.target","Cannot attach to children of remote process");return}let a=await this.resolveEnvironment(n,s,{requireLease:i,openerId:o});return this.appendEnvironmentVariables(r,a)}};mf=C([(0,Ac.injectable)(),b(0,(0,Ac.inject)(ci)),b(1,(0,Ac.inject)(ce)),b(2,(0,Ac.inject)(Yr)),b(3,(0,Ac.inject)(st))],mf);var Mn=I(J()),yf=require("path");function C_(t){if(!t.runtimeArgs||t.attachSimplePort)return;let e=[];for(let r of t.runtimeArgs)/^--inspect-brk(=|$)/.test(r)?t.stopOnEntry=t.stopOnEntry||!0:e.push(r);t.runtimeArgs=e}var JG=require("os"),YG=I(require("path")),QG=require("crypto"),gf=require("fs"),P_=class t{constructor(){this.path=YG.join((0,JG.tmpdir)(),`node-debug-callback-${(0,QG.randomBytes)(8).toString("hex")}`);this.disposed=!1}static{this.pollInterval=200}read(e=t.pollInterval){return this.readPromise?this.readPromise:(this.readPromise=new Promise((r,n)=>{let i=setInterval(()=>{if(this.disposed){clearInterval(i),r(void 0);return}if((0,gf.existsSync)(this.path)){try{r(JSON.parse((0,gf.readFileSync)(this.path,"utf-8")))}catch(o){n(o)}finally{this.dispose()}clearInterval(i)}},e)}),this.readPromise)}dispose(){if(!this.disposed){this.disposed=!0;try{(0,gf.unlinkSync)(this.path)}catch{}}}};var Ic=I(require("path"));var ng=Symbol("IProgramLauncher"),x_=t=>{let e=t.program;if(e&&Ic.isAbsolute(e)){let r=Ic.relative(t.cwd,e);e=Ic.isAbsolute(r)?r:`.${Ic.sep}${r}`}return e?[...t.runtimeArgs,e,...ih(t.args)]:[...t.runtimeArgs,...ih(t.args)]};var Dve=async(t,e)=>{if(typeof e.stopOnEntry=="string")return(0,yf.resolve)(e.cwd,e.stopOnEntry);if(e.program)return(0,yf.resolve)(e.cwd,e.program);for(let r of ih(e.args)){if(r.startsWith("-"))continue;let n=(0,yf.resolve)(e.cwd,r);if(await t.exists(n))return n}},Hf=class extends dn{constructor(r,n,i,o,s,a,u,c,l){super(r,n,l,c);this.bpPredictor=i;this.launchers=o;this.restarters=s;this.fsUtils=a;this.packageJson=u}resolveParams(r){let n;if(r.type==="pwa-node"&&r.request==="launch"?n={...r}:"server"in r&&r.server&&"program"in r.server&&(n={...r.server}),!!n)return C_(n),n}async launchProgram(r){r.params.program&&(r.params.program=await this.tryGetCompiledFile(r.params.program)),this.attachSimplePort=await this.getSimpleAttachPortIfAny(r.params);let n=async i=>{this.program&&this.program.stop();let o=await this.resolveNodePath(r.params,r.params.runtimeExecutable||void 0),s=o.warning;s&&r.context.dap.output({category:"stderr",output:s.message});let a=new P_,u=await this.resolveEnvironment(r,o,{fileCallback:a.path});this.attachSimplePort?(r.params.attachSimplePort||r.context.dap.output({category:"stderr",output:"Using legacy attach mode for --inspect-brk in npm scripts. We recommend removing --inspect-brk, and using `stopOnEntry` in your launch.json if you need it."}),u=u.merge({NODE_OPTIONS:null})):u=b_(o,u);let c={...r.params,env:u.value},l=this.launchers.find(f=>f.canLaunch(c));if(!l)throw new Error("Cannot find an appropriate launcher for the given set of options");let p=await l.launchProgram(o.path,c,r.context);if(this.attachSimplePort){let f=await li.attach({ipcAddress:r.serverAddress,scriptName:"Remote Process",inspectorURL:await Xp(`http://127.0.0.1:${this.attachSimplePort}`,r.context.cancellationToken,this.logger),waitForDebugger:!0,dynamicAttach:!0});p=new w_(p,new Ya(f))}else a.read().then(f=>{f&&p.gotTelemetery(f)});this.program=p,p.stopped.then(async f=>{if(a.dispose(),this.program!==p)return;if(f.killed||f.code===0){this.onProgramTerminated(f);return}let m=i.next();if(!m){this.onProgramTerminated(f);return}await Le(m.delay),this.program===p&&n(m)})};return n(this.restarters.create(r.params.restart))}async getSimpleAttachPortIfAny(r){if(r.attachSimplePort)return r.attachSimplePort;let n=CG(r.runtimeExecutable,r.runtimeArgs);if(!(!n||!(await this.packageJson.getContents())?.scripts?.[n]?.includes("--inspect-brk")))return r.port??9229}createLifecycle(r,n,{targetId:i}){return{initialized:async()=>{if(this.attachSimplePort&&await this.gatherTelemetryFromCdp(r,n),!n.params.stopOnEntry)return;let o=await Dve(this.fsUtils,n.params);if(!o){this.logger.warn("runtime","Could not resolve program entrypointfrom args");return}let s="(?:entryBreakpoint){0}",a=ke(o),u=qn(a)+s,c=await r.Debugger.setBreakpointByUrl({urlRegex:u,lineNumber:0,columnNumber:0});return c?.breakpointId?{cdpId:c?.breakpointId,path:a}:void 0},close:()=>{let o=Number(i);if(o>0)try{process.kill(o)}catch{}}}}async tryGetCompiledFile(r){r=Pt(r);let n=(0,yf.extname)(r);if(!n||n===".js")return r;let i=await this.bpPredictor.getPredictionForSource(r);if(!i||i.size===0)return r;let o=Qs(i.values());return o?(this.logger.info("runtime.launch","Updating entrypoint to compiled file",{from:r,to:o.compiledPath,candidates:i.size}),o.compiledPath):r}};Hf=C([(0,Mn.injectable)(),b(0,(0,Mn.inject)(ci)),b(1,(0,Mn.inject)(ce)),b(2,(0,Mn.inject)(Cu)),b(3,(0,Mn.multiInject)(ng)),b(4,(0,Mn.inject)(Fo)),b(5,(0,Mn.inject)(Mr)),b(6,(0,Mn.inject)(wc)),b(7,(0,Mn.inject)(Yr)),b(8,(0,Mn.inject)(st))],Hf);var bf=I(require("fs")),ZG=require("fs"),L_=I(J()),e6=I(require("os")),qt=I(require("path"));var T_=Symbol("INvmResolver");var vf=class{constructor(e=new vn(ZG.promises),r=process.env,n=process.arch,i=process.platform,o=e6.homedir()){this.fsUtils=e;this.env=r;this.arch=n;this.platform=i;this.homedir=o}async resolveNvmVersionPath(e){let r,n=[],i=this.parseVersionString(e),o=this.env.NVS_HOME;if(!o){let s=this.platform==="win32"?qt.join(this.env.LOCALAPPDATA||"","nvs"):qt.join(this.env.HOME||"",".nvs");bf.existsSync(s)&&(o=s)}if(i.nvsFormat||o){if(r=await this.resolveNvs(o,i),!r&&i.nvsFormat)throw new Z(ZI(e,"nvs"));n.push("nvs")}if(!r)if(this.platform==="win32")this.env.NVM_HOME&&(r=await this.resolveWindowsNvm(e),n.push("nvm-windows"));else{let s=this.env.NVM_DIR||qt.join(this.homedir,".nvm");await this.fsUtils.exists(s)&&(r=await this.resolveUnixNvm(e),n.push("nvm"))}if(!r){let s=this.platform==="win32"?this.env.FNM_DIR||qt.join(this.env.APPDATA||"","fnm"):this.env.FNM_DIR||qt.join(this.homedir,".fnm");await this.fsUtils.exists(s)&&(r=await this.resolveFnm(e,s),n.push("fnm"))}if(!n.length)throw new Z(QI());if(!r||!await this.fsUtils.exists(r))throw new Z(ZI(e,n.join("/")));return{directory:r,binary:await this.getBinaryInFolder(r)}}async getBinaryInFolder(e){return await so(["node64.exe","node64"].map(r=>this.fsUtils.exists(qt.join(e,r))))?"node64":"node"}async resolveNvs(e,{remoteName:r,semanticVersion:n,arch:i}){if(!e)throw new Z(s1());let o=this.findBinFolderForVersion(qt.join(e,r),n,s=>bf.existsSync(qt.join(s,i)));if(o)return this.platform!=="win32"?qt.join(o,i,"bin"):qt.join(o,i)}async resolveUnixNvm(e){let r=this.env.NVM_DIR;if(!r){let i=qt.join(this.env.HOME||"",".nvm");await this.fsUtils.exists(i)&&(r=i)}if(!r)throw new Z(QI());let n=this.findBinFolderForVersion(qt.join(r,"versions","node"),`v${e}`);return n?qt.join(n,"bin"):void 0}async resolveWindowsNvm(e){let r=this.env.NVM_HOME;if(!r)throw new Z(a1());return this.findBinFolderForVersion(r,`v${e}`)}async resolveFnm(e,r){let n=this.findBinFolderForVersion(qt.join(r,"node-versions"),`v${e}`);if(n)return this.platform==="win32"?qt.join(n,"installation"):qt.join(n,"installation","bin")}findBinFolderForVersion(e,r,n){if(!bf.existsSync(e))return;let i=bf.readdirSync(e);if(i.includes(r))return qt.join(e,r);let o=i.filter(s=>s.startsWith(`${r}.`)).sort(Cve).filter(s=>n?n(qt.join(e,s)):!0).pop();return o?qt.join(e,o):void 0}parseVersionString(e){let n=/^(([\w-]+)\/)?(v?(\d+(\.\d+(\.\d+)?)?))(\/((x86)|(32)|((x)?64)|(arm\w*)|(ppc\w*)))?$/i.exec(e);if(!n)throw new Error("Invalid version string: "+e);let i=!!(n[2]||n[8]),o=n[2]||"node",s=n[4]||"",a=Pve(n[8]||this.arch);return{nvsFormat:i,remoteName:o,semanticVersion:s,arch:a}}};vf=C([(0,L_.injectable)(),b(0,(0,L_.inject)(Mr))],vf);var Cve=(t,e)=>{let r=/([0-9]+)\.([0-9]+)\.([0-9]+)/.exec(t),n=/([0-9]+)\.([0-9]+)\.([0-9]+)/.exec(e);if(!r||!n)return(n?-1:0)+(r?1:0);let[,i,o,s]=r,[,a,u,c]=n;return Number(i)-Number(a)||Number(o)-Number(u)||Number(s)-Number(c)};function Pve(t){switch(t){case"32":case"x86":case"ia32":return"x86";case"64":case"x64":case"amd64":return"x64";case"arm":let e=process.config.variables.arm_version;return e?"armv"+e+"l":"arm";default:return t}}var t6=require("child_process"),R_=I(J()),r6=I(Zw());var wf=class{constructor(e){this.logger=e}canLaunch(e){return e.console==="internalConsole"}async launchProgram(e,r,n){let{executable:i,args:o,shell:s,cwd:a}=xve(e,x_(r),r.cwd);n.dap.output({category:"console",output:[i,...o].join(" ")+`
`});let u=(0,t6.spawn)(i,o,{shell:s,cwd:a,env:jt.merge(jt.processEnv(),r.env).defined()});return r.outputCapture==="console"?this.discardStdio(n.dap,u):this.captureStdio(n.dap,u),new __(u,this.logger,r.killBehavior)}captureStdio(e,r){r.stdout.pipe($_.stream()).on("data",n=>e.output({category:"stdout",output:n})).resume(),r.stderr.pipe($_.stream()).on("data",n=>e.output({category:"stderr",output:n})).resume()}discardStdio(e,r){let n=[],i=()=>{n&&e.output({category:"stderr",output:Buffer.concat(n).toString()})},o=Buffer.from("Debugger attached."),s=a=>{a.includes(o)?(n=void 0,r.stderr.removeListener("data",s)):n&&n.push(a)};r.stderr.on("data",s),r.on("error",a=>{i(),e.output({category:"stderr",output:a.stack||a.message})}),r.on("exit",a=>{a!==null&&a>0&&(i(),e.output({category:"stderr",output:`Process exited with code ${a}\r
`}))}),r.stdout.resume(),r.stderr.resume()}};wf=C([(0,R_.injectable)(),b(0,(0,R_.inject)(ce))],wf);var xve=(t,e,r)=>{if(process.platform==="win32"&&(t=bi(t),r=bi(r),t.endsWith(".ps1")&&(e=["-File",t,...e],t="powershell.exe")),process.platform!=="win32"||!t.includes(" "))return{executable:t,args:e,shell:!1,cwd:r};let n=!1,i=[];for(let o of e)o.includes(" ")?(i.push(`"${o}"`),n=!0):i.push(o);return n?{executable:`"${t}"`,args:i,shell:!0,cwd:r}:{executable:t,args:e,shell:!1,cwd:r}};var $_=class t{constructor(){this.etxSpotted=!1}static stream(){return(0,r6.default)(new t)}[Symbol.split](e){if(this.etxSpotted||=e.includes(""),!this.etxSpotted)return[e,""];let r=e.split("");return r.length>1?r.map((n,i)=>i<r.length-1?`${n}
`:n):r}};var M_=I(J());var _f=class{constructor(e){this.logger=e}canLaunch(e){return e.internalConsoleOptions,e.console!=="internalConsole"}async launchProgram(e,r,n){let i={kind:r.console==="integratedTerminal"?"integrated":"external",title:r.name,cwd:r.cwd,args:[e,...x_(r)],env:Vc(r.env),argsCanBeInterpretedByShell:!Array.isArray(r.args)},o;try{o=await this.sendLaunchRequest(i,n)}catch(s){throw new Z(u1(s.message))}return new lf(o,this.logger,r.killBehavior)}sendLaunchRequest(e,r){return r.dap.runInTerminalRequest(e)}};_f=C([(0,M_.injectable)(),b(0,(0,M_.inject)(ce))],_f);var n6=I(J());var Af=class{getTreatment(e,r){return Promise.resolve(r)}};Af=C([(0,n6.injectable)()],Af);var i6=I(J());var Sc=class{constructor(){this.flushEmitter=new z;this.onFlush=this.flushEmitter.event}report(){}reportOperation(){}attachDap(){}flush(){this.flushEmitter.fire()}dispose(){}};Sc=C([(0,i6.injectable)()],Sc);var o6=require("crypto"),Qa=I(J()),s6=require("os"),a6=I(require("path")),ig=I(require("vscode"));var Qx=class{constructor(e){this.terminal=e;this.stopped=new Promise(r=>{let n=ig.window.onDidCloseTerminal(i=>{i===e&&(r({code:0,killed:!0}),n.dispose())})})}gotTelemetery(){}stop(){return this.terminal.sendText(""),setTimeout(()=>this.terminal.dispose(),1),this.stopped}},Cs=class extends dn{constructor(r,n,i,o,s){super(r,n,s,o);this.fs=i;this.terminalCreatedEmitter=new z;this.callbackFile=a6.join((0,s6.tmpdir)(),`node-debug-callback-${(0,o6.randomBytes)(8).toString("hex")}`);this.onTerminalCreated=this.terminalCreatedEmitter.event}async getProcessTelemetry(){try{return JSON.parse(await this.fs.readFile(this.callbackFile,"utf-8"))}catch{return}}resolveParams(r){if(r.type==="node-terminal"&&r.request==="launch")return r;if(r.type==="pwa-chrome"&&r.server&&"command"in r.server)return r.server}async launchProgram(r){let n;try{n=await this.resolveNodePath(r.params)}catch(a){if(a instanceof Z&&a.cause.id===9230)throw a;n=new _r("node",void 0)}let i=await this.resolveEnvironment(r,n,{fileCallback:this.callbackFile}),o=await this.createTerminal({name:r.params.name,cwd:r.params.cwd,iconPath:new ig.ThemeIcon("debug"),env:b_(n,i).defined(),isTransient:!0});this.terminalCreatedEmitter.fire(o),o.show();let s=this.program=new Qx(o);r.params.command&&(await Promise.race([o.processId,Le(1e3)]),o.sendText(r.params.command,!0)),s.stopped.then(a=>{s===this.program&&this.onProgramTerminated(a)})}createTerminal(r){return Promise.resolve(ig.window.createTerminal(r))}dispose(){super.dispose(),this.fs.unlink(this.callbackFile).catch(()=>{})}};Cs=C([(0,Qa.injectable)(),b(0,(0,Qa.inject)(ci)),b(1,(0,Qa.inject)(ce)),b(2,(0,Qa.inject)(we)),b(3,(0,Qa.inject)(Yr)),b(4,(0,Qa.inject)(st))],Cs);var xc=I(J()),pg=I(rK());var Rf=class{constructor(e,r){r&&e instanceof cn&&(this.service=(0,pg.getExperimentationService)("ms-vscode.js-debug",hu,zg?pg.TargetPopulation.Insiders:pg.TargetPopulation.Public,{setSharedProperty(n,i){e.setGlobalMetric(n,i)},postEvent(n,i){e.pushOutput({category:"telemetry",output:n,data:i})}},r.globalState))}async getTreatment(e,r){if(!this.service)return r;try{return await this.service.getTreatmentVariableAsync("vscode",e,!0)}catch{return r}}};Rf=C([(0,xc.injectable)(),b(0,(0,xc.inject)(Kt)),b(1,(0,xc.optional)()),b(1,(0,xc.inject)(tt))],Rf);var n0=I(J()),iK=I(require("vscode"));var nK=I(J()),Sr=I(require("vscode"));var ze=class{constructor(){this._onSessionAddedEmitter=new Sr.EventEmitter;this._onSessionEndedEmitter=new Sr.EventEmitter;this._disposables=[];this.sessions=new Map;this.onSessionAdded=this._onSessionAddedEmitter.event;this.onSessionEnded=this._onSessionEndedEmitter.event}static isConcreteSession(e){return!!e.configuration.__pendingTargetId}static pickSession(e,r){if(e.length<2)return e[0];let n=Sr.window.createQuickPick();return n.title=r,n.items=e.map(i=>({label:i.name,id:i.id})),n.ignoreFocusOut=!0,new Promise(i=>{n.onDidAccept(()=>i(e.find(o=>o.id===n.selectedItems[0]?.id))),n.onDidHide(()=>i(void 0)),n.show()}).finally(()=>n.dispose())}get isDebugging(){return this.sessions.size>0}getById(e){return this.sessions.get(e)}isRunning(e){return[...this.sessions.values()].includes(e)}getByName(e){return[...this.sessions.values()].filter(r=>r.name===e)}getConcreteSessions(){return[...this.sessions.values()].filter(ze.isConcreteSession)}getChildren(e){return[...this.sessions.values()].filter(r=>r.configuration.__parentId===e.id)}attach(){Sr.debug.onDidStartDebugSession(e=>{Bs(e.type)&&(this.sessions.set(e.id,e),this._onSessionAddedEmitter.fire(e))},void 0,this._disposables),Sr.debug.onDidTerminateDebugSession(e=>{Bs(e.type)&&(this.sessions.delete(e.id),this._onSessionEndedEmitter.fire(e))},void 0,this._disposables),Sr.debug.onDidReceiveDebugSessionCustomEvent(e=>{if(Bs(e.session.type)){if(e.event==="revealLocationRequested"){let r=e.body,n=Sr.debug.asDebugSourceUri(e.body.source),i={};if(r.line){let o=new Sr.Position((r.line||1)-1,(r.column||1)-1);i.selection=new Sr.Range(o,o)}Sr.window.showTextDocument(n,i);return}if(e.event==="copyRequested"){let r=e.body;Sr.env.clipboard.writeText(r.text);return}}},void 0,this._disposables)}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[]}};ze=C([(0,nK.injectable)()],ze);var Mf=class{constructor(e){this.tracker=e}register(e){e.subscriptions.push(this.tracker.onSessionEnded(r=>{let n=r.configuration.cascadeTerminateToConfigurations;if(!(!n||!(n instanceof Array)))for(let i of n)for(let o of this.tracker.getByName(i))iK.debug.stopDebugging(o)}))}};Mf=C([(0,n0.injectable)(),b(0,(0,n0.inject)(ze))],Mf);var i0=Symbol("IDebugConfigurationResolver"),o0=Symbol("IDebugConfigurationProvider");var Uf=I(_e()),$s=I(J()),yK=require("os"),jf=require("path"),dg=I(require("vscode"));var oK=I(J()),sK=I(require("vscode"));var xs=class{get type(){return this.getType()}get triggerKind(){return this.getTriggerKind()}async provideDebugConfigurations(e,r){try{let n=await this.provide(e,r);if(!n)return[];let i=n instanceof Array?n:[n],o=Ed.get(this.type);if(o)for(let s of i)s.type===this.type&&(s.type=o);return i}catch(n){return sK.window.showErrorMessage(n.message,{modal:!0}),[]}}};xs=C([(0,oK.injectable)()],xs);var u0=I(J()),cK=require("path"),Ls=I(require("vscode"));var fg=I(J()),YL=I(require("vscode"));var aK=I(require("vscode")),kf=class{constructor(e){this.key=e}set value(e){e!==this._value&&(this._value=e,aK.commands.executeCommand("setContext",this.key,e))}get value(){return this._value}};var uK=Symbol("Uninitialized"),s0=class{constructor(e,r){this.key=e;this.defaultValue=r;this._value=uK}write(e,r){r!==this.read(e)&&(this._value=r,e.update(this.key,r))}read(e){return this._value===uK&&(this._value=e.get(this.key)??this.defaultValue),this._value}};var a0=new s0("sourceSteppingEnabled",!0),Of=class{constructor(e,r){this.context=e;this.tracker=r}register(e){let r=new kf("jsDebugIsMapSteppingDisabled");a0.read(this.context.workspaceState)===!1&&(r.value=!0);let n=i=>{r.value=!i,a0.write(this.context.workspaceState,i);for(let o of this.tracker.getConcreteSessions())o.customRequest("setSourceMapStepping",{enabled:i})};e.subscriptions.push(Pe(YL.commands,"extension.js-debug.enableSourceMapStepping",async()=>{n(!0)}),Pe(YL.commands,"extension.js-debug.disableSourceMapStepping",async()=>{n(!1)}))}};Of=C([(0,fg.injectable)(),b(0,(0,fg.inject)(tt)),b(1,(0,fg.inject)(ze))],Of);var pi=class{constructor(e){this.extensionContext=e}get type(){return this.getType()}async resolveDebugConfiguration(e,r,n){if(r.type&&(r.type=this.getType()),"__pendingTargetId"in r)return r;let i=r;i.sourceMaps??=a0.read(this.extensionContext.workspaceState);try{let o=await this.resolveDebugConfigurationAsync(e,i,n);return o&&this.commonResolution(o,e)}catch(o){Ls.window.showErrorMessage(o.message,{modal:!0})}}applyDefaultRuntimeExecutable(e){if(e.runtimeExecutable)return;let r=It(Ls.workspace,"debug.javascript.defaultRuntimeExecutable"),n=r?r[e.type]:void 0;n&&(e.runtimeExecutable=n)}commonResolution(e,r){return e.trace=MI(e.trace,this.extensionContext.logPath),e.__workspaceCachePath=this.extensionContext.storagePath,e.__breakOnConditionalError=It(Ls.workspace,"debug.javascript.breakOnConditionalError",r)??!1,r?e.__workspaceFolder=r.uri.fsPath:(e.__workspaceFolder||=this.getSuggestedWorkspaceFolders(e).filter(St).filter(n=>!n.includes("${workspaceFolder}")).map(n=>(0,cK.isAbsolute)(n)?Ls.workspace.getWorkspaceFolder(Ls.Uri.file(n))?.uri.fsPath:n).find(St)||Ls.workspace.workspaceFolders?.[0]?.uri.fsPath||"",e.__workspaceFolder?e=HA(e):e=gA(e)),e}getSuggestedWorkspaceFolders(e){return[]}};pi=C([(0,u0.injectable)(),b(0,(0,u0.inject)(tt))],pi);var eu=I(_e()),Nf=require("fs"),Ff=I(J()),wt=I(require("path")),Fn=I(require("vscode"));var lK=I(require("vscode"));function c0(t){lK.debug.activeDebugConsole.appendLine(t)}var Lc=I(_e()),pK=require("child_process"),fK=require("fs"),dK=require("path"),mn=I(require("vscode"));var Rwe=9229;async function hK(){let t=await eT();if(!t)return;let e=It(mn.workspace,"debug.javascript.pickAndAttachOptions"),r={...fA,...e,name:"process",processId:t};await ZL(new vn(fK.promises),r,!0),await mn.debug.startDebugging(r.cwd?mn.workspace.getWorkspaceFolder(mn.Uri.file(r.cwd)):void 0,r)}async function ZL(t,e,r=!1){let n=e.processId?.trim(),i=n&&Owe(n);if(!i||isNaN(i.pid))throw new Error(Lc.t("Attach to process: '{0}' doesn't look like a process id.",n||"<unknown>"));if(i.port||Nwe(i.pid),e.port=i.port||Rwe,delete e.processId,r){let o=await Mwe(t,i.pid);o&&(e.cwd=o)}}async function Mwe(t,e){let r=e&&await rg.getWorkingDirectory(e);if(!r)return mn.workspace.workspaceFolders?.[0].uri.fsPath;let n=await Hl(t,r,"package.json");if(!n)return r;let i=mn.workspace.getWorkspaceFolder(mn.Uri.file(r));return!i||ZH(i.uri.fsPath,n)?n:i.uri.fsPath}async function eT(){try{let t=await Fwe();return t?t.pidAndPort:null}catch(t){return await mn.window.showErrorMessage(Lc.t("Process picker failed ({0})",t.message),{modal:!0}),null}}var kwe=(t,e)=>`${t}:${e??""}`,Owe=t=>{let[e,r]=t.split(":");return{pid:Number(e),port:r?Number(r):void 0}};async function Fwe(){let t=/^(?:node|iojs)(?:$|\b)/i,e=0,r=mn.window.createQuickPick();r.placeholder=Lc.t("Pick the node.js process to attach to"),r.matchOnDescription=!0,r.matchOnDetail=!0,r.busy=!0,r.show();let n=!1,i=new Promise(s=>{r.onDidAccept(()=>s(r.selectedItems[0])),r.onDidHide(()=>s(void 0))});rg.lookup((s,a)=>{if(n)return a;process.platform==="win32"&&s.command.indexOf("\\??\\")===0&&(s.command=s.command.replace("\\??\\",""));let u=(0,dK.basename)(s.command,".exe"),{port:c}=E_(s.args);if(!c&&!t.test(u))return a;let l={label:u,description:s.args,pidAndPort:kwe(s.pid,c),sortKey:s.date?s.date:e++,detail:c?Lc.t("process id: {0}, debug port: {1} ({2})",s.pid,c,"SIGUSR1"):Lc.t("process id: {0} ({1})",s.pid,"SIGUSR1")},p=a.findIndex(f=>f.sortKey<l.sortKey);return a.splice(p===-1?a.length:p,0,l),r.items=a,a},[]).then(()=>r.busy=!1).catch(s=>{mn.window.showErrorMessage(`Error listing processes: ${s.message}`),r.dispose()});let o=await i;return n=!0,r.dispose(),o}function Nwe(t){try{if(process.platform==="win32"){let e=`node -e process._debugProcess(${t})`;(0,pK.execSync)(e)}else process.kill(t,"SIGUSR1")}catch(e){throw new Error(Lc.t("Attach to process: cannot enable debug mode for process '{0}' ({1}).",t,e))}}var tu=class extends pi{constructor(r,n,i){super(r);this.nvmResolver=n;this.fsUtils=i}async resolveDebugConfigurationWithSubstitutedVariables(r,n){let i=n;if(i.type==="pwa-node"&&i.request==="attach"&&typeof i.processId=="string"&&await ZL(this.fsUtils,i),"port"in i&&typeof i.port=="string"&&(i.port=Number(i.port)),"attachSimplePort"in i&&typeof i.attachSimplePort=="string"&&(i.attachSimplePort=Number(i.attachSimplePort)),i.cwd){let o=await bn(Nf.promises,i.cwd);if(!o){Fn.window.showErrorMessage(eu.t("The configured `cwd` {0} does not exist.",i.cwd),{modal:!0});return}if(!o.isDirectory()){Fn.window.showErrorMessage(eu.t("The configured `cwd` {0} is not a folder.",i.cwd),{modal:!0});return}}return i}async resolveDebugConfigurationAsync(r,n,i){if(!n.name&&!n.type&&!n.request&&(n=await rT(r,!0,n),n.request==="launch"&&!n.program)){Fn.window.showErrorMessage(eu.t("Cannot find a program to debug"),{modal:!0});return}if(n.cwd||(n.cwd=n.localRoot||tT(n.request==="launch"?n.program:void 0,r)),n.remoteRoot&&!n.localRoot&&(n.localRoot="${workspaceFolder}"),n.request==="launch"){if(this.applyDefaultRuntimeExecutable(n),n.runtimeExecutable&&$y(n.runtimeExecutable)==="deno"&&!n.attachSimplePort){let s=await pa();n.attachSimplePort=s,n.continueOnAttach??=!0;let a=[`--inspect-brk=127.0.0.1:${s}`,"--allow-all"];n.runtimeArgs?n.runtimeArgs.includes("run")?n.runtimeArgs=[...n.runtimeArgs,...a]:n.runtimeArgs=["run",...a,...n.runtimeArgs]:n.runtimeArgs=["run",...a]}let o=n.runtimeVersion;if(typeof o=="string"&&o!=="default"){let{directory:s,binary:a}=await this.nvmResolver.resolveNvmVersionPath(o);n.env=new jt(n.env).addToPath(s,"prepend",!0).value,n.runtimeExecutable=!n.runtimeExecutable||n.runtimeExecutable==="node"?a:n.runtimeExecutable}if(n.console==="integratedTerminal"&&!n.internalConsoleOptions&&(n.internalConsoleOptions="neverOpen"),n.attachSimplePort===null||n.attachSimplePort===void 0)C_(n);else{if(n.attachSimplePort===0){n.attachSimplePort=await pa(void 0,i);let s=`--inspect-brk=${n.attachSimplePort}`;n.runtimeArgs=n.runtimeArgs?[...n.runtimeArgs,s]:[s]}n.continueOnAttach=!n.stopOnEntry,n.stopOnEntry=!1}await Bwe(this.fsUtils,r,n)}return hA(n)}getType(){return"pwa-node"}getSuggestedWorkspaceFolders(r){return[r.rootPath,r.cwd]}};tu=C([(0,Ff.injectable)(),b(0,(0,Ff.inject)(tt)),b(1,(0,Ff.inject)(T_)),b(2,(0,Ff.inject)(Mr))],tu);function tT(t,e){if(e)return e.uri.fsPath;if(Fn.workspace.workspaceFolders&&Fn.workspace.workspaceFolders.length>0)return Fn.workspace.workspaceFolders[0].uri.fsPath;if(t){if(t==="${file}")return"${fileDirname}";if(wt.isAbsolute(t))return wt.dirname(t)}return"${workspaceFolder}"}function mK(t,e){if(t&&(e=Bi(e,"workspaceFolder",t.uri.fsPath)),Fn.workspace.workspaceFolders?.length&&(e=Bi(e,"workspaceRoot",Fn.workspace.workspaceFolders[0].uri.fsPath)),wt.isAbsolute(e))return e;if(t)return wt.join(t.uri.fsPath,e)}async function Bwe(t,e,r){if(r.outFiles||!e)return;let n;if(r.program?(n=mK(e,r.program),n&&(n=wt.dirname(n))):r.cwd&&(n=mK(e,r.cwd)),!n||ey(e.uri.fsPath,n))return;let i=await mS(n,async o=>!o.includes("node_modules")&&await t.exists(wt.join(o,"package.json")));if(i){let o=Ge(wt.relative(e.uri.fsPath,i));o.length&&(r.outFiles=[...jg.outFiles,`\${workspaceFolder}/${o}/**/*.js`,`!\${workspaceFolder}/${o}/**/node_modules/**`])}}var Uwe=["index.js","main.js"];async function rT(t,e,r){let n={type:"pwa-node",request:"launch",name:eu.t("Launch Program"),skipFiles:["<node_internals>/**"]};r&&r.noDebug&&(n.noDebug=!0);let i=await gK(t,"package.json"),o,s=!1;if(i&&i.name==="mern-starter")return e&&c0(eu.t("Launch configuration for '{0}' project created.","Mern Starter")),qwe(n),n;if(i&&(o=await Vwe(t,i,e),o&&e&&c0(eu.t("Launch configuration created based on 'package.json'."))),!o){let a=Fn.window.activeTextEditor;a&&Gg.includes(a.document.languageId)&&(s=a.document.languageId!=="javascript",o=t?wt.relative(t.uri.fsPath,a.document.uri.fsPath):a.document.uri.fsPath,wt.isAbsolute(o)||(o="${workspaceFolder}"+wt.sep+o))}if(!o&&t){let a=t.uri.fsPath;o=await so(Uwe.map(async u=>await bn(Nf.promises,wt.join(a,u))&&"${workspaceFolder}"+wt.sep+u))}if(o||(o="${file}"),o&&(n.program=o,t||(n.__workspaceFolder=wt.dirname(o))),s||Fn.workspace.textDocuments.some(a=>Wwe(a.languageId))){e&&c0(eu.t("Adjust glob pattern(s) in the 'outFiles' attribute so that they cover the generated JavaScript."));let a="",u=await gK(t,"tsconfig.json");if(u?.compilerOptions?.outDir&&jwe()){let c=u.compilerOptions.outDir;wt.isAbsolute(c)||(a=c,a.indexOf("./")===0&&(a=a.substr(2)),a[a.length-1]!=="/"&&(a+="/")),n.preLaunchTask="tsc: build - tsconfig.json"}n.outFiles=["${workspaceFolder}/"+a+"**/*.js"]}return n}function jwe(){let t=Fn.workspace.getConfiguration().get("typescript.tsc.autoDetect");return t!=="off"&&t!=="watch"}function qwe(t){t.request==="launch"&&(t.runtimeExecutable="nodemon",t.program="${workspaceFolder}/index.js",t.restart=!0,t.env={BABEL_DISABLE_CACHE:"1",NODE_ENV:"development"},t.console="integratedTerminal",t.internalConsoleOptions="neverOpen")}function Wwe(t){return t==="typescript"||t==="coffeescript"}async function gK(t,e){if(t)try{let r=await Nf.promises.readFile(wt.join(t.uri.fsPath,e),"utf8");return JSON.parse(r)}catch{}}async function Vwe(t,e,r){let n;try{if(e.main?n=e.main:e.scripts&&typeof e.scripts.start=="string"&&(n=e.scripts.start.split(" ").pop()),n){let i;if(wt.isAbsolute(n)?i=n:(i=t?wt.join(t.uri.fsPath,n):void 0,n=wt.join("${workspaceFolder}",n)),r&&i&&!await bn(Nf.promises,i)&&!await bn(Nf.promises,i+".js"))return}}catch{}return n}var HK=I(require("vscode"));var Bf=class extends pi{async resolveDebugConfigurationAsync(e,r){if(r.cwd||(r.cwd=tT(void 0,e)),r.request==="launch"&&!r.command){await Fg(HK.commands,"extension.js-debug.createDebuggerTerminal",void 0,e);return}return r.remoteRoot&&!r.localRoot&&(r.localRoot="${workspaceFolder}"),mA(r)}getType(){return"node-terminal"}};var Gwe=t=>t.request==="launch",Kwe=t=>t.request==="attach",ru=class extends pi{constructor(r,n,i,o,s){super(r);this.nodeProvider=n;this.terminalProvider=i;this.location=o;this.fs=s}async resolveBrowserCommon(r,n){if(n.request,n.server&&"program"in n.server){let o={...n.server,type:"pwa-node",request:"launch",name:`${n.name}: Server`};n.server=await this.nodeProvider.resolveDebugConfiguration(r,o)}else n.server&&"command"in n.server&&(n.server=await this.terminalProvider.resolveDebugConfiguration(r,{...n.server,type:"node-terminal",request:"launch",name:`${n.name}: Server`}));let i=this.location==="remote"?"ui":"workspace";if(Gwe(n)&&!n.browserLaunchLocation&&(n.browserLaunchLocation=i),Kwe(n)&&!n.browserAttachLocation&&(n.browserAttachLocation=i),n.request==="launch"){let o=n;this.applyDefaultRuntimeExecutable(o)}}getSuggestedWorkspaceFolders(r){return[r.rootPath,r.webRoot]}async resolveDebugConfigurationWithSubstitutedVariables(r,n){if("__pendingTargetId"in n)return n;let i=n;if("port"in i&&typeof i.port=="string"&&(i.port=Number(i.port)),i.request==="launch"){let o=await this.ensureNoLockfile(i);if(o===void 0)return;i=o}return i}async ensureNoLockfile(r){if(r.request!=="launch")return r;let n=r;if(n.userDataDir===!1||n.port&&!await gB(n.port))return r;let i=typeof n.userDataDir=="string"?n.userDataDir:(0,jf.join)(this.extensionContext.storagePath??(0,yK.tmpdir)(),n.runtimeArgs?.includes("--headless")?".headless-profile":".profile"),o=(0,jf.join)(i,process.platform==="win32"?"lockfile":"SingletonLock");if(await so([_k(this.fs,o),this.isVsCodeLocked((0,jf.join)(i,"code.lock"))])){let a=Uf.t("Debug Anyway");if(await dg.window.showErrorMessage(Uf.t("It looks like a browser is already running from {0}. Please close it before trying to debug, otherwise VS Code may not be able to connect to it.",n.userDataDir===!0?Uf.t("an old debug session"):Uf.t("the configured userDataDir")),{modal:!0},a)!==a)return}return{...r,userDataDir:i}}async isVsCodeLocked(r){try{let n=Number(await this.fs.readFile(r,"utf-8"));return process.kill(n,0),!0}catch{return!1}}};ru=C([(0,$s.injectable)(),b(0,(0,$s.inject)(tt)),b(1,(0,$s.inject)(tu)),b(2,(0,$s.inject)(Bf)),b(3,(0,$s.inject)(rs)),b(4,(0,$s.inject)(we))],ru);var nu=class extends xs{provide(){return this.createLaunchConfigFromContext()||this.getDefaultLaunch()}getTriggerKind(){return dg.DebugConfigurationProviderTriggerKind.Initial}createLaunchConfigFromContext(){let e=dg.window.activeTextEditor;if(e&&e.document.languageId==="html")return{type:this.getType(),request:"launch",name:`Open ${(0,jf.basename)(e.document.uri.fsPath)}`,file:e.document.uri.fsPath}}getDefaultLaunch(){return{type:this.getType(),request:"launch",name:Uf.t("Launch Chrome against localhost"),url:"http://localhost:8080",webRoot:"${workspaceFolder}"}}};nu=C([(0,$s.injectable)()],nu);var nT=I(J());var qf=class extends ru{async resolveDebugConfigurationAsync(e,r){if(!r.name&&!r.type&&!r.request){let n=new Tc().createLaunchConfigFromContext();if(!n)return null;r=n}return await this.resolveBrowserCommon(e,r),r.request==="attach"?{...Pd,...r}:{...Wg,...r}}getType(){return"pwa-chrome"}};qf=C([(0,nT.injectable)()],qf);var Tc=class extends nu{getType(){return"pwa-chrome"}};Tc=C([(0,nT.injectable)()],Tc);var vK=I(_e()),iT=I(J());var Wf=class extends ru{async resolveDebugConfigurationAsync(e,r){if(!r.name&&!r.type&&!r.request){let n=new $c().createLaunchConfigFromContext();if(!n)return;r=n}return await this.resolveBrowserCommon(e,r),r.useWebView&&(r.timeout=r.timeout??0),r.request==="attach"?{...lA,...r}:{...pA,...r}}getType(){return"pwa-msedge"}};Wf=C([(0,iT.injectable)()],Wf);var $c=class extends nu{getType(){return"pwa-msedge"}getDefaultLaunch(){return{...super.getDefaultLaunch(),name:vK.t("Launch Edge against localhost")}}};$c=C([(0,iT.injectable)()],$c);var wK=require("fs"),_K=I(J()),AK=require("path");var Vf=class extends pi{async resolveDebugConfigurationAsync(e,r){if(r.debugWebWorkerHost===void 0){let n=await zwe(e,r);r={...r,debugWebWorkerHost:n.length===1&&n[0]==="web"}}return Vg(r),r.debugWebWorkerHost&&(r.outFiles=[]),Promise.resolve({...cA,...r})}getType(){return"pwa-extensionHost"}};Vf=C([(0,_K.injectable)()],Vf);var bK="--extensionDevelopmentPath=",zwe=async(t,e)=>{let r=e.args?.find(o=>o.startsWith(bK));if(!r)return["workspace"];let n=Bi(r.slice(bK.length),"workspaceFolder",t?.uri.fsPath??e.__workspaceFolder??""),i;try{let o=await wK.promises.readFile((0,AK.join)(n,"package.json"),"utf-8");i=JSON.parse(o).extensionKind??"workspace"}catch{return["workspace"]}return i instanceof Array?i:[i]};var p0=I(_e()),uT=I(J()),Xf=I(require("path")),hg=I(require("vscode"));var Gf=I(_e()),DK=I(require("fs")),l0=I(require("path")),et=I(require("vscode"));var IK=require("vscode"),oT=async t=>{try{return await IK.commands.executeCommand("npm.packageManager",t?.uri)}catch{return"npm"}},SK=async(t,e)=>`${await oT(e)} run ${t}`;async function CK(t){let e=await aT(t?[t]:void 0);if(!e)return;let r=async a=>{let u=et.workspace.getWorkspaceFolder(et.Uri.file(a.directory));Fg(et.commands,"extension.js-debug.createDebuggerTerminal",await SK(a.name,u),u,{cwd:a.directory})};if(e.length===1)return r(e[0]);let n=e.some(a=>a.directory!==e[0].directory),i=et.window.createQuickPick(),o,s=[];for(let a of e)a.directory!==o&&n&&(s.push({label:l0.basename(a.directory),kind:et.QuickPickItemKind.Separator}),o=a.directory),s.push({script:a,label:a.name,description:a.command});i.items=s,i.onDidAccept(async()=>{r(i.selectedItems[0].script),i.dispose()}),i.show()}var sT=(t,e)=>t.score>e.score?t:e;async function aT(t,e=!1){let r=t??et.workspace.workspaceFolders??[];if(!r||r.length===0){e||et.window.showErrorMessage(Gf.t("You need to open a workspace folder to debug npm scripts."));return}let n=(await Promise.all(r.map(s=>et.workspace.findFiles(new et.RelativePattern(s,"**/package.json"),"**/{node_modules,.vscode-test}/**")))).flat();if(n.length===0){e||et.window.showErrorMessage(Gf.t("No package.json files found in your workspace."));return}let i=[],o={path:n[0].fsPath,score:0};for(let{fsPath:s}of new Set(n)){o=sT(o,{path:s,score:1});let a;try{a=JSON.parse(await JH(s))}catch(u){e||EK("showWarningMessage",Gf.t("Could not read {0}: {1}",s,u.message),s),o=sT(o,{path:void 0,score:3});continue}if(o=sT(o,{path:void 0,score:2}),!!a.scripts)for(let u of Object.keys(a.scripts))i.push({directory:l0.dirname(s),name:u,command:a.scripts[u]})}if(i.length===0){o.path&&!e&&EK("showErrorMessage",Gf.t("No npm scripts found in your package.json"),o.path);return}return i.sort((s,a)=>(s.name==="start"?-1:0)+(a.name==="start"?1:0)),i}var Xwe=`{
  "scripts": {
    
  }
}
`;async function EK(t,e,r){let n=Gf.t("Edit package.json");if(await et.window[t](e,n)!==n)return;if(DK.existsSync(r)){let a=await et.workspace.openTextDocument(r);await et.window.showTextDocument(a);return}let i=await et.workspace.openTextDocument(et.Uri.file(r).with({scheme:"untitled"})),o=await et.window.showTextDocument(i);await o.edit(a=>a.insert(new et.Position(0,0),Xwe));let s=new et.Position(2,5);o.selection=new et.Selection(s,s)}var Kf=class extends xs{provide(e){return rT(e,!0)}getType(){return"pwa-node"}getTriggerKind(){return hg.DebugConfigurationProviderTriggerKind.Initial}};Kf=C([(0,uT.injectable)()],Kf);var Jwe=["cwd","program"],zf=class extends xs{async provide(e){let r=Vo(await Promise.all([this.getFromNpmScripts(e),this.getFromActiveFile()]));if(e)for(let n of r){let i=n;for(let o of Jwe){let s=i[o];s&&Xf.isAbsolute(s)&&(i[o]=Xf.join("${workspaceFolder}",Xf.relative(e.uri.fsPath,s)))}}return r}getType(){return"pwa-node"}getTriggerKind(){return hg.DebugConfigurationProviderTriggerKind.Dynamic}async getFromNpmScripts(e){let r={type:Wc("node-terminal"),name:p0.t("JavaScript Debug Terminal"),request:"launch",cwd:e?.uri.fsPath};if(!e)return[r];let n=await aT([e],!0);if(!n)return[r];let i=await oT(e);return n.map(o=>({type:Wc("node-terminal"),name:p0.t("Run Script: {0}",o.name),request:"launch",command:`${i} run ${o.name}`,cwd:o.directory})).concat(r)}getFromActiveFile(){let e=hg.window.activeTextEditor;return!e||!Gg.includes(e.document.languageId)||e.document.uri.scheme!=="file"?[]:[{type:Wc("pwa-node"),name:p0.t("Run Current File"),request:"launch",program:e.document.uri.fsPath}]}};zf=C([(0,uT.injectable)()],zf);var PK=[qf,Wf,Vf,tu,Bf],xK=[Tc,$c,Kf,zf];var Jf=I(_e()),mg=I(J()),lT=require("url"),gn=I(require("vscode"));function cT(t,e){if(t){try{if(new lT.URL(t).hostname)return t}catch{}try{let r=`http://${t}`,n=new lT.URL(r);if(!e||n.port)return r}catch{}}}var Yf=class{constructor(e,r){this.defaultBrowser=e;this.context=r}register(e){e.subscriptions.push(gn.commands.registerCommand("extension.js-debug.debugLink",r=>this.handle(r)))}async handle(e){if(e=e??await this.getLinkFromTextEditor()??await this.getLinkFromQuickInput(),!e)return;let r="pwa-chrome";try{await this.defaultBrowser.lookup()===3&&(r="pwa-msedge")}catch{}let n=It(gn.workspace,"debug.javascript.debugByLinkOptions")??{},i={...typeof n=="string"?{}:n,type:Wc(r),name:e,request:"launch",url:e};gn.debug.startDebugging(gn.workspace.workspaceFolders?.[0],i),this.persistConfig(i)}getLinkFromTextEditor(){let e=gn.window.activeTextEditor;if(e)return cT(e.document.getText(e.selection),!0)}async getLinkFromQuickInput(){let e=await gn.env.clipboard.readText(),r=await gn.window.showInputBox({value:cT(e,!1)||this.mostRecentLink,placeHolder:"https://localhost:8080",validateInput:n=>{if(n&&!cT(n,!1))return Jf.t("The URL provided is invalid")}});if(r)return this.mostRecentLink=r,r}async persistConfig(e){if(this.context.globalState.get("saveDebugLinks")===!1)return;let r=gn.workspace.getConfiguration("launch"),n=r.get("configurations")??[];if(n.some(a=>a.url===e.url))return;let i=Jf.t("Yes"),o=Jf.t("Never"),s=await gn.window.showInformationMessage(Jf.t("Would you like to save a configuration in your launch.json for easy access later?"),i,Jf.t("No"),o);s===o&&this.context.globalState.update("saveDebugLinks",!1),s===i&&await r.update("configurations",[...n,e])}};Yf=C([(0,mg.injectable)(),b(0,(0,mg.inject)(Lp)),b(1,(0,mg.inject)(tt))],Yf);var Qf=I(_e()),ed=I(J()),Nn=I(require("vscode"));var LK="neverRemind",Zf=class{constructor(e,r,n){this.fs=e;this.context=r;this.tracker=n;this.dismissedForSession=!1;this.isPrompting=!1}register(e){e.subscriptions.push(Pe(Nn.commands,"extension.js-debug.getDiagnosticLogs",async()=>{let r=await this.getTargetSession();if(!r)return;let n=await Nn.window.showSaveDialog({filters:{JSON:["json"]}});n&&r.customRequest("saveDiagnosticLogs",{toFile:n.fsPath})}),Pe(Nn.commands,"extension.js-debug.createDiagnostics",async()=>this.getDiagnosticInfo(await this.getTargetSession())),Nn.debug.onDidReceiveDebugSessionCustomEvent(async r=>{if(r.event==="openDiagnosticTool")return this.openDiagnosticTool(r.body.file);if(r.event!=="suggestDiagnosticTool"||this.dismissedForSession||this.context.workspaceState.get(LK)||this.isPrompting)return;this.isPrompting=!0;let n=Qf.t("Yes"),i=Qf.t("Not Now"),o=Qf.t("Never"),s=await Nn.window.showInformationMessage("It looks like you might be having trouble with breakpoints. Would you like to open our diagnostic tool?",n,i,o);switch(this.isPrompting=!1,s){case n:this.getDiagnosticInfo(await this.getTargetSession(),!0);break;case o:e.workspaceState.update(LK,!0);break;case i:this.dismissedForSession=!0;break}}))}getTargetSession(){let e=Nn.debug.activeDebugSession;if(!e||!Bs(e?.type))return this.pickSession();if(ze.isConcreteSession(e))return e;let r=this.tracker.getChildren(e);return r.length===1?r[0]:this.pickSession()}pickSession(){return ze.pickSession(this.tracker.getConcreteSessions(),Qf.t("Select the session you want to inspect:"))}async getDiagnosticInfo(e,r=!1){if(!e||!this.tracker.isRunning(e)){Nn.window.showErrorMessage(Qf.t('It looks like your debug session has already ended. Try debugging again, then run the "Debug: Diagnose Breakpoint Problems" command.'));return}let{file:n}=await e.customRequest("createDiagnostics",{fromSuggestion:r});await this.openDiagnosticTool(n)}async openDiagnosticTool(e){let r=Nn.window.createWebviewPanel("jsDebugDiagnostics","Debug Diagnostics",Nn.ViewColumn.Active,{enableScripts:!0});r.webview.html=await this.fs.readFile(e,"utf-8")}};Zf=C([(0,ed.injectable)(),b(0,(0,ed.inject)(we)),b(1,(0,ed.inject)(tt)),b(2,(0,ed.inject)(ze))],Zf);var td=I(_e()),TK=I(J()),fi=I(require("vscode"));var Rc=class{register(e){e.subscriptions.push(fi.debug.onDidReceiveDebugSessionCustomEvent(r=>{if(r.event!=="suggestDisableSourcemap"||!Bs(r.session.type))return;let n=r.body;this.unmap(r.session,n.source).catch(i=>fi.window.showErrorMessage(i.message))}))}async unmap(e,r){(It(fi.workspace,"debug.javascript.unmapMissingSources")||await this.prompt())&&await e.customRequest("disableSourcemap",{source:r})}async prompt(){let e=td.t("Always"),r=td.t("Always in this Workspace"),n=td.t("Yes");switch(await fi.window.showInformationMessage(td.t("This is a missing file path referenced by a sourcemap. Would you like to debug the compiled version instead?"),e,r,td.t("No"),n)){case e:return aA(fi.workspace,"debug.javascript.unmapMissingSources",!0,fi.ConfigurationTarget.Global),!0;case r:return aA(fi.workspace,"debug.javascript.unmapMissingSources",!0,fi.ConfigurationTarget.Workspace),!0;case n:return!0;default:return!1}}};Rc=C([(0,TK.injectable)()],Rc);var Mc=I(_e()),f0=I(J()),ki=I(require("vscode"));var $K="ms-vscode.wasm-dwarf-debugging",RK="dwarf.neverRemind",rd=class{constructor(e){this.context=e;this.didPromptForSession=this.context.workspaceState.get(RK,!1)}async load(){try{return await import("@vscode/dwarf-debugging")}catch{}let e=ki.extensions.getExtension($K);if(e)return e.isActive||await e.activate(),e.exports}async prompt(){if(this.didPromptForSession)return;this.didPromptForSession=!0;let e=Mc.t("Yes"),r=Mc.t("Never"),n=await ki.window.showInformationMessage(Mc.t({message:'VS Code can provide better debugging experience for WebAssembly via "DWARF Debugging" extension. Would you like to install it?',comment:'"DWARF Debugging" is the extension name and should not be localized.'}),e,Mc.t("Not Now"),r);n===e?this.install():n===r&&this.context.workspaceState.update(RK,!0)}async install(){await ki.window.withProgress({location:ki.ProgressLocation.Notification,title:Mc.t("Installing the DWARF debugger...")},async()=>{try{await ki.commands.executeCommand("workbench.extensions.installExtension",$K),ki.window.showInformationMessage(Mc.t("Installation complete! The extension will be used after you restart your debug session."))}catch(e){ki.window.showErrorMessage(e.message||String(e))}})}};rd=C([(0,f0.injectable)(),b(0,(0,f0.inject)(tt))],rd);var kK=I(_e()),d0=I(J()),iu=I(require("vscode"));var MK=t=>{if(t?.type!=="pwa-msedge")return!1;let e=t.configuration.__browserTargetType;return e==="iframe"||e==="page"},Qwe="ms-edgedevtools.vscode-edge-devtools",Zwe="vscode-edge-devtools.attachToCurrentDebugTarget";function e_e(t){let e=t;for(;e.parentSession;)e=e.parentSession;return e}var nd=class{constructor(e){this.tracker=e}register(e){e.subscriptions.push(Pe(iu.commands,"extension.js-debug.openEdgeDevTools",async()=>{let r=iu.debug.activeDebugSession&&MK(iu.debug.activeDebugSession)?iu.debug.activeDebugSession:await ze.pickSession(this.tracker.getConcreteSessions().filter(MK),kK.t("Select the page where you want to open the devtools"));if(!r)return;let n=e_e(r);try{return await iu.commands.executeCommand(Zwe,r.id,n.configuration)}catch(i){if(i instanceof Error&&/command .+ not found/.test(i.message))return iu.commands.executeCommand("workbench.extensions.action.showExtensionsWithIds",[Qwe]);throw i}}))}};nd=C([(0,d0.injectable)(),b(0,(0,d0.inject)(ze))],nd);var BK=require("crypto"),h0=I(J()),UK=require("path"),nt=I(require("vscode"));var OK=({name:t,line:e,column:r,source:n})=>`${t} (${(0,UK.basename)(String(n.path))}:${e}:${r})`,FK=({name:t,line:e,column:r,source:n})=>`${t} (${n.path}:${e}:${r})`,NK=async({line:t,column:e,source:r})=>{if(r.sourceReference!==0||!r.path)return;let n=nt.Uri.file(r.path),i=await nt.workspace.openTextDocument(n),o=await nt.window.showTextDocument(i),s=new nt.Position(t-1,e-1);o.revealRange(new nt.Range(s,s)),o.selection=new nt.Selection(s,s)},pT=class{constructor(e,r){this.caller=e;this.target=r;this.treeItem=new nt.TreeItem(`${OK(e)} \u2192 ${OK(r)}`,nt.TreeItemCollapsibleState.None),this.treeItem.tooltip=`Breaks at ${FK(r)} containing ${FK(e)} will be skipped`,this.id=this.treeItem.id=(0,BK.createHash)("sha1").update(JSON.stringify([e,r])).digest("base64")}toDap(){return{caller:this.caller,target:this.target}}},id=class{constructor(e){this.sessionTracker=e;this._onDidChangeTreeData=new nt.EventEmitter;this.allCallers=new Map;this.lastHadCallers=!1;this.onDidChangeTreeData=this._onDidChangeTreeData.event}register(e){e.subscriptions.push(nt.window.createTreeView("jsExcludedCallers",{treeDataProvider:this}),Pe(nt.commands,"extension.js-debug.callers.add",async(r,n)=>{let i=await this.sessionTracker.getById(n.sessionId)?.customRequest("stackTrace",{threadId:0,startFrame:0,levels:1});if(!i?.stackFrames.length)return;let o=i.stackFrames[0],s=new pT({name:n.frameName,column:n.frameLocation.range.startColumn,line:n.frameLocation.range.startLineNumber,source:n.frameLocation.source},{name:o.name,column:o.column,line:o.line,source:o.source});this.allCallers.set(s.id,s),this.triggerUpdate()}),Pe(nt.commands,"extension.js-debug.callers.goToCaller",r=>NK(r.caller)),Pe(nt.commands,"extension.js-debug.callers.gotToTarget",r=>NK(r.target)),Pe(nt.commands,"extension.js-debug.callers.remove",async r=>{this.allCallers.delete(r.id),this.triggerUpdate()}),Pe(nt.commands,"extension.js-debug.callers.removeAll",async()=>{this.allCallers.clear(),this.triggerUpdate()}),this.sessionTracker.onSessionAdded(r=>{this.allCallers.size>0&&this.sendCallersToSession(r)}))}getTreeItem(e){return e.treeItem}getChildren(e){return e?[]:[...this.allCallers.values()]}sendCallersToSession(e){e.customRequest("setExcludedCallers",{callers:[...this.allCallers.values()].map(r=>r.toDap())})}triggerUpdate(){this._onDidChangeTreeData.fire(void 0);for(let r of this.sessionTracker.getConcreteSessions())this.sendCallersToSession(r);let e=this.allCallers.size>0;e!==this.lastHadCallers&&(Dd(nt.commands,"jsDebugHasExcludedCallers",e),this.lastHadCallers=e)}};id=C([(0,h0.injectable)(),b(0,(0,h0.inject)(ze))],id);var fT=I(_e()),gg=I(J());var jK="linkBpWarnIgnored",r_e="https://code.visualstudio.com/docs/nodejs/nodejs-debugging#_can-i-debug-if-im-using-symlinks",od=class{constructor(e,r){this.vscode=e;this.context=r;this.didWarn=this.context.workspaceState.get(jK,!1)}async warn(){if(this.didWarn)return;this.didWarn=!0;let e=fT.t("Read More"),r=fT.t("Ignore"),n=await this.vscode.window.showWarningMessage("It looks like you have symlinked files. You might need to update your configuration to make this work as expected.",r,e);n===r?this.context.workspaceState.update(jK,!0):n===e&&this.vscode.env.openExternal(this.vscode.Uri.parse(r_e))}};od=C([(0,gg.injectable)(),b(0,(0,gg.inject)(zn)),b(1,(0,gg.inject)(tt))],od);var Hg=I(_e()),m0=I(J()),WK=require("path"),Rs=I(require("vscode"));var qK="omitLongPredictions",sd=class{constructor(e){this.context=e}register(e){e.subscriptions.push(Rs.debug.onDidReceiveDebugSessionCustomEvent(r=>{r.event==="longPrediction"&&this.promptLongBreakpoint(r.session.workspaceFolder)}))}async promptLongBreakpoint(e){if(this.context.workspaceState.get(qK))return;let r=Hg.t("It's taking a while to configure your breakpoints. You can speed this up by updating the 'outFiles' in your launch.json."),n=Hg.t("Open launch.json"),i=Hg.t("Don't show again"),o=await Rs.window.showWarningMessage(r,i,n);if(o===i){this.context.workspaceState.update(qK,!0);return}if(o!==n)return;if(e||(e=await Rs.window.showWorkspaceFolderPick()),!e){await Rs.window.showWarningMessage(Hg.t("No workspace folder open."));return}let s=await Rs.workspace.openTextDocument((0,WK.join)(e.uri.fsPath,".vscode","launch.json"));await Rs.window.showTextDocument(s)}};sd=C([(0,m0.injectable)(),b(0,(0,m0.inject)(tt))],sd);var g0=I(J()),ud=require("vscode");var ad=class{constructor(e){this.leaseTracker=e;this.cachedResolutions=new Array(16).fill("");this.cachedResolutionIndex=0}register(e){typeof ud.workspace.registerPortAttributesProvider=="function"&&e.subscriptions.push(ud.workspace.registerPortAttributesProvider({portRange:[53e3,54e3]},this))}async providePortAttributes({port:e,pid:r}){if(r&&this.cachedResolutions.includes(`${e}:${r}`))return{port:e,autoForwardAction:ud.PortAutoForwardAction.Ignore};if(await this.leaseTracker.isRegistered(e)){if(r){let n=this.cachedResolutionIndex++%this.cachedResolutions.length;this.cachedResolutions[n]=`${e}:${r}`}return{port:e,autoForwardAction:ud.PortAutoForwardAction.Ignore}}}};ad=C([(0,g0.injectable)(),b(0,(0,g0.inject)(st))],ad);var H0=I(J()),GK=I(require("querystring")),kc=I(require("vscode"));var cd=class{constructor(e){this.tracker=e;this.canPrettyPrintKey=new kf("jsDebugCanPrettyPrint")}register(e){e.subscriptions.push(Pe(kc.commands,"extension.js-debug.prettyPrint",()=>this.prettifyActive()),kc.window.onDidChangeActiveTextEditor(r=>this.updateEditorState(r)),this.tracker.onSessionAdded(()=>this.updateEditorState(kc.window.activeTextEditor)),this.tracker.onSessionEnded(()=>this.updateEditorState(kc.window.activeTextEditor)))}async prettifyActive(){let e=kc.window.activeTextEditor;if(!e||!this.canPrettyPrint(e))return;let{sessionId:r,source:n}=n_e(e.document.uri),i=r&&this.tracker.getById(r);if(i)VK(i,n,e.selection.start);else for(let o of this.tracker.getConcreteSessions())VK(o,n,e.selection.start)}canPrettyPrint(e){return this.tracker.isDebugging&&e.document.languageId==="javascript"&&!e.document.fileName.endsWith("-pretty.js")}updateEditorState(e){if(!this.tracker.isDebugging){this.canPrettyPrintKey.value=void 0;return}e&&this.canPrettyPrint(e)&&e.document.uri.toString()!==this.canPrettyPrintKey.value?.[0]&&(this.canPrettyPrintKey.value=[e.document.uri.toString()])}};cd=C([(0,H0.injectable)(),b(0,(0,H0.inject)(ze))],cd);var VK=(t,e,r)=>t.customRequest("prettyPrintSource",{source:e,line:r.line,column:r.character}),n_e=t=>{let e=GK.parse(t.query),r=e.session,n={path:t.fsPath,sourceReference:Number(e.ref)||0};return{sessionId:r,source:n}};var yg=I(_e()),vg=I(J()),zK=I(require("path")),Oi=I(require("vscode"));var KK="breakpointTerminationWarnedSlow",ld=class{constructor(e,r){this.fs=e;this.context=r;this.sortOrder=2;this.id="breakpoint";this.label=yg.t("Pick Breakpoint");this.description=yg.t("Run until a specific breakpoint is hit")}async onPick(e,r){if(r)return new y0(r);let n=Oi.window.createQuickPick();n.canSelectMany=!0,n.matchOnDescription=!0,n.busy=!0;let i=await new Promise(o=>{n.onDidAccept(()=>o(n.selectedItems)),n.onDidHide(()=>o(void 0)),n.onDidChangeActive(async s=>{if(!s.length)return;let a=s[0].location,u=await Oi.workspace.openTextDocument(a.uri);Oi.window.showTextDocument(u,{selection:a.range,preview:!0,preserveFocus:!0})}),n.show(),(async()=>{let s=Oi.debug.breakpoints.filter(c=>c.enabled&&c instanceof Oi.SourceBreakpoint),a=await Promise.all(s.map(c=>e.getDebugProtocolBreakpoint(c))),u=await this.getCandidates(a,s);n.items=u,n.selectedItems=u,n.busy=!1})()});if(n.dispose(),!!i)return await this.warnSlowCode(),new y0(i.map(o=>Number(o.id)))}async warnSlowCode(){this.context.workspaceState.get(KK)||(Oi.window.showWarningMessage(yg.t('Profiling with breakpoints enabled can change the performance of your code. It can be useful to validate your findings with the "duration" or "manual" termination conditions.'),yg.t("Got it!")),await this.context.workspaceState.update(KK,!0))}async getCandidates(e,r){if(e.length!==r.length)throw new Error("Mismatched breakpoint array lengths");let n=Wo(o=>this.getFileLines(o));return(await Promise.all(r.map(async(o,s)=>{let a=e[s];if(!a||!a.id)return;let u=o.location,c=Oi.workspace.getWorkspaceFolder(u.uri),l=c?zK.relative(c.uri.fsPath,u.uri.fsPath):u.uri.fsPath,p=await n(u.uri.fsPath);return{id:a.id,label:`${l}:${u.range.start.line}:${u.range.start.character}`,location:u,description:p?.[u.range.start.line]?.trim()}}))).filter(St)}async getFileLines(e){try{return(await this.fs.readFile(e,"utf-8")).split(`
`)}catch{return}}};ld=C([(0,vg.injectable)(),b(0,(0,vg.inject)(we)),b(1,(0,vg.inject)(tt))],ld);var y0=class{constructor(e){this.breakpointIds=e}get customData(){return{stopAtBreakpoint:this.breakpointIds.slice()}}dispose(){}};var Oc=I(_e()),XK=I(J()),JK=I(require("vscode"));var v0=I(_e()),Bo=I(require("vscode"));var bg=class{constructor(e,r,n){this.session=e;this.impl=r;this.termination=n;this.statusChangeEmitter=new z;this.stopEmitter=new z;this._innerStatus=[];this.disposables=new Ie;this.state=0;this.onStatusChange=this.statusChangeEmitter.event;this.onStop=this.stopEmitter.event;this.disposables.push(Bo.debug.onDidReceiveDebugSessionCustomEvent(i=>{i.session===e&&i.event==="profilerStateUpdate"&&this.onStateUpdate(i.body)}),Bo.debug.onDidTerminateDebugSession(i=>{i===e&&this.stopEmitter.fire(void 0)})),n&&(this.disposables.push(n),n.attachTo?.(this))}get status(){return this._innerStatus.filter(e=>!!e).join(", ")||void 0}async start(){try{await Bo.window.withProgress({location:Bo.ProgressLocation.Window,title:v0.t("Starting profile...")},()=>this.session.customRequest("startProfile",{type:this.impl.type,...this.termination?.customData}))}catch(e){Bo.window.showErrorMessage(e.message),this.stopEmitter.fire(void 0)}}dispose(){this.state=2,this.disposables.dispose()}setFile(e){this.file=e}async stop(){this.state===0&&(this.setStatus(-1,v0.t("Saving")),this.state=1,await Bo.window.withProgress({location:Bo.ProgressLocation.Window,title:v0.t("Stopping profile...")},()=>this.session.customRequest("stopProfile",{})))}onStateUpdate(e){if(e.running){this.setStatus(0,e.label);return}this.state=2,this.stopEmitter.fire(this.file),this.dispose()}setStatus(e,r){this.state===0&&(e===-1?this._innerStatus=[r]:this._innerStatus[e]=r,this.statusChangeEmitter.fire(this.status))}};var pd=class{constructor(){this.sortOrder=1;this.id="duration";this.label=Oc.t("Duration");this.description=Oc.t("Run for a specific amount of time")}async onPick(e,r){if(r)return new b0(r*1e3);let n=JK.window.createInputBox();n.title=Oc.t("Duration of Profile"),n.placeholder=Oc.t('Profile duration in seconds, e.g "5"'),this.lastDuration&&(n.value=String(this.lastDuration)),n.onDidChangeValue(o=>{/^[0-9]+$/.test(o)?Number(o)<1?n.validationMessage=Oc.t("Please enter a number greater than 1"):n.validationMessage=void 0:n.validationMessage=Oc.t("Please enter a number")});let i=await new Promise(o=>{n.onDidAccept(()=>{if(n.validationMessage)return o(void 0);this.lastDuration=Number(n.value),o(new b0(this.lastDuration*1e3))}),n.onDidHide(()=>o(void 0)),n.show()});return n.dispose(),i}};pd=C([(0,XK.injectable)()],pd);var b0=class{constructor(e){this.duration=e;this.disposable=new Ie}attachTo(e){let r=Date.now()+this.duration,n=()=>e.setStatus(1,`${Math.round((r-Date.now())/1e3)}s`),i=setTimeout(()=>e.stop(),this.duration),o=setInterval(n,1e3);n(),this.disposable.callback(()=>{clearTimeout(i),clearInterval(o)})}dispose(){this.disposable.dispose()}};var dT=I(_e()),YK=I(J());var fd=class{constructor(){this.sortOrder=0;this.id="manual";this.label=dT.t("Manual");this.description=dT.t("Run until manually stopped")}async onPick(){return new wg}};fd=C([(0,YK.injectable)()],fd);var wg=class{dispose(){}};var dd=Symbol("ITerminationConditionFactory");var Uo=I(_e()),su=I(J()),QK=require("os"),w0=require("path"),lr=I(require("vscode"));var i_e=t=>"__pendingTargetId"in t.configuration,ou=class{constructor(e,r,n,i){this.tracker=e;this.fs=r;this.sessionStates=n;this.terminationConditions=i;this.activeSessions=new Map;this.disposables=new Ie;this.disposables.push(lr.debug.onDidReceiveDebugSessionCustomEvent(o=>{if(o.event!=="profileStarted")return;let s=o.body,a=this.activeSessions.get(o.session.id);a||(a=new bg(o.session,pn.ctors.find(u=>u.type===s.type)||pn.ctors[0],new wg),this.registerSession(a)),a.setFile(s.file)}))}async start(e){let r,n=[...this.tracker.getConcreteSessions()].filter(i_e);if(e.sessionId?r=n.find(c=>c.id===e.sessionId):r=await this.pickSession(n),!r)return;let i=r,o=this.activeSessions.get(i.id);if(o&&!await this.alreadyRunningSession(o))return;let s=await this.pickType(i,e.type);if(!s)return;let a;if(!s.instant&&(a=await this.pickTermination(i,e.termination),!a))return;let u=new bg(i,s,a);u&&(this.registerSession(u,e.onCompleteCommand),await u.start(),s.instant&&await u.stop())}async stop(e){let r;if(e)r=this.activeSessions.get(e);else{let n=await this.pickSession([...this.activeSessions.values()].map(i=>i.session));r=n&&this.activeSessions.get(n.id)}r&&(this.sessionStates.remove(r.session.id),await r.stop())}dispose(){for(let e of this.activeSessions.values())e.dispose();this.activeSessions.clear(),this.disposables.dispose()}registerSession(e,r){this.activeSessions.set(e.session.id,e),this.sessionStates.add(e.session.id,Uo.t("Profiling")),e.onStatusChange(()=>this.updateStatusBar()),e.onStop(n=>{n&&this.openProfileFile(e,r,e.session,n),this.activeSessions.delete(e.session.id),e.dispose(),this.updateStatusBar()}),this.updateStatusBar()}async openProfileFile(e,r,n,i){if(r)return Promise.all([lr.commands.executeCommand(r,{contents:await this.fs.readFile(i,"utf-8"),basename:(0,w0.basename)(i)+e.impl.extension}),this.fs.unlink(i)]);let o=n.workspaceFolder?.uri.fsPath??lr.workspace.workspaceFolders?.[0].uri.fsPath??(0,QK.homedir)(),s=fb()+e.impl.extension,a=lr.Uri.file((0,w0.join)(o,s));await Ak(this.fs,i,a.fsPath),await lr.commands.executeCommand(e.impl.editable?"vscode.open":"revealInExplorer",a)}updateStatusBar(){if(this.activeSessions.size===0){this.statusBarItem?.hide(),Dd(lr.commands,"jsDebugIsProfiling",!1);return}this.statusBarItem||(this.statusBarItem=lr.window.createStatusBarItem(lr.StatusBarAlignment.Right,500),this.statusBarItem.command="extension.js-debug.stopProfile"),Dd(lr.commands,"jsDebugIsProfiling",!0);let e=Qs(this.activeSessions.values());e&&this.activeSessions.size===1?this.statusBarItem.text=e.status?Uo.t("{0} Click to Stop Profiling ({1})","$(loading~spin)",e.status):Uo.t("{0} Click to Stop Profiling","$(loading~spin)"):this.statusBarItem.text=Uo.t("{0} Click to Stop Profiling ({1} sessions)","$(loading~spin)",this.activeSessions.size),this.statusBarItem.show()}async alreadyRunningSession(e){let r=Uo.t("Yes"),n=Uo.t("No");return await lr.window.showErrorMessage(Uo.t("A profiling session is already running, would you like to stop it and start a new session?"),r,n)!==r?!1:(await this.stop(e.session.id),!0)}async pickSession(e){if(e.length===0)return;if(e.length===1)return e[0];let r=await lr.window.showQuickPick(e.map(n=>({label:n.name,id:n.id})));return r&&e.find(n=>n.id===r.id)}async pickType(e,r){let n=e.configuration;if(r)return pn.ctors.find(o=>o.type===r&&o.canApplyTo(n));let i=await this.pickWithLastDefault(Uo.t("Type of profile:"),pn.ctors.filter(o=>o.canApplyTo(n)),this.lastChosenType);return i&&(this.lastChosenType=i.label),i}async pickTermination(e,r){if(r){let i=typeof r=="string"?{type:r}:r;return this.terminationConditions.find(o=>o.id===i.type)?.onPick(e,...i.args??[])}let n=await this.pickWithLastDefault(Uo.t("How long to run the profile:"),this.terminationConditions,this.lastChosenTermination);return n&&(this.lastChosenTermination=n.label),n?.onPick(e)}async pickWithLastDefault(e,r,n){if(r.length<=1)return r[0];let i=lr.window.createQuickPick();i.title=e,i.items=r.slice().sort((s,a)=>s.label===n||a.label===n?s.label===n?-1:1:(s.sortOrder??0)-(a.sortOrder??0)).map(s=>({label:s.label,description:s.description,alwaysShow:!0}));let o=await new Promise(s=>{i.onDidAccept(()=>s(i.selectedItems[0]?.label)),i.onDidHide(()=>s(void 0)),i.show()});if(i.dispose(),!!o)return r.find(s=>s.label===o)}};ou=C([(0,su.injectable)(),b(0,(0,su.inject)(ze)),b(1,(0,su.inject)(we)),b(2,(0,su.inject)(jl)),b(3,(0,su.multiInject)(dd))],ou);var ez=I(J()),tz=require("vscode");var ZK=(t,e)=>{let r=t;for(let[n,i]of Object.entries(e))typeof i=="object"&&i?r[n]=Object.assign(r[n]||{},i):r[n]=i};var hd=class{constructor(){this.read=Ae(()=>It(tz.workspace,"debug.javascript.resourceRequestOptions"))}provideOptions(e){ZK(e,this.read()||{})}};hd=C([(0,ez.injectable)()],hd);var rz=I(J()),hT=require("vscode");var md=class{register(e){e.subscriptions.push(Pe(hT.commands,"extension.node-debug.startWithStopOnEntry",()=>hT.commands.executeCommand("workbench.action.debug.start",{config:{stopOnEntry:!0}})))}};md=C([(0,rz.injectable)()],md);var CT=I(_e()),j0=I(J()),dz=I(fz()),hz=require("url"),fr=I(require("vscode"));var cu=class{constructor(e){this.defaultBrowser=e;this.enabledTerminals=new WeakSet;this.disposable=new Ie;this.notifiedCantOpenOnWeb=!1;this.baseConfiguration=this.readConfig();this.disposable.push(fr.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration("debug.javascript.debugByLinkOptions")&&(this.baseConfiguration=this.readConfig())}))}enableHandlingInTerminal(e){this.enabledTerminals.add(e)}dispose(){this.disposable.dispose()}provideTerminalLinks(e){switch(this.baseConfiguration.enabled){case"off":return[];case"always":break;case"on":default:if(!this.enabledTerminals.has(e.terminal))return[]}let r=[],n=Ae(()=>{if("cwd"in e.terminal.creationOptions&&e.terminal.creationOptions.cwd){let i=fr.workspace.getWorkspaceFolder(typeof e.terminal.creationOptions.cwd=="string"?fr.Uri.file(e.terminal.creationOptions.cwd):e.terminal.creationOptions.cwd);if(i)return i}return fr.workspace.workspaceFolders?.[0]});for(let i of(0,dz.find)(e.line,"url")){let o=-1;for(;(o=e.line.indexOf(i.value,o+1))!==-1;){let s;try{s=new hz.URL(i.href)}catch{continue}s.protocol==="http:"&&!i.value.startsWith("http:")&&!Py(s.hostname)&&(s.protocol="https:"),!(s.protocol!=="http:"&&s.protocol!=="https:")&&r.push({startIndex:o,length:i.value.length,tooltip:CT.t("Debug URL"),target:s,workspaceFolder:n()?.index})}}return r}async handleTerminalLink(e){await this.handleTerminalLinkInner(e)||fr.env.openExternal(fr.Uri.parse(e.target.toString()))}async handleTerminalLinkInner(e){if(!e.target)return!1;let r=e.target;if(fr.env.uiKind===fr.UIKind.Web)return this.notifiedCantOpenOnWeb||(fr.window.showInformationMessage(CT.t("We can't launch a browser in debug mode from here. If you want to debug this webpage, open this workspace from VS Code on your desktop.")),this.notifiedCantOpenOnWeb=!0),!1;J1(r.hostname)&&(r.hostname="localhost");let n="pwa-chrome";try{await this.defaultBrowser.lookup()===3&&(n="pwa-msedge")}catch{}let i=e.workspaceFolder!==void 0?fr.workspace.workspaceFolders?.[e.workspaceFolder]:void 0;return fr.debug.startDebugging(i,{...this.baseConfiguration,type:n,name:r.toString(),request:"launch",url:r.toString()}),!0}readConfig(){let e=It(fr.workspace,"debug.javascript.debugByLinkOptions");return typeof e=="boolean"&&(e=e?"on":"off"),typeof e=="string"?{enabled:e}:{enabled:"on",...e}}};cu=C([(0,j0.injectable)(),b(0,(0,j0.inject)(Lp))],cu);var mz=t=>{t.bind(zn).toConstantValue(require("vscode")),PK.forEach(e=>{t.bind(e).toSelf().inSingletonScope(),t.bind(i0).to(e)}),xK.forEach(e=>t.bind(o0).to(e).inSingletonScope()),t.bind(un).to(sd).inSingletonScope(),t.bind(un).to(Yf).inSingletonScope(),t.bind(un).to(Mf).inSingletonScope(),t.bind(un).to(Rc).inSingletonScope(),t.bind(un).to(Zf).inSingletonScope(),t.bind(un).to(md).inSingletonScope(),t.bind(un).to(ad).inSingletonScope(),t.bind(un).to(nd).inSingletonScope(),t.bind(un).to(id).inSingletonScope(),t.bind(un).to(cd).inSingletonScope(),t.bind(un).to(Of).inSingletonScope(),t.bind(zm).to(od).inSingletonScope(),t.bind(ze).toSelf().inSingletonScope().onActivation(ot),t.bind(ou).toSelf().inSingletonScope().onActivation(ot),t.bind(cu).toSelf().inSingletonScope(),t.bind(Rc).toSelf().inSingletonScope(),t.bind(Ou).to(rd).inSingletonScope(),t.bind(dd).to(pd).inSingletonScope(),t.bind(dd).to(fd).inSingletonScope(),t.bind(dd).to(ld).inSingletonScope()},gz=t=>{t.bind(gr).to(Cs).onActivation(ot),t.bind(Sp).to(hd).inSingletonScope(),t.bind(kl).to(Rf).inSingletonScope()};var yz=(t,e,r,n)=>{let i=new V0.Container;return i.parent=t,i.bind($e).toConstantValue(e.launchConfig),i.bind(Bl).toConstantValue(i),i.bind(rn).toConstantValue(r),i.bind(ht).toConstantValue(n),i.bind(So).toConstantValue(e),i.bind(yG).toConstantValue(e.targetOrigin()),i.bind(wu).to(tc).inSingletonScope(),i.bind(po).to(Su).inSingletonScope(),i.bind(Yy).to(xl).inSingletonScope(),i.bind(oa).toSelf().inSingletonScope(),e.sourcePathResolver&&i.bind(Qe).toConstantValue(e.sourcePathResolver),i.bind(zu).toSelf(),i.bind(ab).toDynamicValue(o=>o.container.get(zu).create()).inSingletonScope(),e.parent()&&(i.bind(Cu).to(Du).inSingletonScope(),i.bind(fo).to(Al).inSingletonScope()),i.bind(Kt).to(process.env.DA_TEST_DISABLE_TELEMETRY?Sc:cn).inSingletonScope().onActivation(ot),i.bind(Jn).toSelf().inSingletonScope(),i.bind(ir).toSelf().inSingletonScope(),i.bind(ya).toSelf().inSingletonScope(),i.bind(aa).to(Eo).inSingletonScope(),i.bind(ha).toSelf().inSingletonScope(),i.bind(pp).to(lp).inSingletonScope(),i.bind(xv).to(Zl).inSingletonScope(),i.bind(Vn).to(Cl).inSingletonScope(),i.bind(eb).to(up).inSingletonScope(),i.bind(Ha).to(ap).inSingletonScope(),i.bind(hv).to(Wl).inSingletonScope().onActivation(ot),i.bind(ur).toSelf(),i.bind(Cn).toSelf(),i.bind(Pn).toSelf(),i.bind(pb).to(pn).inSingletonScope(),i.bind(db).to(dp).inSingletonScope(),i.bind(Pv).to(Yl).inSingletonScope().onActivation(ot),i},vz=t=>{let e=new V0.Container;e.parent=t,e.bind(Bl).toConstantValue(e),e.bind(ce).to(ni).inSingletonScope().onActivation(ot),e.bind(wu).to(tc).inSingletonScope(),e.bind(Kt).to(process.env.DA_TEST_DISABLE_TELEMETRY?Sc:cn).inSingletonScope().onActivation(ot),e.bind(io).to(io).inSingletonScope(),e.bind(Jo).to(Jo).inSingletonScope(),e.bind(Dp).to(Ep).inSingletonScope(),e.bind(wl).to(zp).inSingletonScope(),e.bind(ci).to(uf),e.bind(Ro).toSelf().inSingletonScope().onActivation(ot),e.bind(Fo).toSelf(),e.bind(gr).to(Ri).onActivation(ot),e.bind(gr).to(pf).onActivation(ot),e.bind(gr).to(ff).onActivation(ot),e.bind(gr).to(Hf).onActivation(ot),e.bind(ng).to(wf),e.bind(ng).to(_f),e.bind(wc).to(af).inSingletonScope(),gz(e),e.bind(gr).to(mf).onActivation(ot),e.bind(vc).toSelf().inSingletonScope().onActivation(ot),e.bind(gr).toService(vc),e.bind(gr).to(Yp).inSingletonScope().onActivation(ot),e.bind(gr).to(Zp).inSingletonScope().onActivation(ot),e.bind(gr).to(Qp).inSingletonScope().onActivation(ot),e.bind(gr).to(ef).inSingletonScope().onActivation(ot),e.bind(gr).to(ai).onActivation(ot),e.bind(gr).toDynamicValue(()=>t.get(Mo).createLauncher(e.get(ce))).inSingletonScope(),e.isBound(Ou)||e.bind(Ou).to(cp).inSingletonScope(),e.bind(JS).to(ql).inSingletonScope().onActivation(ot);let r=n=>i=>new n(i.container.get(VS),i.container.get(we),i.container.get(yh));return e.bind(ku).toDynamicValue(r(W0.ChromeBrowserFinder)).inSingletonScope().whenTargetTagged("browser","chrome"),e.bind(ku).toDynamicValue(r(W0.EdgeBrowserFinder)).inSingletonScope().whenTargetTagged("browser","edge"),e},bz=t=>{let e=new V0.Container;return e.bind(Bl).toConstantValue(e),e.bind(Mo).toSelf().inSingletonScope(),e.bind($i).toSelf().inSingletonScope(),e.bind(kl).to(Af).inSingletonScope(),e.bind(jl).toConstantValue(new Do),e.bind(Lp).to(xp).inSingletonScope(),e.bind(yo).toConstantValue(t.storagePath),e.bind(Ul).toConstantValue(t.isVsCode),e.bind(T_).to(vf),e.bind(st).to(Jl).inSingletonScope(),e.bind(VS).toConstantValue(process.env),e.bind(yh).toConstantValue(Hz.default),e.bind(we).toConstantValue(q0.promises),e.bind(Mr).toConstantValue(new vn(q0.promises)),e.bind(rs).toConstantValue(t.isRemote?"remote":"local"),t.context&&e.bind(tt).toConstantValue(t.context),mz(e),e},wz=(t,e,r)=>{t.bind(hm).toConstantValue(Xq(e)),t.bind($e).toService(hm),t.bind(Yr).to(nf).inSingletonScope(),t.bind(fl).toConstantValue(r),t.bind(Qe).toDynamicValue(n=>n.container.get(Yr).create(e,n.container.get(ce))).inSingletonScope(),t.bind(Mr).toConstantValue(XH.create(e.__remoteFilePrefix,q0.promises,r)),t.bind(HS).to(ra).inSingletonScope().onActivation(ot),t.bind(ia).to(El).inSingletonScope(),t.bind(gt).toSelf().inSingletonScope().onActivation(ot),t.bind(po).to(Su).inSingletonScope(),t.bind(Eu).toSelf().inSingletonScope(),t.bind(Cu).to(Du).inSingletonScope(),t.bind(fo).to(_l).inSingletonScope()};var Pz=I(_e()),dr=I(require("vscode"));var _z=I(_e()),Os=I(J()),PT=I(require("path")),lu=I(require("vscode"));var Uc=class extends dn{constructor(r,n,i,o,s,a){super(r,n,a,s);this.extensionContext=i;this.fs=o;this.telemetryItems=new Map}get deferredSocketName(){let r=this.extensionContext.environmentVariableCollection.get("VSCODE_INSPECTOR_OPTIONS");return r?new H_({VSCODE_INSPECTOR_OPTIONS:r.value}).inspectorOptions?.inspectorIpc:void 0}getProcessTelemetry(r){return Promise.resolve(r instanceof cf?this.telemetryItems.get(r.processId()):void 0)}resolveParams(r){if(r.type==="node-terminal"&&r.request==="launch")return r}async launchProgram(r){await this.applyInspectorOptions(this.extensionContext.environmentVariableCollection,r),this.program=new Ds,this.program.stopped.then(n=>this.onProgramTerminated(n))}async refreshVariables(){this.run&&await this.applyInspectorOptions(this.extensionContext.environmentVariableCollection,this.run)}async applyInspectorOptions(r,n){let i;try{i=await this.resolveNodePath(n.params)}catch(u){if(u instanceof Z&&u.cause.id===9229)i=new _r("node",void 0);else throw u}let o=It(lu.workspace,"debug.javascript.autoAttachFilter"),a=(await this.resolveEnvironment(n,i,{deferredMode:!0,inspectorIpc:this.deferredSocketName??n.serverAddress+".deferred",autoAttachMode:o,aaPatterns:o==="smart"?this.readSmartPatterns():void 0})).defined();r.persistent=!0,r.description=new lu.MarkdownString(_z.t({message:'Enables Node.js [auto attach]({0}) debugging in "{1}" mode',comment:["{Locked='[auto attach]({0})'}","the 2nd placeholder is the setting value"],args:["https://code.visualstudio.com/docs/nodejs/nodejs-debugging#_auto-attach",o]})),r.prepend("NODE_OPTIONS",a.NODE_OPTIONS),r.append("VSCODE_INSPECTOR_OPTIONS",a.VSCODE_INSPECTOR_OPTIONS)}readSmartPatterns(){let r=It(lu.workspace,"debug.javascript.autoAttachSmartPattern"),n=lu.workspace.workspaceFolders?.length===1?lu.workspace.workspaceFolders[0].uri.fsPath:`{${lu.workspace.workspaceFolders?.map(i=>i.uri.fsPath).join(",")}}`;return r?.map(i=>i.replace("${workspaceFolder}",n)).map(Ge)}async getBootloaderFile(r,n){let i=this.extensionContext.storagePath||this.extensionContext.globalStoragePath;if(i.includes(" ")&&n.isPreciselyKnown&&!n.has(0))throw new xg(`The \`node\` version on your PATH is too old (${n.version?.major}), so we cannot enable auto-attach in your environment`,"https://github.com/microsoft/vscode-js-debug/issues/708");let o=PT.join(i,"bootloader.js");try{await this.fs.mkdir(i)}catch{}await Promise.all([LI(this.fs,y_,o),LI(this.fs,SG,PT.join(i,"watchdog.js"))]);let s=Ge(o);return{interpolatedPath:s.includes(" ")?`"${s}"`:s,dispose:()=>{}}}async spawnForChild(r){if(!this.run)return;let n=Number(r.pid??"0");this.telemetryItems.set(n,r.telemetry);let i=await li.attach({...r,ipcAddress:this.run.serverAddress});i.onEnd(()=>{this.telemetryItems.delete(n),i.dispose()})}static clearVariables(r){r.environmentVariableCollection.clear()}};Uc=C([(0,Os.injectable)(),b(0,(0,Os.inject)(ci)),b(1,(0,Os.inject)(ce)),b(2,(0,Os.inject)(tt)),b(3,(0,Os.inject)(we)),b(4,(0,Os.inject)(Yr)),b(5,(0,Os.inject)(st))],Uc);var xg=class extends Error{constructor(r,n){super(r);this.helpLink=n}};var Sz=I(_e()),Ez=require("os"),At=I(require("vscode"));var Az=()=>{let t,e=Be(),r=(n,i)=>i==="connect"?o=>{e.resolve(o),t=o}:i==="disconnect"?()=>{e=Be(),t=void 0}:async(...o)=>(t||await e.promise)[i](...o);return new Proxy({},{get:r})};var LT=(t,e,r={},n=()=>!0)=>{let i=new cn,o={...It(At.workspace,"debug.javascript.terminalOptions"),internalConsoleOptions:"neverOpen"},s=Az();i.attachDap(s);let a=new Set,u=async c=>{let l=await e.getProcessTelemetry(c),p=l&&At.Uri.file(l.cwd),f=p&&At.workspace.getWorkspaceFolder(p);return f?f.uri:r.__workspaceFolder?At.Uri.file(r.__workspaceFolder):At.workspace.workspaceFolders?.[0].uri??p};return e.onTargetListChanged(async()=>{let c=await At.workspace.requestWorkspaceTrust(),l=new Set;for(let p of e.targetList()){if(l.add(p),a.has(p)){a.delete(p);continue}let f=t.addDelegate(p,s,p.parent());if(!n(p)){p.detach();return}if(p.targetInfo.openerId&&!p.parent()){p.detach();return}if(!c){p.detach();return}if(!p.parent()){let m=await u(p);At.debug.startDebugging(m&&At.workspace.getWorkspaceFolder(m),{...o,type:"node-terminal",name:"Node.js Process",request:"attach",delegateId:f,cwd:m?.fsPath,__workspaceFolder:m})}}for(let p of a)t.removeDelegate(p);a=l}),e.launch(Us({...o,type:"node-terminal",name:qg.name,request:"launch",...r}),{dap:s,telemetryReporter:i,cancellationToken:or,get targetOrigin(){return new sf("<unset>")}})},Dz=Symbol("Abort"),Iz=(0,Ez.homedir)(),b_e=process.platform==="win32"?t=>t:t=>t.startsWith(Iz)?`~${t.slice(Iz.length)}`:t;async function w_e(){let t=At.workspace.workspaceFolders;return!t||t.length<2?t?.[0]:(await At.window.showQuickPick(t.map(r=>({label:r.name,description:b_e(r.uri.fsPath),folder:r})),{placeHolder:Sz.t("Select current working directory for new terminal")}))?.folder??Dz}var xT=class extends Cs{constructor(){super(...arguments);this.optionsReadyEmitter=new z;this.onOptionsReady=this.optionsReadyEmitter.event}createTerminal(r){return this.optionsReadyEmitter.fire(r),new Promise(n=>{let i=At.window.onDidOpenTerminal(o=>{i.dispose(),n(o)})})}};function Cz(t,e,r,n){let i=new Map,o=(a,u)=>new Cs(u,a,n.get(we),n.get($i),n.get(st));async function s(a,u,c,l,p=o){if(!c){let h=await w_e();if(h===Dz)return;c=h}if(u){for(let[h,H]of i)if(H.folder===c&&H.cwd===l?.cwd&&!H.launcher.targetList().length){h.show(!0),h.sendText(u);return}}let f=new Xa,m=p(f,new Es(f,n.get(we),v_));m.onTerminalCreated(h=>{i.set(h,{launcher:m,folder:c,cwd:l?.cwd}),r.enableHandlingInTerminal(h)});try{await LT(a,m,{command:u,...l,__workspaceFolder:c?.uri.fsPath},()=>{for(let[h,H]of i)if(H.launcher===m&&h.state.isInteractedWith)return!0;return!1})}catch(h){At.window.showErrorMessage(h.message)}}t.subscriptions.push(At.window.onDidCloseTerminal(a=>{i.delete(a)}),Pe(At.commands,"extension.js-debug.createDebuggerTerminal",(a,u,c)=>s(e,a,u,c)),At.window.registerTerminalProfileProvider("extension.js-debug.debugTerminal",{provideTerminalProfile:()=>new Promise(a=>s(e,void 0,void 0,void 0,(u,c)=>{let l=new xT(c,u,n.get(we),n.get($i),n.get(st));return l.onOptionsReady(p=>a(new At.TerminalProfile(p))),l}))}),At.window.registerTerminalLinkProvider?.(r))}function xz(t,e,r){let n=new Map,i,o=s=>{let a=n.get(s);if(a)return a;let u=(async()=>{let c=new Xa,l=new Uc(new Es(c,r.get(we),v_),c,t,r.get(we),r.get($i),r.get(st)),p=It(dr.workspace,"debug.javascript.terminalOptions");if(s){let f=s?.uri.fsPath;p={...p,cwd:f,__workspaceFolder:f}}return await LT(e,l,p),l.onTargetListChanged(()=>{l.targetList().length===0&&!i?i=setTimeout(()=>{n.delete(s),l.terminate()},5*60*1e3):i&&(clearTimeout(i),i=void 0)}),l})();return n.set(s,u),u};t.subscriptions.push(Pe(dr.commands,"extension.js-debug.setAutoAttachVariables",async()=>{try{return{ipcAddress:(await o(dr.workspace.workspaceFolders?.[0])).deferredSocketName}}catch(s){if(s instanceof xg&&s.helpLink){let a=Pz.t("Details");await dr.window.showErrorMessage(s.message,a)===a&&dr.env.openExternal(dr.Uri.parse(s.helpLink))}else await dr.window.showErrorMessage(s.message)}}),Pe(dr.commands,"extension.js-debug.autoAttachToProcess",async s=>{try{let a=s.scriptName&&dr.workspace.getWorkspaceFolder(dr.Uri.file(s.scriptName));(await o(a||dr.workspace.workspaceFolders?.[0])).spawnForChild(s)}catch(a){console.error(a),dr.window.showErrorMessage(`Error activating auto attach: ${a.stack||a}`)}}),Pe(dr.commands,"extension.js-debug.clearAutoAttachVariables",async()=>{Uc.clearVariables(t);for(let[s,a]of n.entries())n.delete(s),a.then(u=>u.terminate())}))}var Lz=I(_e()),Tz=require("url"),Dr=I(require("vscode"));var G0=I(require("vscode"));var _d=class{constructor(){this.tunnels=new Map;this.disposable=new Ie;this.disposable.push(G0.debug.onDidTerminateDebugSession(e=>this.destroySession(e.id)))}dispose(){return this.disposable.dispose()}destroySession(e){let r=this.tunnels.get(e);r&&(r.dispose(),this.tunnels.delete(e))}async request(e,r){let n=this.tunnels.get(e);n||(n=await G0.workspace.openTunnel({remoteAddress:{port:r.remotePort,host:"localhost"},localAddressPort:r.localPort??r.remotePort,label:r.label}),this.tunnels.set(e,n));let i;if(typeof n.localAddress=="string"){let[o,s]=n.localAddress.split(":");i={host:o,port:Number(s)}}else i=n.localAddress;return{remoteAddress:n.remoteAddress,localAddress:i}}};var __e=t=>e=>typeof e.localAddress=="string"?e.localAddress.endsWith(`:${t}`):e.localAddress.port===t,A_e=async t=>{let e=t.params.url;if(!e)return;let r;try{r=new Tz.URL(e)}catch{return}if(!It(Dr.workspace,"debug.javascript.automaticallyTunnelRemoteServer"))return;let n=Number(r.port)||80;if(!(await Dr.workspace.tunnels).some(__e(n)))try{await Dr.workspace.openTunnel({remoteAddress:{port:n,host:"localhost"},localAddressPort:n})}catch{}},I_e=async(t,e,r)=>{if(Dr.env.uiKind===Dr.UIKind.Web)return Dr.debug.stopDebugging(t),Dr.window.showErrorMessage(Lz.t("We can't launch a browser in debug mode from here. Open this workspace in VS Code on your desktop to enable debugging."));try{let[,n]=await Promise.all([A_e(r),e.request(t.id,{remotePort:r.serverPort,label:"Browser Debug Tunnel"}).catch(()=>{})]);await Dr.commands.executeCommand("js-debug-companion.launchAndAttach",{proxyUri:n?`127.0.0.1:${n.localAddress.port}`:`127.0.0.1:${r.serverPort}`,wslInfo:process.env.WSL_DISTRO_NAME&&{execPath:process.execPath,distro:process.env.WSL_DISTRO_NAME,user:process.env.USER},...r})}catch(n){Dr.window.showErrorMessage(`Error launching browser: ${n.message||n.stack}`)}},S_e=async(t,e,{launchId:r})=>{await Dr.commands.executeCommand("js-debug-companion.kill",{launchId:r}),e.destroySession(t.id)};function $z(t){let e=new _d;t.subscriptions.push(e,Dr.debug.onDidReceiveDebugSessionCustomEvent(async r=>{switch(r.event){case"launchBrowserInCompanion":return I_e(r.session,e,r.body);case"killCompanionBrowser":return S_e(r.session,e,r.body);default:}}))}var Ct=I(require("vscode"));var K0=class extends Ct.TreeItem{constructor(r,n){super(r.title,Ct.TreeItemCollapsibleState.None);this.parent=n;this.checkboxState=Ct.TreeItemCheckboxState.Unchecked,this.id=r.id,this.group=r.group}get checked(){return this.checkboxState===Ct.TreeItemCheckboxState.Checked}static compare(r,n){return r.id.localeCompare(n.id)}},Lg=class extends Ct.TreeItem{constructor(r){super(r,Ct.TreeItemCollapsibleState.Collapsed);this.label=r;this.children=[];this.checkboxState=Ct.TreeItemCheckboxState.Unchecked}get checked(){return this.checkboxState===Ct.TreeItemCheckboxState.Checked}},TT=class{constructor(e){this._onDidChangeTreeData=new z;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.categories=new Map;for(let r of[...ip().values()]){let n=this.categories.get(r.group);n||(n=new Lg(r.group),this.categories.set(r.group,n)),n.children.push(new K0(r,n))}this._debugSessionTracker=e,e.onSessionAdded(r=>{if(!ze.isConcreteSession(r))return;let n=this.allBreakpoints.filter(i=>i.checked).map(i=>i.id);n.length!==0&&r.customRequest("setCustomBreakpoints",{ids:n})})}get allCategories(){return this.categories.values()}get allBreakpoints(){return[...this.allCategories].flatMap(e=>e.children)}getTreeItem(e){return e}getChildren(e){return e?e instanceof Lg?this.categories.get(e.label)?.children:[]:[...this.categories.values()]}getParent(e){if(e instanceof K0)return this.categories.get(e.group)}setEnabled(e){for(let[n,i]of e){let o=i?Ct.TreeItemCheckboxState.Checked:Ct.TreeItemCheckboxState.Unchecked;if(n.checkboxState=o,n instanceof Lg)for(let s of n.children)s.checkboxState!==o&&(s.checkboxState=o);else(!i&&n.parent.checked||i&&n.parent.children.every(s=>s.checked))&&(n.parent.checkboxState=o)}let r=this.allBreakpoints.filter(n=>n.checked).map(n=>n.id);for(let n of this._debugSessionTracker.getConcreteSessions())n.customRequest("setCustomBreakpoints",{ids:r});this._onDidChangeTreeData.fire(void 0)}};function Rz(t,e){let r=new TT(e),n=Ct.window.createTreeView("jsBrowserBreakpoints",{treeDataProvider:r,showCollapseAll:!0,manageCheckboxStateManually:!0});t.subscriptions.push(n.onDidChangeCheckboxState(async i=>{r.setEnabled(i.items.map(([o,s])=>[o,s===Ct.TreeItemCheckboxState.Checked]))})),t.subscriptions.push(n),t.subscriptions.push(Ct.commands.registerCommand("extension.js-debug.addCustomBreakpoints",async()=>{let i=[...r.allCategories].flatMap(a=>[{kind:Ct.QuickPickItemKind.Separator,id:"",label:a.label},...a.children.map(u=>({id:u.id,label:`${u.label}`,picked:u.checked}))]),o=await Ct.window.showQuickPick(i,{canPickMany:!0,placeHolder:"Select breakpoints to enable"});if(!o)return;let s=new Set(o.map(a=>a.id));r.setEnabled(r.allBreakpoints.map(a=>[a,s.has(a.id)]))})),t.subscriptions.push(Ct.commands.registerCommand("extension.js-debug.removeAllCustomBreakpoints",()=>{r.setEnabled(r.allBreakpoints.map(i=>[i,!1]))}))}var $T=I(require("vscode"));var Mz=(t,e)=>{let r=e.get(ou);t.subscriptions.push(Pe($T.commands,"extension.js-debug.startProfile",n=>r.start(typeof n=="string"?{sessionId:n}:n??{})),Pe($T.commands,"extension.js-debug.stopProfile",n=>r.stop(n)))};var z0=I(require("vscode"));var kz=(t,e)=>{let r=new _d;t.subscriptions.push(r,Pe(z0.commands,"extension.js-debug.requestCDPProxy",async(n,i)=>{let o=e.getById(n);if(!o)return;let s=await o.customRequest("requestCDPProxy");if(!i)return s;try{if(z0.env.remoteName!==void 0){let a=await r.request(n,{label:"Edge Devtools Tunnel",remotePort:s.port});return{host:a.localAddress.host,port:a.localAddress.port,path:s.path}}}catch{}return s}))};var Oz=I(require("vscode"));var Fz=(t,e)=>{t.subscriptions.push(Pe(Oz.commands,"extension.js-debug.revealPage",async r=>{await e.getById(r)?.customRequest("revealPage")}))};var Tg=I(require("vscode")),Nz=require("url");async function Bz(t){if(!t){let e=Tg.window.activeTextEditor;if(!e)return;t=e&&e.document.fileName}if(t&&Tg.debug.activeDebugSession){let e;typeof t=="string"?on(t)?e={resource:(0,Nz.fileURLToPath)(t)}:e={resource:t}:e={sourceReference:t},await Tg.debug.activeDebugSession.customRequest("toggleSkipFileStatus",e)}}var pu=I(require("vscode"));var Zz=require("fs"),eX=I(require("net"));var Uz=`\r
\r
`,E_e=0,$g=class{constructor(e,r,n){this.inputStream=e;this.outputStream=r;this._contentLength=-1;this._connectionId=E_e++;this.msgEmitter=new z;this.messageReceived=this.msgEmitter.event;this.endedEmitter=new z;this.closed=this.endedEmitter.event;this._handleData=e=>{let r=new Yn;for(this._rawData=Buffer.concat([this._rawData,e]);;){if(this._contentLength>=0){if(this._rawData.length>=this._contentLength){let n=this._rawData.toString("utf8",0,this._contentLength);if(this._rawData=this._rawData.slice(this._contentLength),this._contentLength=-1,n.length>0)try{let i=JSON.parse(n);this.logger?.verbose("dap.receive",void 0,{connectionId:this._connectionId,message:i}),this.msgEmitter.fire({message:i,receivedTime:r})}catch(i){console.error("Error handling data: "+(i&&i.message))}continue}}else{let n=this._rawData.indexOf(Uz);if(n!==-1){let o=this._rawData.toString("utf8",0,n).split(`\r
`);for(let s=0;s<o.length;s++){let a=o[s].split(/: +/);a[0]==="Content-Length"&&(this._contentLength=+a[1])}this._rawData=this._rawData.slice(n+Uz.length);continue}}break}};this.logger=n,this._rawData=Buffer.alloc(0),e.on("end",()=>this.endedEmitter.fire()),e.on("data",this._handleData)}send(e,r=!0,n){let i=JSON.stringify(e);if(r){let s=e;e.type==="response"&&e.command==="source"&&(s={...e,body:{...e.body,content:"<script source>"}}),this.logger?.verbose("dap.send",void 0,{connectionId:this._connectionId,message:s})}let o=`Content-Length: ${Buffer.byteLength(i,"utf8")}\r
\r
${i}`;if(this.outputStream.destroyed){this.logger?.warn("dap.send","Message not sent. Connection was closed."),n?.();return}this.outputStream.write(o,"utf8",s=>{n?.(),s&&(console.log(e),this.logger?.error("dap.send","Error while writing to output stream",s),this.close())})}close(){this.inputStream.destroy(),this.outputStream.destroy()}setLogger(e){return this.logger=e,this}};var Yz=I(_e()),Q0=I(require("os"));var D_e={connect:async()=>Ml},qz=t=>({async connect(e){return await e.Debugger.setAsyncCallStackDepth({maxDepth:t}),Ml}}),C_e=t=>{let e=new z,r=!1,n=()=>{r||(r=!0,e.fire())};return{async connect(i){if(r)return await i.Debugger.setAsyncCallStackDepth({maxDepth:t}),Ml;let o=new Ie;return o.push(e.event(()=>{o.dispose(),i.Debugger.setAsyncCallStackDepth({maxDepth:t})}),i.Debugger.on("breakpointResolved",n),i.Debugger.on("paused",s=>{s.reason!=="instrumentation"&&n()})),o}}},jz=qz(32),Wz=t=>t===!1?D_e:t===!0?jz:"onAttach"in t?qz(t.onAttach):"onceBreakpointResolved"in t?C_e(t.onceBreakpointResolved):jz;var hi=I(_e());var Rg=class t{constructor(e,r,n,i){this.asyncStackPolicy=r;this.launchConfig=n;this._services=i;this._disposables=new Ie;this._customBreakpoints=[];this._threadDeferred=Be();this.breakpointIdCounter=Ug();this._cdpProxyProvider=this._services.get(Pv);this._configurationDoneDeferred=Be(),this.sourceContainer=i.get(ir),this.breakpointManager=i.get(Jn);let o=i.get(ab),s=i.get(Kt);s.onFlush(()=>{s.report("breakpointStats",this.breakpointManager.statisticsForTelemetry()),s.report("statistics",this.sourceContainer.statistics())}),this.dap=e,this.dap.on("initialize",a=>this.onInitialize(a)),this.dap.on("setBreakpoints",a=>this._onSetBreakpoints(a)),this.dap.on("setExceptionBreakpoints",a=>this.setExceptionBreakpoints(a)),this.dap.on("configurationDone",()=>this.configurationDone()),this.dap.on("loadedSources",()=>this._onLoadedSources()),this.dap.on("disableSourcemap",a=>this._onDisableSourcemap(a)),this.dap.on("source",a=>this._onSource(a)),this.dap.on("threads",()=>this._onThreads()),this.dap.on("stackTrace",a=>this._withThread(u=>u.stackTrace(a))),this.dap.on("variables",a=>this._onVariables(a)),this.dap.on("readMemory",a=>this._onReadMemory(a)),this.dap.on("writeMemory",a=>this._onWriteMemory(a)),this.dap.on("setVariable",a=>this._onSetVariable(a)),this.dap.on("setExpression",a=>this._onSetExpression(a)),this.dap.on("continue",()=>this._withThread(a=>a.resume())),this.dap.on("pause",()=>this._withThread(a=>a.pause())),this.dap.on("next",()=>this._withThread(a=>a.stepOver())),this.dap.on("stepIn",a=>this._withThread(u=>u.stepInto(a.targetId))),this.dap.on("stepOut",()=>this._withThread(a=>a.stepOut())),this.dap.on("restartFrame",a=>this._withThread(u=>u.restartFrame(a))),this.dap.on("scopes",a=>this._withThread(u=>u.scopes(a))),this.dap.on("evaluate",a=>this.onEvaluate(a)),this.dap.on("completions",a=>this._withThread(u=>u.completions(a))),this.dap.on("exceptionInfo",()=>this._withThread(a=>a.exceptionInfo())),this.dap.on("setCustomBreakpoints",a=>this.setCustomBreakpoints(a)),this.dap.on("toggleSkipFileStatus",a=>this._toggleSkipFileStatus(a)),this.dap.on("prettyPrintSource",a=>this._prettyPrintSource(a)),this.dap.on("revealPage",()=>this._withThread(a=>a.revealPage())),this.dap.on("getPerformance",()=>this._withThread(a=>o.retrieve(a.cdp()))),this.dap.on("breakpointLocations",a=>this._breakpointLocations(a)),this.dap.on("createDiagnostics",a=>this._dumpDiagnostics(a)),this.dap.on("requestCDPProxy",()=>this._requestCDPProxy()),this.dap.on("setExcludedCallers",a=>this._onSetExcludedCallers(a)),this.dap.on("saveDiagnosticLogs",({toFile:a})=>this._saveDiagnosticLogs(a)),this.dap.on("setSourceMapStepping",a=>this._setSourceMapStepping(a)),this.dap.on("stepInTargets",a=>this._stepInTargets(a)),this.dap.on("setDebuggerProperty",a=>this._setDebuggerProperty(a)),this.dap.on("setSymbolOptions",a=>this._setSymbolOptions(a))}_setDebuggerProperty(e){return this._thread?.cdp().DotnetDebugger.setDebuggerProperty(e),Promise.resolve({})}_setSymbolOptions(e){return this._thread?.cdp().DotnetDebugger.setSymbolOptions(e),Promise.resolve({})}_breakpointLocations(e){return this._withThread(async r=>{let n=this.sourceContainer.source(e.source);return n?{breakpoints:(await this.breakpointManager.getBreakpointLocations(r,n,new Nt(e.line,e.column||1),new Nt(e.endLine||e.line+1,e.endColumn||e.column||1))).map(o=>o.uiLocations.find(s=>s.source===n)).filter(St).map(o=>({line:o.lineNumber,column:o.columnNumber}))}:{breakpoints:[]}})}_stepInTargets(e){return this._withThread(async r=>({targets:await r.getStepInTargets(e.frameId)}))}_setSourceMapStepping({enabled:e}){return this.sourceContainer.doSourceMappedStepping=e,Promise.resolve({})}async _saveDiagnosticLogs(e){let r=this._services.get(ce).getRecentLogs();return await this._services.get(we).writeFile(e,r.map(n=>JSON.stringify(n)).join(`
`)),{}}async launchBlocker(){await this._configurationDoneDeferred.promise,await this._services.get(pp).launchBlocker,await this.breakpointManager.launchBlocker()}async _onSetExcludedCallers({callers:e}){return(await this._threadDeferred.promise).setExcludedCallers(e),{}}async onInitialize(e){console.assert(e.linesStartAt1),console.assert(e.columnsStartAt1);let r=t.capabilities(!0);return setTimeout(()=>this.dap.initialized({}),0),setTimeout(()=>this._thread?.dapInitialized(),0),r}static capabilities(e=!1){return{supportsConfigurationDoneRequest:!0,supportsFunctionBreakpoints:!1,supportsConditionalBreakpoints:!0,supportsHitConditionalBreakpoints:!0,supportsEvaluateForHovers:!0,supportsReadMemoryRequest:!0,supportsWriteMemoryRequest:!0,exceptionBreakpointFilters:[{filter:"all",label:hi.t("Caught Exceptions"),default:!1,supportsCondition:!0,description:hi.t("Breaks on all throw errors, even if they're caught later."),conditionDescription:'error.name == "MyError"'},{filter:"uncaught",label:hi.t("Uncaught Exceptions"),default:!1,supportsCondition:!0,description:hi.t("Breaks only on errors or promise rejections that are not handled."),conditionDescription:'error.name == "MyError"'}],supportsStepBack:!1,supportsSetVariable:!0,supportsRestartFrame:!0,supportsGotoTargetsRequest:!1,supportsStepInTargetsRequest:!0,supportsCompletionsRequest:!0,supportsModulesRequest:!1,additionalModuleColumns:[],supportedChecksumAlgorithms:[],supportsRestartRequest:!0,supportsExceptionOptions:!1,supportsValueFormattingOptions:!0,supportsExceptionInfoRequest:!0,supportTerminateDebuggee:!0,supportsDelayedStackTraceLoading:!0,supportsLoadedSourcesRequest:!0,supportsLogPoints:!0,supportsTerminateThreadsRequest:!1,supportsSetExpression:!0,supportsTerminateRequest:!1,completionTriggerCharacters:[".","[",'"',"'"],supportsBreakpointLocationsRequest:!0,supportsClipboardContext:!0,supportsExceptionFilterOptions:!0,supportsEvaluationOptions:!!e,supportsDebuggerProperties:!!e,supportsSetSymbolOptions:!!e}}async _onSetBreakpoints(e){return this.breakpointManager.setBreakpoints(e,e.breakpoints?.map(()=>this.breakpointIdCounter())??[])}async setExceptionBreakpoints(e){return await this._services.get(pp).setBreakpoints(e),{}}async configurationDone(){return this._configurationDoneDeferred.resolve(),{}}async _onLoadedSources(){return{sources:await this.sourceContainer.loadedSources()}}async _onDisableSourcemap(e){let r=this.sourceContainer.source(e.source);if(!r)return Ke(hi.t("Source not found"));if(!(r instanceof xt))return Ke(hi.t("Source not a source map"));for(let n of r.compiledToSourceUrl.keys())this.sourceContainer.disableSourceMapForSource(n,!0);return await this._thread?.refreshStackTrace(),{}}async _onSource(e){e.source||(e.source={sourceReference:e.sourceReference}),e.source.path=bi(e.source.path);let r=this.sourceContainer.source(e.source);if(!r)return Ke(hi.t("Source not found"));let n=await r.content();return n===void 0?(r instanceof xt&&this.dap.suggestDisableSourcemap({source:e.source}),Ke(hi.t("Unable to retrieve source content"))):{content:n,mimeType:r.getSuggestedMimeType}}async _onThreads(){let e=[];return this._thread&&e.push({id:this._thread.id,name:this._thread.name()}),{threads:e}}findVariableStore(e){if(!this._thread)return;let r=this._thread.pausedVariables();if(r&&e(r))return r;if(e(this._thread.replVariables))return this._thread.replVariables}async _onVariables(e){return{variables:await this.findVariableStore(n=>n.hasVariable(e.variablesReference))?.getVariables(e)??[]}}async _onReadMemory(e){let r=e.memoryReference,n=await this.findVariableStore(i=>i.hasMemory(r))?.readMemory(r,e.offset??0,e.count);return n?{address:"0",data:n.toString("base64"),unreadableBytes:e.count-n.length}:{address:"0",unreadableBytes:e.count}}async _onWriteMemory(e){let r=e.memoryReference;return{bytesWritten:await this.findVariableStore(i=>i.hasMemory(r))?.writeMemory(r,e.offset??0,Buffer.from(e.data,"base64"))}}async _onSetExpression(e){if(!this._thread)throw new Z(rS());let r=await this._thread.evaluate({expression:`${e.expression} = ${th(e.value)}`,context:"repl",frameId:e.frameId});return{value:r.result,variablesReference:r.variablesReference,indexedVariables:r.indexedVariables,namedVariables:r.namedVariables,presentationHint:r.presentationHint,type:r.type}}async _onSetVariable(e){let r=this.findVariableStore(n=>n.hasVariable(e.variablesReference));return r?(e.value=th(e.value.trim()),r.setVariable(e)):Ke(hi.t("Variable not found"))}_withThread(e){if(!this._thread)throw new Z(rS());return e(this._thread)}async _refreshStackTrace(){if(!this._thread)return;this._thread.pausedDetails()&&await this._thread.refreshStackTrace()}createThread(e,r){this._thread=new sp(this.sourceContainer,e,this.dap,r,this._services.get(ia),this._services.get(ce),this._services.get(Vn),this._services.get(xv),this.launchConfig,this.breakpointManager,this._services.get(eb),this._services.get(pp),this._services.get(ha),this._services.get(Ha));let n=this._services.get(db);return n.connect(this.dap,this._thread),"profileStartup"in this.launchConfig&&this.launchConfig.profileStartup&&n.start(this.dap,this._thread,{type:ur.type}),this._thread.updateCustomBreakpoints(this._customBreakpoints),this.asyncStackPolicy.connect(e).then(i=>this._disposables.push(i)).catch(i=>this._services.get(ce).error("internal","Error enabling async stacks",i)),this.breakpointManager.setThread(this._thread),this._services.get(gt).attach(e),this._threadDeferred.resolve(this._thread),this._thread}async setCustomBreakpoints({ids:e}){return this._customBreakpoints=e,this._thread&&await this._thread.updateCustomBreakpoints(e),{}}async _toggleSkipFileStatus(e){return await this._services.get(aa).toggleSkippingFile(e),await this._refreshStackTrace(),{}}async _prettyPrintSource(e){if(!e.source||!this._thread)return{canPrettyPrint:!1};e.source.path=bi(e.source.path);let r=this.sourceContainer.source(e.source);if(!r)return Ke(hi.t("Source not found"));let n=await r.prettyPrint();if(!n)return Ke(hi.t("Unable to pretty print"));let{map:i,source:o}=n;return await this.breakpointManager.moveBreakpoints(this._thread,r,i,o),this.sourceContainer.clearDisabledSourceMaps(r),await this._refreshStackTrace(),{}}onEvaluate(e){return e.expression===".scripts"?this._dumpDiagnostics({fromSuggestion:!1}).then(this.dap.openDiagnosticTool).then(()=>({result:"Opening diagnostic tool...",variablesReference:0})):this._withThread(r=>r.evaluate(e))}async _dumpDiagnostics(e){let r={file:await this._services.get(ya).generateHtml()};return e.fromSuggestion&&this._services.get(Kt).report("diagnosticPrompt",{event:"opened"}),r}async _requestCDPProxy(){return await this._cdpProxyProvider.proxy()}dispose(){this._disposables.dispose(),lv(this._services)}};var Vz=require("inspector"),Gz=require("fs"),X0=class{constructor(e){this.file=e;this.session=new Vz.Session;this.session.connect()}async start(){try{await this.post("Profiler.enable")}catch{}await this.post("Profiler.start")}async stop(){let{profile:e}=await this.post("Profiler.stop");await Gz.promises.writeFile(this.file,JSON.stringify(e))}dispose(){this.session.disconnect()}post(e,r){return new Promise((n,i)=>this.session.post(e,r,(o,s)=>{o?i(o):n(s)}))}};var J0=I(require("path"));function zz(t,e,r){let n=Kz(t,e,"uncaughtException",r),i=Kz(t,e,"unhandledRejection",r);return process.addListener("uncaughtException",n),process.addListener("unhandledRejection",i),{dispose:()=>{process.removeListener("uncaughtException",n),process.removeListener("unhandledRejection",i)}}}var Kz=(t,e,r,n=!0)=>i=>{L_e(i)&&(e.report("error",{"!error":i,error:n?void 0:i,exceptionType:r}),t.error("runtime.exception","Unhandled error in debug adapter",i))},P_e=t=>typeof t=="object"&&!!t&&"stack"in t,x_e=J0.dirname(J0.dirname(J0.dirname(__dirname)));function L_e(t){return!Xz||P_e(t)&&!!t.stack?.includes(x_e)}var Xz=!1;function Jz(){Xz=!0}var Y0=class{constructor(e,r,n,i){this._delegate=e;this._rootServices=n;this._disposables=new Ie;this._serviceTree=new WeakMap;this._root=new jc(void 0);this.getLaunchers=Ae(()=>{let e=new Set(this._rootServices.getAll(gr));for(let r of e)this._disposables.push(r.onTargetListChanged(()=>{let n=this.targetList();this._attachToNewTargets(n,r),this._terminateOrphanThreads(n)}));return e});this._dap=r.dap(),this._targetOrigin=i,this._disposables.callback(()=>lv(n)),this._disposables.push(zz(n.get(ce),n.get(Kt),n.get(Ul))),r.attachTelemetry(n.get(Kt));let o=this._dap,s=0,a;o.on("initialize",async u=>{this._rootServices.bind(an).toConstantValue(u);let c=Rg.capabilities();return u.clientID==="vscode"&&Jz(),setTimeout(()=>o.initialized({}),0),c}),o.on("setExceptionBreakpoints",async()=>({})),o.on("setBreakpoints",async u=>(u.breakpoints?.length&&n.get(gt).notifyHadBreakpoint(),{breakpoints:u.breakpoints?.map(()=>({id:++s,verified:!1,message:Yz.t("Unbound breakpoint")}))??[]})),o.on("configurationDone",async()=>({})),o.on("threads",async()=>({threads:[]})),o.on("loadedSources",async()=>({sources:[]})),o.on("breakpointLocations",()=>Promise.resolve({breakpoints:[]})),o.on("attach",async u=>(await this.boot(u,o),{})),o.on("launch",async u=>(await this.boot(u,o),{})),o.on("pause",async()=>({})),o.on("terminate",()=>this._terminateRoot(!0)),o.on("disconnect",u=>this._disconnectRoot(u)),o.on("restart",async({arguments:u})=>(await this._restart(u),{})),o.on("startSelfProfile",async({file:u})=>(a?.dispose(),a=new X0(u),await a.start(),{})),o.on("stopSelfProfile",async()=>(a&&(await a.stop(),a.dispose(),a=void 0),{}))}async _terminateRoot(e){return this._root.state=1,await Promise.all([...this.getLaunchers()].map(r=>r.terminate(e))),await this._root.waitUntilChildrenAre(2),this._root.state=2,{}}async _disconnectRoot(e){return this._root.state<1&&await this._terminateRoot(e.terminateDebuggee),this._rootServices.get(Kt).flush(),await this._root.waitUntilChildrenAre(3),this._root.state=3,{}}async boot(e,r){return this._boot(Us(e,this._rootServices.get(rs)),r)}async _boot(e,r){T_e(r),this.reportBootTelemetry(e),wz(this._rootServices,e,r),this._rootServices.get(ce).setup(Rk(r,e.trace));let n=e.timeout>0?Or.withTimeout(e.timeout):new Or;e.rootPath&&(e.rootPath=bi(e.rootPath)),this._launchParams=e;let i=await Promise.all([...this.getLaunchers()].map(o=>this._launch(o,e,n.token)));return Promise.all(i.map(o=>o.terminated)).then(o=>{let s=o.find(St);this._markTargetAsTerminated(this._root,{restart:!!s?.restart})}),{}}reportBootTelemetry(e){let r=Us({type:e.type,request:e.request,name:"<string>",__workspaceFolder:"<workspace>"}),n=(i,o)=>typeof i=="string"?o&&r[o]===i?i:"<string>":i instanceof Array?i.map(s=>n(s)):i&&typeof i=="object"?qo(i,s=>n(s)):i;this._rootServices.get(Kt).report("launch",{type:e.type,request:e.request,os:`${Q0.platform()} ${Q0.arch()}`,nodeVersion:process.version,adapterVersion:hu,parameters:qo(e,n)})}async _restart(e){let r;if(e){let n=this._rootServices.get(hm);r=Us({__workspaceFolder:n.__workspaceFolder,...e},this._rootServices.get(rs)),n.update(r)}await Promise.all([...this.getLaunchers()].map(n=>n.restart(r)))}async _launch(e,r,n){return(await this.captureLaunch(e,r,n)).blockSessionTermination?{terminated:new Promise(o=>{let s=this._disposables.push(e.onTerminated(a=>{s.dispose(),o(a)}))})}:{terminated:Promise.resolve(void 0)}}async captureLaunch(e,r,n){let i=e.constructor.name,o;try{o=await e.launch(r,{telemetryReporter:this._rootServices.get(Kt),cancellationToken:n,targetOrigin:this._targetOrigin,dap:this._dap})}catch(s){throw this._rootServices.get(ce).warn("runtime.launch","Launch returned error",{error:s,wasCancelled:n.isCancellationRequested,name:i}),s}return o.blockSessionTermination&&this._rootServices.get(ce).info("runtime.launch","Launched successfully",{name:i}),o}dispose(){this._disposables.dispose(),this._terminateOrphanThreads([])}targetList(){let e=[];for(let r of this.getLaunchers())e.push(...r.targetList());return e}async attach(e,r){if(!this._launchParams)throw new Error("Cannot launch before params have been set");let n=e.value;if(!n.canAttach())return;let i=await n.attach();if(!i)return;let o=await this._delegate.acquireDap(n),s=o.dap(),a=this._launchParams;this._asyncStackPolicy||(this._asyncStackPolicy=Wz(a.showAsyncStacks));let u=n.parent(),c=u&&this._serviceTree.get(u)||this._rootServices,l=yz(c,n,s,i);o.attachTelemetry(l.get(Kt)),this._serviceTree.set(n,c);let p=new Rg(s,this._asyncStackPolicy,a,l),f=p.createThread(i,n),m=async()=>(await p.launchBlocker(),n.runIfWaitingForDebugger(),e.threadData.resolve({thread:f,debugAdapter:p}),{});s.on("disconnect",h=>this._disconnectTarget(e,h)),s.on("terminate",()=>this._terminateTarget(e)),s.on("restart",async()=>(n.canRestart()?n.restart():await this._restart(),Promise.resolve({}))),await this._delegate.initAdapter(p,n,r)?m():(s.on("attach",m),s.on("launch",m)),await n.afterBind()}_attachToNewTargets(e,r){for(let n of e.values()){if(!n.waitingForDebugger()||jc.targetNodes.has(n))continue;let i=n.parent(),o=i?jc.targetNodes.get(i):this._root;if(!o)throw new Error(`Got target with unknown parent: ${n.name()}`);let s=new jc(n);o.add(s),this.attach(s,r)}}async _terminateOrphanThreads(e,r){let n=[...this._root.all()].filter(i=>!e.includes(i.value));return Promise.all(n.map(i=>this._markTargetAsTerminated(i,r)))}async _markTargetAsTerminated(e,r={}){if(e.state>=1)return await e.waitUntil(2),{};if(e.state=1,Qz(e)){let n=await e.threadData.promise;await n.thread.dispose(),n.debugAdapter.dap.terminated(r),n.debugAdapter.dispose()}else this._dap.terminated(r);return await e.waitUntilChildrenAre(2),e.state=2,{}}async _terminateTarget(e){return e.state>=3?{}:(e.value.canStop()?e.value.stop():this._terminateRoot(!0),await e.waitUntil(2),{})}async _disconnectTarget(e,r){if(e.state>=3)return{};e.state<1&&(r.terminateDebuggee!==!0&&e.value.canDetach()?await e.value.detach():e.value.canStop()?e.value.stop():this._terminateRoot(r.terminateDebuggee)),await e.waitUntil(2),await e.waitUntilChildrenAre(3),e.state=3,queueMicrotask(()=>this._delegate.releaseDap(e.value));let n=e.value.parent();return(n?jc.targetNodes.get(n):this._root)?.remove(e),{}}};function T_e(t){zg&&t.output({category:"console",output:`Note: Using the "preview" debug extension
`})}var Qz=t=>!!t.value,jc=class t{constructor(e){this.value=e;this.threadData=Be();this._state=0;this._children=new Set;this._stateChangeEmitter=new z;e&&t.targetNodes.set(e,this)}static{this.targetNodes=new WeakMap}get state(){return this._state}set state(e){e>this._state&&(this._state=e,this._stateChangeEmitter.fire(e))}add(e){this._children.add(e)}remove(e){this._children.delete(e)}async waitUntil(e){return this._state>=e?Promise.resolve():new Promise(r=>{let n=this._stateChangeEmitter.event(i=>{i>=e&&(n.dispose(),r())})})}async waitUntilChildrenAre(e){await Promise.all([...this._children].map(r=>r.waitUntil(e)))}*all(){Qz(this)&&(yield this);for(let e of this._children)yield*e.all()}};var Z0=class{constructor(e,r,n,i,o){this.debugSession=e;this.logger=n;this.sessionStates=i;this.parent=o;this.subscriptions=new Ie;r instanceof pl?this.connection=r:(r.setLogger(n),this.connection=new pl(r,this.logger))}listenToTarget(e){this.subscriptions.push(e.onNameChanged(()=>this.setName(e)),this.sessionStates.onAdd(([r])=>r===this.debugSession.id&&this.setName(e)),this.sessionStates.onRemove(([r])=>r===this.debugSession.id&&this.setName(e))),this.setName(e)}dispose(){this.subscriptions.dispose()}setName(e){let r=this.sessionStates.get(this.debugSession.id),n=e.name();this.parent instanceof Ad&&(n=`${this.parent.debugSession.name}: ${n}`),this.debugSession.name=r?`${n} (${r})`:n}},Ad=class extends Z0{constructor(r,n,i){super(r,n,i.get(ce),i.get(jl));this.debugSession=r;this.services=i;this.connection.attachTelemetry(i.get(Kt))}get binder(){return this._binder}createBinder(r){this._binder=new Y0(r,this.connection,this.services,new h_(this.debugSession.id))}dispose(){super.dispose(),this._binder?.dispose?.()}},eA=class{constructor(e,r){this.globalContainer=e;this.sessionLauncher=r;this._disposables=[];this._sessions=new Map;this._pendingTarget=new Map;this._sessionForTarget=new Map;this._sessionForTargetCallbacks=new Map}terminate(e){let r=this._sessions.get(e.id);this._sessions.delete(e.id),r&&r.dispose()}hasPendingTargetId(e){return this._pendingTarget.has(e)}createNewRootSession(e,r){let n=new Ad(e,r,vz(this.globalContainer));return n.createBinder(this),this._sessions.set(e.id,n),n}createNewChildSession(e,r,n){let i=this._pendingTarget.get(r);if(!i)throw new Error(`Cannot find target ${r}`);let{target:o,parent:s}=i,a=new Z0(e,n,s.logger,s.sessionStates,s);this._pendingTarget.delete(r),a.debugSession.name=o.name(),a.listenToTarget(o);let u=this._sessionForTargetCallbacks.get(o);return this._sessionForTargetCallbacks.delete(o),u?.fulfill?.(a),this._sessions.set(e.id,a),a}async acquireDap(e){return(await this.getOrLaunchSession(e)).connection}getOrLaunchSession(e){let r=this._sessionForTarget.get(e);if(r)return r;let n=new Promise(async(i,o)=>{let s,a=e.parent();if(a?s=await this.getOrLaunchSession(a):s=this._sessions.get(e.targetOrigin().id),!s)throw new Error("Expected to get a parent debug session for target");this._pendingTarget.set(e.id(),{target:e,parent:s}),this._sessionForTargetCallbacks.set(e,{fulfill:i,reject:o});let u=s.debugSession.configuration,c={type:u.type==="pwa-extensionHost"?"pwa-chrome":u.type,name:e.name(),request:s.debugSession.configuration.request,__pendingTargetId:e.id(),preRestartTask:u.preRestartTask??u.postDebugTask,postRestartTask:u.postRestartTask??u.preLaunchTask};this.sessionLauncher.launch(s,e,c)});return this._sessionForTarget.set(e,n),n}initAdapter(e,r,n){return Promise.resolve(!1)}releaseDap(e){this._sessionForTarget.delete(e);let r=this._sessionForTargetCallbacks.get(e);r&&r.reject(new Error("Target gone")),this._sessionForTargetCallbacks.delete(e)}dispose(){for(let e of this._sessions.values())e.dispose();this._sessions.clear(),this._pendingTarget.clear(),this._sessionForTarget.clear(),this._sessionForTargetCallbacks.clear();for(let e of this._disposables)e.dispose();this._disposables=[]}};var tA=class{constructor(e,r,n="127.0.0.1"){this.host=n;this.disposables=[];this.servers=new Map;this.sessionManager=new eA(e,r),this.portLeaseTracker=e.get(st),this.disposables.push(this.sessionManager)}createDebugServer(e,r){return e.configuration.__pendingTargetId?this.createChildDebugServer(e):this.createRootDebugServer(e,r)}createRootDebugServer(e,r){return this.innerCreateServer(e,n=>this.sessionManager.createNewRootSession(e,n),r)}createRootDebugSessionFromStreams(e,r,n){let i=new $g(r,n);return this.sessionManager.createNewRootSession(e,i)}createChildDebugServer(e,r){return this.innerCreateServer(e,n=>this.sessionManager.createNewChildSession(e,e.configuration.__pendingTargetId,n),r)}async innerCreateServer(e,r,n){let i=Be(),o=a=>{let u=new $g(a,a),c=r(u);i.resolve(c.connection)},s=n===void 0?await new Promise((a,u)=>{let c=YH(),l=eX.createServer(o).on("error",u).on("close",()=>Zz.promises.unlink(c).catch(()=>{})).listen(c,()=>a(l))}):await wB(this.portLeaseTracker,o,n,this.host);return this.servers.set(e.id,s),{server:s,connectionPromise:i.promise}}terminate(e){this.sessionManager.terminate(e),this.servers.get(e.id)?.close(),this.servers.delete(e.id)}dispose(){this.sessionManager.dispose()}};var RT=class{launch(e,r,n){pu.debug.startDebugging(e.debugSession.workspaceFolder,{...n,...r.supplementalConfig,serverReadyAction:e.debugSession.configuration.serverReadyAction,__parentId:e.debugSession.id},{parentSession:e.debugSession,consoleMode:pu.DebugConsoleMode.MergeWithParent,noDebug:e.debugSession.configuration.noDebug,compact:e instanceof Ad,lifecycleManagedByParent:!r.independentLifeycle})}},rA=class{constructor(e){this.sessionServerManager=new tA(e,new RT)}async createDebugAdapterDescriptor(e){let r=process.env.JS_DEBUG_USE_LOCAL_DAP_PORT;if(r)return new pu.DebugAdapterServer(+r);let n=await this.sessionServerManager.createDebugServer(e);return new pu.DebugAdapterNamedPipeServer(n.server.address())}terminate(e){this.sessionServerManager.terminate(e)}dispose(){this.sessionServerManager.dispose()}};function $_e(t){Wt.l10n.bundle&&tX.config({contents:Wt.l10n.bundle});let e=bz({storagePath:process.platform==="win32"?(0,rX.tmpdir)():t.storagePath||t.extensionPath,isVsCode:!0,isRemote:!!process.env.JS_DEBUG_USE_COMPANION||Wt.extensions.getExtension(QT)?.extensionKind===Wt.ExtensionKind.Workspace,context:t});t.subscriptions.push(Pe(Wt.commands,"extension.js-debug.npmScript",CK),Pe(Wt.commands,"extension.js-debug.pickNodeProcess",eT),Pe(Wt.commands,"extension.pwa-node-debug.attachNodeProcess",hK),Pe(Wt.commands,"extension.js-debug.toggleSkippingFile",Bz));let r=e.getAll(i0);for(let s of r){let a=s;t.subscriptions.push(Wt.debug.registerDebugConfigurationProvider(s.type,a));let u=Ed.get(s.type);u&&t.subscriptions.push(Wt.debug.registerDebugConfigurationProvider(u,a))}let n=e.getAll(o0);for(let s of n)Wt.debug.registerDebugConfigurationProvider(s.type,s,Wt.DebugConfigurationProviderTriggerKind!==void 0?s.triggerKind:void 0);let i=new rA(e);t.subscriptions.push(...[...sA].map(s=>Wt.debug.registerDebugAdapterDescriptorFactory(s,i))),t.subscriptions.push(Wt.debug.onDidTerminateDebugSession(s=>i.terminate(s))),t.subscriptions.push(i);let o=e.get(ze);o.attach(),$z(t),Rz(t,o),Cz(t,e.get(Mo),e.get(cu),e),Mz(t,e),xz(t,e.get(Mo),e),Fz(t,o),kz(t,o),e.getAll(un).forEach(s=>s.register(t))}function R_e(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

is-number/index.js:
  (*!
   * is-number <https://github.com/jonschlinkert/is-number>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

to-regex-range/index.js:
  (*!
   * to-regex-range <https://github.com/micromatch/to-regex-range>
   *
   * Copyright (c) 2015-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

fill-range/index.js:
  (*!
   * fill-range <https://github.com/jonschlinkert/fill-range>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

is-extglob/index.js:
  (*!
   * is-extglob <https://github.com/jonschlinkert/is-extglob>
   *
   * Copyright (c) 2014-2016, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

is-glob/index.js:
  (*!
   * is-glob <https://github.com/jonschlinkert/is-glob>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)

is-windows/index.js:
  (*!
   * is-windows <https://github.com/jonschlinkert/is-windows>
   *
   * Copyright  2015-2018, Jon Schlinkert.
   * Released under the MIT License.
   *)

reflect-metadata/Reflect.js:
  (*! *****************************************************************************
  Copyright (C) Microsoft. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)
*/
//# sourceMappingURL=extension.js.map
